"use strict";(self.webpackChunklib_prop_ui=self.webpackChunklib_prop_ui||[]).push([[6106],{32829:(t,e,n)=>{n.d(e,{A:()=>i});var o=n(25371),c=n(44414);function i(t){let{children:e,type:n}=t;return(0,c.jsx)(o.P.div,{whileHover:{scale:1},whileTap:{scale:.9},children:e})}i.defaultProps={type:"scale"}},92728:(t,e,n)=>{n.d(e,{A:()=>a});var o=n(9950),c=n(48205),i=n(44414);const a=o.forwardRef((function(t,e){return(0,i.jsx)(c.A,{direction:"up",ref:e,...t})}))},26092:(t,e,n)=>{n.d(e,{A:()=>g});n(9950);var o=n(92728),c=n(63464),i=n(40033),a=n(28170),s=n(96319),r=n(59254),d=n(14857),l=n(25333),u=n(44414);const f=(0,r.Ay)(c.A)((t=>{let{theme:e}=t;return{"& .MuiDialogContent-root":{padding:e.spacing(2)},"& .MuiDialogActions-root":{padding:e.spacing(1)}}}));function g(t){const e=(0,d.A)(),{breakpoints:n}=e,{openPopUpDialog:c,setPopUpDialog:r,onClose:g=()=>r(!1),title:p,width:b="70%"}=t;return(0,u.jsxs)(f,{TransitionComponent:o.A,"aria-labelledby":"customized-dialog-title",open:c,PaperProps:{sx:{width:{width:b},[n.down("sm")]:{width:"90%"}}},children:[(0,u.jsx)(i.A,{sx:{m:0,p:2},id:"customized-dialog-title",children:p}),(0,u.jsx)(l.A,{"aria-label":"close",onClick:g,sx:{position:"absolute",right:8,top:8},children:(0,u.jsx)(s.A,{})}),(0,u.jsx)(a.A,{dividers:!0,children:t.children})]})}},93383:(t,e,n)=>{n.d(e,{A:()=>s});var o=n(9950),c=n(10226),i=n(46639),a=n(44414);const s=function(t){let{onClick:e,disabled:n,isLoading:s,children:r,...d}=t;const[l,u]=o.useState(s);return(0,a.jsxs)(c.A,{onClick:t=>{if(!e)return;const n=e(t);"function"===typeof(null===n||void 0===n?void 0:n.finally)&&(u(!0),n.finally((()=>u(!1))))},disabled:l||s||n,...d,children:[(l||s)&&(0,a.jsx)(i.A,{size:16,color:"primary",style:{marginRight:"10px"}}),r]})}},6716:(t,e,n)=>{n.d(e,{A:()=>y});n(9950);var o=n(60899),c=n(93230),i=n(3788),a=n(82053),s=n(10226),r=n(24516),d=n(29714),l=n(61467),u=n(32829),f=n(26092),g=n(44364),p=n(30334),b=n(70855),h=n(21788),A=n(44414);const y=function(t){let{isOpen:e,toggleOpen:n}=t;return(0,A.jsx)(f.A,{openPopUpDialog:e,setPopUpDialog:n,title:"Upload Training Documents",children:(0,A.jsx)(m,{setDocumentUploadDialogOpen:n})})},v=g.Og?g.Og:5242880,_=d.Ik().shape({file:d.gl().required("File is not selected").test("is-valid-size","Maximum allowed file size is ".concat(v/1048576," MB"),(t=>t&&t.size<=v))});function m(t){let{setDocumentUploadDialogOpen:e}=t;const[,n]=(0,b.G)(),d=null===n||void 0===n?void 0:n.trainingMedia;return(0,A.jsxs)(o.Ay,{container:!0,spacing:1,children:[(0,A.jsx)(o.Ay,{item:!0,xs:12,md:12,style:{display:"flex",justifyContent:"center"},children:(0,A.jsx)(c.A,{spacing:1,children:(0,A.jsx)(i.A,{children:"File Upload (.csv, .txt, .docx, .pdf)"})})}),(0,A.jsx)(o.Ay,{item:!0,xs:12,md:12,style:{display:"flex",justifyContent:"center"},children:(0,A.jsx)(l.l1,{initialValues:{file:null},validationSchema:_,onSubmit:async(t,n)=>{let{setErrors:o,setStatus:c,setSubmitting:i}=n;try{const{name:n}=t.file;d.some((t=>t.originalName===n))?(0,h.i)(!0,"The file already uploaded!. Please select another file","error"):(i(!0),await(0,p.MD)(t.file),c({success:!0}),e(!1),(0,h.i)(!0,"The file uploaded successfully!","success"))}catch(a){console.error("Error uploading the document:",a),c({success:!1}),o({submit:a.message}),i(!1),e(!1),(0,h.i)(!0,"Not able to upload the file. Try after sometime!","error")}},children:t=>{let{values:e,errors:n,isSubmitting:c,setFieldValue:i}=t;return(0,A.jsxs)(l.lV,{children:[(0,A.jsxs)(o.Ay,{container:!0,spacing:2,children:[(0,A.jsx)(o.Ay,{item:!0,xs:12,md:12,children:e.file&&(0,A.jsxs)(a.A,{variant:"body2",children:["Selected File: ",e.file.name]})}),(0,A.jsx)(o.Ay,{item:!0,xs:6,md:6,container:!0,justifyContent:"flex-end",children:(0,A.jsx)(l.D0,{type:"file",name:"file",as:t=>{let{field:e}=t;return(0,A.jsx)(u.A,{children:(0,A.jsxs)(s.A,{variant:"contained",component:"label",htmlFor:"file-input",size:"large",sx:{whiteSpace:"nowrap"},children:["Select File",(0,A.jsx)("input",{...e,type:"file",id:"file-input",style:{display:"none"},onChange:t=>{i("file",t.currentTarget.files[0])},accept:".csv,.txt,.docx,.doc,.pdf,text/plain"})]})})}})}),(0,A.jsx)(o.Ay,{item:!0,xs:6,md:6,children:(0,A.jsx)(u.A,{children:(0,A.jsx)(s.A,{variant:"contained",size:"large",type:"submit",disabled:c,children:c?"Uploading...":"Upload"})})})]}),(0,A.jsx)(o.Ay,{item:!0,xs:12,md:12,style:{display:"flex",justifyContent:"center"},children:(0,A.jsx)(r.A,{error:!0,id:"helper-text-file-input",children:n.file})})]})}})})]})}},8478:(t,e,n)=>{n.d(e,{Jt:()=>i,TF:()=>r,bE:()=>a,yJ:()=>s});var o=n(32026),c=n(44364);async function i(t,e){return d("GET",t,e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}async function a(t,e){return d("POST",t,e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}async function s(t,e){return d("PUT",t,e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}async function r(t,e){return d("DELETE",t,e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}async function d(t,e,n){let{headers:o,noAuth:c,...i}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const a="POST"===t||"PUT"===t||"DELETE"===t;e=function(t,e){if(!t)return t;const n=e&&Object.keys(e);if(null!==n&&void 0!==n&&n.length){const o=n.reduce(((t,n)=>{let o=e[n];return null===o||void 0===o?t:(o="".concat(n,"=").concat(encodeURIComponent(o)),t?"".concat(t,"&").concat(o):o)}),"");o&&(t="".concat(t).concat(t.includes("?")?"&":"?").concat(o))}if(t.startsWith("https://"))return t;return"".concat(l).concat(t)}(e,a?void 0:n);const s=n instanceof FormData;if(s||(n=n&&"object"===typeof n&&a?JSON.stringify(n):void 0),o||(o={}),s||(o["Content-Type"]="application/json"),o.Accept="application/json",!1!==c){const t=sessionStorage.getItem("token");t&&(o.Authorization="Bearer ".concat(t))}try{const c=await fetch(e,{...i,headers:o,body:n,method:t}),a=await c.json();if(c.ok){const{data:t,...e}=a;return delete e.status,t&&!Object.keys(e).length?t:a}throw a.message?new Error(a.message):a}catch(d){var r;throw console.error("Error calling API: ",d),null!==(r=d.message)&&void 0!==r&&r.includes("fetch")?new Error("Unable to reach server. Please check your network connectivity and try again."):new Error(d.message)}}const l=(0,o.s8)(c.jn,"/")},98415:(t,e,n)=>{n.d(e,{Ci:()=>u,I4:()=>l,TF:()=>r,gI:()=>a,gR:()=>g,jo:()=>d,rv:()=>p,so:()=>f,yo:()=>s});var o=n(8478),c=n(33340),i=n(32026);async function a(t){const{organization:{websiteUrl:e,_id:n}}=c.nc.getState(),i={organizationId:n,websiteUrl:e,botName:t,botDesign:{visitorMessageLogo:{name:"",url:""},botMessageLogo:{name:"",url:""},botChatButton:{name:"",url:""},botLogo:{name:"",url:""},backgroundColor:"#e7a654",textColor:"#ffffff",dimensions:{heightInPixel:"500px",heightInPercent:"70%",widthInPixel:"350px",widthInPercent:"25%"},botLogoDimensions:{heightInPixel:"30px",heightInPercent:"100%",widthInPixel:"30px",widthInPercent:"100%"}}};b(await o.bE("/bot/".concat(n),i),!0)}async function s(t,e,n){const{organizationId:i}=c.nc.getState();if(!i||!t)throw new Error("Bot details not found");const a=await o.yJ("/bot/".concat(i,"/").concat(t),e);return b(a,n),a}async function r(t){const{organizationId:e,selectedBotId:n}=c.nc.getState();if(!e||!t)throw new Error("Bot details not found");const{deleted:i}=await o.TF("/bot/".concat(e,"/").concat(t));if(i){let{botsMap:t,botsList:e}=c.nc.getState();t={...t},e=[...e],delete t[i];const o=e.findIndex((t=>t._id===i));o>=0&&e.splice(o,1);const s={botsMap:t,botsList:e};var a;if(n===i)s.selectedBotId=(null===(a=e[0])||void 0===a?void 0:a._id)||null;c.nc.setState(s)}return!!i}function d(t,e){let{botDesign:n}=c.nc.getState();return n={...n,...e},s(t,{botDesign:n})}async function l(t,e){const{organizationId:n,selectedBotId:i}=c.nc.getState(),a=new FormData;a.append("file",e);const s=await o.bE("/bot/".concat(n,"/").concat(i,"/update-logo/").concat(t),a);return p(i,s),s["botDesign.".concat(t)]}async function u(t){const{organizationId:e,selectedBotId:n}=c.nc.getState(),i=await o.TF("/bot/".concat(e,"/").concat(n,"/update-logo/").concat(t));return p(n,i),i["botDesign.".concat(t)]}function f(t,e){return s(t,{botName:e})}function g(t,e){let{botSettings:n={}}=c.nc.getState();return n={...n,...e},s(t,{botSettings:n})}function p(t,e){const{botsMap:n}=c.nc.getState(),o=n[t];if(!o)return;b(Object.keys(e).reduce(((t,n)=>(0,i.G6)(t,n,e[n])),o))}function b(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=t._id;let{botsMap:o,botsList:i}=c.nc.getState();o={...o,[n]:t},i=[...i];const a=i.findIndex((t=>t._id===n));a>=0?i[a]=t:i.push(t);const s={botsMap:o,botsList:i};e&&(s.selectedBotId=n),c.nc.setState(s)}},77382:(t,e,n)=>{n.d(e,{CA:()=>f,L3:()=>u,Mk:()=>r,bZ:()=>d,gJ:()=>l});var o=n(8478),c=n(33340),i=n(32026),a=n(59051),s=n.n(a);async function r(t){const{organizationId:e,selectedBotId:n}=c.nc.getState(),i=await o.bE("/bot/".concat(e,"/").concat(n,"/knowledge-base"),t);return c.nc.setState((e=>{const o={...e.kbDocs||{}},c=o[n];if(!c)return{};if(o[n]=[...c],t._id){const t=o[n].findIndex((t=>t._id===i._id));t>=0?o[n][t]=i:o[n].push(i)}else o[n].push(i);return{kbDocs:o}})),i}async function d(t){const{organizationId:e,selectedBotId:n,kbDocs:i}=c.nc.getState();if(t&&Array.isArray(null===i||void 0===i?void 0:i[n]))return;const a=await o.Jt("/bot/".concat(e,"/").concat(n,"/knowledge-base/list"));c.nc.setState((t=>({kbDocs:{...t.kbDocs||{},[n]:a}})))}async function l(){var t;const{organizationId:e,selectedBotId:n,botsMap:a}=c.nc.getState(),r="/bot/".concat(e,"/").concat(n,"/knowledge-base/download"),d=await o.Jt(r),l=(null===(t=a[n])||void 0===t?void 0:t.botName)||"KBDocs";(0,i.PE)(d,l+"_"+s()().format("YYYYMMDD")+".csv")}async function u(t){if(null===t||void 0===t||!t.length)return[];const{organizationId:e,selectedBotId:n}=c.nc.getState();return await o.Jt("/bot/".concat(e,"/").concat(n,"/knowledge-base/list?").concat(t.map((t=>"docIds=".concat(t))).join("&")))}async function f(t){const{organizationId:e,selectedBotId:n}=c.nc.getState();await o.TF("/bot/".concat(e,"/").concat(n,"/knowledge-base/").concat(t)),c.nc.setState((e=>{var o;const c={...e.kbDocs||{}};return c[n]=null===(o=c[n])||void 0===o?void 0:o.filter((e=>e._id!==t)),{kbDocs:c}}))}},30334:(t,e,n)=>{n.d(e,{Ei:()=>l,KM:()=>s,MD:()=>r,pn:()=>u,qt:()=>d});var o=n(8478),c=n(33340),i=n(77382),a=n(98415);async function s(t,e,n){const c=await o.bE("/bot/".concat(n,"/").concat(e,"/add-training-media"),t);(0,a.rv)(e,{trainingMedia:c.trainingMedia})}async function r(t){const{organizationId:e,selectedBotId:n}=c.nc.getState(),i=new FormData;i.append("file",t);try{const t=await o.bE("/bot/".concat(e,"/").concat(n,"/add-training-media"),i);(0,a.rv)(n,{trainingMedia:t.trainingMedia})}catch(s){throw new Error("File upload failed. Please try again.",s)}}async function d(t,e,n){const c=await o.bE("/bot/".concat(n,"/").concat(e,"/delete-training-media-document"),t);(0,a.rv)(e,{trainingMedia:c.trainingDocuments})}async function l(t,e){const n=await o.bE("/bot/".concat(e,"/").concat(t,"/knowledge-base/train"));return c.nc.setState((e=>{const n={...e.kbDocs||{}};return delete n[t],{kbDocs:n}})),(0,i.bZ)().catch((t=>console.error("Error fetching Knowledge base content:",t))),n}async function u(t,e,n){const c=await o.bE("/bot/".concat(e,"/").concat(n,"/add-bot-tax-details"),t),{_id:i,botDetailsForVerification:s}=c;return(0,a.rv)(i,{botDetailsForVerification:s}),s}},70855:(t,e,n)=>{n.d(e,{G:()=>c});var o=n(33340);function c(t){const e=(0,o.nc)((t=>t.selectedBotId)),n=(0,o.nc)((n=>n.botsMap[t||e]));return[t||e,n]}},32026:(t,e,n)=>{function o(t,e){return t.replace(new RegExp("".concat(c(e),"+$")),"")}function c(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function i(t){const e=new Date(t),n=e.getDate(),o=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][e.getMonth()],c=e.getFullYear();return"".concat(o," ").concat(n,", ").concat(c)}function a(t,e,n){if(!e&&!t)return n;t=t||{};const o=Array.isArray(t)?[...t]:{...t};if(e.includes(".")){const c=e.indexOf("."),i=e.substring(0,c),s=e.substring(c+1);o[i]=a(t[i],s,n)}else o[e]=n;return o}function s(t,e){return btoa("".concat(t,"_").concat(e,"_whatsapp_int"))}function r(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:12;const e="abcdefghijklmnopqrstuvwxyz0123456789";let n="";for(let o=0;o<t;o++)n+=e.charAt(Math.floor(36*Math.random()));return n}function d(t,e,n){if(!e&&!t)return n;t=t||{};const o=Array.isArray(t)?[...t]:{...t};if(e.includes(".")){const c=e.indexOf("."),i=e.substring(0,c),a=e.substring(c+1);o[i]=d(t[i],a,n)}else o[e]=n;return o}function l(t,e){const n=new Blob([t],{type:arguments.length>2&&void 0!==arguments[2]?arguments[2]:"text/csv"}),o=document.createElement("a");o.href=URL.createObjectURL(n),o.download=e,document.body.appendChild(o),o.click(),document.body.removeChild(o)}n.d(e,{G6:()=>a,OX:()=>r,PE:()=>l,Yq:()=>i,do:()=>d,qW:()=>s,s8:()=>o})},44364:(t,e,n)=>{n.d(e,{DX:()=>s,Og:()=>i,jn:()=>o,pA:()=>a,pR:()=>c});const o="https://devbackend.livhousing.com:444",c="c17b949cf58c45cae47ce1cc65efc8240f77a2a69ca09ad4c4208852",i={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_IP_DATA_API_KEY:"c17b949cf58c45cae47ce1cc65efc8240f77a2a69ca09ad4c4208852",REACT_APP_VERSION:"1",REACT_APP_BACKEND_URL:"https://devbackend.livhousing.com:444"}.TRAINING_MEDIA_MAXSIZE,a={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_IP_DATA_API_KEY:"c17b949cf58c45cae47ce1cc65efc8240f77a2a69ca09ad4c4208852",REACT_APP_VERSION:"1",REACT_APP_BACKEND_URL:"https://devbackend.livhousing.com:444"}.CONVERSATION_MEDIA_MAXSIZE,s={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_IP_DATA_API_KEY:"c17b949cf58c45cae47ce1cc65efc8240f77a2a69ca09ad4c4208852",REACT_APP_VERSION:"1",REACT_APP_BACKEND_URL:"https://devbackend.livhousing.com:444"}.REACT_APP_NGROK_BACKEND_URL||"https://devbackend.livhousing.com:444"}}]);