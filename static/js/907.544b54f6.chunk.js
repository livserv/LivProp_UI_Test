"use strict";(self.webpackChunklib_prop_ui=self.webpackChunklib_prop_ui||[]).push([[907],{72907:(e,i,n)=>{n.r(i),n.d(i,{default:()=>C});n(47313);var t=n(9019),s=n(61113),a=n(41806),r=n(19536),l=n(42832),d=n(23306),c=n(15480),o=n(75729),x=n(52830),h=n(969),m=n(37843),p=n(31095),g=n(93405),j=n(56104),u=n(61689),Z=n(47131),b=n(51997),f=n(10237),w=n(77021),v=n(19259),y=n(3463),P=n(24977),z=n(69753);var U=n(42091),S=n(46417);const F=e=>{window.open(e)},N={margin:{xs:2.5,md:3},"& > *":{flexGrow:1,flexBasis:"50%"}};const C=function(){var e;const i=(0,x.tN)((e=>e.botsList)),[n]=(0,h.g)(),r=null===(e=i.find((e=>e._id===n)))||void 0===e?void 0:e.trainingMedia,l=(0,x.tN)((e=>e.organizationId));return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(t.ZP,{item:!0,xs:12,sx:{mb:2.25},children:(0,S.jsx)(s.Z,{variant:"h5",children:"Training Documents"})}),(0,S.jsx)(o.Z,{sx:N,content:!1,border:!1,boxShadow:!0,children:(0,S.jsx)(a.Z,{sx:{p:{xs:2,sm:3,md:4,xl:5}},children:(0,S.jsx)(t.ZP,{container:!0,spacing:3,children:(0,S.jsx)(D,{botId:n,organizationId:l})})})}),(0,S.jsx)(a.Z,{children:(0,S.jsx)(t.ZP,{container:!0,spacing:3,children:(0,S.jsx)(_,{trainingMedia:r})})})]})};function D(e){let{botId:i,organizationId:n}=e;return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(t.ZP,{item:!0,xs:12,children:(0,S.jsx)(r.Z,{children:(0,S.jsx)(s.Z,{variant:"caption",children:"Upload Training Documents"})})}),(0,S.jsx)(t.ZP,{item:!0,xs:12,children:(0,S.jsx)(P.J9,{initialValues:{webpageUrl:""},validationSchema:y.Ry().shape({webpageUrl:y.Z_().matches(/((https?):\/\/)?(www.)?[a-z0-9]+(\.[a-z]{2,}){1,3}(#?\/?[a-za-z0-9#]+)*\/?(\?[a-za-z0-9-_]+=[a-za-z0-9-%]+&?)?$/,"Enter valid url!").required("please enter webpage url")}),onSubmit:async(e,t)=>{let{setErrors:s,setStatus:a,setSubmitting:r}=t;try{const t={url:e.webpageUrl};console.log(t),await async function(e,i,n){const t=await z.v("/bot/add-training-media",e,{headers:{botId:i,Organizationid:n}}),{trainingMedia:s}=t;((e,i)=>{x.tN.setState((n=>{const t=n.botsList.map((n=>n._id===e?{...n,trainingMedia:i}:n));return{...n,botsList:t}}))})(i,s)}(t,i,n),a({success:!1}),r(!1)}catch(l){console.log(l),a({success:!1}),s({submit:l.message}),r(!1)}},children:e=>{let{errors:i,handleBlur:a,handleChange:r,handleSubmit:o,isSubmitting:x,touched:h,values:p}=e;return(0,S.jsx)("form",{noValidate:!0,onSubmit:o,children:(0,S.jsxs)(t.ZP,{container:!0,spacing:1,children:[(0,S.jsx)(t.ZP,{item:!0,xs:12,md:4,children:(0,S.jsxs)(l.Z,{spacing:1,children:[(0,S.jsx)(d.Z,{htmlFor:"webpage-url",children:"Webpage Url"}),(0,S.jsx)(m.Z,{id:"webpage-url",type:"webpageUrl",defaultValue:p.webpageUrl,name:"webpageUrl",onBlur:a,onChange:r,fullWidth:!0,placeholder:"http://www.abc.com/index.html",error:Boolean(h.webpageUrl&&i.webpageUrl)}),h.webpageUrl&&i.webpageUrl&&(0,S.jsx)(c.Z,{error:!0,id:"helper-text-webpage-url",children:i.webpageUrl})]})}),(0,S.jsx)(t.ZP,{item:!0,xs:12,md:2,children:(0,S.jsxs)(l.Z,{spacing:1,children:[(0,S.jsx)(d.Z,{children:"\xa0"}),(0,S.jsx)(w.Z,{children:(0,S.jsx)(U.Z,{isLoading:x,disabled:x,color:"primary",size:"large",type:"submit",variant:"contained",id:"webpageUrlSubmit",children:"Update"})})]})}),(0,S.jsx)(t.ZP,{item:!0,xs:12,md:1,children:(0,S.jsx)(s.Z,{variant:"caption",children:"OR"})}),(0,S.jsx)(t.ZP,{item:!0,xs:12,md:5,children:(0,S.jsxs)(l.Z,{spacing:1,children:[(0,S.jsx)(d.Z,{children:"File Upload (.pdf,.doc,.docx,.txt)"}),(0,S.jsx)(I,{organizationId:n})]})})]})})}})})]})}function I(e){let{organizationId:i}=e;return(0,S.jsx)(P.J9,{initialValues:{file:""},validationSchema:y.Ry({files:y.nK().required("please enter webpage url")}),onSubmit:async(e,n)=>{let{setErrors:t,setStatus:s,setSubmitting:a}=n;try{const n={organizationId:i,data:e};console.log(n),s({success:!1}),a(!1)}catch(r){s({success:!1}),t({submit:r.message}),a(!1)}},children:(0,S.jsx)(P.gN,{type:"file",name:"file",as:e=>{let{field:i}=e;return(0,S.jsx)(w.Z,{children:(0,S.jsxs)(p.Z,{variant:"contained",component:"label",htmlFor:"file-input",size:"large",children:["Upload File",(0,S.jsx)("input",{...i,type:"file",id:"file-input",style:{display:"none"},onChange:e=>handleFileChange(e,setFieldValue),accept:".pdf,.doc,.docx,.txt,text/plain"})]})})}})})}function _(e){let{trainingMedia:i}=e;return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(t.ZP,{item:!0,xs:12,children:(0,S.jsx)(r.Z,{children:i&&0!==i.length?(0,S.jsx)(s.Z,{variant:"caption",children:"Uploaded Training Documents"}):(0,S.jsx)(s.Z,{variant:"caption",color:"#FF0000",children:(0,S.jsxs)(t.ZP,{container:!0,spacing:1,justify:"center",children:[(0,S.jsx)(t.ZP,{item:!0,xs:12,children:(0,S.jsx)(v.Z,{style:{fontSize:40}})}),(0,S.jsx)(t.ZP,{item:!0,xs:12,children:"Training Documents are not uploaded!"})]})})})}),i&&i.map(((e,i)=>(0,S.jsx)(t.ZP,{item:!0,xs:12,sm:6,children:(0,S.jsx)(M,{media:e})},i)))]})}function M(e){let{media:i}=e;const{name:n,url:a,type:r,originalName:l}=i;return(0,S.jsxs)(o.Z,{contentSX:{p:2.25},children:[(0,S.jsxs)(g.Z,{style:{padding:0,minHeight:"100px",maxHeight:"100px"},children:[l&&(0,S.jsxs)(s.Z,{variant:"h6",children:[(0,S.jsx)("strong",{children:"File Name :"})," ",l]}),"single_page"===r&&(0,S.jsxs)(s.Z,{variant:"h6",style:{overflow:"hidden",textOverflow:"ellipsis"},children:[(0,S.jsx)("strong",{children:"URL :"})," ",a]}),(0,S.jsxs)(s.Z,{variant:"h6",children:[(0,S.jsx)("strong",{children:"Type :"})," ","text/plain"===r?"Document":"Web Page"]}),(0,S.jsxs)(s.Z,{variant:"h6",children:[(0,S.jsx)("strong",{children:"Document Name :"})," ",n===a?"NA":n]})]}),(0,S.jsx)(j.Z,{style:{justifyContent:"flex-end",padding:"5px"},children:(0,S.jsxs)(t.ZP,{container:!0,children:[(0,S.jsx)(t.ZP,{item:!0,xs:10,md:10,children:n===a&&(0,S.jsxs)(t.ZP,{container:!0,spacing:1,children:[(0,S.jsx)(t.ZP,{item:!0,xs:9,md:9,children:(0,S.jsx)(m.Z,{id:"trainingMediaName",type:"trainingMediaName",name:"trainingMediaName",placeholder:"Document Name",fullWidth:!0})}),(0,S.jsx)(t.ZP,{item:!0,xs:3,md:3,children:(0,S.jsx)(w.Z,{children:(0,S.jsx)(p.Z,{disableElevation:!0,size:"large",type:"submit",variant:"contained",color:"primary",children:"Add"})})})]})}),(0,S.jsx)(t.ZP,{item:!0,xs:1,md:1,children:(0,S.jsx)(u.Z,{title:"text/plain"===r?"View Document":"View Web Page",children:(0,S.jsx)(Z.Z,{variant:"text",onClick:()=>F(a),children:(0,S.jsx)(f.Z,{style:{color:"#5ad74e"}})})})}),(0,S.jsx)(t.ZP,{item:!0,xs:1,md:1,children:(0,S.jsx)(u.Z,{title:"Delete",children:(0,S.jsx)(Z.Z,{variant:"text",onClick:()=>onClickDeleteFile(item),children:(0,S.jsx)(b.Z,{style:{color:"#ff0000"},fontSize:"small"})})})})]})})]})}}}]);