"use strict";(self.webpackChunklib_prop_ui=self.webpackChunklib_prop_ui||[]).push([[920],{1816:(e,t,n)=>{n.d(t,{c:()=>h});var r=n(99584),i=n(60392),a=n(65936),o=n(78640),c=n(43664),s=n(36744),l=n(97884);const d={p:2.5,"& .MuiCardHeader-action":{m:"0px auto",alignSelf:"center"}},h=(0,r.forwardRef)(((e,t)=>{let{border:n=!0,boxShadow:r,children:h,content:p=!0,contentSX:u={},darkTitle:x,elevation:g,secondary:m,shadow:v,sx:f={},title:j,...S}=e;const b=(0,i.c)();return r="dark"===b.palette.mode?r||!0:r,(0,l.jsxs)(a.c,{elevation:g||0,ref:t,...S,sx:{border:n?"1px solid":"none",borderRadius:2,borderColor:"dark"===b.palette.mode?b.palette.divider:b.palette.grey.A800,boxShadow:!r||n&&"dark"!==b.palette.mode?"inherit":v||b.customShadows.z1,":hover":{boxShadow:r?v||b.customShadows.z1:"inherit"},"& pre":{m:0,p:"16px !important",fontFamily:b.typography.fontFamily,fontSize:"0.75rem"},...f},children:[!x&&j&&(0,l.jsx)(o.c,{sx:d,titleTypographyProps:{variant:"subtitle1"},title:j,action:m}),x&&j&&(0,l.jsx)(o.c,{sx:d,title:(0,l.jsx)(c.c,{variant:"h3",children:j}),action:m}),p&&(0,l.jsx)(s.c,{sx:u,children:h}),!p&&h]})}))},16920:(e,t,n)=>{n.r(t),n.d(t,{default:()=>M});var r=n(99584),i=n(86344),a=n(43664),o=n(2496),c=n(58632),s=n(90760),l=n(1816),d=n(31251),h=n(31928),p=n(97884);const u=function(e){let{title:t,count:n,percentage:r,extra:u,period:x="month",color:g=(u<0?"warning":"success")}=e;const m=u<0;return u=Math.abs(u||0),(0,p.jsxs)(l.c,{contentSX:{p:2.25},children:[(0,p.jsxs)(o.c,{spacing:.5,children:[(0,p.jsx)(a.c,{variant:"h6",color:"textSecondary",children:t}),(0,p.jsxs)(i.cp,{container:!0,alignItems:"center",children:[(0,p.jsx)(i.cp,{item:!0,children:(0,p.jsx)(a.c,{variant:"h4",color:"inherit",children:n})}),!!r&&(0,p.jsx)(i.cp,{item:!0,children:(0,p.jsx)(c.c,{variant:"combined",color:g,icon:(0,p.jsxs)(p.Fragment,{children:[!m&&(0,p.jsx)(d.c,{style:{fontSize:"0.75rem",color:"inherit"}}),m&&(0,p.jsx)(h.c,{style:{fontSize:"0.75rem",color:"inherit"}})]}),label:"".concat(r,"%"),sx:{ml:1.25,pl:1},size:"small"})})]})]}),m&&(0,p.jsx)(s.c,{sx:{pt:2.25},children:(0,p.jsxs)(a.c,{variant:"caption",color:"textSecondary",children:["You're down by "," ",(0,p.jsx)(a.c,{component:"span",variant:"caption",sx:{color:"".concat(g||"primary",".main")},children:u})," ","this ",x]})}),!m&&(0,p.jsx)(s.c,{sx:{pt:2.25},children:(0,p.jsxs)(a.c,{variant:"caption",color:"textSecondary",children:["You made an extra"," ",(0,p.jsx)(a.c,{component:"span",variant:"caption",sx:{color:"".concat(g||"primary",".main")},children:u})," ","this ",x]})})]})};var x=n(76312);const g=function(){const e=(0,x.OS)((e=>e.overview)),{current:t={},difference:n={},diffPercentage:r={}}=e||{};return(0,p.jsxs)(p.Fragment,{children:[t.totalVisitors>0&&(0,p.jsx)(i.cp,{item:!0,xs:12,sm:6,md:4,lg:3,children:(0,p.jsx)(u,{title:"Total Visitors",count:t.totalVisitors,percentage:r.totalVisitors,extra:n.totalVisitors})}),(0,p.jsx)(i.cp,{item:!0,xs:12,sm:6,md:4,lg:3,children:(0,p.jsx)(u,{title:"Interactive Visitors",count:t.interactiveVisitors,percentage:r.interactiveVisitors,extra:n.interactiveVisitors})}),(0,p.jsx)(i.cp,{item:!0,xs:12,sm:6,md:4,lg:3,children:(0,p.jsx)(u,{title:"Presales",count:t.preSale,percentage:r.preSale,extra:n.preSale})}),(0,p.jsx)(i.cp,{item:!0,xs:12,sm:6,md:4,lg:3,children:(0,p.jsx)(u,{title:"General",count:t.general,percentage:r.general,extra:n.general})}),!t.revisit&&(0,p.jsx)(i.cp,{item:!0,xs:12,sm:6,md:4,lg:3,children:(0,p.jsx)(u,{title:"Others",count:t.others,percentage:r.others,extra:n.others})}),!!t.revisit&&(0,p.jsx)(i.cp,{item:!0,xs:12,sm:6,md:4,lg:3,children:(0,p.jsx)(u,{title:"Revisit Count",count:t.revisit,percentage:r.revisit,extra:n.revisit})}),(0,p.jsx)(i.cp,{item:!0,md:8,sx:{display:{sm:"none",md:"block",lg:"none"}}})]})};var m=n(35240),v=n(83072),f=n.n(v);function j(e,t){return t&&e?parseFloat((100*t/e).toFixed(2)):0}var S=n(43924);const b=function(e){let{showToday:t=!1,value:n=(t?"day":"week"),onChange:a}=e;const[c,s]=r.useState(n),l=r.useRef({onChange:a,slot:c}),d=r.useCallback((e=>{s(e);const{onChange:t}=l.current;if(t){t({fromDate:f()().add(-1,e).startOf("day").toDate(),toDate:f()().endOf("day").toDate()})}}),[]);return l.current.handleChange=d,r.useEffect((()=>{l.current.handleChange(l.current.slot)}),[]),(0,p.jsx)(i.cp,{item:!0,children:(0,p.jsxs)(o.c,{direction:"row",alignItems:"center",spacing:0,children:[(0,p.jsx)(S.c,{size:"small",onClick:()=>d("month"),color:"month"===c?"primary":"secondary",variant:"month"===c?"outlined":"text",children:"Month"}),(0,p.jsx)(S.c,{size:"small",onClick:()=>d("week"),color:"week"===c?"primary":"secondary",variant:"week"===c?"outlined":"text",children:"Week"}),t&&(0,p.jsx)(S.c,{size:"small",onClick:()=>d("day"),color:"day"===c?"primary":"secondary",variant:"day"===c?"outlined":"text",children:"Today"})]})})};var y=n(97784),_=n(77652),E=n(30740),T=n(62547),P=n(92988),w=n(27664),C=n(60392);const k=e=>{let{color:t,size:n}=e;const r=(0,C.c)();let i;switch(t){case"secondary":i=r.palette.secondary.main;break;case"error":i=r.palette.error.main;break;case"warning":i=r.palette.warning.main;break;case"info":i=r.palette.info.main;break;case"success":i=r.palette.success.main;break;default:i=r.palette.primary.main}return(0,p.jsx)(s.c,{sx:{width:n||8,height:n||8,borderRadius:"50%",bgcolor:i}})};const A=function(e){let{value:t}=e;return f()(t).format("DD-MMM-YYYY HH:mm:ss")};function O(e,t,n){return t[n]<e[n]?-1:t[n]>e[n]?1:0}function D(e,t){return"desc"===e?(e,n)=>O(e,n,t):(e,n)=>-O(e,n,t)}function R(e,t){const n=e.map(((e,t)=>[e,t]));return n.sort(((e,n)=>{const r=t(e[0],n[0]);return 0!==r?r:e[1]-n[1]})),n.map((e=>e[0]))}const N=[{id:"name",align:"left",disablePadding:!1,label:"Name"},{id:"email",align:"left",disablePadding:!0,label:"Email Id"},{id:"phoneNumber",align:"left",disablePadding:!1,label:"Phone Number"},{id:"country",align:"left",disablePadding:!1,label:"Country"},{id:"city",align:"left",disablePadding:!1,label:"City"},{id:"startTime",align:"left",disablePadding:!1,label:"Visit Time"},{id:"category",align:"left",disablePadding:!1,label:"Category"},{id:"transcriptUrl",align:"right",disablePadding:!1,label:"Transcript"}];function I(e){let{order:t,orderBy:n}=e;return(0,p.jsx)(y.c,{children:(0,p.jsx)(_.c,{children:N.map((e=>(0,p.jsx)(E.c,{align:e.align,padding:e.disablePadding?"none":"normal",sortDirection:n===e.id&&t,children:e.label},e.id)))})})}const V=e=>{let t,{value:n}=e;switch(n){case"Pre-Sale":t="success";break;case"General":t="primary";break;case"Others":t="warning";break;default:t="error"}return(0,p.jsxs)(o.c,{direction:"row",spacing:1,alignItems:"center",children:[(0,p.jsx)(k,{color:t}),(0,p.jsx)(a.c,{children:n})]})},U=e=>{let{url:t}=e;return(0,p.jsx)("a",{href:t,target:"_blank",rel:"noreferrer",children:(0,p.jsx)(a.c,{children:"View"})})};function L(e){let{data:t}=e;const[n]=(0,r.useState)("asc"),[i]=(0,r.useState)("trackingNo"),[a]=(0,r.useState)([]);return(0,p.jsx)(s.c,{children:(0,p.jsx)(T.c,{sx:{width:"100%",overflowX:"auto",position:"relative",display:"block",maxWidth:"100%","& td, & th":{whiteSpace:"nowrap"}},children:(0,p.jsxs)(P.c,{"aria-labelledby":"tableTitle",sx:{"& .MuiTableCell-root:first-of-type":{pl:2},"& .MuiTableCell-root:last-of-type":{pr:3}},children:[(0,p.jsx)(I,{order:n,orderBy:i}),(0,p.jsxs)(w.c,{children:[!(null!==t&&void 0!==t&&t.length)&&(0,p.jsx)(_.c,{sx:{"&:last-child td, &:last-child th":{border:0}},children:(0,p.jsx)(E.c,{colSpan:7,children:"No visitors exists for the selected duration"})}),(null===t||void 0===t?void 0:t.length)>0&&R(t,D(n,i)).map(((e,t)=>{const n=(r=e.trackingNo,-1!==a.indexOf(r));var r;const i="enhanced-table-checkbox-".concat(t);return(0,p.jsxs)(_.c,{hover:!0,role:"checkbox",sx:{"&:last-child td, &:last-child th":{border:0}},"aria-checked":n,tabIndex:-1,selected:n,children:[(0,p.jsx)(E.c,{component:"th",id:i,scope:"row",align:"left",children:e.name}),(0,p.jsx)(E.c,{align:"left",children:e.email}),(0,p.jsx)(E.c,{align:"left",children:e.phoneNumber}),(0,p.jsx)(E.c,{align:"left",children:e.country}),(0,p.jsx)(E.c,{align:"left",children:e.city}),(0,p.jsx)(E.c,{align:"left",children:(0,p.jsx)(A,{value:e.visitTime})}),(0,p.jsx)(E.c,{align:"left",children:(0,p.jsx)(V,{value:e.category})}),(0,p.jsx)(E.c,{align:"right",children:(0,p.jsx)(U,{url:e.transcriptUrl})})]},e.trackingNo)}))]})]})})})}const K=function(){const[e,t]=r.useState(),n=(0,x.OS)((e=>e.visitorList));return r.useEffect((()=>{e&&async function(e){let{duration:t,...n}=e;const{organizationId:r,selectedBotId:i}=x.mW.getState(),a=x.OS.getState();let{visitorProps:o}=a;o={...o,duration:t,...n,page:1},x.OS.setState({visitorProps:o,visitorList:null});const{total:c,visitorList:s}=await m._M("/analytics/".concat(r,"/").concat(i,"/dashboard/visitors-list"),o);x.OS.setState({visitorProps:o,visitorsListTotal:c,visitorList:s})}(e).catch((e=>console.log("Error loading visitor list:-",e)))}),[e]),(0,p.jsxs)(i.cp,{item:!0,xs:12,children:[(0,p.jsxs)(i.cp,{container:!0,alignItems:"center",justifyContent:"space-between",children:[(0,p.jsx)(i.cp,{item:!0,children:(0,p.jsx)(a.c,{variant:"h5",children:"Visitors List"})}),(0,p.jsx)(b,{showToday:!0,onChange:t})]}),(0,p.jsx)(l.c,{sx:{mt:2},content:!1,children:(0,p.jsx)(L,{data:n})})]})};const M=function(){return r.useEffect((()=>{(async function(){const{organizationId:e,selectedBotId:t}=x.mW.getState(),n=x.OS.getState(),{organizationId:r,botId:i}=n;let{fromDate:a,toDate:o}=n;a=f()(a).startOf("day").toDate(),o=f()(o).endOf("day").toDate(),e===r&&t===i||x.OS.setState((0,x.s$)(e,t),!0);const c=await m._M("/analytics/".concat(e,"/").concat(t,"/dashboard/overview"),{fromDate:a,toDate:o});a=f()(a).add(-1,"day").add(-1,"month").toDate(),o=f()(o).add(-1,"day").add(-1,"month").toDate();const s=await m._M("/analytics/".concat(e,"/").concat(t,"/dashboard/overview"),{fromDate:a,toDate:o}),l={interactiveVisitors:(c.interactiveVisitors||0)-(s.interactiveVisitors||0),preSale:(c.preSale||0)-(s.preSale||0),general:(c.general||0)-(s.general||0),others:(c.others||0)-(s.others||0),revisit:(c.revisit||0)-(s.revisit||0)},d={current:c,previous:s,difference:l,diffPercentage:{interactiveVisitors:j(s.interactiveVisitors,l.interactiveVisitors),preSale:j(s.preSale,l.preSale),general:j(s.general,l.general),others:j(s.others,l.others),revisit:j(s.revisit,l.revisit)}};x.OS.setState({overview:d})})().catch((e=>console.error("Unable to load analytics data",e)))}),[]),(0,p.jsxs)(i.cp,{container:!0,rowSpacing:4.5,columnSpacing:2.75,children:[(0,p.jsx)(i.cp,{item:!0,xs:12,sx:{mb:-2.25},children:(0,p.jsx)(a.c,{variant:"h5",children:"Dashboard"})}),(0,p.jsx)(g,{}),(0,p.jsx)(i.cp,{item:!0,md:8,sx:{display:{sm:"none",md:"block",lg:"none"}}}),(0,p.jsx)(K,{})]})}},35240:(e,t,n)=>{n.d(t,{Aj:()=>c,_M:()=>a,aE:()=>s,s$:()=>o,wz:()=>h});var r=n(52216),i=n(79028);async function a(e,t){return l("GET",e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}async function o(e,t){return l("POST",e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}async function c(e,t){return l("PUT",e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}async function s(e,t){return l("DELETE",e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}async function l(e,t,n){let{headers:r,noAuth:i,...a}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const o="POST"===e||"PUT"===e||"DELETE"===e;if(t=h(t,o?void 0:n),n=n&&"object"===typeof n&&o?JSON.stringify(n):void 0,r||(r={}),r["Content-Type"]="application/json",r.Accept="application/json",!1!==i){const e=sessionStorage.getItem("token");e&&(r.Authorization="Bearer ".concat(e))}try{const i=await fetch(t,{...a,headers:r,body:n,method:e}),o=await i.json();if(i.ok){const{data:e,...t}=o;return delete t.status,e&&!Object.keys(t).length?e:o}throw o.message?new Error(o.message):o}catch(s){var c;throw console.error("Error calling API: ",s),null!==(c=s.message)&&void 0!==c&&c.includes("fetch")?new Error("Unable to reach server. Please check your network connectivity and try again."):new Error("Unknown server error")}}const d=(0,r.Sm)(i.UX,"/");function h(e,t){if(!e)return e;const n=t&&Object.keys(t);if(null!==n&&void 0!==n&&n.length){const r=n.reduce(((e,n)=>{let r=t[n];return null===r||void 0===r?e:(r="".concat(n,"=").concat(encodeURIComponent(r)),e?"".concat(e,"&").concat(r):r)}),"");r&&(e="".concat(e).concat(e.includes("?")?"&":"?").concat(r))}return e.startsWith("https://")?e:"".concat(d).concat(e)}},52216:(e,t,n)=>{function r(e,t){return e.replace(new RegExp("".concat(i(t),"+$")),"")}function i(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function a(e){const t=new Date(e),n=t.getDate(),r=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][t.getMonth()],i=t.getFullYear();return"".concat(r," ").concat(n,", ").concat(i)}n.d(t,{Sm:()=>r,_m:()=>a})},79028:(e,t,n)=>{n.d(t,{AZ:()=>i,So:()=>c,UX:()=>r,cX:()=>a,vc:()=>o});const r="https://devbackend.livhousing.com",i={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_NGROK_BACKEND_URL:"https://60f1-203-192-224-75.ngrok-free.app",REACT_APP_VERSION:"1",REACT_APP_BACKEND_URL:"https://devbackend.livhousing.com"}.REACT_APP_IP_DATA_API_KEY||"d5f26b13e02d0e43f0870c726797b2c2f726b739a4c91bf9e4bb59c2",a={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_NGROK_BACKEND_URL:"https://60f1-203-192-224-75.ngrok-free.app",REACT_APP_VERSION:"1",REACT_APP_BACKEND_URL:"https://devbackend.livhousing.com"}.TRAINING_MEDIA_MAXSIZE,o={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_NGROK_BACKEND_URL:"https://60f1-203-192-224-75.ngrok-free.app",REACT_APP_VERSION:"1",REACT_APP_BACKEND_URL:"https://devbackend.livhousing.com"}.CONVERSATION_MEDIA_MAXSIZE,c="https://60f1-203-192-224-75.ngrok-free.app"}}]);