"use strict";(self.webpackChunklib_prop_ui=self.webpackChunklib_prop_ui||[]).push([[9228],{89228:(e,n,t)=>{t.r(n),t.d(n,{default:()=>y});var i=t(9950),s=t(46639),o=t(16491),l=t(60899),r=t(82053),c=t(80417),d=t(79046),a=t(33092),u=t(89262),h=t(12504),x=t(29635),A=t(59254),j=t(33340),m=t(77382),p=t(6716),f=t(68033),g=t(6834),v=t(44414);function b(){const[e,n]=(0,i.useState)(!1),t=async()=>{n(!0);try{await(0,m.gJ)()}catch(e){console.log("Error while downloading docs:",e)}finally{n(!1)}};return e?(0,v.jsx)(s.A,{size:16,color:"primary",style:{marginLeft:"5px"}}):(0,v.jsx)("span",{title:"Click to download the content as CSV file",children:(0,v.jsx)(x.A,{onClick:t,style:{verticalAlign:"bottom",cursor:"pointer"}})})}const y=function(){const[e,n]=i.useState(!1),t=(0,j.nc)((e=>{var n;return null===(n=e.kbDocs)||void 0===n?void 0:n[e.selectedBotId]})),s=i.useCallback((()=>n((e=>!e))),[]);return i.useEffect((()=>{(0,m.bZ)().catch((e=>console.error("Error fetching organization details:",e)))}),[]),(0,v.jsx)(o.A,{children:(0,v.jsxs)(l.Ay,{container:!0,item:!0,xs:12,children:[(0,v.jsxs)(r.A,{variant:"h5",children:["FAQ / Knowledge base ",(0,v.jsx)(b,{})]}),!e&&(0,v.jsx)(l.Ay,{item:!0,sx:{marginLeft:"60px"},children:(0,v.jsx)(k,{onAddClick:s})}),e&&(0,v.jsx)(l.Ay,{item:!0,xs:12,mt:1,children:(0,v.jsx)(l.Ay,{item:!0,xs:12,lg:8,mt:5,children:(0,v.jsx)(g.A,{onCancel:s})})}),(0,v.jsx)(l.Ay,{item:!0,xs:12,mt:5,children:(0,v.jsx)(f.A,{docsList:t})})]})})},C=(0,A.Ay)(c.A)((e=>{let{theme:n}=e;return{position:"fixed","#trainingDocumentsSpeedDial &":{"&.MuiSpeedDial-directionDown, &.MuiSpeedDial-directionRight":{left:"auto",right:n.spacing(2)},"&.MuiSpeedDial-directionUp, &.MuiSpeedDial-directionLeft":{right:"auto",left:n.spacing(2)}}}}));function k(e){let{onAddClick:n}=e;const[t,s]=i.useState(!1);return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)(C,{ariaLabel:"Knowledge base options",direction:"down",sx:{position:"absolute",top:70,right:16},icon:(0,v.jsx)(d.A,{}),children:[(0,v.jsx)(a.A,{icon:(0,v.jsx)(u.A,{}),tooltipTitle:"Add Question & Answer",onClick:n}),(0,v.jsx)(a.A,{icon:(0,v.jsx)(h.A,{}),tooltipTitle:"Upload training document (.csv,.pdf,.doc,.docx,.txt)",onClick:()=>s(!0)})]}),t&&(0,v.jsx)(p.A,{isOpen:t,toggleOpen:s})]})}},6834:(e,n,t)=>{t.d(n,{A:()=>g});var i=t(9950),s=t(60899),o=t(3788),l=t(93230),r=t(2660),c=t(10226),d=t(29714),a=t(61467),u=t(24516),h=t(21788),x=t(32829),A=t(93383),j=t(77382),m=t(44414);const p=()=>d.Yj(),f=d.Ik().shape({question:p(),content:p()});const g=function(e){let{document:n={},onCancel:t,onUpdate:d}=e;const p=i.useCallback((()=>t(!1)),[t]);return(0,m.jsx)(a.l1,{initialValues:n,validationSchema:f,onSubmit:async(e,n)=>{let{setStatus:t,setSubmitting:i}=n;try{const n=await(0,j.Mk)(e);t({success:!1}),i(!1),p(),(0,h.i)(!0,"Content added successfully!","success"),null===d||void 0===d||d(n)}catch(s){console.error(s),(0,h.i)(!0,"Error occurred while trying to save content.","error")}},children:e=>{let{values:n,errors:t,handleChange:i,touched:d,isSubmitting:a,handleSubmit:h}=e;return(0,m.jsxs)("form",{noValidate:!0,onSubmit:h,children:[(0,m.jsxs)(s.Ay,{item:!0,xs:12,mt:5,children:[(0,m.jsx)(o.A,{htmlFor:"question",children:"Question"}),(0,m.jsxs)(l.A,{spacing:2,mb:3,children:[(0,m.jsx)(r.A,{multiline:!0,fullWidth:!0,id:"question",name:"question",value:n.question,onChange:i,placeholder:"Please enter the question"}),d.question&&t.question&&(0,m.jsx)(u.A,{error:!0,id:"helper-text-message-placeholder",children:t.question})]}),(0,m.jsx)(o.A,{htmlFor:"content",children:"Answer"}),(0,m.jsxs)(l.A,{spacing:2,mb:3,children:[(0,m.jsx)(r.A,{multiline:!0,rows:6,fullWidth:!0,id:"content",name:"content",value:n.content,onChange:i,placeholder:"Please enter the answer"}),d.content&&t.content&&(0,m.jsx)(u.A,{error:!0,id:"helper-text-message-placeholder",children:t.content})]})]}),(0,m.jsx)(s.Ay,{item:!0,xs:12,display:"flex",justifyContent:"flex-end",children:(0,m.jsxs)(l.A,{spacing:2,direction:"row",children:[(0,m.jsx)(c.A,{variant:"outlined",onClick:p,children:"Cancel"}),(0,m.jsx)(x.A,{children:(0,m.jsx)(A.A,{isLoading:a,color:"primary",size:"large",type:"submit",variant:"contained",onClick:h,children:"Save"})})]})})]})}})}},68033:(e,n,t)=>{t.d(n,{A:()=>C});var i=t(9950),s=t(60899),o=t(82053),l=t(10226),r=t(63464),c=t(40033),d=t(79739),a=t(57988),u=t(7999),h=t(25333),x=t(63359),A=t(85967),j=t(74745),m=t(21788),p=t(32829),f=t(93383),g=t(70855),v=t(6834),b=t(77382),y=t(44414);const C=function(e){let{docsList:n,onUpdate:t}=e;const[,i]=(0,g.G)();return null===n||void 0===n?void 0:n.map(((e,n)=>(0,y.jsx)(k,{index:n,document:e,trainingMedia:i.trainingMedia,onUpdate:t},e._id)))};function k(e){let{document:n,index:t,trainingMedia:s,onUpdate:o}=e;const[l,r]=i.useState(!1);return l?(0,y.jsx)(v.A,{document:n,onCancel:r,onUpdate:o}):(0,y.jsx)(w,{index:t,document:n,trainingMedia:s,onEdit:r})}function w(e){let{document:n,index:t,trainingMedia:l,onEdit:r}=e;const c=i.useCallback((()=>r(!0)),[r]);return(0,y.jsxs)(s.Ay,{container:!0,mt:1,children:[(0,y.jsxs)(s.Ay,{item:!0,children:[(0,y.jsxs)(o.A,{variant:"h5",children:["Q",t+1," . ",n.question]}),(0,y.jsxs)(o.A,{variant:"body2",children:[(0,y.jsx)("b",{children:"Ans . "})," ",n.content]}),n.sourceDocument&&(null===l||void 0===l?void 0:l.length)>0&&(0,y.jsx)(M,{document:n,trainingMedia:l})]}),(0,y.jsxs)(s.Ay,{xs:12,item:!0,display:"flex",justifyContent:"flex-end",children:[(0,y.jsx)(h.A,{size:"small",sx:{color:x.A[500]},onClick:c,children:(0,y.jsx)(u.A,{})}),(0,y.jsx)(S,{documentId:n._id})]}),(0,y.jsx)(j.A,{xs:12,sx:{width:"100%",borderColor:"#b6abab"}})]})}function M(e){let{document:n,trainingMedia:t}=e;const s=n.sourceDocument,l=i.useMemo((()=>{const e=t.filter((e=>e.docId===s))[0];if(!e)return e;const n=decodeURIComponent(e.url.substring(e.url.lastIndexOf("/")+1));return{...e,fileName:n}}),[s,t]);return l?(0,y.jsxs)(o.A,{variant:"body2",children:[(0,y.jsx)("b",{children:"Source Document:"})," ",(0,y.jsxs)("a",{href:l.url,rel:"noreferrer",target:"_blank",style:{cursor:"pointer"},children:[l.fileName,l.name?` ( ${l.name} )`:""]})]}):null}function S(e){let{documentId:n}=e;const[t,s]=i.useState(!1),u=()=>s((e=>!e)),x=i.useCallback((async()=>{await(0,b.CA)(n),s(!1),(0,m.i)(!0,"Deleted response successfully","success")}),[n]);return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(h.A,{sx:{color:A.A[500]},onClick:u,children:(0,y.jsx)(a.A,{})}),t&&(0,y.jsxs)(r.A,{open:t,onClose:u,children:[(0,y.jsx)(c.A,{id:"delete-confirm-dialog-title",children:(0,y.jsx)(o.A,{gutterBottom:!0,children:"Are sure you want to delete the response ?"})}),(0,y.jsxs)(d.A,{children:[(0,y.jsx)(l.A,{onClick:u,children:"Cancel"}),(0,y.jsx)(p.A,{children:(0,y.jsx)(f.A,{color:"primary",type:"submit",variant:"contained",onClick:x,children:"Delete"})})]})]})]})}},29635:(e,n,t)=>{var i=t(24994);n.A=void 0;var s=i(t(79526)),o=t(44414);n.A=(0,s.default)((0,o.jsx)("path",{d:"M5 20h14v-2H5zM19 9h-4V3H9v6H5l7 7z"}),"Download")},7999:(e,n,t)=>{var i=t(24994);n.A=void 0;var s=i(t(79526)),o=t(44414);n.A=(0,s.default)((0,o.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit")},89262:(e,n,t)=>{var i=t(24994);n.A=void 0;var s=i(t(79526)),o=t(44414);n.A=(0,s.default)((0,o.jsx)("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm-1 4H8c-1.1 0-1.99.9-1.99 2L6 21c0 1.1.89 2 1.99 2H19c1.1 0 2-.9 2-2V11zM8 21V7h6v5h5v9z"}),"FileCopyOutlined")},12504:(e,n,t)=>{var i=t(24994);n.A=void 0;var s=i(t(79526)),o=t(44414);n.A=(0,s.default)((0,o.jsx)("path",{d:"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8zm4 18H6V4h7v5h5zM8 15.01l1.41 1.41L11 14.84V19h2v-4.16l1.59 1.59L16 15.01 12.01 11z"}),"UploadFile")},85967:(e,n,t)=>{t.d(n,{A:()=>i});const i={50:"#fce4ec",100:"#f8bbd0",200:"#f48fb1",300:"#f06292",400:"#ec407a",500:"#e91e63",600:"#d81b60",700:"#c2185b",800:"#ad1457",900:"#880e4f",A100:"#ff80ab",A200:"#ff4081",A400:"#f50057",A700:"#c51162"}}}]);