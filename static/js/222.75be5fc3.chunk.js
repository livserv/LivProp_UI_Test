"use strict";(self.webpackChunklib_prop_ui=self.webpackChunklib_prop_ui||[]).push([[222],{18678:(e,t,o)=>{o.d(t,{Z:()=>s});var n=o(93701),r=o(46417);function s(e){let{children:t,type:o}=e;return(0,r.jsx)(n.E.div,{whileHover:{scale:1},whileTap:{scale:.9},children:t})}s.defaultProps={type:"scale"}},6505:(e,t,o)=>{o.d(t,{Z:()=>u});var n=o(47313),r=o(19860),s=o(73428),a=o(54641),i=o(61113),l=o(93405),d=o(46417);const c={p:2.5,"& .MuiCardHeader-action":{m:"0px auto",alignSelf:"center"}},u=(0,n.forwardRef)(((e,t)=>{let{border:o=!0,boxShadow:n,children:u,content:h=!0,contentSX:p={},darkTitle:m,elevation:x,secondary:g,shadow:b,sx:f={},title:y,..._}=e;const C=(0,r.Z)();return n="dark"===C.palette.mode?n||!0:n,(0,d.jsxs)(s.Z,{elevation:x||0,ref:t,..._,sx:{border:o?"1px solid":"none",borderRadius:2,borderColor:"dark"===C.palette.mode?C.palette.divider:C.palette.grey.A800,boxShadow:!n||o&&"dark"!==C.palette.mode?"inherit":b||C.customShadows.z1,":hover":{boxShadow:n?b||C.customShadows.z1:"inherit"},"& pre":{m:0,p:"16px !important",fontFamily:C.typography.fontFamily,fontSize:"0.75rem"},...f},children:[!m&&y&&(0,d.jsx)(a.Z,{sx:c,titleTypographyProps:{variant:"subtitle1"},title:y,action:g}),m&&y&&(0,d.jsx)(a.Z,{sx:c,title:(0,d.jsx)(i.Z,{variant:"h3",children:y}),action:g}),h&&(0,d.jsx)(l.Z,{sx:p,children:u}),!h&&u]})}))},94100:(e,t,o)=>{o.d(t,{Z:()=>i});var n=o(47313),r=o(31095),s=o(85281),a=o(46417);const i=function(e){let{onClick:t,disabled:o,isLoading:i,children:l,...d}=e;const[c,u]=n.useState(i);return(0,a.jsxs)(r.Z,{onClick:e=>{if(!t)return;const o=t(e);"function"===typeof(null===o||void 0===o?void 0:o.finally)&&(u(!0),o.finally((()=>u(!1))))},disabled:c||i||o,...d,children:[(c||i)&&(0,a.jsx)(s.Z,{size:16,color:"primary",style:{marginRight:"10px"}}),l]})}},88222:(e,t,o)=>{o.r(t),o.d(t,{default:()=>E});var n=o(47313),r=o(41806),s=o(9019),a=o(19536),i=o(61113),l=o(42832),d=o(23306),c=o(55685),u=o(83929),h=o(74268),p=o(44758),m=o(15480),x=o(46676),g=o(24977),b=o(6505),f=o(18678),y=o(969),_=o(45960),C=o(94100),S=o(25151),w=o(46417);const v={margin:{xs:2.5,md:3},"& > *":{flexGrow:1,flexBasis:"50%"}},j={leadCaptureType:"flow",leadCaptureFormMode:"count",showFormAfterChats:3};const E=function(){const[e,t]=(0,y.g)(),{botSettings:o=j}=t;return(0,w.jsx)(b.Z,{sx:v,content:!1,border:!1,boxShadow:!0,children:(0,w.jsx)(r.Z,{sx:{p:{xs:2,sm:3,md:4,xl:5}},children:(0,w.jsx)(g.J9,{initialValues:o,onSubmit:async(t,o)=>{let{setErrors:n,setStatus:r,setSubmitting:s}=o;try{await(0,_.pb)(e,t),r({success:!1}),s(!1),(0,S.W)(!0,"Settings saved successfully!","success")}catch(a){console.error(a),(0,S.W)(!0,"Unable to save settings. Please try again later.","error"),r({success:!1}),n({submit:a.message}),s(!1)}},children:e=>(0,w.jsx)("form",{noValidate:!0,onSubmit:e.handleSubmit,children:(0,w.jsxs)(s.ZP,{container:!0,spacing:3,children:[(0,w.jsx)(P,{...e}),(0,w.jsx)(T,{...e})]})})})})})};function P(e){let{values:t,touched:o,errors:n,handleBlur:r,handleChange:x,setFieldValue:g}=e;const b="form"===t.leadCaptureType,f="form"!==t.leadCaptureType||"keyword"===t.leadCaptureFormMode;return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(s.ZP,{item:!0,xs:12,children:(0,w.jsx)(a.Z,{children:(0,w.jsx)(i.Z,{variant:"caption",children:"Lead Capture Settings"})})}),(0,w.jsx)(s.ZP,{item:!0,xs:12,md:6,children:(0,w.jsxs)(l.Z,{spacing:1,children:[(0,w.jsx)(d.Z,{htmlFor:"leadCaptureType",children:"Input Type"}),(0,w.jsxs)(c.Z,{value:t.leadCaptureType,defaultValue:"flow",name:"leadCaptureType",onChange:x,children:[(0,w.jsx)(u.Z,{value:"flow",control:(0,w.jsx)(h.Z,{}),label:"Flow"}),(0,w.jsx)(u.Z,{value:"form",control:(0,w.jsx)(h.Z,{}),label:"Form"})]})]})}),b&&(0,w.jsx)(s.ZP,{item:!0,xs:12,md:6,children:(0,w.jsxs)(l.Z,{spacing:1,children:[(0,w.jsx)(d.Z,{htmlFor:"leadCaptureFormMode",children:"When you want the form to be displayed?"}),(0,w.jsxs)(c.Z,{value:t.leadCaptureFormMode,defaultValue:"count",id:"leadCaptureFormMode",name:"leadCaptureFormMode",onChange:x,children:[(0,w.jsx)(u.Z,{value:"keyword",control:(0,w.jsx)(h.Z,{}),label:"Show form when the keyword matches"}),(0,w.jsx)(u.Z,{value:"count",control:(0,w.jsx)(h.Z,{}),label:(0,w.jsxs)(w.Fragment,{children:["Show form after conversations:"," ",(0,w.jsx)("input",{value:t.showFormAfterChats,maxLength:2,style:{width:"50px"},disabled:"form"!==t.leadCaptureType||t.leadCaptureFormMode&&"count"!==t.leadCaptureFormMode,onChange:e=>console.log({showFormAfterChats:Z(e.target.value,t.showFormAfterChats)})})]})})]})]})}),!b&&(0,w.jsx)(s.ZP,{item:!0,xs:12,md:6,children:(0,w.jsxs)(l.Z,{spacing:1,children:[(0,w.jsx)(d.Z,{htmlFor:"leadCaptureFlowMandatory",children:"Can user proceed without providing contact details?"}),(0,w.jsx)(u.Z,{value:"keyword",control:(0,w.jsx)(p.Z,{checked:t.leadCaptureFlowMandatory,name:"leadCaptureFlowMandatory",onChange:x}),label:"Make the input mandatory"})]})}),f&&(0,w.jsx)(s.ZP,{item:!0,xs:12,children:(0,w.jsxs)(l.Z,{spacing:1,children:[(0,w.jsx)(d.Z,{htmlFor:"phoneNumberKeywords",children:"Keywords for Phone Number Collection *"}),(0,w.jsx)(A,{name:"phoneNumberKeywords",value:t.phoneNumberKeywords||[],error:Boolean(o.phoneNumberKeywords&&n.phoneNumberKeywords),onBlur:r,onChange:g,placeholder:"Type keyword and press enter to add more...",inputProps:{maxLength:25}}),o.phoneNumberKeywords&&n.phoneNumberKeywords&&(0,w.jsx)(m.Z,{error:!0,id:"helper-text-email-keywords",children:n.phoneNumberKeywords})]})}),f&&(0,w.jsx)(s.ZP,{item:!0,xs:12,children:(0,w.jsxs)(l.Z,{spacing:1,children:[(0,w.jsx)(d.Z,{htmlFor:"emailKeywords",children:"Keywords for Email Address Collection *"}),(0,w.jsx)(A,{name:"emailKeywords",value:t.emailKeywords||[],error:Boolean(o.emailKeywords&&n.emailKeywords),onBlur:r,onChange:g,placeholder:"Type keyword and press enter to add more...",inputProps:{maxLength:25}}),o.emailKeywords&&n.emailKeywords&&(0,w.jsx)(m.Z,{error:!0,id:"helper-text-email-keywords",children:n.emailKeywords})]})})]})}function T(e){let{errors:t,isSubmitting:o}=e;return(0,w.jsxs)(w.Fragment,{children:[t.submit&&(0,w.jsx)(s.ZP,{item:!0,xs:12,children:(0,w.jsx)(m.Z,{error:!0,children:t.submit})}),(0,w.jsx)(s.ZP,{item:!0,xs:12,children:(0,w.jsx)(f.Z,{children:(0,w.jsx)(C.Z,{disableElevation:!0,isLoading:o,fullWidth:!0,size:"large",type:"submit",variant:"contained",color:"primary",children:"Save Settings"})})})]})}function Z(e,t){return e?isNaN(e)?t:Number(e):e}function A(e){let{id:t,name:o,value:r,onChange:s,...a}=e;const i=n.useRef(),l=e=>s(o,e);return(0,w.jsx)(x.V,{ref:i,id:t||o,name:o,addOnBlur:!0,value:r||[],onChange:l,onInputChange:e=>{e.endsWith(",")&&(r=[...r,e.substring(0,e.length-1)],l(r),i.current.value="")},...a})}},80730:(e,t,o)=>{o.d(t,{Od:()=>i,TY:()=>c,U2:()=>s,v_:()=>a});var n=o(89637),r=o(32203);async function s(e,t){return l("GET",e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}async function a(e,t){return l("POST",e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}async function i(e,t){return l("DELETE",e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}async function l(e,t,o){let{headers:n,noAuth:r,...s}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const a="POST"===e||"PUT"===e||"DELETE"===e;if(t=c(t,a?void 0:o),o=o&&"object"===typeof o&&a?JSON.stringify(o):void 0,n||(n={}),n["Content-Type"]="application/json",n.Accept="application/json",!1!==r){const e=sessionStorage.getItem("token");e&&(n.Authorization="Bearer ".concat(e))}const i=await fetch(t,{...s,headers:n,body:o,method:e}),l=await i.json();if(i.ok){const{data:e,...t}=l;return delete t.status,e&&!Object.keys(t).length?e:l}throw l.message?new Error(l.message):l}const d=(0,n.lf)(r.Hi,"/");function c(e,t){if(!e)return e;const o=t&&new URLSearchParams(t);return null!==o&&void 0!==o&&o.size&&(e.includes("?")?e+="&"+o.toString():e+="?"+o.toString()),e.startsWith("https://")?e:"".concat(d).concat(e)}},45960:(e,t,o)=>{o.d(t,{Bc:()=>a,Iz:()=>i,lz:()=>s,pb:()=>l});var n=o(80730),r=o(23509);async function s(e){const{organization:{websiteUrl:t,_id:o}}=r.tN.getState(),s={organizationId:o,websiteUrl:t,botName:e,botDesign:{botLogo:{name:"",url:""},backgroundColor:"coral",textColor:"#fff",dimensions:{heightInPixel:"500px",heightInPercent:"70%",widthInPixel:"350px",widthInPercent:"25%"},botLogoDimensions:{heightInPixel:"30px",heightInPercent:"100%",widthInPixel:"30px",widthInPercent:"100%"}}},a=await n.v_("/bot/initialize-create-bot",s),i=a._id;let{botsMap:l,botsList:d}=r.tN.getState();l={...l,[i]:a},d=[...d],d.push(a._doc),r.tN.setState({selectedBotId:i,botsMap:l,botsList:d})}async function a(e,t){let{botDesign:o}=r.tN.getState();o={...o,...t};d(await n.v_("/bot/save-bot-design",{botDesign:o},{headers:{botId:e}}))}async function i(e,t){const o=await n.v_("/bot/edit-bot-details",t);let{botsMap:s,botsList:a}=r.tN.getState();s={...s,[e]:o},a=[...a];const i=a.findIndex((t=>t._id===e));i>=0&&(a[i]=o[i]),r.tN.setState({selectedBotId:e,botsMap:s,botsList:a})}async function l(e,t){let{botSettings:o={}}=r.tN.getState();o={...o,...t};d(await n.v_("/bot/save-bot-settings",{botSettings:o},{headers:{botId:e}}))}function d(e){const t=e._id;let{botsMap:o,botsList:n}=r.tN.getState();o={...o,[t]:e},n=[...n];const s=n.findIndex((e=>e._id===t));s>=0?n[s]=e:n.push(e),r.tN.setState({selectedBotId:t,botsMap:o,botsList:n})}},969:(e,t,o)=>{o.d(t,{g:()=>r});var n=o(23509);function r(e){const t=(0,n.tN)((e=>e.selectedBotId)),o=(0,n.tN)((o=>o.botsMap[e||t]));return[e||t,o]}},89637:(e,t,o)=>{function n(e,t){return e.replace(new RegExp("".concat(r(t),"+$")),"")}function r(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function s(e){const t=new Date(e),o=t.getDate(),n=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][t.getMonth()],r=t.getFullYear();return"".concat(n," ").concat(o,", ").concat(r)}o.d(t,{lf:()=>n,p6:()=>s})},32203:(e,t,o)=>{o.d(t,{Hi:()=>n,LC:()=>i,lB:()=>r,rn:()=>a,yu:()=>s});const n="https://devbackend.livhousing.com",r={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_NGROK_BACKEND_URL:"https://60f1-203-192-224-75.ngrok-free.app",REACT_APP_VERSION:"1",REACT_APP_BACKEND_URL:"https://devbackend.livhousing.com"}.REACT_APP_IP_DATA_API_KEY,s={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_NGROK_BACKEND_URL:"https://60f1-203-192-224-75.ngrok-free.app",REACT_APP_VERSION:"1",REACT_APP_BACKEND_URL:"https://devbackend.livhousing.com"}.TRAINING_MEDIA_MAXSIZE,a={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_NGROK_BACKEND_URL:"https://60f1-203-192-224-75.ngrok-free.app",REACT_APP_VERSION:"1",REACT_APP_BACKEND_URL:"https://devbackend.livhousing.com"}.CONVERSATION_MEDIA_MAXSIZE,i="https://60f1-203-192-224-75.ngrok-free.app"}}]);