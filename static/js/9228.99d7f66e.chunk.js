"use strict";(self.webpackChunklib_prop_ui=self.webpackChunklib_prop_ui||[]).push([[9228],{89228:(e,t,i)=>{i.r(t),i.d(t,{default:()=>N});var n=i(9950),r=i(16491),o=i(60899),l=i(82053),a=i(3788),s=i(93230),c=i(2660),d=i(10226),h=i(29714),u=i(61467),x=i(24516),m=i(63464),g=i(40033),p=i(79739),A=i(57988),f=i(7999),v=i(25333),j=i(63359),b=i(85967),w=i(74745),C=i(80417),y=i(79046),S=i(33092),k=i(89262),M=i(12504),D=i(59254),I=i(33340),L=i(58178),q=i(32829),R=i(93383),V=i(70855),z=i(77382),W=i(6716),_=i(44414);const E=()=>h.Yj().required("This field is required"),F=h.Ik().shape({question:E(),content:E()});const N=function(){const[e,t]=n.useState(!1),i=n.useCallback((()=>t((e=>!e))),[]);return n.useEffect((()=>{(0,z.bZ)().catch((e=>console.error("Error fetching organization details:",e)))}),[]),(0,_.jsx)(r.A,{children:(0,_.jsxs)(o.Ay,{container:!0,item:!0,xs:12,children:[(0,_.jsx)(l.A,{variant:"h5",children:"FAQ / Knowledge base"}),!e&&(0,_.jsx)(o.Ay,{item:!0,sx:{marginLeft:"60px"},children:(0,_.jsx)(U,{onAddClick:i})}),e&&(0,_.jsx)(o.Ay,{item:!0,xs:12,mt:1,children:(0,_.jsx)(o.Ay,{item:!0,xs:12,lg:8,mt:5,children:(0,_.jsx)(O,{onCancel:i})})}),(0,_.jsx)(o.Ay,{item:!0,xs:12,mt:5,children:(0,_.jsx)(T,{})})]})})};function T(){const[e,t]=(0,V.G)(),i=(0,I.nc)((t=>{var i;return null===(i=t.kbDocs)||void 0===i?void 0:i[e]}));return null===i||void 0===i?void 0:i.map(((e,i)=>(0,_.jsx)(B,{index:i,document:e,trainingMedia:t.trainingMedia},e._id)))}function B(e){let{document:t,index:i,trainingMedia:r}=e;const[o,l]=n.useState(!1);return o?(0,_.jsx)(O,{document:t,onCancel:l}):(0,_.jsx)(H,{index:i,document:t,trainingMedia:r,onEdit:l})}function H(e){let{document:t,index:i,trainingMedia:r,onEdit:a}=e;const s=n.useCallback((()=>a(!0)),[a]);return(0,_.jsxs)(o.Ay,{container:!0,mt:1,children:[(0,_.jsxs)(o.Ay,{item:!0,children:[(0,_.jsxs)(l.A,{variant:"h5",children:["Q",i+1," . ",t.question]}),(0,_.jsxs)(l.A,{variant:"body2",children:[(0,_.jsx)("b",{children:"Ans . "})," ",t.content]}),t.sourceDocument&&(null===r||void 0===r?void 0:r.length)>0&&(0,_.jsx)(K,{document:t,trainingMedia:r})]}),(0,_.jsxs)(o.Ay,{xs:12,item:!0,display:"flex",justifyContent:"flex-end",children:[(0,_.jsx)(v.A,{size:"small",sx:{color:j.A[500]},onClick:s,children:(0,_.jsx)(f.A,{})}),(0,_.jsx)(P,{documentId:t._id})]}),(0,_.jsx)(w.A,{xs:12,sx:{width:"100%",borderColor:"#b6abab"}})]})}function K(e){let{document:t,trainingMedia:i}=e;const r=t.sourceDocument,o=n.useMemo((()=>{const e=i.filter((e=>e.docId===r))[0];if(!e)return e;const t=decodeURIComponent(e.url.substring(e.url.lastIndexOf("/")+1));return{...e,fileName:t}}),[r,i]);return o?(0,_.jsxs)(l.A,{variant:"body2",children:[(0,_.jsx)("b",{children:"Source Document:"})," ",(0,_.jsxs)("a",{href:o.url,rel:"noreferrer",target:"_blank",style:{cursor:"pointer"},children:[o.fileName,o.name?" ( ".concat(o.name," )"):""]})]}):null}function O(e){let{document:t={},onCancel:i}=e;const r=n.useCallback((()=>i(!1)),[i]);return(0,_.jsx)(u.l1,{initialValues:t,validationSchema:F,onSubmit:async(e,t)=>{let{setStatus:i,setSubmitting:n}=t;try{await(0,z.Mk)(e),i({success:!1}),n(!1),r(),(0,L.i)(!0,"Content added successfully!","success")}catch(o){console.error(o),(0,L.i)(!0,"Error occurred while trying to save content.","error")}},children:e=>{let{values:t,errors:i,handleChange:n,touched:l,isSubmitting:h,handleSubmit:u}=e;return(0,_.jsxs)("form",{noValidate:!0,onSubmit:u,children:[(0,_.jsxs)(o.Ay,{item:!0,xs:12,mt:5,children:[(0,_.jsx)(a.A,{htmlFor:"question",children:"Question"}),(0,_.jsxs)(s.A,{spacing:2,mb:3,children:[(0,_.jsx)(c.A,{multiline:!0,fullWidth:!0,id:"question",name:"question",value:t.question,onChange:n,placeholder:"Please enter the question"}),l.question&&i.question&&(0,_.jsx)(x.A,{error:!0,id:"helper-text-message-placeholder",children:i.question})]}),(0,_.jsx)(a.A,{htmlFor:"content",children:"Answer"}),(0,_.jsxs)(s.A,{spacing:2,mb:3,children:[(0,_.jsx)(c.A,{multiline:!0,rows:6,fullWidth:!0,id:"content",name:"content",value:t.content,onChange:n,placeholder:"Please enter the answer"}),l.content&&i.content&&(0,_.jsx)(x.A,{error:!0,id:"helper-text-message-placeholder",children:i.content})]})]}),(0,_.jsx)(o.Ay,{item:!0,xs:12,display:"flex",justifyContent:"flex-end",children:(0,_.jsxs)(s.A,{spacing:2,direction:"row",children:[(0,_.jsx)(d.A,{variant:"outlined",onClick:r,children:"Cancel"}),(0,_.jsx)(q.A,{children:(0,_.jsx)(R.A,{isLoading:h,color:"primary",size:"large",type:"submit",variant:"contained",children:"Save"})})]})})]})}})}const Q=(0,D.Ay)(C.A)((e=>{let{theme:t}=e;return{position:"fixed","#trainingDocumentsSpeedDial &":{"&.MuiSpeedDial-directionDown, &.MuiSpeedDial-directionRight":{left:"auto",right:t.spacing(2)},"&.MuiSpeedDial-directionUp, &.MuiSpeedDial-directionLeft":{right:"auto",left:t.spacing(2)}}}}));function U(e){let{onAddClick:t}=e;const[i,r]=n.useState(!1);return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsxs)(Q,{ariaLabel:"Knowledge base options",direction:"down",sx:{position:"absolute",top:70,right:16},icon:(0,_.jsx)(y.A,{}),children:[(0,_.jsx)(S.A,{icon:(0,_.jsx)(k.A,{}),tooltipTitle:"Add Question & Answer",onClick:t}),(0,_.jsx)(S.A,{icon:(0,_.jsx)(M.A,{}),tooltipTitle:"Upload training document (.csv,.pdf,.doc,.docx,.txt)",onClick:()=>r(!0)})]}),i&&(0,_.jsx)(W.A,{isOpen:i,toggleOpen:r})]})}function P(e){let{documentId:t}=e;const[i,r]=n.useState(!1),o=()=>r((e=>!e)),a=n.useCallback((async()=>{await(0,z.CA)(t),r(!1),(0,L.i)(!0,"Deleted response successfully","success")}),[t]);return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(v.A,{sx:{color:b.A[500]},onClick:o,children:(0,_.jsx)(A.A,{})}),i&&(0,_.jsxs)(m.A,{open:i,onClose:o,children:[(0,_.jsx)(g.A,{id:"delete-confirm-dialog-title",children:(0,_.jsx)(l.A,{gutterBottom:!0,children:"Are sure you want to delete the response ?"})}),(0,_.jsxs)(p.A,{children:[(0,_.jsx)(d.A,{onClick:o,children:"Cancel"}),(0,_.jsx)(q.A,{children:(0,_.jsx)(R.A,{color:"primary",type:"submit",variant:"contained",onClick:a,children:"Delete"})})]})]})]})}},7999:(e,t,i)=>{var n=i(24994);t.A=void 0;var r=n(i(79526)),o=i(44414);t.A=(0,r.default)((0,o.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit")},89262:(e,t,i)=>{var n=i(24994);t.A=void 0;var r=n(i(79526)),o=i(44414);t.A=(0,r.default)((0,o.jsx)("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm-1 4H8c-1.1 0-1.99.9-1.99 2L6 21c0 1.1.89 2 1.99 2H19c1.1 0 2-.9 2-2V11zM8 21V7h6v5h5v9z"}),"FileCopyOutlined")},74745:(e,t,i)=>{i.d(t,{A:()=>A});var n=i(98587),r=i(58168),o=i(9950),l=i(72004),a=i(74061),s=i(99269),c=i(59254),d=i(48283),h=i(40777),u=i(44414);const x=["absolute","children","className","component","flexItem","light","orientation","role","textAlign","variant"],m=(0,c.Ay)("div",{name:"MuiDivider",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:i}=e;return[t.root,i.absolute&&t.absolute,t[i.variant],i.light&&t.light,"vertical"===i.orientation&&t.vertical,i.flexItem&&t.flexItem,i.children&&t.withChildren,i.children&&"vertical"===i.orientation&&t.withChildrenVertical,"right"===i.textAlign&&"vertical"!==i.orientation&&t.textAlignRight,"left"===i.textAlign&&"vertical"!==i.orientation&&t.textAlignLeft]}})((e=>{let{theme:t,ownerState:i}=e;return(0,r.A)({margin:0,flexShrink:0,borderWidth:0,borderStyle:"solid",borderColor:(t.vars||t).palette.divider,borderBottomWidth:"thin"},i.absolute&&{position:"absolute",bottom:0,left:0,width:"100%"},i.light&&{borderColor:t.vars?"rgba(".concat(t.vars.palette.dividerChannel," / 0.08)"):(0,s.X4)(t.palette.divider,.08)},"inset"===i.variant&&{marginLeft:72},"middle"===i.variant&&"horizontal"===i.orientation&&{marginLeft:t.spacing(2),marginRight:t.spacing(2)},"middle"===i.variant&&"vertical"===i.orientation&&{marginTop:t.spacing(1),marginBottom:t.spacing(1)},"vertical"===i.orientation&&{height:"100%",borderBottomWidth:0,borderRightWidth:"thin"},i.flexItem&&{alignSelf:"stretch",height:"auto"})}),(e=>{let{ownerState:t}=e;return(0,r.A)({},t.children&&{display:"flex",whiteSpace:"nowrap",textAlign:"center",border:0,"&::before, &::after":{content:'""',alignSelf:"center"}})}),(e=>{let{theme:t,ownerState:i}=e;return(0,r.A)({},i.children&&"vertical"!==i.orientation&&{"&::before, &::after":{width:"100%",borderTop:"thin solid ".concat((t.vars||t).palette.divider)}})}),(e=>{let{theme:t,ownerState:i}=e;return(0,r.A)({},i.children&&"vertical"===i.orientation&&{flexDirection:"column","&::before, &::after":{height:"100%",borderLeft:"thin solid ".concat((t.vars||t).palette.divider)}})}),(e=>{let{ownerState:t}=e;return(0,r.A)({},"right"===t.textAlign&&"vertical"!==t.orientation&&{"&::before":{width:"90%"},"&::after":{width:"10%"}},"left"===t.textAlign&&"vertical"!==t.orientation&&{"&::before":{width:"10%"},"&::after":{width:"90%"}})})),g=(0,c.Ay)("span",{name:"MuiDivider",slot:"Wrapper",overridesResolver:(e,t)=>{const{ownerState:i}=e;return[t.wrapper,"vertical"===i.orientation&&t.wrapperVertical]}})((e=>{let{theme:t,ownerState:i}=e;return(0,r.A)({display:"inline-block",paddingLeft:"calc(".concat(t.spacing(1)," * 1.2)"),paddingRight:"calc(".concat(t.spacing(1)," * 1.2)")},"vertical"===i.orientation&&{paddingTop:"calc(".concat(t.spacing(1)," * 1.2)"),paddingBottom:"calc(".concat(t.spacing(1)," * 1.2)")})})),p=o.forwardRef((function(e,t){const i=(0,d.A)({props:e,name:"MuiDivider"}),{absolute:o=!1,children:s,className:c,component:p=(s?"div":"hr"),flexItem:A=!1,light:f=!1,orientation:v="horizontal",role:j=("hr"!==p?"separator":void 0),textAlign:b="center",variant:w="fullWidth"}=i,C=(0,n.A)(i,x),y=(0,r.A)({},i,{absolute:o,component:p,flexItem:A,light:f,orientation:v,role:j,textAlign:b,variant:w}),S=(e=>{const{absolute:t,children:i,classes:n,flexItem:r,light:o,orientation:l,textAlign:s,variant:c}=e,d={root:["root",t&&"absolute",c,o&&"light","vertical"===l&&"vertical",r&&"flexItem",i&&"withChildren",i&&"vertical"===l&&"withChildrenVertical","right"===s&&"vertical"!==l&&"textAlignRight","left"===s&&"vertical"!==l&&"textAlignLeft"],wrapper:["wrapper","vertical"===l&&"wrapperVertical"]};return(0,a.A)(d,h.K,n)})(y);return(0,u.jsx)(m,(0,r.A)({as:p,className:(0,l.A)(S.root,c),role:j,ref:t,ownerState:y},C,{children:s?(0,u.jsx)(g,{className:S.wrapper,ownerState:y,children:s}):null}))}));p.muiSkipListHighlight=!0;const A=p},40777:(e,t,i)=>{i.d(t,{A:()=>l,K:()=>o});var n=i(80863),r=i(68483);function o(e){return(0,r.Ay)("MuiDivider",e)}const l=(0,n.A)("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"])},85967:(e,t,i)=>{i.d(t,{A:()=>n});const n={50:"#fce4ec",100:"#f8bbd0",200:"#f48fb1",300:"#f06292",400:"#ec407a",500:"#e91e63",600:"#d81b60",700:"#c2185b",800:"#ad1457",900:"#880e4f",A100:"#ff80ab",A200:"#ff4081",A400:"#f50057",A700:"#c51162"}}}]);