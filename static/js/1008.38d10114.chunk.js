"use strict";(self.webpackChunklib_prop_ui=self.webpackChunklib_prop_ui||[]).push([[1008],{47014:(e,t,o)=>{o.d(t,{A:()=>g});var n=o(9950),r=o(17119),i=o(15820),l=o(4709),s=o(8478),a=o(28891),d=o(78023),c=(o(13938),o(44414));const u={window:{spacingCorner:"0px",spacingBottom:"7px"},launcher:{spacingCorner:"0px",spacingBottom:"7px"}},h=["lead","options","stop"];const g=function(e){var t,o;const{botDetails:r,botDesign:a,startupFlow:g,onReceiveChatResponse:m,autoLaunch:p,recipientId:y,origin:B,onCallback:L,optionsRenderer:w}=e,[S,F]=n.useState(p||!1),[k,I]=n.useState(a),[M,T]=n.useState(!1),[z,W]=n.useState(r),[P,D]=n.useState(g),[N,U]=n.useState(null===g||void 0===g?void 0:g.messages),[R,V]=n.useState(y),[H,E]=n.useState([]),[G,_]=n.useState(),[q,$]=n.useState(),O=n.useRef({autoLaunch:p});O.current.recipientId=R,O.current.bot=z,O.current.chatFlowId=null===P||void 0===P?void 0:P.flowId,O.current.startupMessages=N,O.current.origin=B,O.current.preferredLanguage=q;const J=n.useCallback((e=>{l.eB(e),$(e)}),[]);O.current.setAndBroadcastHistory=n.useCallback((e=>{var t;"function"===typeof e?E((t=>{var o;const n=e(t);return A(n,O.current.origin,null===(o=O.current.bot)||void 0===o?void 0:o._id,!0),n})):(E(e),A(e,O.current.origin,null===(t=O.current.bot)||void 0===t?void 0:t._id,!0))}),[]),O.current.onCallback=n.useCallback(((e,t)=>{"set-visitor-id"===e&&t.recipientId&&V(t.recipientId),null===L||void 0===L||L(e,t)}),[L]),O.current.history=H,O.current.showBot=S,O.current.design=k,O.current.locationDetails=G,O.current.onReceiveChatResponse=m,O.current.isLoadedInConsole=!!m,n.useEffect((()=>{W(r)}),[r]),n.useEffect((()=>{var e;const{updateContact:t,bot:o}=O.current;D(g),null!==g&&void 0!==g&&null!==(e=g.messages)&&void 0!==e&&e.length?U(b([...g.messages],{updateContact:t,botSettings:o.botSettings})):U(!1)}),[g]),n.useEffect((()=>{if(z&&!O.current.isLoadedInConsole)return function(e){e.origin||(e.origin=null);e.botId||(e.botId=null);try{const{origin:t,botId:o}=e;return j=new BroadcastChannel("lp_web_chat"),j.addEventListener("message",C(e)),j.postMessage({action:"GetConversationId",origin:t,botId:o}),()=>{j&&(j.removeEventListener("message",C),j.close(),j=null)}}catch(t){console.error("Unable to start session sharing:",t)}}({botId:z._id,origin:O.current.origin,onHistoryChange:e=>{var t;(null!==e&&void 0!==e&&e.length||null!==(t=O.current.history)&&void 0!==t&&t.length)&&E(e)},getHistory:()=>O.current.history})}),[z]),n.useEffect((()=>{I(a)}),[a]),n.useEffect((()=>{$(l.cO());const{updateContact:e,bot:t,recipientId:o,autoLaunch:n,setAndBroadcastHistory:r,startupMessages:i}=O.current;t?v(t,o,e,{autoLaunch:n,startupMessages:b(i,{updateContact:e,botSettings:t.botSettings})}).then(r):async function(e){try{const t=new URLSearchParams(window.location.search),o={authToken:t.get("token"),recipientId:e},{startupFlow:n,...r}=await s.Jt("/bot/get-bot-details-by-auth-token",o,{noAuth:!0});return{startupFlow:n,bot:r}}catch(t){console.log("Failed to init chat:-",t)}}(o).then((t=>{let{bot:i,startupFlow:l}=t;W(i),D(l);const s=b(null===l||void 0===l?void 0:l.messages,{updateContact:e,botSettings:i.botSettings});U(s);const{design:a,isLoadedInConsole:c}=O.current;!a&&i.botDesign&&I((0,d.Y)(i.botDesign,c?void 0:u)),v(i,o,e,{autoLaunch:n,startupMessages:b(s,{updateContact:e,botSettings:i.botSettings})}).then(r)})),l.a().then(_)}),[]);const Y=n.useCallback(((e,t)=>{var o,n,r,i;let{showBot:l,design:s,onCallback:a}=O.current;l=e?!l:l,null===a||void 0===a||a("windowToggle",{state:l,design:l?{width:null===s||void 0===s||null===(o=s.window)||void 0===o?void 0:o.width,height:null===s||void 0===s||null===(n=s.window)||void 0===n?void 0:n.height,spacingBottom:null===s||void 0===s||null===(r=s.window)||void 0===r?void 0:r.spacingBottom,spacingCorner:null===s||void 0===s||null===(i=s.window)||void 0===i?void 0:i.spacingCorner}:t})}),[]),Q=n.useCallback((async e=>{var t;null!==(t=O.current.history)&&void 0!==t&&t.length||setTimeout((()=>{var e;if(null!==(e=O.current.startupMessages)&&void 0!==e&&e.length)return void O.current.setAndBroadcastHistory((e=>e.concat(...O.current.startupMessages)));const t={role:"assistant",type:"text",content:"Hello, greetings for the day, how may I assist you?"};O.current.setAndBroadcastHistory((e=>e?e.concat(t):[t]))}),e||1700)}),[]),K=n.useCallback((()=>{Y(!0),F((e=>!e)),T(!0),setTimeout((()=>T(!1)),1e3),Q()}),[Y,Q]);n.useLayoutEffect((()=>{k&&Y(!1,!0)}),[k,Y]);const X=n.useCallback((async e=>function(e,t){var o;const{updateContact:n,onReceiveChatResponse:r,bot:i,locationDetails:a,onCallback:d,recipientId:c,history:u,chatFlowId:h,preferredLanguage:g}=t,{flowId:x,flowType:m}=(null===u||void 0===u||null===(o=u[u.length-1])||void 0===o?void 0:o.media)||{};"string"===typeof e&&x&&(e={method:"flow-response",type:m,flowId:x,answer:e});return async function(e,t,o,n){let{onReceiveChatResponse:r,updateContact:i,onCallback:a,recipientId:d,chatFlowId:c,language:u}=o;const h=l.Db(),{_id:g,organizationId:x,botSettings:m}=t,p={userQuery:e,recipientDetails:{recipientId:d,conversationId:h,language:u,...n},chatFlowId:c};r&&(p.testMode=!0);try{const e=await s.bE(`/bot/${x}/${g}/chat`,p,{noAuth:!0});return null===r||void 0===r||r(e),function(e,t){let{updateContact:o,botSettings:n,onCallback:r}=t;const{chatRefId:i,recipientId:s,messages:a}=e;return l.d6(i),null===r||void 0===r||r("set-visitor-id",{recipientId:s}),b(a,{updateContact:o,botSettings:n})}(e,{updateContact:i,botSettings:m,onCallback:a})}catch(v){return[{role:"assistant",type:"text",content:v.message||"Unknown Server error"}]}}(e,i,{onReceiveChatResponse:r,updateContact:n,onCallback:d,recipientId:c,chatFlowId:h,language:g},a)}(e,O.current)),[]);O.current.updateContact=n.useCallback((async e=>{const t=await X(e);O.current.setAndBroadcastHistory((e=>e.filter((e=>!h.includes(e.type))).concat(...t)))}),[X]);const Z=n.useCallback((()=>{O.current.setAndBroadcastHistory([]),l.oy(),delete O.current.history,Q(700)}),[Q]);if(!z||!G)return null;let ee="hide-chat";S&&M?ee="opening":S&&!M?ee="show-chat":!S&&M&&(ee="closing"),ee+="bottomLeft"===(null===k||void 0===k||null===(t=k.window)||void 0===t?void 0:t.align)?" bottom-left ":" bottom-right ",m&&(ee+=" test-console");const te=H&&h.includes(null===(o=H[H.length-1])||void 0===o?void 0:o.type);return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(f,{design:k}),(0,c.jsxs)("div",{className:"chat-handler "+ee,children:[S&&!!z&&(0,c.jsx)(i.A,{botDesign:k,messages:H,showTime:!0,onUserMessage:X,disabledMessage:te,onHistoryChange:O.current.setAndBroadcastHistory,onClear:Z,onHide:K,onCallback:O.current.onCallback,optionsRenderer:w,language:q,setLanguage:J}),!S&&!M&&(0,c.jsx)(x,{design:k,onToggle:K})]})]})};function x(e){let{design:t,onToggle:o}=e;const{launcher:{launcherType:n,buttonLogoUrl:r,buttonOnMobile:i,barText:l,fontSize:s,spacingCorner:d,spacingBottom:u}={},header:{bgColor:h,secBgColor:g,fontColor:x}={},window:{fontFamily:b,align:v}={}}=t||{},j="bottomLeft"===v,C={bottom:u,[j?"left":"right"]:d};return"icon"===n||i?(0,c.jsxs)("div",{id:"lp-launcher",className:"lp-launcher button"+(r?"":" bordered"),onClick:o,style:{borderColor:h,color:x,background:r?"transparent":"linear-gradient(to right,"+h+", "+g+")",verticalAlign:"middle",padding:r?void 0:"16px",display:"flex",...C},children:[(0,c.jsx)(p,{design:t,isLeft:j}),r&&(0,c.jsx)("img",{src:r,alt:"Live Chat"}),!r&&a.Or]}):"expand"===n?(0,c.jsx)(m,{isLeft:j,color:x,style:C,bgColor:h,secBgColor:g,imageUrl:r,chatIcon:a.Or,barText:l,fontSize:s,onClick:o}):(0,c.jsxs)("div",{id:"lp-launcher",className:"lp-launcher bar",onClick:o,style:{background:"linear-gradient(to right, "+h+", "+g+")",color:x,fontFamily:b,...C},children:[a.Or,(0,c.jsx)("span",{children:l||"Live Chat"})]})}function m(e){let{isLeft:t,bgColor:o,secBgColor:r,imageUrl:i,chatIcon:l,barText:s="Live Chat",fontSize:a,color:d,autoAnimate:u=!0,style:h,onClick:g}=e;const x=t?"bottom-left":"bottom-right",m={backgroundColor:o},p={backgroundImage:`linear-gradient(90deg, ${o}, ${r})`},b=n.useRef();return n.useEffect((()=>{if(u){const e=setInterval((()=>{var e;null===(e=b.current)||void 0===e||e.classList.remove("bar-hide"),setTimeout((()=>{var e;return null===(e=b.current)||void 0===e?void 0:e.classList.add("bar-hide")}),7e3)}),35e3);return()=>clearInterval(e)}}),[u]),(0,c.jsxs)("div",{className:`lp-launcher expand-button ${x}`,onClick:g,style:h,children:[(0,c.jsx)("div",{ref:b,className:"text-container bar-hide",style:p,children:(0,c.jsx)("div",{className:"bar-text",style:{minWidth:"150px",fontSize:a,color:d},children:(0,c.jsxs)("p",{children:["Hi there, ",(0,c.jsx)("img",{draggable:!1,className:"chat-hand",alt:"\ud83d\udc4b",src:"https://cwc.livserv.in/uploads/Templates/cwc_trend1/hand.png"})," We are online!"]})})}),(0,c.jsx)("div",{className:"image-container",style:m,children:(0,c.jsxs)("div",{className:"image-sub-container",children:[i&&(0,c.jsx)("img",{src:i,alt:s}),!i&&l]})})]})}function p(e){let{text:t="We are Online!",onHide:o,design:r,isLeft:i}=e;const l=function(e,t){let{spacingCorner:o,spacingBottom:n}=(null===e||void 0===e?void 0:e.launcher)||{};if(o=parseFloat(o)||void 0,n=parseFloat(n)||void 0,o&&(o+=5),n&&(n+=75),o||n)return{bottom:n,[t?"left":"right"]:o}}(r,i),[s,a]=n.useState(!0),d=n.useCallback((e=>{e.preventDefault(),e.stopPropagation(),a(!1),null===o||void 0===o||o()}),[o]);return s?(0,c.jsxs)("div",{className:"button-tooltip",style:l,children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("img",{draggable:!1,className:"chat-hand",alt:"\ud83d\udc4b",src:"https://cwc.livserv.in/uploads/Templates/cwc_trend1/hand.png"}),(0,c.jsx)("b",{children:t}),(0,c.jsx)("br",{})]}),(0,c.jsx)("a",{className:"close-indicator",onClick:d,children:(0,c.jsx)("svg",{width:"12",height:"12",viewBox:"0 0 1792 1792",xmlns:"http://www.w3.org/2000/svg",children:(0,c.jsx)("path",{d:"M1490 1245q0 40-24 68l-136 136q-24 24-68 24t-68-28l-294-294-294 294q-24 24-68 24t-68-28l-136-136q-24-24-24-68t24-68l294-294-294-294q-24-24-24-68t24-68l136-136q24-24 68-24t68 28l294 294 294-294q24-24 68-28t68 28l136 136q28 24 24 68t-24 68l-294 294 294 294q24 24 24 68z",fill:"#fff"})})})]}):null}function b(e,t){let{updateContact:o,botSettings:n}=t;if(null===e||void 0===e||!e.length)return e;const r=e[e.length-1];return"form"===r.type&&e.push({role:"user",type:"lead",content:"",profile:r.media,updateContact:o,botSettings:n}),e}async function v(e,t,o,n){let{autoLaunch:r,startupMessages:i}=n;const{_id:a,organizationId:d,botSettings:c={}}=e,u=l.Db();if(!t||!u)return r?i||[{role:"assistant",type:"text",content:"Hello, greetings for the day, how may I assist you?"}]:[];try{const e=await s.Jt(`/bot/${d}/${a}/chat/history/${t}/${u}`,null,{noAuth:!0}),{messages:n}=e||{};return b(n,{updateContact:o,botSettings:c})}catch(h){console.error("Failed to fetch chat history:-",h)}return r?[{role:"assistant",type:"text",content:"Hello, greetings for the day, how may I assist you?"}]:[]}let j=null;function C(e){let{onHistoryChange:t,getHistory:o,origin:n=null,botId:r=null}=e;return e=>{const i=e.data||{};if(i.origin===n&&i.botId===r)try{if("GetConversationId"===i.action){A(o(),n,r)}else if("SetConversationId"===i.action){const{conversationId:e,history:o}=i;e?l.d6(e||void 0):l.oy(),o&&(null===t||void 0===t||t(o))}}catch(s){console.log("Error occurred when trying to handle session sharing:",s)}}}function A(e,t,o,n){if(j)try{const r=l.Db()||"";if(!n&&!r)return;j.postMessage({action:"SetConversationId",origin:t,botId:o,conversationId:r,history:e})}catch(r){console.error("Error sharing session:",r)}}function f(e){let{design:t}=e;const o=null===t||void 0===t?void 0:t.remoteFontLink;return o?r.createPortal((0,c.jsx)("link",{rel:"stylesheet",href:o}),document.head,"remoteFont"):null}},65387:(e,t,o)=>{o.d(t,{A:()=>d});o(9950);var n=o(70006),r=o(23266),i=o(24516),l=o(44414);const s=[{value:"gpt-3.5-turbo-0125",label:"GPT 3.5 Latest Stable (default)",description:"Latest stable model of GPT 3.5. More performant. Random minor inconsistency observed sometimes."},{value:"gpt-3.5-turbo-1106",label:"GPT 3.5 Latest Preview",description:"Latest preview model of GPT 3.5. This is more accurate than latest stable, but some times non responsive while on peek loads."},{value:"gpt-4o-mini",label:"GPT 4o Mini Latest",description:"Current Latest Mini model of GPT 4o. Cheaper and faster than GPT 4o."},{value:"gpt-4o-mini-2024-07-18",label:"GPT 4o Mini (July 2024)",description:"Mini model of GPT 4o. Cheaper and faster than GPT 4o."},{value:"gpt-4o",label:"GPT 4o Latest",description:"Latest model of GPT 4o. More capable, cheaper and faster than GPT 4 Turbo."},{value:"gpt-4o-2024-05-13",label:"GPT 4o (May 2024) (suggested)",description:"May 2024 Release of GPT 4o. More capable, cheaper and faster than GPT 4 Turbo."},{value:"gpt-4",label:"GPT 4 Turbo",description:"Latest stable model of GPT 4. More capable, but is 5 times costly then 3.5 models."},{value:"gpt-4-1106-preview",label:"GPT 4 Latest Preview",description:"Latest preview model of GPT 4. Most capable model, but is 3 times costly then 3.5 models."}],a=s.reduce(((e,t)=>(e[t.value]=t,e)),{});const d=function(e){var t;let{value:o,hideDescription:d,...c}=e;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(n.A,{...c,value:o,defaultValue:s[0].value,children:[s.map((e=>(0,l.jsx)(r.A,{value:e.value,children:e.label},e.value))),!a[o]&&(0,l.jsx)(r.A,{value:o,children:o},o)]}),!d&&(0,l.jsx)(i.A,{id:"bot-model-description",children:o?null===(t=a[o])||void 0===t?void 0:t.description:s[0].description})]})}},66941:(e,t,o)=>{o.r(t),o.d(t,{default:()=>se});var n=o(9950),r=o(8478),i=o(33340),l=o(60899),s=o(82053),a=o(47014),d=o(70855),c=o(41507),u=o(32829),h=o(93383),g=o(26092),x=o(11172),m=o(16491),p=o(74745),b=o(93230),v=o(3788),j=o(24516),C=o(2660),A=o(23114),f=o(16497),y=o(85815),B=o(10226),L=o(70006),w=o(57988),S=o(23266),F=o(29714),k=o(61467),I=o(51637),M=o(27463),T=o(44414);const z=function(e){let{value:t,onChange:o,...r}=e;const[i,l]=n.useState(!1),s=n.useRef(),a=n.useRef(),d=e=>{let{hex:t}=e;o(r.name,t)};return n.useEffect((()=>{const e=e=>{s.current&&!s.current.contains(e.target)&&l(!1)};return document.addEventListener("click",e),()=>{document.removeEventListener("click",e)}}),[]),(0,T.jsxs)("div",{ref:s,style:{position:"relative"},children:[(0,T.jsx)("div",{style:{backgroundColor:t,height:"35px",width:"35px",position:"absolute",top:"3px",left:"3px"}}),(0,T.jsx)(C.A,{inputRef:a,value:t,onChange:e=>d({hex:e.currentTarget.value}),maxLength:9,...r,type:"text",onFocus:()=>l(!0),style:{paddingLeft:"32px"}}),i&&(0,T.jsx)("div",{style:{position:"absolute",zIndex:1,top:"45px"},children:(0,T.jsx)(M.xk,{color:t,onChange:d})})]})};var W=o(98415);const P=function(e){let{value:t,onChange:o,...r}=e;const i=n.useCallback((e=>o(r.name,"yes"===e.target.value)),[r.name,o]);return(0,T.jsxs)(L.A,{...r,value:t?"yes":"no",defaultValue:t?"yes":"no",onChange:i,children:[(0,T.jsx)(S.A,{value:"no",children:"No"}),(0,T.jsx)(S.A,{value:"yes",children:"Yes"})]})};var D=o(78023),N=o(65387),U=o(59254),R=o(10939),V=o(21788);const H=()=>F.Yj().matches(/^#([0-9A-Fa-f]{3}){1,2}$/,"Is not a valid color code").required("Background color is required"),E=e=>F.Yj().matches(/^(\d+px|\d+%) (\d+px|\d+%) (\d+px|\d+%) (\d+px|\d+%|\d+%)$/,`Invalid ${e}! Use the format: 1px 2px 3px 4px not a valid code`),G=F.Ik().shape({bgColor:H(),fontColor:H(),headerPadding:E("padding"),headerLogoMargin:E("margin"),visitorBubbleBorderCurve:E("border-radius"),botBubbleBorderCurve:E("border-radius")}),_={maxWidth:{xs:600,lg:700,xl:1050},margin:{xs:2.5,md:3},"& > *":{flexGrow:1,flexBasis:"50%"}};const q=function(e){let{onChange:t}=e;const[o,r]=(0,d.G)(),a=(0,i.nc)((e=>{var t,o;return null===(t=e.organization)||void 0===t||null===(o=t.availableCredits)||void 0===o?void 0:o.toFixed(3)})),[c,g]=(0,n.useState)(!1),x=(0,i.nc)((e=>e.isSuperUser));if(!r)return null;const{botName:p,botDesign:b={}}=r,v={bgColor:b.backgroundColor||"#484a49",botBorderColor:b.botBorderColor||"#484a49",botBackgroundColor:b.botBackgroundColor||"#dfd9df",botFontColor:b.botFontColor||"#000000",visitorBorderColor:b.visitorBorderColor||"#000000",visitorBackgroundColor:b.visitorBackgroundColor||"#ffffff",visitorFontColor:b.visitorFontColor||"#000000",fontType:b.fontType||"normal-font",windowAlign:b.windowAlign||"bottomRight",fontColor:b.textColor||"#484a49",titleText:p,placeholder:"Type your message...",launcherType:"bar",messageBubbleLogo:!0,botLogo:b.botLogo||{},visitorMessageLogo:b.visitorMessageLogo||{},botMessageLogo:b.botMessageLogo||{},botChatButton:b.botChatButton||{},hideLivservBranding:b.hideLivservBranding||!1,...b},j=()=>{g(!1===c)};return(0,T.jsx)(I.A,{sx:_,content:!1,border:!1,boxShadow:!0,children:(0,T.jsx)(m.A,{sx:{p:{xs:2,sm:3,md:4,xl:5}},children:(0,T.jsx)(k.l1,{initialValues:v,validationSchema:G,onSubmit:async(e,t)=>{let{setErrors:n,setStatus:r,setSubmitting:i}=t;try{var l,s,a,d,c,u,h,g;(null===(l=e.botChatButton)||void 0===l?void 0:l.name)!==(null===(s=b.botChatButton)||void 0===s?void 0:s.name)&&(e.botChatButton=b.botChatButton),(null===(a=e.botLogo)||void 0===a?void 0:a.name)!==(null===(d=b.botLogo)||void 0===d?void 0:d.name)&&(e.botLogo=b.botLogo),(null===(c=e.visitorMessageLogo)||void 0===c?void 0:c.name)!==(null===(u=b.visitorMessageLogo)||void 0===u?void 0:u.name)&&(e.visitorMessageLogo=b.visitorMessageLogo),(null===(h=e.botMessageLogo)||void 0===h?void 0:h.name)!==(null===(g=b.botMessageLogo)||void 0===g?void 0:g.name)&&(e.botMessageLogo=b.botMessageLogo),await(0,W.jo)(o,e),r({success:!1}),i(!1)}catch(x){console.error(x),r({success:!1}),n({submit:x.message}),i(!1)}},children:e=>(0,T.jsxs)("form",{noValidate:!0,onSubmit:e.handleSubmit,children:[(0,T.jsxs)(l.Ay,{container:!0,spacing:3,children:[(0,T.jsxs)(l.Ay,{item:!0,xs:12,display:"flex",justifyContent:"center",alignItems:"center",children:["Balance : \xa0",(0,T.jsxs)(s.A,{variant:"subtitle1",color:"green",children:[a,"\xa0$"]})]}),(0,T.jsx)($,{...e}),(0,T.jsx)(ne,{...e}),(0,T.jsx)(J,{...e}),(0,T.jsx)(Y,{...e}),(0,T.jsx)(O,{...e}),(0,T.jsx)(Q,{...e}),(0,T.jsx)(l.Ay,{item:!0,xs:12,children:(0,T.jsx)(u.A,{children:(0,T.jsx)(h.A,{disableElevation:!0,fullWidth:!0,size:"large",variant:"outlined",color:"primary",onClick:j,children:"Advance settings"})})}),c&&(0,T.jsx)(Z,{...e}),c&&x&&(0,T.jsx)(ee,{...e}),c&&(0,T.jsx)(te,{...e}),(0,T.jsx)(oe,{...e})]}),(0,T.jsx)(re,{onChange:t})]})})})})};function $(e){let{values:t,touched:o,errors:n,handleBlur:r,handleChange:i}=e;return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(l.Ay,{item:!0,xs:12,children:(0,T.jsx)(p.A,{children:(0,T.jsx)(s.A,{variant:"subtitle1",children:"General Settings"})})}),(0,T.jsx)(l.Ay,{item:!0,xs:12,children:(0,T.jsxs)(b.A,{spacing:1,children:[(0,T.jsx)(v.A,{htmlFor:"botModelName",children:"Underlying GPT Model *"}),(0,T.jsx)(N.A,{id:"botModelName",value:t.botModelName,name:"botModelName",onBlur:r,onChange:i,error:Boolean(o.botModelName&&n.botModelName)}),o.botModelName&&n.botModelName&&(0,T.jsx)(j.A,{error:!0,id:"helper-text-bg-color",children:n.botModelName})]})})]})}function O(e){let{values:t,touched:o,errors:n,handleBlur:r,handleChange:i,setFieldValue:a}=e;return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(l.Ay,{item:!0,xs:12,children:(0,T.jsx)(p.A,{children:(0,T.jsx)(s.A,{variant:"subtitle1",children:"Header Settings"})})}),(0,T.jsx)(l.Ay,{item:!0,xs:12,md:4,children:(0,T.jsxs)(b.A,{spacing:1,children:[(0,T.jsx)(v.A,{htmlFor:"bgColor",children:"Background Color *"}),(0,T.jsx)(z,{id:"bgColor",type:"color",value:t.bgColor,name:"bgColor",onBlur:r,onChange:a,placeholder:"",fullWidth:!0,error:Boolean(o.bgColor&&n.bgColor)}),o.bgColor&&n.bgColor&&(0,T.jsx)(j.A,{error:!0,id:"helper-text-bg-color",children:n.bgColor})]})}),(0,T.jsx)(l.Ay,{item:!0,xs:12,md:4,children:(0,T.jsxs)(b.A,{spacing:1,children:[(0,T.jsx)(v.A,{htmlFor:"fontColor",children:"Font Color *"}),(0,T.jsx)(z,{id:"fontColor",type:"color",value:t.fontColor,name:"fontColor",onBlur:r,onChange:a,placeholder:"",fullWidth:!0,error:Boolean(o.fontColor&&n.fontColor)}),o.fontColor&&n.fontColor&&(0,T.jsx)(j.A,{error:!0,id:"helper-text-font-color",children:n.fontColor})]})}),(0,T.jsx)(l.Ay,{item:!0,xs:12,md:4,children:(0,T.jsxs)(b.A,{spacing:1,children:[(0,T.jsx)(v.A,{htmlFor:"headerFontSize",children:"Font Size"}),(0,T.jsx)(C.A,{fullWidth:!0,type:"text",id:"headerFontSize",name:"headerFontSize",defaultValue:t.headerFontSize,onChange:i,placeholder:"18px"})]})}),(0,T.jsx)(l.Ay,{item:!0,xs:12,md:6,children:(0,T.jsxs)(b.A,{spacing:1,children:[(0,T.jsx)(v.A,{htmlFor:"titleText",children:"Chat Window Title *"}),(0,T.jsx)(C.A,{fullWidth:!0,error:Boolean(o.titleText&&n.titleText),id:"titleText",value:t.titleText,name:"titleText",onBlur:r,onChange:i,placeholder:"Provide your bot title text",inputProps:{maxLength:25}}),o.titleText&&n.titleText&&(0,T.jsx)(j.A,{error:!0,id:"helper-text-bot-title",children:n.titleText})]})}),(0,T.jsx)(l.Ay,{item:!0,xs:12,md:6,children:(0,T.jsxs)(b.A,{spacing:1,children:[(0,T.jsx)(v.A,{htmlFor:"headerPadding",style:{paddingBottom:"6px"},children:"Chat Window Header Padding"}),(0,T.jsx)(C.A,{id:"headerPadding",name:"headerPadding",value:t.headerPadding,onBlur:r,onChange:i,placeholder:"padding: 2px 5px 2px 5px"}),o.headerPadding&&n.headerPadding&&(0,T.jsx)(j.A,{error:!0,id:"helper-text-bg-color",children:n.headerPadding})]})})]})}function J(e){let{values:t,touched:o,errors:n,handleBlur:r,handleChange:i}=e;return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(l.Ay,{item:!0,xs:12,children:(0,T.jsx)(p.A,{children:(0,T.jsx)(s.A,{variant:"subtitle1",children:"Composer Settings"})})}),(0,T.jsx)(l.Ay,{item:!0,xs:12,children:(0,T.jsxs)(b.A,{spacing:1,children:[(0,T.jsx)(v.A,{htmlFor:"placeholder",children:"Placeholder Text *"}),(0,T.jsx)(C.A,{fullWidth:!0,error:Boolean(o.placeholder&&n.placeholder),id:"placeholder",defaultValue:t.placeholder,name:"placeholder",onBlur:r,onChange:i,placeholder:"Type your message...",inputProps:{maxLength:30}}),o.placeholder&&n.placeholder&&(0,T.jsx)(j.A,{error:!0,id:"helper-text-message-placeholder",children:n.placeholder})]})}),(0,T.jsx)(l.Ay,{item:!0,xs:12,md:6,children:(0,T.jsxs)(b.A,{spacing:1,children:[(0,T.jsx)(v.A,{htmlFor:"fontType",children:"Font source"}),(0,T.jsxs)(A.A,{row:!0,id:"fontType",name:"fontType",defaultValue:t.fontType,onChange:i,children:[(0,T.jsx)(f.A,{value:"regular",control:(0,T.jsx)(y.A,{}),label:"Regular"}),(0,T.jsx)(f.A,{value:"remote",control:(0,T.jsx)(y.A,{}),label:"Remote"})]})]})}),(0,T.jsx)(l.Ay,{item:!0,xs:12,md:6,children:(0,T.jsxs)(b.A,{spacing:1,children:[(0,T.jsx)(v.A,{htmlFor:"fontType",children:"Font name"}),(0,T.jsx)(C.A,{fullWidth:!0,id:"fontName",name:"fontName",defaultValue:t.fontName,onChange:i,placeholder:"Provide Font Name"})]})}),"remote"==t.fontType&&(0,T.jsx)(l.Ay,{item:!0,xs:12,children:(0,T.jsxs)(b.A,{spacing:1,children:[(0,T.jsx)(v.A,{htmlFor:"remoteFontLink",children:"Paste Remote Font Link"}),(0,T.jsx)(C.A,{multiline:!0,id:"remoteFontLink",name:"remoteFontLink",defaultValue:t.remoteFontLink,onChange:i,placeholder:"Ex: https://fonts.googleapis.com"})]})})]})}function Y(e){let{values:t,handleChange:o,setFieldValue:n}=e;return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(l.Ay,{item:!0,xs:12,children:(0,T.jsx)(p.A,{children:(0,T.jsx)(s.A,{variant:"subtitle1",children:"Chat Window Settings"})})}),(0,T.jsx)(l.Ay,{item:!0,xs:12,md:4,children:(0,T.jsxs)(b.A,{spacing:1,children:[(0,T.jsx)(v.A,{id:"windowAlign",children:"Window Align"}),(0,T.jsxs)(L.A,{labelId:"windowAlign",defaultValue:t.windowAlign,name:"windowAlign",onChange:o,children:[(0,T.jsx)(S.A,{value:"bottomLeft",children:"Bottom Left"}),(0,T.jsx)(S.A,{value:"bottomRight",children:"Bottom Right"})]})]})}),(0,T.jsx)(l.Ay,{item:!0,xs:12,md:4,children:(0,T.jsxs)(b.A,{spacing:1,children:[(0,T.jsx)(v.A,{htmlFor:"paddingLeft",children:"Spacing on corner"}),(0,T.jsx)(C.A,{fullWidth:!0,type:"text",id:"paddingLeft",name:"paddingLeft",defaultValue:t.paddingLeft,onChange:o,placeholder:"0px"})]})}),(0,T.jsx)(l.Ay,{item:!0,xs:12,md:4,children:(0,T.jsxs)(b.A,{spacing:1,children:[(0,T.jsx)(v.A,{htmlFor:"paddingBottom",children:"Spacing on Bottom"}),(0,T.jsx)(C.A,{fullWidth:!0,type:"text",id:"paddingBottom",name:"paddingBottom",defaultValue:t.paddingBottom,onChange:o,placeholder:"0px"})]})}),(0,T.jsx)(l.Ay,{item:!0,xs:12,md:6,children:(0,T.jsxs)(b.A,{spacing:1,children:[(0,T.jsx)(v.A,{id:"autoLaunch",children:"Desktop proactive window"}),(0,T.jsx)(P,{value:t.autoLaunch,name:"autoLaunch",defaultValue:!1,onChange:n})]})}),(0,T.jsx)(l.Ay,{item:!0,xs:12,md:6,children:(0,T.jsxs)(b.A,{spacing:1,children:[(0,T.jsx)(v.A,{id:"mobileAutoLaunch",children:"Mobile proactive window"}),(0,T.jsx)(P,{value:t.mobileAutoLaunch,name:"mobileAutoLaunch",defaultValue:!1,onChange:n})]})}),(0,T.jsx)(l.Ay,{item:!0,xs:12,md:6,children:(0,T.jsxs)(b.A,{spacing:1,children:[(0,T.jsx)(v.A,{htmlFor:"chatWindowWidth",children:"Chat Window Width"}),(0,T.jsx)(C.A,{fullWidth:!0,type:"text",id:"chatWindowWidth",name:"chatWindowWidth",defaultValue:t.chatWindowWidth,onChange:o,placeholder:"380px"})]})}),(0,T.jsx)(l.Ay,{item:!0,xs:12,md:6,children:(0,T.jsxs)(b.A,{spacing:1,children:[(0,T.jsx)(v.A,{htmlFor:"chatWindowHeight",children:"Chat Window Height"}),(0,T.jsx)(C.A,{fullWidth:!0,type:"text",id:"chatWindowHeight",name:"chatWindowHeight",defaultValue:t.chatWindowHeight,onChange:o,placeholder:"500px"})]})})]})}function Q(e){var t;let{values:o,errors:n,handleBlur:r,touched:i,handleChange:a,setFieldValue:d}=e;return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(l.Ay,{item:!0,xs:12,children:(0,T.jsx)(p.A,{children:(0,T.jsx)(s.A,{variant:"subtitle1",children:"Header Logo Settings"})})}),(0,T.jsxs)(l.Ay,{item:!0,xs:12,md:6,children:[(0,T.jsx)(v.A,{htmlFor:"uploadHeaderLogo",children:"Upload Header Logo"}),(0,T.jsx)(X,{imageUrl:null===(t=o.botLogo)||void 0===t?void 0:t.url,imageName:"botLogo",onChange:d,bgColor:o.bgColor})]}),(0,T.jsx)(l.Ay,{item:!0,xs:12,md:6,children:(0,T.jsxs)(b.A,{spacing:1,children:[(0,T.jsx)(v.A,{htmlFor:"headerLogoMargin",children:"Header Logo Margin"}),(0,T.jsx)(C.A,{id:"headerLogoMargin",name:"headerLogoMargin",value:o.headerLogoMargin,onBlur:r,onChange:a,placeholder:"border : 1px 2px 3px 4px"}),i.headerLogoMargin&&n.headerLogoMargin&&(0,T.jsx)(j.A,{error:!0,id:"helper-text-bg-color",children:n.headerLogoMargin})]})}),(0,T.jsx)(l.Ay,{item:!0,xs:12,md:6,children:(0,T.jsxs)(b.A,{spacing:1,children:[(0,T.jsx)(v.A,{htmlFor:"logoWidth",children:"Width"}),(0,T.jsx)(C.A,{fullWidth:!0,type:"text",id:"logoWidth",name:"logoWidth",defaultValue:o.logoWidth,onChange:a,placeholder:"64px"})]})}),(0,T.jsx)(l.Ay,{item:!0,xs:12,md:6,children:(0,T.jsxs)(b.A,{spacing:1,children:[(0,T.jsx)(v.A,{htmlFor:"logoHeight",children:"Height"}),(0,T.jsx)(C.A,{fullWidth:!0,type:"text",id:"logoHeight",name:"logoHeight",defaultValue:o.logoHeight,onChange:a,placeholder:"64px"})]})})]})}const K=(0,U.Ay)("input")({clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:1,overflow:"hidden",position:"absolute",bottom:0,left:0,whiteSpace:"nowrap",width:1});function X(e){let{imageUrl:t,imageName:o,maxImageSize:r=25e4,onChange:i,bgColor:a}=e;const[d,c]=(0,n.useState)(null),[g,x]=(0,n.useState)(t),m=a&&null!==g&&void 0!==g&&g.endsWith(".png")?a:"transparent",p=!!d,v=!p&&t,j=g?"Replace image":"Select image";return(0,T.jsxs)(T.Fragment,{children:[g&&(0,T.jsx)(l.Ay,{item:!0,xs:12,children:(0,T.jsx)("img",{src:g,alt:"headerLogo",height:50,style:{backgroundColor:m}})}),(0,T.jsxs)(b.A,{spacing:2,direction:"row",children:[(0,T.jsxs)(B.A,{component:"label",variant:"contained",children:[j,(0,T.jsx)(K,{name:o,type:"file",onChange:e=>{try{const t=e.target.files[0],o=t.size;if(t.type.startsWith("image/")&&o<=r){c(t),x(URL.createObjectURL(t));const e=new FileReader;e.onloadend=()=>{x(e.result)},e.readAsDataURL(t)}else(0,V.i)(!0,`Please upload valid image file and size is <= ${r/1e3} kb`,"error"),c(null),e.target.value=null}catch(t){console.log("Error uploading the image ::",t),(0,V.i)(!0,"Please select the image file","error"),e.target.value=null}}},d?d.name:"")]}),v&&(0,T.jsx)(B.A,{variant:"outlined",onClick:async()=>{try{await(0,W.Ci)(o),i(o,null),x(null),c(null),(0,V.i)(!0,"Logo deleted successfully.","success")}catch(e){console.log("Deleting logo failed. Please try again later.",e)}},startIcon:(0,T.jsx)(w.A,{}),children:"Delete"}),p&&(0,T.jsx)(u.A,{children:(0,T.jsx)(h.A,{color:"primary",variant:"contained",startIcon:(0,T.jsx)(R.A,{}),onClick:async()=>{try{const e=await(0,W.I4)(o,d);i(o,e),c(null),(0,V.i)(!0,"Logo uploaded successfully.","success")}catch(e){console.log("File upload failed. Please try again later.",e)}},ml:5,children:"Upload"})})]}),d&&(0,T.jsxs)(s.A,{variant:"body2",children:["File Name : ",d.name," "]})]})}function Z(e){let{values:t,handleChange:o}=e;return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(l.Ay,{item:!0,xs:12,children:(0,T.jsx)(p.A,{children:(0,T.jsx)(s.A,{variant:"subtitle1",children:"Legal requirements"})})}),(0,T.jsx)(l.Ay,{item:!0,xs:12,md:12,children:(0,T.jsxs)(b.A,{spacing:1,children:[(0,T.jsx)(v.A,{htmlFor:"chatDisclaimer",children:"Chat Disclaimer"}),(0,T.jsx)(C.A,{fullWidth:!0,type:"text",id:"chatDisclaimer",name:"chatDisclaimer",defaultValue:t.chatDisclaimer,onChange:o,inputProps:{maxLength:260},placeholder:"Provide the disclaimer to be shown in chat window"})]})})]})}function ee(e){let{values:t,setFieldValue:o}=e;return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(l.Ay,{item:!0,xs:12,children:(0,T.jsx)(p.A,{children:(0,T.jsx)(s.A,{variant:"subtitle1",children:"Hide Livserv branding"})})}),(0,T.jsx)(l.Ay,{item:!0,xs:12,md:6,children:(0,T.jsxs)(b.A,{spacing:1,children:[(0,T.jsx)(v.A,{htmlFor:"hideLivservBranding",children:"Hide Livserv branding"}),(0,T.jsx)(P,{id:"hideLivservBranding",name:"hideLivservBranding",value:t.hideLivservBranding,defaultValue:!1,onChange:o})]})})]})}function te(e){var t,o;let{values:n,touched:r,errors:i,handleBlur:a,handleChange:d,setFieldValue:c}=e;return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(l.Ay,{item:!0,xs:12,children:(0,T.jsx)(p.A,{children:(0,T.jsx)(s.A,{variant:"subtitle1",children:"Message Bubble Settings"})})}),(0,T.jsx)(l.Ay,{item:!0,xs:12,md:6,children:(0,T.jsxs)(b.A,{spacing:1,children:[(0,T.jsx)(v.A,{htmlFor:"messageBubbleLogo",children:"Show Message Bubble Logo"}),(0,T.jsx)(P,{id:"messageBubbleLogo",name:"messageBubbleLogo",value:n.messageBubbleLogo,defaultValue:!1,onChange:c})]})}),(0,T.jsx)(l.Ay,{item:!0,xs:12,md:6,children:(0,T.jsxs)(b.A,{spacing:1,children:[(0,T.jsx)(v.A,{htmlFor:"fontSize",children:"Font Size"}),(0,T.jsx)(C.A,{fullWidth:!0,type:"text",id:"fontSize",name:"fontSize",defaultValue:n.fontSize,onChange:d,placeholder:"12px"})]})}),(0,T.jsx)(l.Ay,{item:!0,xs:12,children:(0,T.jsx)(s.A,{variant:"overline",display:"block",style:{color:"#9C27B0"},children:"Visitor Bubble Settings"})}),n.messageBubbleLogo&&(0,T.jsxs)(l.Ay,{item:!0,xs:12,children:[(0,T.jsx)(v.A,{htmlFor:"uploadVisitorLogo",children:"Upload Visitor Logo"}),(0,T.jsx)(X,{imageUrl:null===(t=n.visitorMessageLogo)||void 0===t?void 0:t.url,imageName:"visitorMessageLogo",maxImageSize:5e4,onChange:c})]}),(0,T.jsx)(l.Ay,{item:!0,xs:12,md:6,children:(0,T.jsxs)(b.A,{spacing:1,children:[(0,T.jsx)(v.A,{htmlFor:"visitorBackgroundColor",children:"Background Color"}),(0,T.jsx)(z,{id:"visitorBackgroundColor",type:"color",value:n.visitorBackgroundColor,name:"visitorBackgroundColor",onBlur:a,onChange:c,placeholder:"",fullWidth:!0,error:Boolean(r.visitorBackgroundColor&&i.visitorBackgroundColor)}),r.visitorBackgroundColor&&i.visitorBackgroundColor&&(0,T.jsx)(j.A,{error:!0,id:"helper-text-bg-color",children:i.visitorBackgroundColor})]})}),(0,T.jsx)(l.Ay,{item:!0,xs:12,md:6,children:(0,T.jsxs)(b.A,{spacing:1,children:[(0,T.jsx)(v.A,{htmlFor:"visitorFontColor",children:"Font Color"}),(0,T.jsx)(z,{id:"visitorFontColor",type:"color",value:n.visitorFontColor,name:"visitorFontColor",onBlur:a,onChange:c,placeholder:"",fullWidth:!0,error:Boolean(r.visitorFontColor&&i.visitorFontColor)}),r.visitorFontColor&&i.visitorFontColor&&(0,T.jsx)(j.A,{error:!0,id:"helper-text-bg-color",children:i.visitorFontColor})]})}),n.visitorLogo&&(0,T.jsx)(l.Ay,{item:!0,xs:12,children:(0,T.jsxs)(b.A,{spacing:1,children:[(0,T.jsx)(v.A,{htmlFor:"visitorLogoImage",children:"Upload Visitor Logo"}),(0,T.jsx)(C.A,{fullWidth:!0,type:"file",id:"visitorLogoImage",name:"visitorLogoImage",onChange:d,placeholder:"0px"})]})}),(0,T.jsx)(l.Ay,{item:!0,xs:12,md:6,children:(0,T.jsxs)(b.A,{spacing:1,children:[(0,T.jsx)(v.A,{htmlFor:"visitorBorderColor",children:"Border Color"}),(0,T.jsx)(z,{id:"visitorBorderColor",type:"color",value:n.visitorBorderColor,name:"visitorBorderColor",onBlur:a,onChange:c,placeholder:"",fullWidth:!0,error:Boolean(r.visitorBorderColor&&i.visitorBorderColor)}),r.visitorBorderColor&&i.visitorBorderColor&&(0,T.jsx)(j.A,{error:!0,id:"helper-text-bg-color",children:i.visitorBorderColor})]})}),(0,T.jsx)(l.Ay,{item:!0,xs:12,md:6,children:(0,T.jsxs)(b.A,{spacing:1,children:[(0,T.jsx)(v.A,{htmlFor:"visitorBubbleBorderCurve",style:{paddingBottom:"6px"},children:"Border Radius"}),(0,T.jsx)(C.A,{id:"visitorBubbleBorderCurve",name:"visitorBubbleBorderCurve",value:n.visitorBubbleBorderCurve,onBlur:a,onChange:d,placeholder:"border : 1px 2px 3px 4px"}),r.visitorBubbleBorderCurve&&i.visitorBubbleBorderCurve&&(0,T.jsx)(j.A,{error:!0,id:"helper-text-bg-color",children:i.visitorBubbleBorderCurve})]})}),(0,T.jsx)(l.Ay,{item:!0,xs:12,children:(0,T.jsx)(s.A,{variant:"overline",display:"block",style:{color:"#9C27B0"},children:"Bot Bubble Settings"})}),n.messageBubbleLogo&&(0,T.jsxs)(l.Ay,{item:!0,xs:12,children:[(0,T.jsx)(v.A,{htmlFor:"uploadBotLogo",children:"Upload Bot Logo"}),(0,T.jsx)(X,{imageUrl:null===(o=n.botMessageLogo)||void 0===o?void 0:o.url,imageName:"botMessageLogo",maxImageSize:5e4,onChange:c})]}),(0,T.jsx)(l.Ay,{item:!0,xs:12,md:6,children:(0,T.jsxs)(b.A,{spacing:1,children:[(0,T.jsx)(v.A,{htmlFor:"botBackgroundColor",children:"Background Color"}),(0,T.jsx)(z,{id:"botBackgroundColor",type:"color",value:n.botBackgroundColor,name:"botBackgroundColor",onBlur:a,onChange:c,placeholder:"",fullWidth:!0,error:Boolean(r.botBackgroundColor&&i.botBackgroundColor)}),r.botBackgroundColor&&i.botBackgroundColor&&(0,T.jsx)(j.A,{error:!0,id:"helper-text-bg-color",children:i.botBackgroundColor})]})}),(0,T.jsx)(l.Ay,{item:!0,xs:12,md:6,children:(0,T.jsxs)(b.A,{spacing:1,children:[(0,T.jsx)(v.A,{htmlFor:"botFontColor",children:"Font Color"}),(0,T.jsx)(z,{id:"botFontColor",type:"color",value:n.botFontColor,name:"botFontColor",onBlur:a,onChange:c,placeholder:"",fullWidth:!0,error:Boolean(r.botFontColor&&i.botFontColor)}),r.botFontColor&&i.botFontColor&&(0,T.jsx)(j.A,{error:!0,id:"helper-text-bg-color",children:i.botFontColor})]})}),(0,T.jsx)(l.Ay,{item:!0,xs:12,md:6,children:(0,T.jsxs)(b.A,{spacing:1,children:[(0,T.jsx)(v.A,{htmlFor:"botBorderColor",children:"Border Color"}),(0,T.jsx)(z,{id:"botBorderColor",type:"color",value:n.botBorderColor,name:"botBorderColor",onBlur:a,onChange:c,placeholder:"",fullWidth:!0,error:Boolean(r.botBorderColor&&i.botBorderColor)}),r.botBorderColor&&i.botBorderColor&&(0,T.jsx)(j.A,{error:!0,id:"helper-text-bg-color",children:i.botBorderColor})]})}),(0,T.jsx)(l.Ay,{item:!0,xs:12,md:6,children:(0,T.jsxs)(b.A,{spacing:1,children:[(0,T.jsx)(v.A,{htmlFor:"botBubbleBorderCurve",style:{paddingBottom:"6px"},children:"Border Radius"}),(0,T.jsx)(C.A,{id:"botBubbleBorderCurve",name:"botBubbleBorderCurve",value:n.botBubbleBorderCurve,onBlur:a,onChange:d,placeholder:"border : 1px 2px 3px 4px"}),r.botBubbleBorderCurve&&i.botBubbleBorderCurve&&(0,T.jsx)(j.A,{error:!0,id:"helper-text-bg-color",children:i.botBubbleBorderCurve})]})})]})}function oe(e){let{errors:t,isSubmitting:o}=e;return(0,T.jsx)(T.Fragment,{children:(0,T.jsxs)(l.Ay,{item:!0,xs:12,children:[(0,T.jsx)(j.A,{error:!0,children:t.submit}),(0,T.jsx)(u.A,{children:(0,T.jsx)(h.A,{disableElevation:!0,disabled:Boolean(t.submit),isLoading:o,fullWidth:!0,size:"large",type:"submit",variant:"contained",color:"primary",children:"Save Settings"})})]})})}function ne(e){var t;let{values:o,handleChange:n,setFieldValue:r}=e;return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(l.Ay,{item:!0,xs:12,children:(0,T.jsx)(p.A,{children:(0,T.jsx)(s.A,{variant:"subtitle1",children:"Chat Launcher Settings"})})}),(0,T.jsx)(l.Ay,{item:!0,xs:12,md:6,children:(0,T.jsxs)(b.A,{spacing:1,children:[(0,T.jsx)(v.A,{htmlFor:"messagePlaceholder",children:"Chat Launcher Type *"}),(0,T.jsxs)(A.A,{row:!0,name:"launcherType",defaultValue:o.launcherType,onChange:n,children:[(0,T.jsx)(f.A,{value:"icon",control:(0,T.jsx)(y.A,{}),label:"Button"}),(0,T.jsx)(f.A,{value:"bar",control:(0,T.jsx)(y.A,{}),label:"Bar"}),(0,T.jsx)(f.A,{value:"expand",control:(0,T.jsx)(y.A,{}),label:"Expand Button"})]})]})}),"bar"!==o.launcherType&&(0,T.jsxs)(l.Ay,{item:!0,xs:12,md:6,children:[(0,T.jsx)(v.A,{htmlFor:"uploadChatButton",children:"Upload Chat Button"}),(0,T.jsx)(X,{imageUrl:null===(t=o.botChatButton)||void 0===t?void 0:t.url,imageName:"botChatButton",onChange:r})]}),"bar"===o.launcherType&&(0,T.jsx)(l.Ay,{item:!0,xs:12,md:6,children:(0,T.jsxs)(b.A,{spacing:1,children:[(0,T.jsx)(v.A,{id:"buttonOnMobile",children:"Button on Mobile"}),(0,T.jsx)(P,{name:"buttonOnMobile",value:o.buttonOnMobile,defaultValue:!1,onChange:r})]})}),(0,T.jsx)(l.Ay,{item:!0,xs:12,md:6,children:(0,T.jsxs)(b.A,{spacing:1,children:[(0,T.jsx)(v.A,{htmlFor:"launcherSpacingCorner",children:"Spacing on corner"}),(0,T.jsx)(C.A,{fullWidth:!0,type:"text",id:"launcherSpacingCorner",name:"launcherSpacingCorner",defaultValue:o.launcherSpacingCorner,onChange:n,placeholder:"0px"})]})}),(0,T.jsx)(l.Ay,{item:!0,xs:12,md:6,children:(0,T.jsxs)(b.A,{spacing:1,children:[(0,T.jsx)(v.A,{htmlFor:"launcherSpacingBottom",children:"Spacing on Bottom"}),(0,T.jsx)(C.A,{fullWidth:!0,type:"text",id:"launcherSpacingBottom",name:"launcherSpacingBottom",defaultValue:o.launcherSpacingBottom,onChange:n,placeholder:"0px"})]})})]})}function re(e){let{onChange:t}=e;const{values:o}=(0,k.j7)();return n.useEffect((()=>{o&&t((0,D.Y)(o))}),[o,t]),null}var ie=o(34735),le=o(73225);const se=()=>{var e;const[t,o]=n.useState(),[m,p]=(0,n.useState)(!1),[b,v]=n.useState({}),[j,C]=n.useState(),[A,f]=(0,d.G)(),[y,B]=(0,n.useState)(!1),L=(0,i.nc)((e=>e.organizationId)),{isSuperUser:w}=(0,i.nc)();if(n.useEffect((()=>{L&&A&&r.Jt(`/bot/${L}/${A}/chat/startup-flow`,{recipientId:ue()}).then((e=>C(e||!1)))}),[A,L]),void 0===j)return;const S=e=>{o(e),p(!0)};return(0,T.jsxs)(l.Ay,{container:!0,rowSpacing:4.5,columnSpacing:2.75,children:[(0,T.jsx)(l.Ay,{item:!0,xs:12,sx:{mb:-2.25},children:(0,T.jsxs)(l.Ay,{container:!0,alignItems:"center",justifyContent:"space-between",children:[(0,T.jsx)(l.Ay,{item:!0,xs:6,children:(0,T.jsx)(s.A,{variant:"h5",children:"Chat Window Design"})}),(0,T.jsxs)(l.Ay,{item:!0,xs:6,container:!0,justifyContent:"flex-end",children:[(0,T.jsx)(u.A,{children:(0,T.jsx)(h.A,{isLoading:y,disabled:y,variant:"contained",color:"success",size:"large",onClick:()=>B(!0),children:"Deploy Bot"})}),(0,T.jsx)(g.A,{openPopUpDialog:y,setPopUpDialog:B,title:"Add Bot Details",children:(0,T.jsx)(x.A,{setIsDeployBot:B,botId:A,organizationId:L})})]})]})}),(0,T.jsx)(l.Ay,{item:!0,xs:12,sm:12,md:12,lg:8,children:(0,T.jsx)(q,{onChange:v})}),(0,T.jsxs)(l.Ay,{item:!0,xs:12,sm:12,md:12,lg:4,children:[(0,T.jsx)(a.A,{botDetails:f,botDesign:b,startupFlow:j,autoLaunch:null===f||void 0===f||null===(e=f.botDesign)||void 0===e?void 0:e.autoLaunch,recipientId:ue(),onReceiveChatResponse:e=>(0,c.NC)(e.organization),onCallback:ae,optionsRenderer:e=>{const{role:t,type:o,passedDocIds:n,searchQuery:r}=e||{};if("assistant"===t&&"text"===o&&(null!==n&&void 0!==n&&n.length||r))return(0,T.jsx)("span",{className:"show-icon",onClick:()=>S(e),children:(0,T.jsx)(ie.A,{})})}}),(0,T.jsx)(g.A,{openPopUpDialog:m,setPopUpDialog:p,title:"View and update Knowledge base",children:t&&(0,T.jsx)(le.A,{message:t,onClose:()=>t(null),isSuperUser:w})})]}),(0,T.jsx)(l.Ay,{item:!0,md:8,sx:{display:{sm:"none",md:"block",lg:"none"}}})]})};function ae(e,t){if("set-visitor-id"===e){const{recipientId:e}=t||{};e&&he(e)}}const de="lp-vid",ce="permanent-app-id";function ue(){try{let e=localStorage.getItem(de);return e||(e=localStorage.getItem(ce),e&&(he(e),localStorage.removeItem(ce))),e}catch(e){console.error("Unable to use browser cache",e)}}function he(e){try{localStorage.setItem(de,e)}catch(t){console.error("Unable to use browser cache",t)}}},6834:(e,t,o)=>{o.d(t,{A:()=>j});var n=o(9950),r=o(60899),i=o(3788),l=o(93230),s=o(2660),a=o(10226),d=o(29714),c=o(61467),u=o(24516),h=o(21788),g=o(32829),x=o(93383),m=o(77382),p=o(44414);const b=()=>d.Yj(),v=d.Ik().shape({question:b(),content:b()});const j=function(e){let{document:t={},onCancel:o,onUpdate:d}=e;const b=n.useCallback((()=>o(!1)),[o]);return(0,p.jsx)(c.l1,{initialValues:t,validationSchema:v,onSubmit:async(e,t)=>{let{setStatus:o,setSubmitting:n}=t;try{const t=await(0,m.Mk)(e);o({success:!1}),n(!1),b(),(0,h.i)(!0,"Content added successfully!","success"),null===d||void 0===d||d(t)}catch(r){console.error(r),(0,h.i)(!0,"Error occurred while trying to save content.","error")}},children:e=>{let{values:t,errors:o,handleChange:n,touched:d,isSubmitting:c,handleSubmit:h}=e;return(0,p.jsxs)("form",{noValidate:!0,onSubmit:h,children:[(0,p.jsxs)(r.Ay,{item:!0,xs:12,mt:5,children:[(0,p.jsx)(i.A,{htmlFor:"question",children:"Question"}),(0,p.jsxs)(l.A,{spacing:2,mb:3,children:[(0,p.jsx)(s.A,{multiline:!0,fullWidth:!0,id:"question",name:"question",value:t.question,onChange:n,placeholder:"Please enter the question"}),d.question&&o.question&&(0,p.jsx)(u.A,{error:!0,id:"helper-text-message-placeholder",children:o.question})]}),(0,p.jsx)(i.A,{htmlFor:"content",children:"Answer"}),(0,p.jsxs)(l.A,{spacing:2,mb:3,children:[(0,p.jsx)(s.A,{multiline:!0,rows:6,fullWidth:!0,id:"content",name:"content",value:t.content,onChange:n,placeholder:"Please enter the answer"}),d.content&&o.content&&(0,p.jsx)(u.A,{error:!0,id:"helper-text-message-placeholder",children:o.content})]})]}),(0,p.jsx)(r.Ay,{item:!0,xs:12,display:"flex",justifyContent:"flex-end",children:(0,p.jsxs)(l.A,{spacing:2,direction:"row",children:[(0,p.jsx)(a.A,{variant:"outlined",onClick:b,children:"Cancel"}),(0,p.jsx)(g.A,{children:(0,p.jsx)(x.A,{isLoading:c,color:"primary",size:"large",type:"submit",variant:"contained",onClick:h,children:"Save"})})]})})]})}})}},68033:(e,t,o)=>{o.d(t,{A:()=>y});var n=o(9950),r=o(60899),i=o(82053),l=o(10226),s=o(63464),a=o(40033),d=o(79739),c=o(57988),u=o(7999),h=o(25333),g=o(63359),x=o(85967),m=o(74745),p=o(21788),b=o(32829),v=o(93383),j=o(70855),C=o(6834),A=o(77382),f=o(44414);const y=function(e){let{docsList:t,onUpdate:o}=e;const[,n]=(0,j.G)();return null===t||void 0===t?void 0:t.map(((e,t)=>(0,f.jsx)(B,{index:t,document:e,trainingMedia:n.trainingMedia,onUpdate:o},e._id)))};function B(e){let{document:t,index:o,trainingMedia:r,onUpdate:i}=e;const[l,s]=n.useState(!1);return l?(0,f.jsx)(C.A,{document:t,onCancel:s,onUpdate:i}):(0,f.jsx)(L,{index:o,document:t,trainingMedia:r,onEdit:s})}function L(e){let{document:t,index:o,trainingMedia:l,onEdit:s}=e;const a=n.useCallback((()=>s(!0)),[s]);return(0,f.jsxs)(r.Ay,{container:!0,mt:1,children:[(0,f.jsxs)(r.Ay,{item:!0,children:[(0,f.jsxs)(i.A,{variant:"h5",children:["Q",o+1," . ",t.question]}),(0,f.jsxs)(i.A,{variant:"body2",children:[(0,f.jsx)("b",{children:"Ans . "})," ",t.content]}),t.sourceDocument&&(null===l||void 0===l?void 0:l.length)>0&&(0,f.jsx)(w,{document:t,trainingMedia:l})]}),(0,f.jsxs)(r.Ay,{xs:12,item:!0,display:"flex",justifyContent:"flex-end",children:[(0,f.jsx)(h.A,{size:"small",sx:{color:g.A[500]},onClick:a,children:(0,f.jsx)(u.A,{})}),(0,f.jsx)(S,{documentId:t._id})]}),(0,f.jsx)(m.A,{xs:12,sx:{width:"100%",borderColor:"#b6abab"}})]})}function w(e){let{document:t,trainingMedia:o}=e;const r=t.sourceDocument,l=n.useMemo((()=>{const e=o.filter((e=>e.docId===r))[0];if(!e)return e;const t=decodeURIComponent(e.url.substring(e.url.lastIndexOf("/")+1));return{...e,fileName:t}}),[r,o]);return l?(0,f.jsxs)(i.A,{variant:"body2",children:[(0,f.jsx)("b",{children:"Source Document:"})," ",(0,f.jsxs)("a",{href:l.url,rel:"noreferrer",target:"_blank",style:{cursor:"pointer"},children:[l.fileName,l.name?` ( ${l.name} )`:""]})]}):null}function S(e){let{documentId:t}=e;const[o,r]=n.useState(!1),u=()=>r((e=>!e)),g=n.useCallback((async()=>{await(0,A.CA)(t),r(!1),(0,p.i)(!0,"Deleted response successfully","success")}),[t]);return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(h.A,{sx:{color:x.A[500]},onClick:u,children:(0,f.jsx)(c.A,{})}),o&&(0,f.jsxs)(s.A,{open:o,onClose:u,children:[(0,f.jsx)(a.A,{id:"delete-confirm-dialog-title",children:(0,f.jsx)(i.A,{gutterBottom:!0,children:"Are sure you want to delete the response ?"})}),(0,f.jsxs)(d.A,{children:[(0,f.jsx)(l.A,{onClick:u,children:"Cancel"}),(0,f.jsx)(b.A,{children:(0,f.jsx)(v.A,{color:"primary",type:"submit",variant:"contained",onClick:g,children:"Delete"})})]})]})]})}},73225:(e,t,o)=>{o.d(t,{A:()=>d});var n=o(9950),r=o(68033),i=o(77382),l=o(65387),s=o(93383),a=o(44414);const d=function(e){let{message:t,isSuperUser:o,onReplay:d}=e;const{content:c,searchQuery:u,passedDocIds:h,index:g,model:x}=t,[m,p]=(0,n.useState)([]),[b,v]=(0,n.useState)(x);(0,n.useEffect)((()=>{(0,i.L3)(h).then(p)}),[h]),(0,n.useEffect)((()=>{v(t.model)}),[t]);const j=n.useCallback((e=>{var t;return v(null===(t=e.target)||void 0===t?void 0:t.value)}),[]);return(0,a.jsxs)("div",{className:"kb-docs-editor",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"Selected Bot: "}),(0,a.jsx)(l.A,{value:b,hideDescription:!0,onChange:j}),(0,a.jsx)(s.A,{style:{marginLeft:8},variant:"contained",color:"primary",size:"medium",onClick:()=>d(g,b),children:"Replay"})]}),(0,a.jsxs)("div",{className:"ellipsis",children:[(0,a.jsx)("strong",{children:"Message: "}),(0,a.jsx)("span",{title:c,children:c})]}),o&&u&&(0,a.jsxs)("div",{className:"ellipsis",children:[(0,a.jsx)("strong",{children:"Search Query: "}),(0,a.jsx)("span",{children:u})]}),(0,a.jsx)("div",{children:(0,a.jsx)(r.A,{docsList:m,onUpdate:e=>p((t=>t.map((t=>t._id===e._id?e:t))))})})]})}},41507:(e,t,o)=>{o.d(t,{Ds:()=>a,L_:()=>l,NC:()=>s,YS:()=>i,cw:()=>c,qb:()=>d});var n=o(8478),r=o(33340);async function i(e,t){const o=await async function(){const e=r.nc.getState();let{organizationList:t,organizationId:o,organization:i}=e;if(!e.isSuperUser||Array.isArray(t))return;if(t=await n.bE("/organization/list"),t.length)if(o=o||sessionStorage.getItem("orgId"),o){if(!i){var l;i=null===(l=t)||void 0===l?void 0:l.filter((e=>e._id===o))[0]}}else{const e=t[0];o=e._id,i=e}return r.nc.setState({organizationList:t,organizationId:o,organization:i}),!0}(),{organizationId:i}=r.nc.getState();return e?e!==i&&r.nc.setState({organizationId:e}):e=i,!e||(o||await async function(e){const t=await n.bE("/organization/get-organization-by-id",{organizationId:e});r.nc.setState({organization:t})}(e),await a(e,t),!0)}async function l(e,t){t||(t=r.nc.getState().organizationId);const o=await n.yJ(`/organization/${t}`,e);r.nc.setState((e=>{const{organizationList:n,organizationId:r,organization:i}=e,l={};return r===t&&(l.organization={...i,...o}),n&&(l.organizationList=n.map((e=>e._id===t?{...e,...o}:e))),l}))}function s(e){if(!e||"object"!==typeof e)return;let{organization:t}=r.nc.getState();t&&(t={...t,...e},r.nc.setState({organization:t}))}async function a(e,t){var o;const i=await n.Jt(`/bot/${e}/list`),l=t||(null===(o=i[0])||void 0===o?void 0:o._id),s=i.reduce(((e,t)=>(e[t._id]=t,e)),{});return r.nc.setState({organizationId:e,botsList:i,botsMap:s,selectedBotId:l}),l}function d(e){r.nc.setState({selectedBotId:e})}async function c(){const e=await n.Jt("/organization/invoice/list");r.nc.setState({organizationsInvoiceList:e})}},70855:(e,t,o)=>{o.d(t,{G:()=>r});var n=o(33340);function r(e){const t=(0,n.nc)((e=>e.selectedBotId)),o=(0,n.nc)((o=>o.botsMap[e||t]));return[e||t,o]}},13938:()=>{}}]);