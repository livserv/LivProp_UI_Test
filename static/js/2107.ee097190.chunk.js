"use strict";(self.webpackChunklib_prop_ui=self.webpackChunklib_prop_ui||[]).push([[2107],{82921:(e,s,t)=>{t.r(s),t.d(s,{default:()=>p});var i=t(9950),n=t(28429),a=t(32026),o=t(8478),c=t(15820),l=t(78023),r=t(33340),d=t(34735),h=t(73225),u=t(44414);const p=function(){const{organizationId:e,botId:s,recipientId:t,chatId:p}=(0,n.g)(),{isAuthenticated:b,isSuperUser:g}=(0,r.nc)(),[x,$]=i.useState(),[v,m]=i.useState();i.useEffect((()=>{o.Jt(`/bot/${e}/${s}/chat/history/${t}/${p}?includeBot=1${b?"&includeKB=1":""}`).then((e=>{var s;const t=(0,a.Yq)(null===(s=e.messages[0])||void 0===s?void 0:s.createdAt);e.botDesign=(0,l.Y)(e.botDesign,{window:{width:"600px",height:"calc(100vh - 120px)"},header:{titleText:t+` (${e.titleText})`}}),$(e)}),(e=>{console.error("Unable to load chat conversations:",e)}))}),[e,s,t,p,b]);const w=i.useCallback((async(i,n)=>{const a=await o.Jt(`/bot/${e}/${s}/chat/history/${t}/${p}/replay/${i}?modelName=${n||""}`);m(a)}),[e,s,t,p]);return x?(0,u.jsxs)("div",{className:"conversation-history"+(b?" authenticated":""),children:[(0,u.jsx)("div",{children:(0,u.jsx)(c.A,{botDesign:x.botDesign,messages:x.messages,showTime:!0,disabledMessage:!0,optionsRenderer:e=>{const{role:s,type:t,passedDocIds:i,searchQuery:n}=e||{};if("assistant"===s&&"text"===t&&(null!==i&&void 0!==i&&i.length||n))return(0,u.jsx)("span",{className:"show-icon",onClick:()=>m(e),children:(0,u.jsx)(d.A,{})})}})}),v&&(0,u.jsx)(h.A,{message:v,onClose:()=>v(null),isSuperUser:g,onReplay:w})]}):(0,u.jsx)("div",{children:"Loading... Please wait..."})}}}]);