"use strict";(self.webpackChunklib_prop_ui=self.webpackChunklib_prop_ui||[]).push([[6106],{32829:(t,e,n)=>{n.d(e,{A:()=>i});var o=n(79875),c=n(44414);function i(t){let{children:e,type:n}=t;return(0,c.jsx)(o.P.div,{whileHover:{scale:1},whileTap:{scale:.9},children:e})}i.defaultProps={type:"scale"}},92728:(t,e,n)=>{n.d(e,{A:()=>s});var o=n(89379),c=n(9950),i=n(48205),a=n(44414);const s=c.forwardRef((function(t,e){return(0,a.jsx)(i.A,(0,o.A)({direction:"up",ref:e},t))}))},26092:(t,e,n)=>{n.d(e,{A:()=>g});n(9950);var o=n(92728),c=n(63464),i=n(40033),a=n(28170),s=n(96319),r=n(59254),d=n(14857),l=n(25333),u=n(44414);const f=(0,r.Ay)(c.A)((t=>{let{theme:e}=t;return{"& .MuiDialogContent-root":{padding:e.spacing(2)},"& .MuiDialogActions-root":{padding:e.spacing(1)},zIndex:11010}}));function g(t){const e=(0,d.A)(),{breakpoints:n}=e,{openPopUpDialog:c,setPopUpDialog:r,setFieldsValues:g,onClose:A=()=>(r(!1),null===g||void 0===g?void 0:g({})),title:p,width:h="70%"}=t;return(0,u.jsxs)(f,{TransitionComponent:o.A,"aria-labelledby":"customized-dialog-title",open:c,PaperProps:{sx:{width:{width:h},[n.down("sm")]:{width:"90%"}}},children:[(0,u.jsx)(i.A,{sx:{m:0,p:2},id:"customized-dialog-title",children:p}),(0,u.jsx)(l.A,{"aria-label":"close",onClick:A,sx:{position:"absolute",right:8,top:8},children:(0,u.jsx)(s.A,{})}),(0,u.jsx)(a.A,{dividers:!0,children:t.children})]})}},93383:(t,e,n)=>{n.d(e,{A:()=>l});var o=n(89379),c=n(80045),i=n(9950),a=n(10226),s=n(46639),r=n(44414);const d=["onClick","disabled","isLoading","children"];const l=function(t){let{onClick:e,disabled:n,isLoading:l,children:u}=t,f=(0,c.A)(t,d);const[g,A]=i.useState(l);return(0,r.jsxs)(a.A,(0,o.A)((0,o.A)({onClick:t=>{if(!e)return;const n=e(t);"function"===typeof(null===n||void 0===n?void 0:n.finally)&&(A(!0),n.finally((()=>A(!1))))},disabled:g||l||n},f),{},{children:[(g||l)&&(0,r.jsx)(s.A,{size:16,color:"primary",style:{marginRight:"10px"}}),u]}))}},6716:(t,e,n)=>{n.d(e,{A:()=>m});var o=n(89379),c=(n(9950),n(60899)),i=n(81616),a=n(3788),s=n(82053),r=n(10226),d=n(24516),l=n(29714),u=n(61467),f=n(32829),g=n(26092),A=n(44364),p=n(30334),h=n(70855),b=n(21788),_=n(44414);const m=function(t){let{isOpen:e,toggleOpen:n}=t;return(0,_.jsx)(g.A,{openPopUpDialog:e,setPopUpDialog:n,title:"Upload Training Documents",children:(0,_.jsx)(E,{setDocumentUploadDialogOpen:n})})},y=A.Og?A.Og:5242880,v=l.Ik().shape({file:l.gl().required("File is not selected").test("is-valid-size","Maximum allowed file size is ".concat(y/1048576," MB"),(t=>t&&t.size<=y))});function E(t){let{setDocumentUploadDialogOpen:e}=t;const[,n]=(0,h.G)(),l=null===n||void 0===n?void 0:n.trainingMedia;return(0,_.jsxs)(c.Ay,{container:!0,spacing:1,children:[(0,_.jsx)(c.Ay,{item:!0,xs:12,md:12,style:{display:"flex",justifyContent:"center"},children:(0,_.jsx)(i.A,{spacing:1,children:(0,_.jsx)(a.A,{children:"File Upload (.csv, .txt, .docx, .pdf)"})})}),(0,_.jsx)(c.Ay,{item:!0,xs:12,md:12,style:{display:"flex",justifyContent:"center"},children:(0,_.jsx)(u.l1,{initialValues:{file:null},validationSchema:v,onSubmit:async(t,n)=>{let{setErrors:o,setStatus:c,setSubmitting:i}=n;try{const{name:n}=t.file;l.some((t=>t.originalName===n))?(0,b.i)(!0,"The file already uploaded!. Please select another file","error"):(i(!0),await(0,p.MD)(t.file),c({success:!0}),e(!1),(0,b.i)(!0,"The file uploaded successfully!","success"))}catch(a){console.error("Error uploading the document:",a),c({success:!1}),o({submit:a.message}),i(!1),e(!1),(0,b.i)(!0,"Not able to upload the file. Try after sometime!","error")}},children:t=>{let{values:e,errors:n,isSubmitting:i,setFieldValue:a}=t;return(0,_.jsxs)(u.lV,{children:[(0,_.jsxs)(c.Ay,{container:!0,spacing:2,children:[(0,_.jsx)(c.Ay,{item:!0,xs:12,md:12,children:e.file&&(0,_.jsxs)(s.A,{variant:"body2",children:["Selected File: ",e.file.name]})}),(0,_.jsx)(c.Ay,{item:!0,xs:6,md:6,container:!0,justifyContent:"flex-end",children:(0,_.jsx)(u.D0,{type:"file",name:"file",as:t=>{let{field:e}=t;return(0,_.jsx)(f.A,{children:(0,_.jsxs)(r.A,{variant:"contained",component:"label",htmlFor:"file-input",size:"large",sx:{whiteSpace:"nowrap"},children:["Select File",(0,_.jsx)("input",(0,o.A)((0,o.A)({},e),{},{type:"file",id:"file-input",style:{display:"none"},onChange:t=>{a("file",t.currentTarget.files[0])},accept:".csv,.txt,.docx,.doc,.pdf,text/plain"}))]})})}})}),(0,_.jsx)(c.Ay,{item:!0,xs:6,md:6,children:(0,_.jsx)(f.A,{children:(0,_.jsx)(r.A,{variant:"contained",size:"large",type:"submit",disabled:i,children:i?"Uploading...":"Upload"})})})]}),(0,_.jsx)(c.Ay,{item:!0,xs:12,md:12,style:{display:"flex",justifyContent:"center"},children:(0,_.jsx)(d.A,{error:!0,id:"helper-text-file-input",children:n.file})})]})}})})]})}},8478:(t,e,n)=>{n.d(e,{Jt:()=>d,TF:()=>f,bE:()=>l,yJ:()=>u});var o=n(89379),c=n(80045),i=n(32026),a=n(44364);const s=["headers","noAuth"],r=["data"];async function d(t,e){return g("GET",t,e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}async function l(t,e){return g("POST",t,e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}async function u(t,e){return g("PUT",t,e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}async function f(t,e){return g("DELETE",t,e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}async function g(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},{headers:a,noAuth:d}=i,l=(0,c.A)(i,s);const u="POST"===t||"PUT"===t||"DELETE"===t;e=function(t,e){if(!t)return t;const n=e&&Object.keys(e);if(null!==n&&void 0!==n&&n.length){const o=n.reduce(((t,n)=>{let o=e[n];return null===o||void 0===o?t:(o="".concat(n,"=").concat(encodeURIComponent(o)),t?"".concat(t,"&").concat(o):o)}),"");o&&(t="".concat(t).concat(t.includes("?")?"&":"?").concat(o))}if(t.startsWith("https://"))return t;return"".concat(A).concat(t)}(e,u?void 0:n);const f=n instanceof FormData;if(f||(n=n&&"object"===typeof n&&u?JSON.stringify(n):void 0),a||(a={}),f||(a["Content-Type"]="application/json"),a.Accept="application/json",!1!==d){const t=sessionStorage.getItem("token");t&&(a.Authorization="Bearer ".concat(t))}try{const i=await fetch(e,(0,o.A)((0,o.A)({},l),{},{headers:a,body:n,method:t})),s=await i.json();if(i.ok){const{data:t}=s,e=(0,c.A)(s,r);return delete e.status,t&&!Object.keys(e).length?t:s}throw s.message?new Error(s.message):s}catch(p){var g;throw console.error("Error calling API: ",p),null!==(g=p.message)&&void 0!==g&&g.includes("fetch")?new Error("Unable to reach server. Please check your network connectivity and try again."):new Error(p.message)}}const A=(0,i.s8)(a.jn,"/")},98415:(t,e,n)=>{n.d(e,{Ci:()=>f,I4:()=>u,TF:()=>d,gI:()=>s,gR:()=>A,jo:()=>l,rv:()=>p,so:()=>g,yo:()=>r});var o=n(89379),c=n(8478),i=n(33340),a=n(32026);async function s(t){const{organization:{websiteUrl:e,_id:n}}=i.nc.getState(),o={organizationId:n,websiteUrl:e,botName:t,botDesign:{visitorMessageLogo:{name:"",url:""},botMessageLogo:{name:"",url:""},botChatButton:{name:"",url:""},botLogo:{name:"",url:""},backgroundColor:"#e7a654",textColor:"#ffffff",dimensions:{heightInPixel:"500px",heightInPercent:"70%",widthInPixel:"350px",widthInPercent:"25%"},botLogoDimensions:{heightInPixel:"30px",heightInPercent:"100%",widthInPixel:"30px",widthInPercent:"100%"}}};h(await c.bE("/bot/".concat(n),o),!0)}async function r(t,e,n){const{organizationId:o}=i.nc.getState();if(!o||!t)throw new Error("Bot details not found");const a=await c.yJ("/bot/".concat(o,"/").concat(t),e);return h(a,n),a}async function d(t){const{organizationId:e,selectedBotId:n}=i.nc.getState();if(!e||!t)throw new Error("Bot details not found");const{deleted:a}=await c.TF("/bot/".concat(e,"/").concat(t));if(a){let{botsMap:t,botsList:e}=i.nc.getState();t=(0,o.A)({},t),e=[...e],delete t[a];const c=e.findIndex((t=>t._id===a));c>=0&&e.splice(c,1);const r={botsMap:t,botsList:e};var s;if(n===a)r.selectedBotId=(null===(s=e[0])||void 0===s?void 0:s._id)||null;i.nc.setState(r)}return!!a}function l(t,e){let{botDesign:n}=i.nc.getState();return n=(0,o.A)((0,o.A)({},n),e),r(t,{botDesign:n})}async function u(t,e){const{organizationId:n,selectedBotId:o}=i.nc.getState(),a=new FormData;a.append("file",e);const s=await c.bE("/bot/".concat(n,"/").concat(o,"/update-logo/").concat(t),a);return p(o,s),s["botDesign.".concat(t)]}async function f(t){const{organizationId:e,selectedBotId:n}=i.nc.getState(),o=await c.TF("/bot/".concat(e,"/").concat(n,"/update-logo/").concat(t));return p(n,o),o["botDesign.".concat(t)]}function g(t,e){return r(t,{botName:e})}function A(t,e){let{botSettings:n={}}=i.nc.getState();return n=(0,o.A)((0,o.A)({},n),e),r(t,{botSettings:n})}function p(t,e){const{botsMap:n}=i.nc.getState(),o=n[t];if(!o)return;h(Object.keys(e).reduce(((t,n)=>(0,a.G6)(t,n,e[n])),o))}function h(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=t._id;let{botsMap:c,botsList:a}=i.nc.getState();c=(0,o.A)((0,o.A)({},c),{},{[n]:t}),a=[...a];const s=a.findIndex((t=>t._id===n));s>=0?a[s]=t:a.push(t);const r={botsMap:c,botsList:a};e&&(r.selectedBotId=n),i.nc.setState(r)}},77382:(t,e,n)=>{n.d(e,{CA:()=>g,L3:()=>f,Mk:()=>d,bZ:()=>l,gJ:()=>u});var o=n(89379),c=n(8478),i=n(33340),a=n(32026),s=n(59051),r=n.n(s);async function d(t){const{organizationId:e,selectedBotId:n}=i.nc.getState(),a=await c.bE("/bot/".concat(e,"/").concat(n,"/knowledge-base"),t);return i.nc.setState((e=>{const c=(0,o.A)({},e.kbDocs||{}),i=c[n];if(!i)return{};if(c[n]=[...i],t._id){const t=c[n].findIndex((t=>t._id===a._id));t>=0?c[n][t]=a:c[n].push(a)}else c[n].push(a);return{kbDocs:c}})),a}async function l(t){const{organizationId:e,selectedBotId:n,kbDocs:a}=i.nc.getState();if(t&&Array.isArray(null===a||void 0===a?void 0:a[n]))return;const s=await c.Jt("/bot/".concat(e,"/").concat(n,"/knowledge-base/list"));i.nc.setState((t=>({kbDocs:(0,o.A)((0,o.A)({},t.kbDocs||{}),{},{[n]:s})})))}async function u(){var t;const{organizationId:e,selectedBotId:n,botsMap:o}=i.nc.getState(),s="/bot/".concat(e,"/").concat(n,"/knowledge-base/download"),d=await c.Jt(s),l=(null===(t=o[n])||void 0===t?void 0:t.botName)||"KBDocs";(0,a.PE)(d,l+"_"+r()().format("YYYYMMDD")+".csv")}async function f(t){if(null===t||void 0===t||!t.length)return[];const{organizationId:e,selectedBotId:n}=i.nc.getState();return await c.Jt("/bot/".concat(e,"/").concat(n,"/knowledge-base/list?").concat(t.map((t=>"docIds=".concat(t))).join("&")))}async function g(t){const{organizationId:e,selectedBotId:n}=i.nc.getState();await c.TF("/bot/".concat(e,"/").concat(n,"/knowledge-base/").concat(t)),i.nc.setState((e=>{var c;const i=(0,o.A)({},e.kbDocs||{});return i[n]=null===(c=i[n])||void 0===c?void 0:c.filter((e=>e._id!==t)),{kbDocs:i}}))}},30334:(t,e,n)=>{n.d(e,{Ei:()=>u,KM:()=>r,MD:()=>d,pn:()=>f,qt:()=>l});var o=n(89379),c=n(8478),i=n(33340),a=n(77382),s=n(98415);async function r(t,e,n){const o=await c.bE("/bot/".concat(n,"/").concat(e,"/add-training-media"),t);(0,s.rv)(e,{trainingMedia:o.trainingMedia})}async function d(t){const{organizationId:e,selectedBotId:n}=i.nc.getState(),o=new FormData;o.append("file",t);try{const t=await c.bE("/bot/".concat(e,"/").concat(n,"/add-training-media"),o);(0,s.rv)(n,{trainingMedia:t.trainingMedia})}catch(a){throw new Error("File upload failed. Please try again.",a)}}async function l(t,e,n){const o=await c.bE("/bot/".concat(n,"/").concat(e,"/delete-training-media-document"),t);(0,s.rv)(e,{trainingMedia:o.trainingDocuments})}async function u(t,e){const n=await c.bE("/bot/".concat(e,"/").concat(t,"/knowledge-base/train"));return i.nc.setState((e=>{const n=(0,o.A)({},e.kbDocs||{});return delete n[t],{kbDocs:n}})),(0,a.bZ)().catch((t=>console.error("Error fetching Knowledge base content:",t))),n}async function f(t,e,n){const o=await c.bE("/bot/".concat(e,"/").concat(n,"/add-bot-tax-details"),t),{_id:i,botDetailsForVerification:a}=o;return(0,s.rv)(i,{botDetailsForVerification:a}),a}},70855:(t,e,n)=>{n.d(e,{G:()=>c});var o=n(33340);function c(t){const e=(0,o.nc)((t=>t.selectedBotId)),n=(0,o.nc)((n=>n.botsMap[t||e]));return[t||e,n]}},32026:(t,e,n)=>{n.d(e,{G6:()=>s,OX:()=>d,PE:()=>u,Yq:()=>a,do:()=>l,qW:()=>r,s8:()=>c});var o=n(89379);function c(t,e){return t.replace(new RegExp("".concat(i(e),"+$")),"")}function i(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function a(t){const e=new Date(t),n=e.getDate(),o=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][e.getMonth()],c=e.getFullYear();return"".concat(o," ").concat(n,", ").concat(c)}function s(t,e,n){if(!e&&!t)return n;t=t||{};const c=Array.isArray(t)?[...t]:(0,o.A)({},t);if(e.includes(".")){const o=e.indexOf("."),i=e.substring(0,o),a=e.substring(o+1);c[i]=s(t[i],a,n)}else c[e]=n;return c}function r(t,e){return btoa("".concat(t,"_").concat(e,"_whatsapp_int"))}function d(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:12;const e="abcdefghijklmnopqrstuvwxyz0123456789";let n="";for(let o=0;o<t;o++)n+=e.charAt(Math.floor(36*Math.random()));return n}function l(t,e,n){if(!e&&!t)return n;t=t||{};const c=Array.isArray(t)?[...t]:(0,o.A)({},t);if(e.includes(".")){const o=e.indexOf("."),i=e.substring(0,o),a=e.substring(o+1);c[i]=l(t[i],a,n)}else c[e]=n;return c}function u(t,e){const n=new Blob([t],{type:arguments.length>2&&void 0!==arguments[2]?arguments[2]:"text/csv"}),o=document.createElement("a");o.href=URL.createObjectURL(n),o.download=e,document.body.appendChild(o),o.click(),document.body.removeChild(o)}},44364:(t,e,n)=>{n.d(e,{DX:()=>r,Og:()=>i,jn:()=>o,mB:()=>s,pA:()=>a,pR:()=>c});const o="https://devbackend.livhousing.com:444",c="c17b949cf58c45cae47ce1cc65efc8240f77a2a69ca09ad4c4208852",i={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_IP_DATA_API_KEY:"c17b949cf58c45cae47ce1cc65efc8240f77a2a69ca09ad4c4208852",REACT_APP_VERSION:"1",REACT_APP_GOOGLE_MAPS_API_KEY:"AIzaSyAQMYGdP2AmloNtJm4ZDrJxPuSfuo2RSXM",REACT_APP_BACKEND_URL:"https://devbackend.livhousing.com:444"}.TRAINING_MEDIA_MAXSIZE,a={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_IP_DATA_API_KEY:"c17b949cf58c45cae47ce1cc65efc8240f77a2a69ca09ad4c4208852",REACT_APP_VERSION:"1",REACT_APP_GOOGLE_MAPS_API_KEY:"AIzaSyAQMYGdP2AmloNtJm4ZDrJxPuSfuo2RSXM",REACT_APP_BACKEND_URL:"https://devbackend.livhousing.com:444"}.CONVERSATION_MEDIA_MAXSIZE,s="AIzaSyAQMYGdP2AmloNtJm4ZDrJxPuSfuo2RSXM",r={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_IP_DATA_API_KEY:"c17b949cf58c45cae47ce1cc65efc8240f77a2a69ca09ad4c4208852",REACT_APP_VERSION:"1",REACT_APP_GOOGLE_MAPS_API_KEY:"AIzaSyAQMYGdP2AmloNtJm4ZDrJxPuSfuo2RSXM",REACT_APP_BACKEND_URL:"https://devbackend.livhousing.com:444"}.REACT_APP_NGROK_BACKEND_URL||"https://devbackend.livhousing.com:444"}}]);