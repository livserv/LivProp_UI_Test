"use strict";(self.webpackChunklib_prop_ui=self.webpackChunklib_prop_ui||[]).push([[6790],{32829:(e,t,n)=>{n.d(t,{A:()=>r});var o=n(25371),a=n(44414);function r(e){let{children:t,type:n}=e;return(0,a.jsx)(o.P.div,{whileHover:{scale:1},whileTap:{scale:.9},children:t})}r.defaultProps={type:"scale"}},51637:(e,t,n)=>{n.d(t,{A:()=>u});var o=n(9950),a=n(14857),r=n(48089),i=n(45180),s=n(82053),c=n(50704),l=n(44414);const d={p:2.5,"& .MuiCardHeader-action":{m:"0px auto",alignSelf:"center"}},u=(0,o.forwardRef)(((e,t)=>{let{border:n=!0,boxShadow:o,children:u,content:h=!0,contentSX:m={},darkTitle:p,elevation:x,secondary:g,shadow:A,sx:f={},title:y,...b}=e;const w=(0,a.A)();return o="dark"===w.palette.mode?o||!0:o,(0,l.jsxs)(r.A,{elevation:x||0,ref:t,...b,sx:{border:n?"1px solid":"none",borderRadius:2,borderColor:"dark"===w.palette.mode?w.palette.divider:w.palette.grey.A800,boxShadow:!o||n&&"dark"!==w.palette.mode?"inherit":A||w.customShadows.z1,":hover":{boxShadow:o?A||w.customShadows.z1:"inherit"},"& pre":{m:0,p:"16px !important",fontFamily:w.typography.fontFamily,fontSize:"0.75rem"},...f},children:[!p&&y&&(0,l.jsx)(i.A,{sx:d,titleTypographyProps:{variant:"subtitle1"},title:y,action:g}),p&&y&&(0,l.jsx)(i.A,{sx:d,title:(0,l.jsx)(s.A,{variant:"h3",children:y}),action:g}),h&&(0,l.jsx)(c.A,{sx:m,children:u}),!h&&u]})}))},93383:(e,t,n)=>{n.d(t,{A:()=>s});var o=n(9950),a=n(10226),r=n(46639),i=n(44414);const s=function(e){let{onClick:t,disabled:n,isLoading:s,children:c,...l}=e;const[d,u]=o.useState(s);return(0,i.jsxs)(a.A,{onClick:e=>{if(!t)return;const n=t(e);"function"===typeof(null===n||void 0===n?void 0:n.finally)&&(u(!0),n.finally((()=>u(!1))))},disabled:d||s||n,...l,children:[(d||s)&&(0,i.jsx)(r.A,{size:16,color:"primary",style:{marginRight:"10px"}}),c]})}},57520:(e,t,n)=>{n.r(t),n.d(t,{default:()=>E});var o=n(9950),a=n(16491),r=n(60899),i=n(74745),s=n(82053),c=n(93230),l=n(3788),d=n(41626),u=n(16497),h=n(85815),m=n(93038),p=n(24516),x=n(2660),g=n(31446),A=n(61467),f=n(51637),y=n(32829),b=n(70855),w=n(98415),C=n(93383),j=n(58178),v=n(90771),S=(n(13953),n(44414));const P={margin:{xs:2.5,md:3},"& > *":{flexGrow:1,flexBasis:"50%"}},_={leadCaptureType:"flow",leadCaptureFormMode:"count",showFormAfterChats:3,defaultCountryCode:{countryId:"in",dialCode:"+91"}};const E=function(){const[e,t]=(0,b.G)();if(!t)return null;const{botSettings:n=_}=t;return(0,S.jsx)(f.A,{sx:P,content:!1,border:!1,boxShadow:!0,children:(0,S.jsx)(a.A,{sx:{p:{xs:2,sm:3,md:4,xl:5}},children:(0,S.jsx)(A.l1,{initialValues:n,onSubmit:async(t,n)=>{let{setErrors:o,setStatus:a,setSubmitting:r}=n;try{await(0,w.gR)(e,t),a({success:!1}),r(!1),(0,j.i)(!0,"Settings saved successfully!","success")}catch(i){console.error(i),(0,j.i)(!0,"Unable to save settings. Please try again later.","error"),a({success:!1}),o({submit:i.message}),r(!1)}},children:e=>(0,S.jsx)("form",{noValidate:!0,onSubmit:e.handleSubmit,children:(0,S.jsxs)(r.Ay,{container:!0,spacing:3,children:[(0,S.jsx)(I,{...e}),(0,S.jsx)(T,{...e}),(0,S.jsx)(F,{...e})]})})})})})};function I(e){var t,n,a;let{values:x,touched:g,errors:A,handleBlur:f,handleChange:y,setFieldValue:b}=e;const w="form"===x.leadCaptureType,C="form"!==x.leadCaptureType||"keyword"===x.leadCaptureFormMode,[j,P]=o.useState((null===(t=x.defaultCountryCode)||void 0===t?void 0:t.countryId)||"in"),[_,E]=o.useState((null===(n=x.defaultCountryCode)||void 0===n?void 0:n.dialCode)||"+91");return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(r.Ay,{item:!0,xs:12,children:(0,S.jsx)(i.A,{children:(0,S.jsx)(s.A,{variant:"subtitle1",children:"Lead Capture Settings"})})}),(0,S.jsx)(r.Ay,{item:!0,xs:12,md:6,children:(0,S.jsxs)(c.A,{spacing:1,children:[(0,S.jsx)(l.A,{htmlFor:"leadCaptureType",children:"Input Type"}),(0,S.jsxs)(d.A,{value:x.leadCaptureType,defaultValue:"flow",name:"leadCaptureType",onChange:y,children:[(0,S.jsx)(u.A,{value:"flow",control:(0,S.jsx)(h.A,{}),label:"Flow"}),(0,S.jsx)(u.A,{value:"form",control:(0,S.jsx)(h.A,{}),label:"Form"})]})]})}),w&&(0,S.jsx)(r.Ay,{item:!0,xs:12,md:6,children:(0,S.jsxs)(c.A,{spacing:1,children:[(0,S.jsx)(l.A,{htmlFor:"leadCaptureFormMode",children:"When you want the form to be displayed?"}),(0,S.jsxs)(d.A,{value:x.leadCaptureFormMode,defaultValue:"count",id:"leadCaptureFormMode",name:"leadCaptureFormMode",onChange:y,children:[(0,S.jsx)(u.A,{value:"keyword",control:(0,S.jsx)(h.A,{}),label:"Show form when the keyword matches"}),(0,S.jsx)(u.A,{value:"count",control:(0,S.jsx)(h.A,{}),label:(0,S.jsxs)(S.Fragment,{children:["Show form after conversations:"," ",(0,S.jsx)("input",{value:null===(a=x.showFormAfterChats)||void 0===a?void 0:a.toString(),maxLength:2,style:{width:"50px"},disabled:"form"!==x.leadCaptureType||x.leadCaptureFormMode&&"count"!==x.leadCaptureFormMode,onChange:e=>b("showFormAfterChats",function(e,t){if(!e)return e;if(isNaN(e))return t;return Number(e)}(e.target.value,x.showFormAfterChats))})]})})]})]})}),!w&&(0,S.jsx)(r.Ay,{item:!0,xs:12,md:6,children:(0,S.jsxs)(c.A,{spacing:1,children:[(0,S.jsx)(l.A,{htmlFor:"leadCaptureFlowMandatory",children:"Can user proceed without providing contact details?"}),(0,S.jsx)(u.A,{value:"keyword",control:(0,S.jsx)(m.A,{checked:x.leadCaptureFlowMandatory,name:"leadCaptureFlowMandatory",onChange:y}),label:"Make the input mandatory"})]})}),(0,S.jsx)(r.Ay,{item:!0,xs:12,md:12,children:"Default Phone number country code in contact form"}),(0,S.jsxs)(r.Ay,{item:!0,xs:12,md:3,sx:{position:"relative",display:"flex",alignItems:"center"},children:[(0,S.jsx)(v.cf,{selectedCountry:j,onSelect:e=>{let{iso2:t,dialCode:n}=e;P(t),b("defaultCountryCode",{countryId:t,dialCode:"+"+n}),E("+"+n)},onBlur:f,country:j,name:"defaultCountryCode",id:"defaultCountryCode"}),(0,S.jsxs)("span",{style:{marginLeft:"8px"},children:[" ",_]})]}),C&&(0,S.jsx)(r.Ay,{item:!0,xs:12,children:(0,S.jsxs)(c.A,{spacing:1,children:[(0,S.jsx)(l.A,{htmlFor:"phoneNumberKeywords",children:"Keywords for Phone Number Collection *"}),(0,S.jsx)(R,{name:"phoneNumberKeywords",value:x.phoneNumberKeywords||[],error:Boolean(g.phoneNumberKeywords&&A.phoneNumberKeywords),onBlur:f,onChange:b,placeholder:"Type keyword and press enter to add more...",inputProps:{maxLength:25}}),g.phoneNumberKeywords&&A.phoneNumberKeywords&&(0,S.jsx)(p.A,{error:!0,id:"helper-text-email-keywords",children:A.phoneNumberKeywords})]})}),C&&(0,S.jsx)(r.Ay,{item:!0,xs:12,children:(0,S.jsxs)(c.A,{spacing:1,children:[(0,S.jsx)(l.A,{htmlFor:"emailKeywords",children:"Keywords for Email Address Collection *"}),(0,S.jsx)(R,{name:"emailKeywords",value:x.emailKeywords||[],error:Boolean(g.emailKeywords&&A.emailKeywords),onBlur:f,onChange:b,placeholder:"Type keyword and press enter to add more...",inputProps:{maxLength:25}}),g.emailKeywords&&A.emailKeywords&&(0,S.jsx)(p.A,{error:!0,id:"helper-text-email-keywords",children:A.emailKeywords})]})})]})}function T(e){let{values:t,handleChange:n}=e;return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(r.Ay,{item:!0,xs:12,children:(0,S.jsx)(i.A,{children:(0,S.jsx)(s.A,{variant:"subtitle1",children:"Allow / Block chat window"})})}),(0,S.jsx)(r.Ay,{item:!0,xs:12,md:6,children:(0,S.jsxs)(c.A,{spacing:1,children:[(0,S.jsx)(l.A,{htmlFor:"allowedIP",children:"Allowed IP"}),(0,S.jsx)(x.A,{multiline:!0,id:"allowedIP",name:"allowedIP",value:t.allowedIP,onChange:n,"aria-label":"empty textarea",placeholder:"Ex: 192.167.22.340, 192.167.22.341"})]})}),(0,S.jsx)(r.Ay,{item:!0,xs:12,md:6,children:(0,S.jsxs)(c.A,{spacing:1,children:[(0,S.jsx)(l.A,{htmlFor:"deniedIP",children:"Denied IP"}),(0,S.jsx)(x.A,{multiline:!0,id:"deniedIP",name:"deniedIP",defaultValue:t.deniedIP,onChange:n,"aria-label":"empty textarea",placeholder:"Ex: 192.167.22.340, 192.167.22.341"})]})}),(0,S.jsx)(r.Ay,{item:!0,xs:12,md:6,children:(0,S.jsxs)(c.A,{spacing:1,children:[(0,S.jsx)(l.A,{htmlFor:"allowedPages",children:"Allowed Pages"}),(0,S.jsx)(x.A,{multiline:!0,id:"allowedPages",name:"allowedPages",defaultValue:t.allowedPages,onChange:n,"aria-label":"empty textarea",placeholder:"Ex: https://xyz.com, https://abc.com"})]})}),(0,S.jsx)(r.Ay,{item:!0,xs:12,md:6,children:(0,S.jsxs)(c.A,{spacing:1,children:[(0,S.jsx)(l.A,{htmlFor:"deniedPages",children:"Denied Pages"}),(0,S.jsx)(x.A,{multiline:!0,id:"deniedPages",name:"deniedPages",defaultValue:t.deniedPages,onChange:n,"aria-label":"empty textarea",placeholder:"Ex: https://xyz.com, https://abc.com"})]})})]})}function F(e){let{errors:t,isSubmitting:n}=e;return(0,S.jsxs)(S.Fragment,{children:[t.submit&&(0,S.jsx)(r.Ay,{item:!0,xs:12,children:(0,S.jsx)(p.A,{error:!0,children:t.submit})}),(0,S.jsx)(r.Ay,{item:!0,xs:12,mt:2,children:(0,S.jsx)(y.A,{children:(0,S.jsx)(C.A,{disableElevation:!0,isLoading:n,fullWidth:!0,size:"large",type:"submit",variant:"contained",color:"primary",children:"Save Settings"})})})]})}function R(e){let{id:t,name:n,value:a,onChange:r,...i}=e;const s=o.useRef(),c=e=>r(n,e);return(0,S.jsx)(g.b,{ref:s,id:t||n,name:n,addOnBlur:!0,value:a||[],onChange:c,onInputChange:e=>{e.endsWith(",")&&(a=[...a,e.substring(0,e.length-1)],c(a),s.current.value="")},...i})}},8478:(e,t,n)=>{n.d(t,{Jt:()=>r,Ne:()=>u,TF:()=>c,bE:()=>i,yJ:()=>s});var o=n(32026),a=n(44364);async function r(e,t){return l("GET",e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}async function i(e,t){return l("POST",e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}async function s(e,t){return l("PUT",e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}async function c(e,t){return l("DELETE",e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}async function l(e,t,n){let{headers:o,noAuth:a,...r}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const i="POST"===e||"PUT"===e||"DELETE"===e;t=u(t,i?void 0:n);const s=n instanceof FormData;if(s||(n=n&&"object"===typeof n&&i?JSON.stringify(n):void 0),o||(o={}),s||(o["Content-Type"]="application/json"),o.Accept="application/json",!1!==a){const e=sessionStorage.getItem("token");e&&(o.Authorization="Bearer ".concat(e))}try{const a=await fetch(t,{...r,headers:o,body:n,method:e}),i=await a.json();if(a.ok){const{data:e,...t}=i;return delete t.status,e&&!Object.keys(t).length?e:i}throw i.message?new Error(i.message):i}catch(l){var c;throw console.error("Error calling API: ",l),null!==(c=l.message)&&void 0!==c&&c.includes("fetch")?new Error("Unable to reach server. Please check your network connectivity and try again."):new Error(l.message)}}const d=(0,o.s8)(a.jn,"/");function u(e,t){if(!e)return e;const n=t&&Object.keys(t);if(null!==n&&void 0!==n&&n.length){const o=n.reduce(((e,n)=>{let o=t[n];return null===o||void 0===o?e:(o="".concat(n,"=").concat(encodeURIComponent(o)),e?"".concat(e,"&").concat(o):o)}),"");o&&(e="".concat(e).concat(e.includes("?")?"&":"?").concat(o))}return e.startsWith("https://")?e:"".concat(d).concat(e)}},98415:(e,t,n)=>{n.d(t,{Ci:()=>u,I4:()=>d,TF:()=>c,gI:()=>i,gR:()=>m,jo:()=>l,so:()=>h,yo:()=>s});var o=n(8478),a=n(33340),r=n(32026);async function i(e){const{organization:{websiteUrl:t,_id:n}}=a.nc.getState(),r={organizationId:n,websiteUrl:t,botName:e,botDesign:{visitorMessageLogo:{name:"",url:""},botMessageLogo:{name:"",url:""},botChatButton:{name:"",url:""},botLogo:{name:"",url:""},backgroundColor:"#e7a654",textColor:"#ffffff",dimensions:{heightInPixel:"500px",heightInPercent:"70%",widthInPixel:"350px",widthInPercent:"25%"},botLogoDimensions:{heightInPixel:"30px",heightInPercent:"100%",widthInPixel:"30px",widthInPercent:"100%"}}};x(await o.bE("/bot/initialize-create-bot",r),!0)}async function s(e,t,n){const{organizationId:r}=a.nc.getState();if(!r||!e)throw new Error("Bot details not found");const i=await o.yJ("/bot/".concat(r,"/").concat(e),t);return x(i,n),i}async function c(e){const{organizationId:t,selectedBotId:n}=a.nc.getState();if(!t||!e)throw new Error("Bot details not found");const{deleted:r}=await o.TF("/bot/".concat(t,"/").concat(e));if(r){let{botsMap:e,botsList:t}=a.nc.getState();e={...e},t=[...t],delete e[r];const o=t.findIndex((e=>e._id===r));o>=0&&t.splice(o,1);const s={botsMap:e,botsList:t};var i;if(n===r)s.selectedBotId=(null===(i=t[0])||void 0===i?void 0:i._id)||null;a.nc.setState(s)}return!!r}function l(e,t){let{botDesign:n}=a.nc.getState();return n={...n,...t},s(e,{botDesign:n})}async function d(e,t){const{organizationId:n,selectedBotId:r}=a.nc.getState(),i=new FormData;i.append("file",t);const s=await o.bE("/bot/".concat(n,"/").concat(r,"/update-logo/").concat(e),i);return p(r,s),s["botDesign.".concat(e)]}async function u(e){const{organizationId:t,selectedBotId:n}=a.nc.getState(),r=await o.TF("/bot/".concat(t,"/").concat(n,"/update-logo/").concat(e));return p(n,r),r["botDesign.".concat(e)]}function h(e,t){return s(e,{botName:t})}function m(e,t){let{botSettings:n={}}=a.nc.getState();return n={...n,...t},s(e,{botSettings:n})}function p(e,t){const{botsMap:n}=a.nc.getState(),o=n[e];if(!o)return;x(Object.keys(t).reduce(((e,n)=>(0,r.G6)(e,n,t[n])),o))}function x(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=e._id;let{botsMap:o,botsList:r}=a.nc.getState();o={...o,[n]:e},r=[...r];const i=r.findIndex((e=>e._id===n));i>=0?r[i]=e:r.push(e);const s={botsMap:o,botsList:r};t&&(s.selectedBotId=n),a.nc.setState(s)}},70855:(e,t,n)=>{n.d(t,{G:()=>a});var o=n(33340);function a(e){const t=(0,o.nc)((e=>e.selectedBotId)),n=(0,o.nc)((n=>n.botsMap[e||t]));return[e||t,n]}},32026:(e,t,n)=>{function o(e,t){return e.replace(new RegExp("".concat(a(t),"+$")),"")}function a(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function r(e){const t=new Date(e),n=t.getDate(),o=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][t.getMonth()],a=t.getFullYear();return"".concat(o," ").concat(n,", ").concat(a)}function i(e,t,n){if(!t&&!e)return n;e=e||{};const o=Array.isArray(e)?[...e]:{...e};if(t.includes(".")){const a=t.indexOf("."),r=t.substring(0,a),s=t.substring(a+1);o[r]=i(e[r],s,n)}else o[t]=n;return o}function s(e,t){return btoa("".concat(e,"_").concat(t,"_whatsapp_int"))}function c(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:12;const t="abcdefghijklmnopqrstuvwxyz0123456789";let n="";for(let o=0;o<e;o++)n+=t.charAt(Math.floor(36*Math.random()));return n}function l(e,t,n){if(!t&&!e)return n;e=e||{};const o=Array.isArray(e)?[...e]:{...e};if(t.includes(".")){const a=t.indexOf("."),r=t.substring(0,a),i=t.substring(a+1);o[r]=l(e[r],i,n)}else o[t]=n;return o}n.d(t,{G6:()=>i,OX:()=>c,Yq:()=>r,do:()=>l,qW:()=>s,s8:()=>o})},44364:(e,t,n)=>{n.d(t,{DX:()=>s,Og:()=>r,jn:()=>o,pA:()=>i,pR:()=>a});const o="https://devbackend.livhousing.com",a="c17b949cf58c45cae47ce1cc65efc8240f77a2a69ca09ad4c4208852",r={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_IP_DATA_API_KEY:"c17b949cf58c45cae47ce1cc65efc8240f77a2a69ca09ad4c4208852",REACT_APP_VERSION:"1",REACT_APP_BACKEND_URL:"https://devbackend.livhousing.com"}.TRAINING_MEDIA_MAXSIZE,i={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_IP_DATA_API_KEY:"c17b949cf58c45cae47ce1cc65efc8240f77a2a69ca09ad4c4208852",REACT_APP_VERSION:"1",REACT_APP_BACKEND_URL:"https://devbackend.livhousing.com"}.CONVERSATION_MEDIA_MAXSIZE,s={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_IP_DATA_API_KEY:"c17b949cf58c45cae47ce1cc65efc8240f77a2a69ca09ad4c4208852",REACT_APP_VERSION:"1",REACT_APP_BACKEND_URL:"https://devbackend.livhousing.com"}.REACT_APP_NGROK_BACKEND_URL||"https://devbackend.livhousing.com"}}]);