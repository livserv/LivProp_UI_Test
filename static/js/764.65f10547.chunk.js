"use strict";(self.webpackChunklib_prop_ui=self.webpackChunklib_prop_ui||[]).push([[764],{18678:(e,o,t)=>{t.d(o,{Z:()=>i});var n=t(93701),r=t(46417);function i(e){let{children:o,type:t}=e;return(0,r.jsx)(n.E.div,{whileHover:{scale:1},whileTap:{scale:.9},children:o})}i.defaultProps={type:"scale"}},6505:(e,o,t)=>{t.d(o,{Z:()=>h});var n=t(47313),r=t(19860),i=t(73428),l=t(54641),a=t(61113),s=t(93405),d=t(46417);const c={p:2.5,"& .MuiCardHeader-action":{m:"0px auto",alignSelf:"center"}},h=(0,n.forwardRef)(((e,o)=>{let{border:t=!0,boxShadow:n,children:h,content:u=!0,contentSX:g={},darkTitle:x,elevation:p,secondary:m,shadow:b,sx:v={},title:j,...C}=e;const f=(0,r.Z)();return n="dark"===f.palette.mode?n||!0:n,(0,d.jsxs)(i.Z,{elevation:p||0,ref:o,...C,sx:{border:t?"1px solid":"none",borderRadius:2,borderColor:"dark"===f.palette.mode?f.palette.divider:f.palette.grey.A800,boxShadow:!n||t&&"dark"!==f.palette.mode?"inherit":b||f.customShadows.z1,":hover":{boxShadow:n?b||f.customShadows.z1:"inherit"},"& pre":{m:0,p:"16px !important",fontFamily:f.typography.fontFamily,fontSize:"0.75rem"},...v},children:[!x&&j&&(0,d.jsx)(l.Z,{sx:c,titleTypographyProps:{variant:"subtitle1"},title:j,action:m}),x&&j&&(0,d.jsx)(l.Z,{sx:c,title:(0,d.jsx)(a.Z,{variant:"h3",children:j}),action:m}),u&&(0,d.jsx)(s.Z,{sx:g,children:h}),!u&&h]})}))},94100:(e,o,t)=>{t.d(o,{Z:()=>a});var n=t(47313),r=t(31095),i=t(85281),l=t(46417);const a=function(e){let{onClick:o,disabled:t,isLoading:a,children:s,...d}=e;const[c,h]=n.useState(a);return(0,l.jsxs)(r.Z,{onClick:e=>{if(!o)return;const t=o(e);"function"===typeof(null===t||void 0===t?void 0:t.finally)&&(h(!0),t.finally((()=>h(!1))))},disabled:c||a||t,...d,children:[(c||a)&&(0,l.jsx)(i.Z,{size:16,color:"primary",style:{marginRight:"10px"}}),s]})}},83289:(e,o,t)=>{t.r(o),t.d(o,{default:()=>ue});var n=t(47313),r=t(9019),i=t(61113),l=t(52825),a=t(91318),s=t(32203),d=t(80730);function c(){return sessionStorage.getItem("temporary-app-id")}function h(){return localStorage.getItem("permanent-app-id")}async function u(){var e,o,t;const n=s.lB||"d5f26b13e02d0e43f0870c726797b2c2f726b739a4c91bf9e4bb59c2";let r=await d.U2("https://api.ipdata.co?api-key=".concat(n));const i=(new a.UAParser).getResult()||{},{ip:l,is_eu:c,city:h,region:u,region_code:x,region_type:p,country_name:m,country_code:b,continent_name:v,continent_code:j,latitude:C,longitude:f,postal:Z,calling_code:B,time_zone:y,currency:P}=r,S={ipAddress:l,deviceType:null===(e=i.device)||void 0===e?void 0:e.type,browserName:null===(o=i.browser)||void 0===o?void 0:o.name,osName:null===(t=i.os)||void 0===t?void 0:t.name,...g()};return S.locationDetails={is_eu:c,city:h,region:u,region_code:x,region_type:p,country_name:m,country_code:b,continent_name:v,continent_code:j,latitude:C,longitude:f,postal:Z,calling_code:B,time_zone:y,currency:P},S}function g(){const e=new URLSearchParams(window.location.search),o=e.get("sourceUrl"),t=e.get("referrerUrl");return{utmParameters:Array.from(e.keys()).reduce(((o,t)=>{if(t.startsWith("utm_")){const n=e.get(t);n&&"null"!==n&&(o[t]=n)}return o}),{}),sourceUrl:o,referrerUrl:t}}var x=t(26863),p=t(75391),m=t(46417);const b=function(e){var o;let{botDetails:t,botDesign:r,onReceiveChatResponse:i,onChatWindowToggle:a}=e;const[s,g]=n.useState(!1),[x,b]=n.useState(r),[v,Z]=n.useState(!1),[B,y]=n.useState(t),[P,S]=n.useState([]),[w,_]=n.useState(),F=n.useRef({});F.current.showBot=s,F.current.design=x,F.current.bot=B,F.current.onReceiveChatResponse=i,n.useEffect((()=>{y(t)}),[t]),n.useEffect((()=>{b(r)}),[r]),n.useEffect((()=>{const{updateContact:e,bot:o}=F.current;o?f(o,e).then(S):async function(){try{const e=new URLSearchParams(window.location.search),o={authToken:e.get("token")};return await d.U2("/bot/get-bot-details-by-auth-token",o,{noAuth:!0})}catch(e){console.log("Failed to init chat:-",e)}}().then((o=>{y(o);const{design:t}=F.current;!t&&o.botDesign&&b((0,p.K)(o.botDesign)),f(o,e).then(S)})),u().then(_)}),[]);const L=n.useCallback(((e,o)=>{var t,n,r,i;let{showBot:l,design:s}=F.current;l=e?!l:l,null===a||void 0===a||a(l,l?{width:null===s||void 0===s||null===(t=s.window)||void 0===t?void 0:t.width,height:null===s||void 0===s||null===(n=s.window)||void 0===n?void 0:n.height,spacingBottom:null===s||void 0===s||null===(r=s.window)||void 0===r?void 0:r.spacingBottom,spacingCorner:null===s||void 0===s||null===(i=s.window)||void 0===i?void 0:i.spacingCorner}:o)}),[a]),T=n.useCallback((()=>{L(!0),g((e=>!e)),Z(!0),setTimeout((()=>Z(!1)),1e3)}),[L]);n.useLayoutEffect((()=>{L(!1,!0)}),[L]);const k=n.useCallback((async e=>{const{updateContact:o,onReceiveChatResponse:t,bot:n}=F.current;return await async function(e,o,t,n){const r=h(),i=c(),l=u(),{_id:a,organizationId:s}=o,g={userQuery:e,recipientDetails:{recipientId:r,conversationId:i,...l}};t&&(g.testMode=!0);try{const e=await d.v_("/bot/".concat(s,"/").concat(a,"/chat"),g,{noAuth:!0});return null===t||void 0===t||t(e),function(e,o){const{chatRefId:t,recipientId:n,messages:r}=e;return function(e){sessionStorage.setItem("temporary-app-id",e)}(t),function(e){localStorage.setItem("permanent-app-id",e)}(n),C(r,o)}(e,n)}catch(x){return[{role:"assistant",type:"text",content:x.message||"Unknown Server error"}]}}(e,n,t,o)}),[]);if(F.current.updateContact=n.useCallback((async e=>{const o=await k(e);S((e=>e.filter((e=>"lead"!==e.type)).concat(...o)))}),[k]),!B||!w)return null;let E="hide-chat";return s&&v?E="opening":s&&!v?E="show-chat":!s&&v&&(E="closing"),E+="bottomLeft"===(null===x||void 0===x||null===(o=x.window)||void 0===o?void 0:o.align)?" bottom-left ":" bottom-right ",(0,m.jsxs)("div",{className:"chat-handler "+E,children:[(0,m.jsx)(l.Z,{botDesign:x,messages:P,showTime:!0,onUserMessage:k,onHistoryChange:S,onClear:()=>{S([]),sessionStorage.removeItem("temporary-app-id")},onHide:T}),!s&&!v&&(0,m.jsx)(j,{design:x,onToggle:T})]})},v=(0,x.yj)("42px");function j(e){let{design:o,onToggle:t}=e;const{launcher:{useBar:n=!1,buttonLogoUrl:r,buttonOnMobile:i,barText:l}={},header:{bgColor:a,fontColor:s}={}}=o||{};return!n||i?(0,m.jsxs)("div",{id:"lp-launcher",className:"lp-launcher button",onClick:t,style:{borderColor:a},children:[r&&(0,m.jsx)("img",{src:r,alt:"Live Chat"}),!r&&v]}):(0,m.jsx)("div",{id:"lp-launcher",className:"lp-launcher bar",onClick:t,style:{backgroundColor:a,color:s},children:(0,m.jsxs)("span",{children:[x.E," ",l||"Live Chat"]})})}function C(e,o){if(null===e||void 0===e||!e.length)return e;const t=e[e.length-1];return"form"===t.type&&e.push({role:"user",type:"lead",content:"",profile:t.media,updateContact:o}),e}async function f(e,o){const{_id:t,organizationId:n}=e,r=h(),i=c();if(!r||!i)return[];try{const e=await d.U2("/bot/".concat(n,"/").concat(t,"/chat/history/").concat(r,"/").concat(i),null,{noAuth:!0}),{messages:l}=e||{};return C(l,o)}catch(l){console.log("Failed to fetch chat history:-",l)}}var Z=t(969),B=t(49542),y=t(41806),P=t(19536),S=t(42832),w=t(23306),_=t(15480),F=t(37843),L=t(55685),T=t(83929),k=t(74268),E=t(31095),N=t(24256),R=t(51405),A=t(21933),I=t(24977),W=t(6505),M=t(18678),D=t(4450);const O=function(e){let{value:o,onChange:t,...r}=e;const[i,l]=n.useState(!1),a=n.useRef(),s=n.useRef(),d=e=>{let{hex:o}=e;t(r.name,o)};return n.useEffect((()=>{const e=e=>{a.current&&!a.current.contains(e.target)&&l(!1)};return document.addEventListener("click",e),()=>{document.removeEventListener("click",e)}}),[]),(0,m.jsxs)("div",{ref:a,style:{position:"relative"},children:[(0,m.jsx)("div",{style:{backgroundColor:o,height:"35px",width:"35px",position:"absolute",top:"3px",left:"3px"}}),(0,m.jsx)(F.Z,{inputRef:s,value:o,onChange:e=>d({hex:e.currentTarget.value}),maxLength:9,...r,type:"text",onFocus:()=>l(!0),style:{paddingLeft:"32px"}}),i&&(0,m.jsx)("div",{style:{position:"absolute",zIndex:1,top:"45px"},children:(0,m.jsx)(D.AI,{color:o,onChange:d})})]})};var U=t(45960);const V=function(e){let{value:o,onChange:t,...r}=e;const i=n.useCallback((e=>t(r.name,"yes"===e.target.value)),[r.name,t]);return(0,m.jsxs)(N.Z,{...r,value:o?"yes":"no",defaultValue:o?"yes":"no",onChange:i,children:[(0,m.jsx)(R.Z,{value:"no",children:"No"}),(0,m.jsx)(R.Z,{value:"yes",children:"Yes"})]})},z=[{value:"gpt-3.5-turbo-16k",label:"GPT 3.5 Latest Stable (default)",description:"Latest stable model of GPT 3.5. Cheapest and more performant. Random minor inconsistency observed sometimes."},{value:"gpt-3.5-turbo-1106",label:"GPT 3.5 Latest Preview",description:"Latest preview model of GPT 3.5. This is more accurate than latest stable, but some times non responsive while on peek loads."},{value:"gpt-4",label:"GPT 4 Latest Stable",description:"Latest stable model of GPT 4. More capable, but is 5 times costly then 3.5 models."},{value:"gpt-4-1106-preview",label:"GPT 4 Latest Preview (suggested)",description:"Latest preview model of GPT 4. Most capable model, but is 3 times costly then 3.5 models."}],H=z.reduce(((e,o)=>(e[o.value]=o,e)),{});const K=function(e){var o;let{value:t,...n}=e;return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(N.Z,{...n,value:t,defaultValue:z[0].value,children:z.map((e=>(0,m.jsx)(R.Z,{value:e.value,children:e.label},e.value)))}),(0,m.jsx)(_.Z,{id:"bot-model-description",children:t?null===(o=H[t])||void 0===o?void 0:o.description:z[0].description})]})};var G=t(94100),$=t(17592),J=t(63950);const Y=()=>A.Z_().matches(/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{8})$/,"Is not a valid color code").required("Background color is required"),X=e=>A.Z_().matches(/^(\d+px|\d+%) (\d+px|\d+%) (\d+px|\d+%) (\d+px|\d+%|\d+%)$/,"Invalid ".concat(e,"! Use the format: 1px 2px 3px 4px not a valid code")),q=A.Ry().shape({bgColor:Y(),fontColor:Y(),headerPadding:X("padding"),headerLogoMargin:X("margin"),visitorBubbleBorderCurve:X("border-radius"),botBubbleBorderCurve:X("border-radius")}),Q={maxWidth:{xs:400,lg:475},margin:{xs:2.5,md:3},"& > *":{flexGrow:1,flexBasis:"50%"}};const ee=function(e){let{onChange:o}=e;const[t,n]=(0,Z.g)(),{botName:i,botDesign:l={}}=n,a={bgColor:l.backgroundColor||"#484a49",botBorderColor:l.botBorderColor||"#484a49",botBackgroundColor:l.botBackgroundColor||"#9c27b0",botFontColor:l.botFontColor||"#000000",visitorBorderColor:l.visitorBorderColor||"#000000",visitorBackgroundColor:l.visitorBackgroundColor||"#ffffff",visitorFontColor:l.visitorFontColor||"#000000",fontType:l.fontType||"normal-font",windowAlign:l.windowAlign||"bottomRight",fontColor:l.textColor||"#484a49",titleText:i,placeholder:"Type your message...",launcherType:"bar",...l};return(0,m.jsx)(W.Z,{sx:Q,content:!1,border:!1,boxShadow:!0,children:(0,m.jsx)(y.Z,{sx:{p:{xs:2,sm:3,md:4,xl:5}},children:(0,m.jsx)(I.J9,{initialValues:a,validationSchema:q,onSubmit:async(e,o)=>{let{setErrors:n,setStatus:r,setSubmitting:i}=o;try{await(0,U.Bc)(t,e),r({success:!1}),i(!1)}catch(l){console.error(l),r({success:!1}),n({submit:l.message}),i(!1)}},children:e=>(0,m.jsxs)("form",{noValidate:!0,onSubmit:e.handleSubmit,children:[(0,m.jsxs)(r.ZP,{container:!0,spacing:3,children:[(0,m.jsx)(oe,{...e}),(0,m.jsx)(te,{...e}),(0,m.jsx)(ne,{...e}),(0,m.jsx)(ce,{...e}),(0,m.jsx)(re,{...e}),(0,m.jsx)(ie,{...e}),(0,m.jsx)(se,{...e}),(0,m.jsx)(de,{...e})]}),(0,m.jsx)(he,{onChange:o})]})})})})};function oe(e){let{values:o,touched:t,errors:n,handleBlur:l,handleChange:a}=e;return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(r.ZP,{item:!0,xs:12,children:(0,m.jsx)(P.Z,{children:(0,m.jsx)(i.Z,{variant:"subtitle1",children:"General Settings"})})}),(0,m.jsx)(r.ZP,{item:!0,xs:12,children:(0,m.jsxs)(S.Z,{spacing:1,children:[(0,m.jsx)(w.Z,{htmlFor:"botModelName",children:"Underlying GPT Model *"}),(0,m.jsx)(K,{id:"botModelName",value:o.botModelName,name:"botModelName",onBlur:l,onChange:a,error:Boolean(t.botModelName&&n.botModelName)}),t.botModelName&&n.botModelName&&(0,m.jsx)(_.Z,{error:!0,id:"helper-text-bg-color",children:n.botModelName})]})})]})}function te(e){let{values:o,touched:t,errors:n,handleBlur:l,handleChange:a,setFieldValue:s}=e;return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(r.ZP,{item:!0,xs:12,children:(0,m.jsx)(P.Z,{children:(0,m.jsx)(i.Z,{variant:"subtitle1",children:"Header Settings"})})}),(0,m.jsx)(r.ZP,{item:!0,xs:12,md:6,children:(0,m.jsxs)(S.Z,{spacing:1,children:[(0,m.jsx)(w.Z,{htmlFor:"bgColor",children:"Background Color *"}),(0,m.jsx)(O,{id:"bgColor",type:"color",value:o.bgColor,name:"bgColor",onBlur:l,onChange:s,placeholder:"",fullWidth:!0,error:Boolean(t.bgColor&&n.bgColor)}),t.bgColor&&n.bgColor&&(0,m.jsx)(_.Z,{error:!0,id:"helper-text-bg-color",children:n.bgColor})]})}),(0,m.jsx)(r.ZP,{item:!0,xs:12,md:6,children:(0,m.jsxs)(S.Z,{spacing:1,children:[(0,m.jsx)(w.Z,{htmlFor:"fontColor",children:"Font Color *"}),(0,m.jsx)(O,{id:"fontColor",type:"color",value:o.fontColor,name:"fontColor",onBlur:l,onChange:s,placeholder:"",fullWidth:!0,error:Boolean(t.fontColor&&n.fontColor)}),t.fontColor&&n.fontColor&&(0,m.jsx)(_.Z,{error:!0,id:"helper-text-font-color",children:n.fontColor})]})}),(0,m.jsx)(r.ZP,{item:!0,xs:12,children:(0,m.jsxs)(S.Z,{spacing:1,children:[(0,m.jsx)(w.Z,{htmlFor:"headerPadding",style:{paddingBottom:"6px"},children:"Chat Window Header Padding"}),(0,m.jsx)(F.Z,{id:"headerPadding",name:"headerPadding",value:o.headerPadding,onBlur:l,onChange:a,placeholder:"padding: 2px 5px 2px 5px"}),t.headerPadding&&n.headerPadding&&(0,m.jsx)(_.Z,{error:!0,id:"helper-text-bg-color",children:n.headerPadding})]})}),(0,m.jsx)(r.ZP,{item:!0,xs:12,children:(0,m.jsxs)(S.Z,{spacing:1,children:[(0,m.jsx)(w.Z,{htmlFor:"titleText",children:"Chat Window Title *"}),(0,m.jsx)(F.Z,{fullWidth:!0,error:Boolean(t.titleText&&n.titleText),id:"titleText",value:o.titleText,name:"titleText",onBlur:l,onChange:a,placeholder:"Provide your bot title text",inputProps:{maxLength:25}}),t.titleText&&n.titleText&&(0,m.jsx)(_.Z,{error:!0,id:"helper-text-bot-title",children:n.titleText})]})}),(0,m.jsx)(r.ZP,{item:!0,xs:12,md:6,children:(0,m.jsxs)(S.Z,{spacing:1,children:[(0,m.jsx)(w.Z,{htmlFor:"chatWindowWidth",children:"Chat Window Width"}),(0,m.jsx)(F.Z,{fullWidth:!0,type:"text",id:"chatWindowWidth",name:"chatWindowWidth",defaultValue:o.chatWindowWidth,onChange:a,placeholder:"300px"})]})}),(0,m.jsx)(r.ZP,{item:!0,xs:12,md:6,children:(0,m.jsxs)(S.Z,{spacing:1,children:[(0,m.jsx)(w.Z,{htmlFor:"chatWindowHeight",children:"Chat Window Height"}),(0,m.jsx)(F.Z,{fullWidth:!0,type:"text",id:"chatWindowHeight",name:"chatWindowHeight",defaultValue:o.chatWindowHeight,onChange:a,placeholder:"320px"})]})})]})}function ne(e){let{values:o,touched:t,errors:n,handleBlur:l,handleChange:a}=e;return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(r.ZP,{item:!0,xs:12,children:(0,m.jsx)(P.Z,{children:(0,m.jsx)(i.Z,{variant:"subtitle1",children:"Composer Settings"})})}),(0,m.jsx)(r.ZP,{item:!0,xs:12,children:(0,m.jsxs)(S.Z,{spacing:1,children:[(0,m.jsx)(w.Z,{htmlFor:"placeholder",children:"Placeholder Text *"}),(0,m.jsx)(F.Z,{fullWidth:!0,error:Boolean(t.placeholder&&n.placeholder),id:"placeholder",defaultValue:o.placeholder,name:"placeholder",onBlur:l,onChange:a,placeholder:"Type your message...",inputProps:{maxLength:30}}),t.placeholder&&n.placeholder&&(0,m.jsx)(_.Z,{error:!0,id:"helper-text-message-placeholder",children:n.placeholder})]})}),(0,m.jsx)(r.ZP,{item:!0,xs:12,children:(0,m.jsxs)(S.Z,{spacing:1,children:[(0,m.jsx)(w.Z,{htmlFor:"fontType",children:"Font Name / Google Font Link"}),(0,m.jsxs)(L.Z,{row:!0,id:"fontType",name:"fontType",defaultValue:o.fontType,onChange:a,children:[(0,m.jsx)(T.Z,{value:"normalFont",control:(0,m.jsx)(k.Z,{}),label:"Normal Font"}),(0,m.jsx)(T.Z,{value:"googleFont",control:(0,m.jsx)(k.Z,{}),label:"Google Font"})]}),(0,m.jsx)(F.Z,{fullWidth:!0,id:"fontName",name:"fontName",defaultValue:o.fontName,onChange:a,placeholder:"Provide Font Name"}),"googleFont"==o.fontType&&(0,m.jsx)(r.ZP,{item:!0,xs:12,children:(0,m.jsxs)(S.Z,{spacing:1,children:[(0,m.jsx)(w.Z,{htmlFor:"googleFontLink",children:"Paste Google Font Link"}),(0,m.jsx)(F.Z,{multiline:!0,id:"googleFontLink",name:"googleFontLink",defaultValue:o.googleFontLink,onChange:a,placeholder:"Ex: <link rel='preconnect' href='https://fonts.googleapis.com'>"})]})})]})})]})}function re(e){let{values:o,handleChange:t,setFieldValue:n}=e;return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(r.ZP,{item:!0,xs:12,children:(0,m.jsx)(P.Z,{children:(0,m.jsx)(i.Z,{variant:"subtitle1",children:"Chat Window Position"})})}),(0,m.jsx)(r.ZP,{item:!0,xs:12,md:6,children:(0,m.jsxs)(S.Z,{spacing:1,children:[(0,m.jsx)(w.Z,{id:"windowAlign",children:"Window Align"}),(0,m.jsxs)(N.Z,{labelId:"windowAlign",defaultValue:o.windowAlign,name:"windowAlign",onChange:t,children:[(0,m.jsx)(R.Z,{value:"bottomLeft",children:"Bottom Left"}),(0,m.jsx)(R.Z,{value:"bottomRight",children:"Bottom Right"})]})]})}),(0,m.jsx)(r.ZP,{item:!0,xs:12,md:6,children:(0,m.jsxs)(S.Z,{spacing:1,children:[(0,m.jsx)(w.Z,{id:"miniMizeOnClick",children:"Window Minimized on Click"}),(0,m.jsx)(V,{value:o.miniMizeOnClick,name:"miniMizeOnClick",defaultValue:!1,onChange:n})]})}),(0,m.jsx)(r.ZP,{item:!0,xs:12,md:6,children:(0,m.jsxs)(S.Z,{spacing:1,children:[(0,m.jsx)(w.Z,{htmlFor:"paddingLeft",children:"Spacing on corner"}),(0,m.jsx)(F.Z,{fullWidth:!0,type:"text",id:"paddingLeft",name:"paddingLeft",defaultValue:o.paddingLeft,onChange:t,placeholder:"0px"})]})}),(0,m.jsx)(r.ZP,{item:!0,xs:12,md:6,children:(0,m.jsxs)(S.Z,{spacing:1,children:[(0,m.jsx)(w.Z,{htmlFor:"paddingBottom",children:"Spacing on Bottom"}),(0,m.jsx)(F.Z,{fullWidth:!0,type:"text",id:"paddingBottom",name:"paddingBottom",defaultValue:o.paddingBottom,onChange:t,placeholder:"0px"})]})})]})}function ie(e){let{values:o,errors:t,handleBlur:n,touched:l,handleChange:a}=e;return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(r.ZP,{item:!0,xs:12,children:(0,m.jsx)(P.Z,{children:(0,m.jsx)(i.Z,{variant:"subtitle1",children:"Chat Window Header Logo Settings"})})}),(0,m.jsxs)(r.ZP,{item:!0,xs:12,children:[(0,m.jsx)(w.Z,{htmlFor:"uploadHeaderLogo",children:"Upload Header Logo"}),(0,m.jsx)(ae,{})]}),(0,m.jsx)(r.ZP,{item:!0,xs:12,md:6,children:(0,m.jsxs)(S.Z,{spacing:1,children:[(0,m.jsx)(w.Z,{htmlFor:"logoWidth",children:"Width"}),(0,m.jsx)(F.Z,{fullWidth:!0,type:"text",id:"logoWidth",name:"logoWidth",defaultValue:o.logoWidth,onChange:a,placeholder:"64px"})]})}),(0,m.jsx)(r.ZP,{item:!0,xs:12,md:6,children:(0,m.jsxs)(S.Z,{spacing:1,children:[(0,m.jsx)(w.Z,{htmlFor:"logoHeight",children:"Height"}),(0,m.jsx)(F.Z,{fullWidth:!0,type:"text",id:"logoHeight",name:"logoHeight",defaultValue:o.logoHeight,onChange:a,placeholder:"64px"})]})}),(0,m.jsx)(r.ZP,{item:!0,xs:12,children:(0,m.jsxs)(S.Z,{spacing:1,children:[(0,m.jsx)(w.Z,{htmlFor:"headerLogoMargin",children:"Header Logo Margin"}),(0,m.jsx)(F.Z,{id:"headerLogoMargin",name:"headerLogoMargin",value:o.headerLogoMargin,onBlur:n,onChange:a,placeholder:"border : 1px 2px 3px 4px"}),l.headerLogoMargin&&t.headerLogoMargin&&(0,m.jsx)(_.Z,{error:!0,id:"helper-text-bg-color",children:t.headerLogoMargin})]})})]})}const le=(0,$.ZP)("input")({clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:1,overflow:"hidden",position:"absolute",bottom:0,left:0,whiteSpace:"nowrap",width:1});function ae(){const[e]=(0,Z.g)(),[o,t]=(0,n.useState)(!1),[r,l]=(0,n.useState)(""),[a,s]=(0,n.useState)("");return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)(S.Z,{spacing:2,direction:"row",children:[(0,m.jsxs)(E.Z,{component:"label",variant:"contained",children:["Select File",(0,m.jsx)(le,{type:"file",onChange:e=>{const{name:o,type:n}=e.target.files[0];n.startsWith("image/")?(l(o),t(!0),s("")):(s("Please upload valid image file"),l(""),t(!1))}})]}),o&&(0,m.jsx)(m.Fragment,{children:(0,m.jsx)(E.Z,{variant:"contained",startIcon:(0,m.jsx)(J.Z,{}),onClick:()=>{console.log("File Name :",r,"Bot ID :",e)},ml:5,children:"Upload"})})]}),r&&(0,m.jsxs)(i.Z,{variant:"body2",children:["File Name : ",r," "]}),""!=a&&(0,m.jsx)(i.Z,{variant:"body2",color:"red",children:a})]})}function se(e){let{values:o,touched:t,errors:n,handleBlur:l,handleChange:a,setFieldValue:s}=e;return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(r.ZP,{item:!0,xs:12,children:(0,m.jsx)(P.Z,{children:(0,m.jsx)(i.Z,{variant:"subtitle1",children:"Message Bubble Settings"})})}),(0,m.jsx)(r.ZP,{item:!0,xs:12,children:(0,m.jsxs)(S.Z,{spacing:1,children:[(0,m.jsx)(w.Z,{htmlFor:"messageBubbleLogo",children:"Show Message Bubble Logo"}),(0,m.jsx)(V,{id:"messageBubbleLogo",name:"messageBubbleLogo",value:o.messageBubbleLogo,defaultValue:!1,onChange:s})]})}),(0,m.jsx)(r.ZP,{item:!0,xs:12,children:(0,m.jsx)(i.Z,{variant:"overline",display:"block",style:{color:"#9C27B0"},children:"Visitor Bubble Settings"})}),o.messageBubbleLogo&&(0,m.jsxs)(r.ZP,{item:!0,xs:12,children:[(0,m.jsx)(w.Z,{htmlFor:"uploadVisitorLogo",children:"Upload Visitor Logo"}),(0,m.jsx)(ae,{})]}),(0,m.jsx)(r.ZP,{item:!0,xs:12,md:6,children:(0,m.jsxs)(S.Z,{spacing:1,children:[(0,m.jsx)(w.Z,{htmlFor:"visitorBorderColor",children:"Border Color"}),(0,m.jsx)(O,{id:"visitorBorderColor",type:"color",value:o.visitorBorderColor,name:"visitorBorderColor",onBlur:l,onChange:s,placeholder:"",fullWidth:!0,error:Boolean(t.visitorBorderColor&&n.visitorBorderColor)}),t.visitorBorderColor&&n.visitorBorderColor&&(0,m.jsx)(_.Z,{error:!0,id:"helper-text-bg-color",children:n.visitorBorderColor})]})}),(0,m.jsx)(r.ZP,{item:!0,xs:12,md:6,children:(0,m.jsxs)(S.Z,{spacing:1,children:[(0,m.jsx)(w.Z,{htmlFor:"visitorBackgroundColor",children:"Background Color"}),(0,m.jsx)(O,{id:"visitorBackgroundColor",type:"color",value:o.visitorBackgroundColor,name:"visitorBackgroundColor",onBlur:l,onChange:s,placeholder:"",fullWidth:!0,error:Boolean(t.visitorBackgroundColor&&n.visitorBackgroundColor)}),t.visitorBackgroundColor&&n.visitorBackgroundColor&&(0,m.jsx)(_.Z,{error:!0,id:"helper-text-bg-color",children:n.visitorBackgroundColor})]})}),(0,m.jsx)(r.ZP,{item:!0,xs:12,md:6,children:(0,m.jsxs)(S.Z,{spacing:1,children:[(0,m.jsx)(w.Z,{htmlFor:"visitorFontColor",children:"Font Color"}),(0,m.jsx)(O,{id:"visitorFontColor",type:"color",value:o.visitorFontColor,name:"visitorFontColor",onBlur:l,onChange:s,placeholder:"",fullWidth:!0,error:Boolean(t.visitorFontColor&&n.visitorFontColor)}),t.visitorFontColor&&n.visitorFontColor&&(0,m.jsx)(_.Z,{error:!0,id:"helper-text-bg-color",children:n.visitorFontColor})]})}),"yes"==o.visitorLogo&&(0,m.jsx)(r.ZP,{item:!0,xs:12,children:(0,m.jsxs)(S.Z,{spacing:1,children:[(0,m.jsx)(w.Z,{htmlFor:"visitorLogoImage",children:"Upload Visitor Logo"}),(0,m.jsx)(F.Z,{fullWidth:!0,type:"file",id:"visitorLogoImage",name:"visitorLogoImage",onChange:a,placeholder:"0px"})]})}),(0,m.jsx)(r.ZP,{item:!0,xs:12,children:(0,m.jsxs)(S.Z,{spacing:1,children:[(0,m.jsx)(w.Z,{htmlFor:"visitorBubbleBorderCurve",style:{paddingBottom:"6px"},children:"Border Radius"}),(0,m.jsx)(F.Z,{id:"visitorBubbleBorderCurve",name:"visitorBubbleBorderCurve",value:o.visitorBubbleBorderCurve,onBlur:l,onChange:a,placeholder:"border : 1px 2px 3px 4px"}),t.visitorBubbleBorderCurve&&n.visitorBubbleBorderCurve&&(0,m.jsx)(_.Z,{error:!0,id:"helper-text-bg-color",children:n.visitorBubbleBorderCurve})]})}),(0,m.jsx)(r.ZP,{item:!0,xs:12,children:(0,m.jsx)(i.Z,{variant:"overline",display:"block",style:{color:"#9C27B0"},children:"Bot Bubble Settings"})}),o.messageBubbleLogo&&(0,m.jsxs)(r.ZP,{item:!0,xs:12,children:[(0,m.jsx)(w.Z,{htmlFor:"uploadBotLogo",children:"Upload Bot Logo"}),(0,m.jsx)(ae,{})]}),(0,m.jsx)(r.ZP,{item:!0,xs:12,md:6,children:(0,m.jsxs)(S.Z,{spacing:1,children:[(0,m.jsx)(w.Z,{htmlFor:"botBorderColor",children:"Border Color"}),(0,m.jsx)(O,{id:"botBorderColor",type:"color",value:o.botBorderColor,name:"botBorderColor",onBlur:l,onChange:s,placeholder:"",fullWidth:!0,error:Boolean(t.botBorderColor&&n.botBorderColor)}),t.botBorderColor&&n.botBorderColor&&(0,m.jsx)(_.Z,{error:!0,id:"helper-text-bg-color",children:n.botBorderColor})]})}),(0,m.jsx)(r.ZP,{item:!0,xs:12,md:6,children:(0,m.jsxs)(S.Z,{spacing:1,children:[(0,m.jsx)(w.Z,{htmlFor:"botBackgroundColor",children:"Background Color"}),(0,m.jsx)(O,{id:"botBackgroundColor",type:"color",value:o.botBackgroundColor,name:"botBackgroundColor",onBlur:l,onChange:s,placeholder:"",fullWidth:!0,error:Boolean(t.botBackgroundColor&&n.botBackgroundColor)}),t.botBackgroundColor&&n.botBackgroundColor&&(0,m.jsx)(_.Z,{error:!0,id:"helper-text-bg-color",children:n.botBackgroundColor})]})}),(0,m.jsx)(r.ZP,{item:!0,xs:12,md:6,children:(0,m.jsxs)(S.Z,{spacing:1,children:[(0,m.jsx)(w.Z,{htmlFor:"botFontColor",children:"Font Color"}),(0,m.jsx)(O,{id:"botFontColor",type:"color",value:o.botFontColor,name:"botFontColor",onBlur:l,onChange:s,placeholder:"",fullWidth:!0,error:Boolean(t.botFontColor&&n.botFontColor)}),t.botFontColor&&n.botFontColor&&(0,m.jsx)(_.Z,{error:!0,id:"helper-text-bg-color",children:n.botFontColor})]})}),(0,m.jsxs)(r.ZP,{item:!0,xs:12,children:[(0,m.jsxs)(S.Z,{spacing:1,children:[(0,m.jsx)(w.Z,{htmlFor:"botBubbleBorderCurve",style:{paddingBottom:"6px"},children:"Border Radius"}),(0,m.jsx)(F.Z,{id:"botBubbleBorderCurve",name:"botBubbleBorderCurve",value:o.botBubbleBorderCurve,onBlur:l,onChange:a,placeholder:"border : 1px 2px 3px 4px"}),t.botBubbleBorderCurve&&n.botBubbleBorderCurve&&(0,m.jsx)(_.Z,{error:!0,id:"helper-text-bg-color",children:n.botBubbleBorderCurve})]}),(0,m.jsx)(i.Z,{variant:"caption",display:"block",gutterBottom:!0,children:"border: top-left top-right bottom-right bottom-left"})]})]})}function de(e){let{errors:o,isSubmitting:t}=e;return(0,m.jsx)(m.Fragment,{children:(0,m.jsxs)(r.ZP,{item:!0,xs:12,children:[(0,m.jsx)(_.Z,{error:!0,children:o.submit}),(0,m.jsx)(M.Z,{children:(0,m.jsx)(G.Z,{disableElevation:!0,disabled:Boolean(o.submit),isLoading:t,fullWidth:!0,size:"large",type:"submit",variant:"contained",color:"primary",children:"Save Settings"})})]})})}function ce(e){let{values:o,handleChange:t,setFieldValue:n}=e;return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(r.ZP,{item:!0,xs:12,children:(0,m.jsx)(P.Z,{children:(0,m.jsx)(i.Z,{variant:"subtitle1",children:"Chat Launcher Settings"})})}),(0,m.jsx)(r.ZP,{item:!0,xs:12,children:(0,m.jsxs)(S.Z,{spacing:1,children:[(0,m.jsx)(w.Z,{htmlFor:"messagePlaceholder",children:"Launcher Type *"}),(0,m.jsxs)(L.Z,{row:!0,name:"launcherType",defaultValue:o.launcherType,onChange:t,children:[(0,m.jsx)(T.Z,{value:"icon",control:(0,m.jsx)(k.Z,{}),label:"Chat Button"}),(0,m.jsx)(T.Z,{value:"bar",control:(0,m.jsx)(k.Z,{}),label:"Launch with Bar"})]})]})}),"icon"==o.launcherType&&(0,m.jsxs)(r.ZP,{item:!0,xs:12,children:[(0,m.jsx)(w.Z,{htmlFor:"uploadChatButton",children:"Upload Chat Button"}),(0,m.jsx)(ae,{})]}),"bar"==o.launcherType&&(0,m.jsx)(r.ZP,{item:!0,xs:12,children:(0,m.jsxs)(S.Z,{spacing:1,children:[(0,m.jsx)(w.Z,{id:"buttonOnMobile",children:"Button on Mobile"}),(0,m.jsx)(V,{name:"buttonOnMobile",value:o.buttonOnMobile,defaultValue:!1,onChange:n})]})})]})}function he(e){let{onChange:o}=e;const{values:t}=(0,I.u6)();return n.useEffect((()=>{t&&o((0,p.K)(t))}),[t,o]),null}const ue=()=>{const[e,o]=n.useState({}),[,t]=(0,Z.g)();return(0,m.jsxs)(r.ZP,{container:!0,rowSpacing:4.5,columnSpacing:2.75,children:[(0,m.jsx)(r.ZP,{item:!0,xs:12,sx:{mb:-2.25},children:(0,m.jsx)(i.Z,{variant:"h5",children:"Chat Window Design"})}),(0,m.jsx)(r.ZP,{item:!0,xs:12,sm:12,md:12,lg:6,children:(0,m.jsx)(ee,{onChange:o})}),(0,m.jsx)(r.ZP,{item:!0,xs:12,sm:12,md:12,lg:6,children:(0,m.jsx)(b,{botDetails:t,botDesign:e,onReceiveChatResponse:e=>(0,B.gy)(e.organization)})}),(0,m.jsx)(r.ZP,{item:!0,md:8,sx:{display:{sm:"none",md:"block",lg:"none"}}})]})}},80730:(e,o,t)=>{t.d(o,{Od:()=>a,TY:()=>c,U2:()=>i,v_:()=>l});var n=t(89637),r=t(32203);async function i(e,o){return s("GET",e,o,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}async function l(e,o){return s("POST",e,o,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}async function a(e,o){return s("DELETE",e,o,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}async function s(e,o,t){let{headers:n,noAuth:r,...i}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const l="POST"===e||"PUT"===e||"DELETE"===e;if(o=c(o,l?void 0:t),t=t&&"object"===typeof t&&l?JSON.stringify(t):void 0,n||(n={}),n["Content-Type"]="application/json",n.Accept="application/json",!1!==r){const e=sessionStorage.getItem("token");e&&(n.Authorization="Bearer ".concat(e))}const a=await fetch(o,{...i,headers:n,body:t,method:e}),s=await a.json();if(a.ok){const{data:e,...o}=s;return delete o.status,e&&!Object.keys(o).length?e:s}throw s.message?new Error(s.message):s}const d=(0,n.lf)(r.Hi,"/");function c(e,o){if(!e)return e;const t=o&&new URLSearchParams(o);return null!==t&&void 0!==t&&t.size&&(e.includes("?")?e+="&"+t.toString():e+="?"+t.toString()),e.startsWith("https://")?e:"".concat(d).concat(e)}},45960:(e,o,t)=>{t.d(o,{Bc:()=>l,Iz:()=>a,lz:()=>i,pb:()=>s});var n=t(80730),r=t(23509);async function i(e){const{organization:{websiteUrl:o,_id:t}}=r.tN.getState(),i={organizationId:t,websiteUrl:o,botName:e,botDesign:{botLogo:{name:"",url:""},backgroundColor:"coral",textColor:"#fff",dimensions:{heightInPixel:"500px",heightInPercent:"70%",widthInPixel:"350px",widthInPercent:"25%"},botLogoDimensions:{heightInPixel:"30px",heightInPercent:"100%",widthInPixel:"30px",widthInPercent:"100%"}}},l=await n.v_("/bot/initialize-create-bot",i),a=l._id;let{botsMap:s,botsList:d}=r.tN.getState();s={...s,[a]:l},d=[...d],d.push(l._doc),r.tN.setState({selectedBotId:a,botsMap:s,botsList:d})}async function l(e,o){let{botDesign:t}=r.tN.getState();t={...t,...o};d(await n.v_("/bot/save-bot-design",{botDesign:t},{headers:{botId:e}}))}async function a(e,o){const t=await n.v_("/bot/edit-bot-details",o);let{botsMap:i,botsList:l}=r.tN.getState();i={...i,[e]:t},l=[...l];const a=l.findIndex((o=>o._id===e));a>=0&&(l[a]=t[a]),r.tN.setState({selectedBotId:e,botsMap:i,botsList:l})}async function s(e,o){let{botSettings:t={}}=r.tN.getState();t={...t,...o};d(await n.v_("/bot/save-bot-settings",{botSettings:t},{headers:{botId:e}}))}function d(e){const o=e._id;let{botsMap:t,botsList:n}=r.tN.getState();t={...t,[o]:e},n=[...n];const i=n.findIndex((e=>e._id===o));i>=0?n[i]=e:n.push(e),r.tN.setState({selectedBotId:o,botsMap:t,botsList:n})}},49542:(e,o,t)=>{t.d(o,{$9:()=>a,RF:()=>i,gy:()=>l,vv:()=>s});var n=t(80730),r=t(23509);async function i(e,o){const{organizationId:t}=r.tN.getState();return e?e!==t&&r.tN.setState({organizationId:e}):e=t,await async function(e,o){var t;const i=await n.v_("/bot/get-all-bots",{organizationId:e}),l=o||(null===(t=i[0])||void 0===t?void 0:t._id),a=i.reduce(((e,o)=>(e[o._id]=o,e)),{});r.tN.setState({organizationId:e,botsList:i,botsMap:a,selectedBotId:l})}(e,o),!0}function l(e){if(!e||"object"!==typeof e)return;let{organization:o}=r.tN.getState();o&&(o={...o,...e},r.tN.setState({organization:o}))}async function a(e){const o=await n.v_("/organization/get-organization-by-id",{organizationId:e});r.tN.setState({organization:o})}function s(e){r.tN.setState({selectedBotId:e})}},969:(e,o,t)=>{t.d(o,{g:()=>r});var n=t(23509);function r(e){const o=(0,n.tN)((e=>e.selectedBotId)),t=(0,n.tN)((t=>t.botsMap[e||o]));return[e||o,t]}},89637:(e,o,t)=>{function n(e,o){return e.replace(new RegExp("".concat(r(o),"+$")),"")}function r(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function i(e){const o=new Date(e),t=o.getDate(),n=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][o.getMonth()],r=o.getFullYear();return"".concat(n," ").concat(t,", ").concat(r)}t.d(o,{lf:()=>n,p6:()=>i})},32203:(e,o,t)=>{t.d(o,{Hi:()=>n,LC:()=>a,lB:()=>r,rn:()=>l,yu:()=>i});const n="https://devbackend.livhousing.com",r={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_NGROK_BACKEND_URL:"https://60f1-203-192-224-75.ngrok-free.app",REACT_APP_VERSION:"1",REACT_APP_BACKEND_URL:"https://devbackend.livhousing.com"}.REACT_APP_IP_DATA_API_KEY,i={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_NGROK_BACKEND_URL:"https://60f1-203-192-224-75.ngrok-free.app",REACT_APP_VERSION:"1",REACT_APP_BACKEND_URL:"https://devbackend.livhousing.com"}.TRAINING_MEDIA_MAXSIZE,l={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_NGROK_BACKEND_URL:"https://60f1-203-192-224-75.ngrok-free.app",REACT_APP_VERSION:"1",REACT_APP_BACKEND_URL:"https://devbackend.livhousing.com"}.CONVERSATION_MEDIA_MAXSIZE,a="https://60f1-203-192-224-75.ngrok-free.app"}}]);