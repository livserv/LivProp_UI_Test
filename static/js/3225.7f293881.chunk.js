"use strict";(self.webpackChunklib_prop_ui=self.webpackChunklib_prop_ui||[]).push([[3225],{32829:(e,t,n)=>{n.d(t,{A:()=>s});var o=n(25371),i=n(44414);function s(e){let{children:t,type:n}=e;return(0,i.jsx)(o.P.div,{whileHover:{scale:1},whileTap:{scale:.9},children:t})}s.defaultProps={type:"scale"}},65387:(e,t,n)=>{n.d(t,{A:()=>l});var o=n(70006),i=n(23266),s=n(24516),c=n(44414);const r=[{value:"gpt-4o-mini",label:"GPT 4o Mini Latest (default)",description:"Current Latest Mini model of GPT 4o. Cheaper and faster than GPT 4o."},{value:"gpt-4o-mini-2024-07-18",label:"GPT 4o Mini (July 2024)",description:"Mini model of GPT 4o. Cheaper and faster than GPT 4o."},{value:"gpt-4o",label:"GPT 4o Latest",description:"Latest model of GPT 4o. More capable, cheaper and faster than GPT 4 Turbo."},{value:"gpt-4o-2024-08-06",label:"GPT 4o (Aug 2024)",description:"May 2024 Release of GPT 4o. More capable, cheaper and faster than GPT 4 Turbo."},{value:"gpt-4",label:"GPT 4 Turbo",description:"Latest stable model of GPT 4. More capable, but is 5 times costly then 3.5 models."},{value:"gpt-4-1106-preview",label:"GPT 4 Latest Preview",description:"Latest preview model of GPT 4. Most capable model, but is 3 times costly then 3.5 models."},{value:"gpt-3.5-turbo-0125",label:"GPT 3.5 Latest Stable",description:"Latest stable model of GPT 3.5. More performant. Random minor inconsistency observed sometimes."},{value:"gpt-3.5-turbo-1106",label:"GPT 3.5 Latest Preview",description:"Latest preview model of GPT 3.5. This is more accurate than latest stable, but some times non responsive while on peek loads."}],a=r.reduce(((e,t)=>(e[t.value]=t,e)),{});const l=function(e){var t;let{value:n,hideDescription:l,...d}=e;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(o.A,{...d,value:n,defaultValue:r[0].value,children:[r.map((e=>(0,c.jsx)(i.A,{value:e.value,children:e.label},e.value))),!a[n]&&(0,c.jsx)(i.A,{value:n,children:n},n)]}),!l&&(0,c.jsx)(s.A,{id:"bot-model-description",children:n?null===(t=a[n])||void 0===t?void 0:t.description:r[0].description})]})}},93383:(e,t,n)=>{n.d(t,{A:()=>r});var o=n(9950),i=n(10226),s=n(46639),c=n(44414);const r=function(e){let{onClick:t,disabled:n,isLoading:r,children:a,...l}=e;const[d,u]=o.useState(r);return(0,c.jsxs)(i.A,{onClick:e=>{if(!t)return;const n=t(e);"function"===typeof(null===n||void 0===n?void 0:n.finally)&&(u(!0),n.finally((()=>u(!1))))},disabled:d||r||n,...l,children:[(d||r)&&(0,c.jsx)(s.A,{size:16,color:"primary",style:{marginRight:"10px"}}),a]})}},6834:(e,t,n)=>{n.d(t,{A:()=>g});var o=n(9950),i=n(60899),s=n(3788),c=n(93230),r=n(2660),a=n(10226),l=n(29714),d=n(61467),u=n(24516),h=n(21788),A=n(32829),p=n(93383),m=n(77382),f=n(44414);const v=()=>l.Yj(),b=l.Ik().shape({question:v(),content:v()});const g=function(e){let{document:t={},onCancel:n,onUpdate:l}=e;const v=o.useCallback((()=>n(!1)),[n]);return(0,f.jsx)(d.l1,{initialValues:t,validationSchema:b,onSubmit:async(e,t)=>{let{setStatus:n,setSubmitting:o}=t;try{const t=await(0,m.Mk)(e);n({success:!1}),o(!1),v(),(0,h.i)(!0,"Content added successfully!","success"),null===l||void 0===l||l(t)}catch(i){console.error(i),(0,h.i)(!0,"Error occurred while trying to save content.","error")}},children:e=>{let{values:t,errors:n,handleChange:o,touched:l,isSubmitting:d,handleSubmit:h}=e;return(0,f.jsxs)("form",{noValidate:!0,onSubmit:h,children:[(0,f.jsxs)(i.Ay,{item:!0,xs:12,mt:5,children:[(0,f.jsx)(s.A,{htmlFor:"question",children:"Question"}),(0,f.jsxs)(c.A,{spacing:2,mb:3,children:[(0,f.jsx)(r.A,{multiline:!0,fullWidth:!0,id:"question",name:"question",value:t.question,onChange:o,placeholder:"Please enter the question"}),l.question&&n.question&&(0,f.jsx)(u.A,{error:!0,id:"helper-text-message-placeholder",children:n.question})]}),(0,f.jsx)(s.A,{htmlFor:"content",children:"Answer"}),(0,f.jsxs)(c.A,{spacing:2,mb:3,children:[(0,f.jsx)(r.A,{multiline:!0,rows:6,fullWidth:!0,id:"content",name:"content",value:t.content,onChange:o,placeholder:"Please enter the answer"}),l.content&&n.content&&(0,f.jsx)(u.A,{error:!0,id:"helper-text-message-placeholder",children:n.content})]})]}),(0,f.jsx)(i.Ay,{item:!0,xs:12,display:"flex",justifyContent:"flex-end",children:(0,f.jsxs)(c.A,{spacing:2,direction:"row",children:[(0,f.jsx)(a.A,{variant:"outlined",onClick:v,children:"Cancel"}),(0,f.jsx)(A.A,{children:(0,f.jsx)(p.A,{isLoading:d,color:"primary",size:"large",type:"submit",variant:"contained",onClick:h,children:"Save"})})]})})]})}})}},68033:(e,t,n)=>{n.d(t,{A:()=>S});var o=n(9950),i=n(60899),s=n(82053),c=n(10226),r=n(63464),a=n(40033),l=n(79739),d=n(57988),u=n(7999),h=n(25333),A=n(63359),p=n(85967),m=n(74745),f=n(21788),v=n(32829),b=n(93383),g=n(70855),_=n(6834),x=n(77382),P=n(44414);const S=function(e){let{docsList:t,onUpdate:n}=e;const[,o]=(0,g.G)();return null===t||void 0===t?void 0:t.map(((e,t)=>(0,P.jsx)(j,{index:t,document:e,trainingMedia:o.trainingMedia,onUpdate:n},e._id)))};function j(e){let{document:t,index:n,trainingMedia:i,onUpdate:s}=e;const[c,r]=o.useState(!1);return c?(0,P.jsx)(_.A,{document:t,onCancel:r,onUpdate:s}):(0,P.jsx)(y,{index:n,document:t,trainingMedia:i,onEdit:r})}function y(e){let{document:t,index:n,trainingMedia:c,onEdit:r}=e;const a=o.useCallback((()=>r(!0)),[r]);return(0,P.jsxs)(i.Ay,{container:!0,mt:1,children:[(0,P.jsxs)(i.Ay,{item:!0,children:[(0,P.jsxs)(s.A,{variant:"h5",children:["Q",n+1," . ",t.question]}),(0,P.jsxs)(s.A,{variant:"body2",children:[(0,P.jsx)("b",{children:"Ans . "})," ",t.content]}),t.sourceDocument&&(null===c||void 0===c?void 0:c.length)>0&&(0,P.jsx)(E,{document:t,trainingMedia:c})]}),(0,P.jsxs)(i.Ay,{xs:12,item:!0,display:"flex",justifyContent:"flex-end",children:[(0,P.jsx)(h.A,{size:"small",sx:{color:A.A[500]},onClick:a,children:(0,P.jsx)(u.A,{})}),(0,P.jsx)(T,{documentId:t._id})]}),(0,P.jsx)(m.A,{xs:12,sx:{width:"100%",borderColor:"#b6abab"}})]})}function E(e){let{document:t,trainingMedia:n}=e;const i=t.sourceDocument,c=o.useMemo((()=>{const e=n.filter((e=>e.docId===i))[0];if(!e)return e;const t=decodeURIComponent(e.url.substring(e.url.lastIndexOf("/")+1));return{...e,fileName:t}}),[i,n]);return c?(0,P.jsxs)(s.A,{variant:"body2",children:[(0,P.jsx)("b",{children:"Source Document:"})," ",(0,P.jsxs)("a",{href:c.url,rel:"noreferrer",target:"_blank",style:{cursor:"pointer"},children:[c.fileName,c.name?` ( ${c.name} )`:""]})]}):null}function T(e){let{documentId:t}=e;const[n,i]=o.useState(!1),u=()=>i((e=>!e)),A=o.useCallback((async()=>{await(0,x.CA)(t),i(!1),(0,f.i)(!0,"Deleted response successfully","success")}),[t]);return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(h.A,{sx:{color:p.A[500]},onClick:u,children:(0,P.jsx)(d.A,{})}),n&&(0,P.jsxs)(r.A,{open:n,onClose:u,children:[(0,P.jsx)(a.A,{id:"delete-confirm-dialog-title",children:(0,P.jsx)(s.A,{gutterBottom:!0,children:"Are sure you want to delete the response ?"})}),(0,P.jsxs)(l.A,{children:[(0,P.jsx)(c.A,{onClick:u,children:"Cancel"}),(0,P.jsx)(v.A,{children:(0,P.jsx)(b.A,{color:"primary",type:"submit",variant:"contained",onClick:A,children:"Delete"})})]})]})]})}},73225:(e,t,n)=>{n.d(t,{A:()=>l});var o=n(9950),i=n(68033),s=n(77382),c=n(65387),r=n(93383),a=n(44414);const l=function(e){let{message:t,isSuperUser:n,onReplay:l}=e;const{content:d,searchQuery:u,passedDocIds:h,index:A,model:p}=t,[m,f]=(0,o.useState)([]),[v,b]=(0,o.useState)(p);(0,o.useEffect)((()=>{(0,s.L3)(h).then(f)}),[h]),(0,o.useEffect)((()=>{b(t.model)}),[t]);const g=o.useCallback((e=>{var t;return b(null===(t=e.target)||void 0===t?void 0:t.value)}),[]);return(0,a.jsxs)("div",{className:"kb-docs-editor",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"Selected Bot: "}),(0,a.jsx)(c.A,{value:v,hideDescription:!0,onChange:g}),(0,a.jsx)(r.A,{style:{marginLeft:8},variant:"contained",color:"primary",size:"medium",onClick:()=>l(A,v),children:"Replay"})]}),(0,a.jsxs)("div",{className:"ellipsis",children:[(0,a.jsx)("strong",{children:"Message: "}),(0,a.jsx)("span",{title:d,children:d})]}),n&&u&&(0,a.jsxs)("div",{className:"ellipsis",children:[(0,a.jsx)("strong",{children:"Search Query: "}),(0,a.jsx)("span",{children:u})]}),(0,a.jsx)("div",{children:(0,a.jsx)(i.A,{docsList:m,onUpdate:e=>f((t=>t.map((t=>t._id===e._id?e:t))))})})]})}},8478:(e,t,n)=>{n.d(t,{Jt:()=>s,TF:()=>a,bE:()=>c,yJ:()=>r});var o=n(32026),i=n(44364);async function s(e,t){return l("GET",e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}async function c(e,t){return l("POST",e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}async function r(e,t){return l("PUT",e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}async function a(e,t){return l("DELETE",e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}async function l(e,t,n){let{headers:o,noAuth:i,...s}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const c="POST"===e||"PUT"===e||"DELETE"===e;t=function(e,t){if(!e)return e;const n=t&&Object.keys(t);if(null!==n&&void 0!==n&&n.length){const o=n.reduce(((e,n)=>{let o=t[n];return null===o||void 0===o?e:(o=`${n}=${encodeURIComponent(o)}`,e?`${e}&${o}`:o)}),"");o&&(e=`${e}${e.includes("?")?"&":"?"}${o}`)}if(e.startsWith("https://"))return e;return`${d}${e}`}(t,c?void 0:n);const r=n instanceof FormData;if(r||(n=n&&"object"===typeof n&&c?JSON.stringify(n):void 0),o||(o={}),r||(o["Content-Type"]="application/json"),o.Accept="application/json",!1!==i){const e=sessionStorage.getItem("token");e&&(o.Authorization=`Bearer ${e}`)}try{const i=await fetch(t,{...s,headers:o,body:n,method:e}),c=await i.json();if(i.ok){const{data:e,...t}=c;return delete t.status,e&&!Object.keys(t).length?e:c}throw c.message?new Error(c.message):c}catch(l){var a;throw console.error("Error calling API: ",l),null!==(a=l.message)&&void 0!==a&&a.includes("fetch")?new Error("Unable to reach server. Please check your network connectivity and try again."):new Error(l.message)}}const d=(0,o.s8)(i.jn,"/")},77382:(e,t,n)=>{n.d(t,{CA:()=>h,L3:()=>u,Mk:()=>a,bZ:()=>l,gJ:()=>d});var o=n(8478),i=n(33340),s=n(32026),c=n(59051),r=n.n(c);async function a(e){const{organizationId:t,selectedBotId:n}=i.nc.getState(),s=await o.bE(`/bot/${t}/${n}/knowledge-base`,e);return i.nc.setState((t=>{const o={...t.kbDocs||{}},i=o[n];if(!i)return{};if(o[n]=[...i],e._id){const e=o[n].findIndex((e=>e._id===s._id));e>=0?o[n][e]=s:o[n].push(s)}else o[n].push(s);return{kbDocs:o}})),s}async function l(e){const{organizationId:t,selectedBotId:n,kbDocs:s}=i.nc.getState();if(e&&Array.isArray(null===s||void 0===s?void 0:s[n]))return;const c=await o.Jt(`/bot/${t}/${n}/knowledge-base/list`);i.nc.setState((e=>({kbDocs:{...e.kbDocs||{},[n]:c}})))}async function d(){var e;const{organizationId:t,selectedBotId:n,botsMap:c}=i.nc.getState(),a=`/bot/${t}/${n}/knowledge-base/download`,l=await o.Jt(a),d=(null===(e=c[n])||void 0===e?void 0:e.botName)||"KBDocs";(0,s.PE)(l,d+"_"+r()().format("YYYYMMDD")+".csv")}async function u(e){if(null===e||void 0===e||!e.length)return[];const{organizationId:t,selectedBotId:n}=i.nc.getState();return await o.Jt(`/bot/${t}/${n}/knowledge-base/list?${e.map((e=>`docIds=${e}`)).join("&")}`)}async function h(e){const{organizationId:t,selectedBotId:n}=i.nc.getState();await o.TF(`/bot/${t}/${n}/knowledge-base/${e}`),i.nc.setState((t=>{var o;const i={...t.kbDocs||{}};return i[n]=null===(o=i[n])||void 0===o?void 0:o.filter((t=>t._id!==e)),{kbDocs:i}}))}},70855:(e,t,n)=>{n.d(t,{G:()=>i});var o=n(33340);function i(e){const t=(0,o.nc)((e=>e.selectedBotId)),n=(0,o.nc)((n=>n.botsMap[e||t]));return[e||t,n]}},32026:(e,t,n)=>{function o(e,t){return e.replace(new RegExp(`${i(t)}+$`),"")}function i(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function s(e){const t=new Date(e),n=t.getDate();return`${["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][t.getMonth()]} ${n}, ${t.getFullYear()}`}function c(e,t,n){if(!t&&!e)return n;e=e||{};const o=Array.isArray(e)?[...e]:{...e};if(t.includes(".")){const i=t.indexOf("."),s=t.substring(0,i),r=t.substring(i+1);o[s]=c(e[s],r,n)}else o[t]=n;return o}function r(e,t){return btoa(`${e}_${t}_whatsapp_int`)}function a(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:12;const t="abcdefghijklmnopqrstuvwxyz0123456789";let n="";for(let o=0;o<e;o++)n+=t.charAt(Math.floor(36*Math.random()));return n}function l(e,t,n){if(!t&&!e)return n;e=e||{};const o=Array.isArray(e)?[...e]:{...e};if(t.includes(".")){const i=t.indexOf("."),s=t.substring(0,i),c=t.substring(i+1);o[s]=l(e[s],c,n)}else o[t]=n;return o}function d(e,t){const n=new Blob([e],{type:arguments.length>2&&void 0!==arguments[2]?arguments[2]:"text/csv"}),o=document.createElement("a");o.href=URL.createObjectURL(n),o.download=t,document.body.appendChild(o),o.click(),document.body.removeChild(o)}n.d(t,{G6:()=>c,OX:()=>a,PE:()=>d,Yq:()=>s,do:()=>l,qW:()=>r,s8:()=>o})},44364:(e,t,n)=>{n.d(t,{DX:()=>a,Og:()=>s,jn:()=>o,mB:()=>r,pA:()=>c,pR:()=>i});const o="https://devbackend.livhousing.com:444",i="c17b949cf58c45cae47ce1cc65efc8240f77a2a69ca09ad4c4208852",s={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_IP_DATA_API_KEY:"c17b949cf58c45cae47ce1cc65efc8240f77a2a69ca09ad4c4208852",REACT_APP_VERSION:"1",REACT_APP_GOOGLE_MAPS_API_KEY:"AIzaSyAQMYGdP2AmloNtJm4ZDrJxPuSfuo2RSXM",REACT_APP_BACKEND_URL:"https://devbackend.livhousing.com:444"}.TRAINING_MEDIA_MAXSIZE,c={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_IP_DATA_API_KEY:"c17b949cf58c45cae47ce1cc65efc8240f77a2a69ca09ad4c4208852",REACT_APP_VERSION:"1",REACT_APP_GOOGLE_MAPS_API_KEY:"AIzaSyAQMYGdP2AmloNtJm4ZDrJxPuSfuo2RSXM",REACT_APP_BACKEND_URL:"https://devbackend.livhousing.com:444"}.CONVERSATION_MEDIA_MAXSIZE,r="AIzaSyAQMYGdP2AmloNtJm4ZDrJxPuSfuo2RSXM",a={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_IP_DATA_API_KEY:"c17b949cf58c45cae47ce1cc65efc8240f77a2a69ca09ad4c4208852",REACT_APP_VERSION:"1",REACT_APP_GOOGLE_MAPS_API_KEY:"AIzaSyAQMYGdP2AmloNtJm4ZDrJxPuSfuo2RSXM",REACT_APP_BACKEND_URL:"https://devbackend.livhousing.com:444"}.REACT_APP_NGROK_BACKEND_URL||"https://devbackend.livhousing.com:444"}}]);