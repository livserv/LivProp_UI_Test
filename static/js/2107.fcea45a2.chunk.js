"use strict";(self.webpackChunklib_prop_ui=self.webpackChunklib_prop_ui||[]).push([[2107],{82921:(e,s,t)=>{t.r(s),t.d(s,{default:()=>p});var i=t(9950),n=t(28429),o=t(32026),a=t(8478),c=t(15820),r=t(78023),d=t(33340),l=t(34735),h=t(73225),u=t(44414);const p=function(){const{organizationId:e,botId:s,recipientId:t,chatId:p}=(0,n.g)(),{isAuthenticated:g,isSuperUser:b}=(0,d.nc)(),[x,v]=i.useState(),[w,f]=i.useState();return i.useEffect((()=>{a.Jt(`/bot/${e}/${s}/chat/history/${t}/${p}?includeBot=1${g?"&includeKB=1":""}`).then((e=>{var s;const t=(0,o.Yq)(null===(s=e.messages[0])||void 0===s?void 0:s.createdAt);e.botDesign=(0,r.Y)(e.botDesign,{window:{width:"600px",height:"calc(100vh - 120px)"},header:{titleText:t+` (${e.titleText})`}}),v(e)}),(e=>{console.error("Unable to load chat conversations:",e)}))}),[e,s,t,p,g]),x?(0,u.jsxs)("div",{className:"conversation-history"+(g?" authenticated":""),children:[(0,u.jsx)("div",{children:(0,u.jsx)(c.A,{botDesign:x.botDesign,messages:x.messages,showTime:!0,disabledMessage:!0,optionsRenderer:e=>{const{role:s,type:t,passedDocIds:i,searchQuery:n}=e||{};if("assistant"===s&&"text"===t&&(null!==i&&void 0!==i&&i.length||n))return(0,u.jsx)("span",{className:"show-icon",onClick:()=>f(e),children:(0,u.jsx)(l.A,{})})}})}),w&&(0,u.jsx)(h.A,{message:w,onClose:()=>w(null),isSuperUser:b})]}):(0,u.jsx)("div",{children:"Loading... Please wait..."})}}}]);