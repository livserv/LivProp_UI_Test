"use strict";(self.webpackChunklib_prop_ui=self.webpackChunklib_prop_ui||[]).push([[452],{88983:(e,t,n)=>{n.d(t,{Z:()=>o});var i=n(93701),r=n(46417);function o(e){let{children:t,type:n}=e;return(0,r.jsx)(i.E.div,{whileHover:{scale:1},whileTap:{scale:.9},children:t})}o.defaultProps={type:"scale"}},66578:(e,t,n)=>{n.d(t,{Z:()=>a});n(47313);var i=n(31095),r=n(85281),o=n(46417);const a=e=>{let{isLoading:t,children:n,...a}=e;return(0,o.jsx)(i.Z,{...a,children:t?(0,o.jsx)(r.Z,{size:25,color:"primary"}):n})}},21452:(e,t,n)=>{n.r(t),n.d(t,{default:()=>z});var i=n(47313),r=n(41806),o=n(9019),a=n(61113),s=n(23306),l=n(42832),c=n(37843),d=n(31095),h=n(21933),u=n(24977),p=n(15480),g=n(66149),x=n(33604),m=n(4117),f=n(23509),v=n(86043),b=n(51997),Z=n(65954),j=n(47131),_=n(89994),S=n(11623),A=n(19536),w=n(88983),C=n(66578),E=n(969),R=n(29210),P=n(70246),T=n(11686),y=n(86426),L=n(14487),D=n(17592),I=n(69753);var N=n(46417);const O=()=>h.Z_().required("This field is required"),k=h.Ry().shape({question:O(),content:O()});const z=function(){var e;const t=(0,f.tN)((e=>e.organizationId)),n=(0,f.tN)((e=>e.botsList)),[s]=(0,E.g)(),l=null===(e=n.find((e=>e._id===s)))||void 0===e?void 0:e.cannedResponse,c=()=>{g(!1),m(!0),h({organizationId:t,question:"",content:""})},[d,h]=(0,i.useState)({organizationId:t,question:"",content:""}),[p,g]=(0,i.useState)(!1),[x,m]=(0,i.useState)(!0),b=()=>{g(!0),m(!1),h({organizationId:t,question:"",content:""})};return i.useEffect((()=>{(async()=>{if(null===l||"undefined"!=l)try{await async function(e,t){((e,t)=>{f.tN.setState((n=>{const i=n.botsList.map((n=>n._id===e?{...n,cannedResponse:t}:n));return{...n,botsList:i}}))})(t,await I.U2("/bot/".concat(e,"/").concat(t,"/knowledge-base/list")))}(t,s)}catch(e){console.error("Error fetching organization details:",e)}})()}),[t,s]),(0,N.jsxs)(r.Z,{children:[(0,N.jsx)(u.J9,{initialValues:d,validationSchema:k,onSubmit:async(e,t)=>{let{setErrors:n,setStatus:i,setSubmitting:r}=t;try{await async function(e,t){((e,t)=>{f.tN.setState((n=>{const i=n.botsList.map((n=>n._id===e?{...n,cannedResponse:[...n.cannedResponse,t]}:n));return{...n,botsList:i}}))})(t,await I.v_("/bot/".concat(e.organizationId,"/").concat(t,"/knowledge-base"),e))}(e,s),i({success:!1}),r(!1),g(!1),m(!0),(0,v.W)(!0,"Added response successfully","success")}catch(o){console.error(o),i({success:!1}),n({submit:o.message}),r(!1)}},children:e=>(0,N.jsx)("form",{noValidate:!0,onSubmit:e.handleSubmit,children:(0,N.jsxs)(o.ZP,{container:!0,item:!0,xs:12,children:[(0,N.jsx)(a.Z,{variant:"h5",children:"Canned Response"}),x&&(0,N.jsx)(o.ZP,{item:!0,sx:{marginLeft:"60px"},children:(0,N.jsx)(F,{clickOpenForm:b})}),(0,N.jsx)(o.ZP,{item:!0,xs:12,mt:1,children:p&&(0,N.jsx)(o.ZP,{item:!0,xs:12,lg:8,mt:5,children:(0,N.jsx)(W,{...e,clsForm:c})})}),(0,N.jsx)(o.ZP,{item:!0,xs:12,mt:5,children:(0,N.jsx)(V,{cannedResponse:l,organizationId:t,botId:s,openForm:b,clsForm:c})})]})})}),(0,N.jsx)(r.Z,{children:(0,N.jsx)(o.ZP,{container:!0})})]})};function F(e){let{clickOpenForm:t}=e;const n=(0,D.ZP)(R.Z)((e=>{let{theme:t}=e;return{position:"fixed","#trainingDocumentsSpeedDial &":{"&.MuiSpeedDial-directionDown, &.MuiSpeedDial-directionRight":{left:"auto",right:t.spacing(2)},"&.MuiSpeedDial-directionUp, &.MuiSpeedDial-directionLeft":{right:"auto",left:t.spacing(2)}}}})),i=[{icon:(0,N.jsx)(y.Z,{}),name:"Add Question & Answer",method:()=>{t()}},{icon:(0,N.jsx)(L.Z,{}),name:"File Upload (.pdf,.doc,.docx,.txt)"}];return(0,N.jsx)(r.Z,{sx:{height:150,transform:"translateZ(0px)",flexGrow:1},children:(0,N.jsx)(n,{ariaLabel:"SpeedDial basic example",direction:"right",sx:{position:"absolute",bottom:16,right:16},icon:(0,N.jsx)(P.Z,{}),children:i.map((e=>(0,N.jsx)(T.Z,{icon:e.icon,tooltipTitle:e.name,onClick:e.method},e.name)))})})}function V(e){let{cannedResponse:t,organizationId:n,botId:r,clsForm:h,isSubmitting:u}=e;const[p,g]=(0,i.useState)(-1),[x,m]=(0,i.useState)(""),[b,S]=(0,i.useState)(""),E=e=>{m(e.target.value)},R=e=>{S(e.target.value)},P=()=>{g(-1)},T={_id:p,organizationId:n,question:x,content:b},y=async()=>{try{await async function(e,t){((e,n)=>{f.tN.setState((i=>{const r=i.botsList.map((i=>{if(i._id===e){const e=i.cannedResponse.filter((e=>e._id!=n._id));return{...i,cannedResponse:[...e,t]}}return i}));return{...i,botsList:r}}))})(e,await I.v_("/bot/".concat(t.organizationId,"/").concat(e,"/knowledge-base"),t))}(r,T),m(""),S(""),g(-1),(0,v.W)(!0,"Updated response successfully","success")}catch(e){console.error(e)}};return(0,N.jsx)(N.Fragment,{children:t?t.map(((e,t)=>e._id===p?(0,N.jsxs)(N.Fragment,{children:[(0,N.jsxs)(o.ZP,{item:!0,xs:12,mt:5,children:[(0,N.jsx)(s.Z,{htmlFor:"question",children:"Question"}),(0,N.jsx)(l.Z,{spacing:2,mb:3,children:(0,N.jsx)(c.Z,{multiline:!0,fullWidth:!0,id:"question",name:"question",value:x,onChange:E,placeholder:"Please enter the question"})}),(0,N.jsx)(s.Z,{htmlFor:"content",children:"Answer"}),(0,N.jsx)(l.Z,{spacing:2,mb:3,children:(0,N.jsx)(c.Z,{multiline:!0,rows:6,fullWidth:!0,id:"content",name:"content",value:b,onChange:R,placeholder:"Please enter the question"})})]},e._id),(0,N.jsx)(o.ZP,{item:!0,xs:12,display:"flex",justifyContent:"flex-end",children:(0,N.jsxs)(l.Z,{spacing:2,direction:"row",children:[(0,N.jsx)(d.Z,{variant:"outlined",onClick:P,children:"Cancel"}),(0,N.jsx)(w.Z,{children:(0,N.jsx)(C.Z,{isLoading:u,disabled:u,color:"primary",size:"large",onClick:y,variant:"contained",children:"Update"})})]})})]}):(0,N.jsxs)(o.ZP,{container:!0,mt:1,children:[(0,N.jsxs)(o.ZP,{item:!0,children:[(0,N.jsxs)(a.Z,{variant:"h5",children:["Q",t+1," . ",e.question]}),(0,N.jsxs)(a.Z,{variant:"body2",children:[(0,N.jsx)("b",{children:"Ans . "})," ",e.content]})]},t),(0,N.jsxs)(o.ZP,{xs:12,item:!0,display:"flex",justifyContent:"flex-end",children:[(0,N.jsx)(j.Z,{size:"small",sx:{color:_.Z[500]},onClick:()=>((e,t,n)=>{g(e),m(t),S(n),h(!1)})(e._id,e.question,e.content),children:(0,N.jsx)(Z.Z,{})}),(0,N.jsx)(q,{organizationId:n,botId:r,canDelID:e._id})]}),(0,N.jsx)(A.Z,{xs:12,sx:{width:"100%",borderColor:"#b6abab"}})]},t))):null})}function W(e){let{touched:t,errors:n,handleChange:i,clsForm:r,...a}=e;return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsxs)(o.ZP,{item:!0,xs:12,mt:5,children:[(0,N.jsx)(s.Z,{htmlFor:"question",children:"Question"}),(0,N.jsxs)(l.Z,{spacing:2,mb:3,children:[(0,N.jsx)(c.Z,{multiline:!0,fullWidth:!0,id:"question",name:"question",onChange:i,placeholder:"Please enter the question"}),t.question&&n.question&&(0,N.jsx)(p.Z,{error:!0,id:"helper-text-message-placeholder",children:n.question})]}),(0,N.jsx)(s.Z,{htmlFor:"content",children:"Answer"}),(0,N.jsxs)(l.Z,{spacing:2,mb:3,children:[(0,N.jsx)(c.Z,{multiline:!0,rows:6,fullWidth:!0,id:"content",name:"content",onChange:i,placeholder:"Please enter the question"}),t.content&&n.content&&(0,N.jsx)(p.Z,{error:!0,id:"helper-text-message-placeholder",children:n.content})]})]}),(0,N.jsx)(o.ZP,{item:!0,xs:12,display:"flex",justifyContent:"flex-end",children:(0,N.jsxs)(l.Z,{spacing:2,direction:"row",children:[(0,N.jsx)(d.Z,{variant:"outlined",onClick:()=>{r(!1)},children:"Cancel"}),(0,N.jsx)(w.Z,{children:(0,N.jsx)(C.Z,{isLoading:a.isSubmitting,disabled:a.isSubmitting,color:"primary",size:"large",type:"submit",variant:"contained",children:"Save"})})]})})]})}function q(e){let{organizationId:t,botId:n,canDelID:r,...o}=e;const[s,l]=i.useState(!1),c=()=>{l(!1)},h=async()=>{await async function(e,t,n){await I.Od("/bot/".concat(e,"/").concat(t,"/knowledge-base/").concat(n)),((e,t)=>{f.tN.setState((n=>{const i=n.botsList.map((n=>{if(n._id===e){const e=n.cannedResponse.filter((e=>e._id!=t));return{...n,cannedResponse:[...e]}}return n}));return{...n,botsList:i}}))})(t,n)}(t,n,r),c(),(0,v.W)(!0,"Deleted response successfully","success")};return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(j.Z,{sx:{color:S.Z[500]},onClick:()=>{l(!0)},children:(0,N.jsx)(b.Z,{})}),(0,N.jsxs)(g.Z,{open:s,onClose:c,children:[(0,N.jsx)(x.Z,{id:"alert-dialog-title",children:(0,N.jsx)(a.Z,{gutterBottom:!0,children:"Are sure you want to delete the response ?"})}),(0,N.jsxs)(m.Z,{children:[(0,N.jsx)(d.Z,{onClick:c,children:"Cancel"}),(0,N.jsx)(w.Z,{children:(0,N.jsx)(C.Z,{isLoading:o.isSubmitting,disabled:o.isSubmitting,color:"primary",type:"submit",variant:"contained",onClick:()=>h(),children:"Delete"})})]})]})]})}},69753:(e,t,n)=>{function i(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}n.d(t,{U2:()=>o,v_:()=>a,TY:()=>u,Od:()=>s});var r=n(32203);async function o(e,t){return l("GET",e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}async function a(e,t){return l("POST",e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}async function s(e,t){return l("DELETE",e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}async function l(e,t,n){let{headers:i,noAuth:r,...o}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const a="POST"===e||"PUT"===e||"DELETE"===e;if(t=u(t),n=n&&"object"===typeof n&&a?JSON.stringify(n):void 0,i||(i={}),i["Content-Type"]="application/json",i.Accept="application/json",!1!==r){const e=sessionStorage.getItem("token");e&&(i.Authorization="Bearer ".concat(e))}const s=await fetch(t,{...o,headers:i,body:n,method:e}),l=await s.json();if(s.ok){const{data:e,...t}=l;return delete t.status,e&&!Object.keys(t).length?e:l}throw l.message?new Error(l.message):l}const c=(d=r.Hi,h="/",d.replace(new RegExp("".concat(i(h),"+$")),""));var d,h;function u(e){return e?e.startsWith("https://")?e:"".concat(c).concat(e):e}},969:(e,t,n)=>{n.d(t,{g:()=>r});var i=n(23509);function r(e){const t=(0,i.tN)((e=>e.selectedBotId)),n=(0,i.tN)((n=>n.botsMap[e||t]));return[e||t,n]}},32203:(e,t,n)=>{n.d(t,{Hi:()=>i,LC:()=>s,lB:()=>r,rn:()=>a,yu:()=>o});const i="https://devbackend.livhousing.com",r={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_NGROK_BACKEND_URL:"https://60f1-203-192-224-75.ngrok-free.app",REACT_APP_VERSION:"1",REACT_APP_BACKEND_URL:"https://devbackend.livhousing.com"}.REACT_APP_IP_DATA_API_KEY,o={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_NGROK_BACKEND_URL:"https://60f1-203-192-224-75.ngrok-free.app",REACT_APP_VERSION:"1",REACT_APP_BACKEND_URL:"https://devbackend.livhousing.com"}.TRAINING_MEDIA_MAXSIZE,a={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_NGROK_BACKEND_URL:"https://60f1-203-192-224-75.ngrok-free.app",REACT_APP_VERSION:"1",REACT_APP_BACKEND_URL:"https://devbackend.livhousing.com"}.CONVERSATION_MEDIA_MAXSIZE,s="https://60f1-203-192-224-75.ngrok-free.app"},65954:(e,t,n)=>{var i=n(64836);t.Z=void 0;var r=i(n(45045)),o=n(46417),a=(0,r.default)((0,o.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}),"Edit");t.Z=a},86426:(e,t,n)=>{var i=n(64836);t.Z=void 0;var r=i(n(45045)),o=n(46417),a=(0,r.default)((0,o.jsx)("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm-1 4H8c-1.1 0-1.99.9-1.99 2L6 21c0 1.1.89 2 1.99 2H19c1.1 0 2-.9 2-2V11l-6-6zM8 21V7h6v5h5v9H8z"}),"FileCopyOutlined");t.Z=a},14487:(e,t,n)=>{var i=n(64836);t.Z=void 0;var r=i(n(45045)),o=n(46417),a=(0,r.default)((0,o.jsx)("path",{d:"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm4 18H6V4h7v5h5v11zM8 15.01l1.41 1.41L11 14.84V19h2v-4.16l1.59 1.59L16 15.01 12.01 11z"}),"UploadFile");t.Z=a},19536:(e,t,n)=>{n.d(t,{Z:()=>f});var i=n(63366),r=n(87462),o=n(47313),a=n(94146),s=n(21921),l=n(17551),c=n(17592),d=n(77342),h=n(99273),u=n(46417);const p=["absolute","children","className","component","flexItem","light","orientation","role","textAlign","variant"],g=(0,c.ZP)("div",{name:"MuiDivider",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.absolute&&t.absolute,t[n.variant],n.light&&t.light,"vertical"===n.orientation&&t.vertical,n.flexItem&&t.flexItem,n.children&&t.withChildren,n.children&&"vertical"===n.orientation&&t.withChildrenVertical,"right"===n.textAlign&&"vertical"!==n.orientation&&t.textAlignRight,"left"===n.textAlign&&"vertical"!==n.orientation&&t.textAlignLeft]}})((e=>{let{theme:t,ownerState:n}=e;return(0,r.Z)({margin:0,flexShrink:0,borderWidth:0,borderStyle:"solid",borderColor:(t.vars||t).palette.divider,borderBottomWidth:"thin"},n.absolute&&{position:"absolute",bottom:0,left:0,width:"100%"},n.light&&{borderColor:t.vars?"rgba(".concat(t.vars.palette.dividerChannel," / 0.08)"):(0,l.Fq)(t.palette.divider,.08)},"inset"===n.variant&&{marginLeft:72},"middle"===n.variant&&"horizontal"===n.orientation&&{marginLeft:t.spacing(2),marginRight:t.spacing(2)},"middle"===n.variant&&"vertical"===n.orientation&&{marginTop:t.spacing(1),marginBottom:t.spacing(1)},"vertical"===n.orientation&&{height:"100%",borderBottomWidth:0,borderRightWidth:"thin"},n.flexItem&&{alignSelf:"stretch",height:"auto"})}),(e=>{let{ownerState:t}=e;return(0,r.Z)({},t.children&&{display:"flex",whiteSpace:"nowrap",textAlign:"center",border:0,"&::before, &::after":{content:'""',alignSelf:"center"}})}),(e=>{let{theme:t,ownerState:n}=e;return(0,r.Z)({},n.children&&"vertical"!==n.orientation&&{"&::before, &::after":{width:"100%",borderTop:"thin solid ".concat((t.vars||t).palette.divider)}})}),(e=>{let{theme:t,ownerState:n}=e;return(0,r.Z)({},n.children&&"vertical"===n.orientation&&{flexDirection:"column","&::before, &::after":{height:"100%",borderLeft:"thin solid ".concat((t.vars||t).palette.divider)}})}),(e=>{let{ownerState:t}=e;return(0,r.Z)({},"right"===t.textAlign&&"vertical"!==t.orientation&&{"&::before":{width:"90%"},"&::after":{width:"10%"}},"left"===t.textAlign&&"vertical"!==t.orientation&&{"&::before":{width:"10%"},"&::after":{width:"90%"}})})),x=(0,c.ZP)("span",{name:"MuiDivider",slot:"Wrapper",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.wrapper,"vertical"===n.orientation&&t.wrapperVertical]}})((e=>{let{theme:t,ownerState:n}=e;return(0,r.Z)({display:"inline-block",paddingLeft:"calc(".concat(t.spacing(1)," * 1.2)"),paddingRight:"calc(".concat(t.spacing(1)," * 1.2)")},"vertical"===n.orientation&&{paddingTop:"calc(".concat(t.spacing(1)," * 1.2)"),paddingBottom:"calc(".concat(t.spacing(1)," * 1.2)")})})),m=o.forwardRef((function(e,t){const n=(0,d.Z)({props:e,name:"MuiDivider"}),{absolute:o=!1,children:l,className:c,component:m=(l?"div":"hr"),flexItem:f=!1,light:v=!1,orientation:b="horizontal",role:Z=("hr"!==m?"separator":void 0),textAlign:j="center",variant:_="fullWidth"}=n,S=(0,i.Z)(n,p),A=(0,r.Z)({},n,{absolute:o,component:m,flexItem:f,light:v,orientation:b,role:Z,textAlign:j,variant:_}),w=(e=>{const{absolute:t,children:n,classes:i,flexItem:r,light:o,orientation:a,textAlign:l,variant:c}=e,d={root:["root",t&&"absolute",c,o&&"light","vertical"===a&&"vertical",r&&"flexItem",n&&"withChildren",n&&"vertical"===a&&"withChildrenVertical","right"===l&&"vertical"!==a&&"textAlignRight","left"===l&&"vertical"!==a&&"textAlignLeft"],wrapper:["wrapper","vertical"===a&&"wrapperVertical"]};return(0,s.Z)(d,h.V,i)})(A);return(0,u.jsx)(g,(0,r.Z)({as:m,className:(0,a.Z)(w.root,c),role:Z,ref:t,ownerState:A},S,{children:l?(0,u.jsx)(x,{className:w.wrapper,ownerState:A,children:l}):null}))}));m.muiSkipListHighlight=!0;const f=m},99273:(e,t,n)=>{n.d(t,{V:()=>o,Z:()=>a});var i=n(77430),r=n(32298);function o(e){return(0,r.Z)("MuiDivider",e)}const a=(0,i.Z)("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"])},11623:(e,t,n)=>{n.d(t,{Z:()=>i});const i={50:"#fce4ec",100:"#f8bbd0",200:"#f48fb1",300:"#f06292",400:"#ec407a",500:"#e91e63",600:"#d81b60",700:"#c2185b",800:"#ad1457",900:"#880e4f",A100:"#ff80ab",A200:"#ff4081",A400:"#f50057",A700:"#c51162"}}}]);