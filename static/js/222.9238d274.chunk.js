"use strict";(self.webpackChunklib_prop_ui=self.webpackChunklib_prop_ui||[]).push([[222],{18678:(e,t,n)=>{n.d(t,{Z:()=>r});var o=n(93701),a=n(46417);function r(e){let{children:t,type:n}=e;return(0,a.jsx)(o.E.div,{whileHover:{scale:1},whileTap:{scale:.9},children:t})}r.defaultProps={type:"scale"}},6505:(e,t,n)=>{n.d(t,{Z:()=>h});var o=n(47313),a=n(19860),r=n(73428),s=n(54641),i=n(61113),l=n(93405),d=n(46417);const c={p:2.5,"& .MuiCardHeader-action":{m:"0px auto",alignSelf:"center"}},h=(0,o.forwardRef)(((e,t)=>{let{border:n=!0,boxShadow:o,children:h,content:u=!0,contentSX:p={},darkTitle:m,elevation:x,secondary:g,shadow:f,sx:b={},title:w,...j}=e;const y=(0,a.Z)();return o="dark"===y.palette.mode?o||!0:o,(0,d.jsxs)(r.Z,{elevation:x||0,ref:t,...j,sx:{border:n?"1px solid":"none",borderRadius:2,borderColor:"dark"===y.palette.mode?y.palette.divider:y.palette.grey.A800,boxShadow:!o||n&&"dark"!==y.palette.mode?"inherit":f||y.customShadows.z1,":hover":{boxShadow:o?f||y.customShadows.z1:"inherit"},"& pre":{m:0,p:"16px !important",fontFamily:y.typography.fontFamily,fontSize:"0.75rem"},...b},children:[!m&&w&&(0,d.jsx)(s.Z,{sx:c,titleTypographyProps:{variant:"subtitle1"},title:w,action:g}),m&&w&&(0,d.jsx)(s.Z,{sx:c,title:(0,d.jsx)(i.Z,{variant:"h3",children:w}),action:g}),u&&(0,d.jsx)(l.Z,{sx:p,children:h}),!u&&h]})}))},94100:(e,t,n)=>{n.d(t,{Z:()=>i});var o=n(47313),a=n(31095),r=n(85281),s=n(46417);const i=function(e){let{onClick:t,disabled:n,isLoading:i,children:l,...d}=e;const[c,h]=o.useState(i);return(0,s.jsxs)(a.Z,{onClick:e=>{if(!t)return;const n=t(e);"function"===typeof(null===n||void 0===n?void 0:n.finally)&&(h(!0),n.finally((()=>h(!1))))},disabled:c||i||n,...d,children:[(c||i)&&(0,s.jsx)(r.Z,{size:16,color:"primary",style:{marginRight:"10px"}}),l]})}},88222:(e,t,n)=>{n.r(t),n.d(t,{default:()=>Z});var o=n(47313),a=n(41806),r=n(9019),s=n(19536),i=n(61113),l=n(42832),d=n(23306),c=n(55685),h=n(83929),u=n(74268),p=n(44758),m=n(15480),x=n(49914),g=n(46676),f=n(24977),b=n(6505),w=n(18678),j=n(969),y=n(45960),P=n(94100),C=n(26478),v=n(46417);const _={margin:{xs:2.5,md:3},"& > *":{flexGrow:1,flexBasis:"50%"}},S={leadCaptureType:"flow",leadCaptureFormMode:"count",showFormAfterChats:3};const Z=function(){const[e,t]=(0,j.g)(),{botSettings:n=S}=t;return(0,v.jsx)(b.Z,{sx:_,content:!1,border:!1,boxShadow:!0,children:(0,v.jsx)(a.Z,{sx:{p:{xs:2,sm:3,md:4,xl:5}},children:(0,v.jsx)(f.J9,{initialValues:n,onSubmit:async(t,n)=>{let{setErrors:o,setStatus:a,setSubmitting:r}=n;try{await(0,y.pb)(e,t),a({success:!1}),r(!1),(0,C.W)(!0,"Settings saved successfully!","success")}catch(s){console.error(s),(0,C.W)(!0,"Unable to save settings. Please try again later.","error"),a({success:!1}),o({submit:s.message}),r(!1)}},children:e=>(0,v.jsx)("form",{noValidate:!0,onSubmit:e.handleSubmit,children:(0,v.jsxs)(r.ZP,{container:!0,spacing:3,children:[(0,v.jsx)(E,{...e}),(0,v.jsx)(T,{...e}),(0,v.jsx)(A,{...e})]})})})})})};function E(e){let{values:t,touched:n,errors:o,handleBlur:a,handleChange:x,setFieldValue:g}=e;const f="form"===t.leadCaptureType,b="form"!==t.leadCaptureType||"keyword"===t.leadCaptureFormMode;return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(r.ZP,{item:!0,xs:12,children:(0,v.jsx)(s.Z,{children:(0,v.jsx)(i.Z,{variant:"subtitle1",children:"Lead Capture Settings"})})}),(0,v.jsx)(r.ZP,{item:!0,xs:12,md:6,children:(0,v.jsxs)(l.Z,{spacing:1,children:[(0,v.jsx)(d.Z,{htmlFor:"leadCaptureType",children:"Input Type"}),(0,v.jsxs)(c.Z,{value:t.leadCaptureType,defaultValue:"flow",name:"leadCaptureType",onChange:x,children:[(0,v.jsx)(h.Z,{value:"flow",control:(0,v.jsx)(u.Z,{}),label:"Flow"}),(0,v.jsx)(h.Z,{value:"form",control:(0,v.jsx)(u.Z,{}),label:"Form"})]})]})}),f&&(0,v.jsx)(r.ZP,{item:!0,xs:12,md:6,children:(0,v.jsxs)(l.Z,{spacing:1,children:[(0,v.jsx)(d.Z,{htmlFor:"leadCaptureFormMode",children:"When you want the form to be displayed?"}),(0,v.jsxs)(c.Z,{value:t.leadCaptureFormMode,defaultValue:"count",id:"leadCaptureFormMode",name:"leadCaptureFormMode",onChange:x,children:[(0,v.jsx)(h.Z,{value:"keyword",control:(0,v.jsx)(u.Z,{}),label:"Show form when the keyword matches"}),(0,v.jsx)(h.Z,{value:"count",control:(0,v.jsx)(u.Z,{}),label:(0,v.jsxs)(v.Fragment,{children:["Show form after conversations:"," ",(0,v.jsx)("input",{value:t.showFormAfterChats,maxLength:2,style:{width:"50px"},disabled:"form"!==t.leadCaptureType||t.leadCaptureFormMode&&"count"!==t.leadCaptureFormMode,onChange:e=>console.log({showFormAfterChats:N(e.target.value,t.showFormAfterChats)})})]})})]})]})}),!f&&(0,v.jsx)(r.ZP,{item:!0,xs:12,md:6,children:(0,v.jsxs)(l.Z,{spacing:1,children:[(0,v.jsx)(d.Z,{htmlFor:"leadCaptureFlowMandatory",children:"Can user proceed without providing contact details?"}),(0,v.jsx)(h.Z,{value:"keyword",control:(0,v.jsx)(p.Z,{checked:t.leadCaptureFlowMandatory,name:"leadCaptureFlowMandatory",onChange:x}),label:"Make the input mandatory"})]})}),b&&(0,v.jsx)(r.ZP,{item:!0,xs:12,children:(0,v.jsxs)(l.Z,{spacing:1,children:[(0,v.jsx)(d.Z,{htmlFor:"phoneNumberKeywords",children:"Keywords for Phone Number Collection *"}),(0,v.jsx)(I,{name:"phoneNumberKeywords",value:t.phoneNumberKeywords||[],error:Boolean(n.phoneNumberKeywords&&o.phoneNumberKeywords),onBlur:a,onChange:g,placeholder:"Type keyword and press enter to add more...",inputProps:{maxLength:25}}),n.phoneNumberKeywords&&o.phoneNumberKeywords&&(0,v.jsx)(m.Z,{error:!0,id:"helper-text-email-keywords",children:o.phoneNumberKeywords})]})}),b&&(0,v.jsx)(r.ZP,{item:!0,xs:12,children:(0,v.jsxs)(l.Z,{spacing:1,children:[(0,v.jsx)(d.Z,{htmlFor:"emailKeywords",children:"Keywords for Email Address Collection *"}),(0,v.jsx)(I,{name:"emailKeywords",value:t.emailKeywords||[],error:Boolean(n.emailKeywords&&o.emailKeywords),onBlur:a,onChange:g,placeholder:"Type keyword and press enter to add more...",inputProps:{maxLength:25}}),n.emailKeywords&&o.emailKeywords&&(0,v.jsx)(m.Z,{error:!0,id:"helper-text-email-keywords",children:o.emailKeywords})]})})]})}function T(e){let{values:t,handleChange:n}=e;return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(r.ZP,{item:!0,xs:12,children:(0,v.jsx)(s.Z,{children:(0,v.jsx)(i.Z,{variant:"subtitle1",children:"Allow / Block chat window"})})}),(0,v.jsx)(r.ZP,{item:!0,xs:12,md:6,children:(0,v.jsxs)(l.Z,{spacing:1,children:[(0,v.jsx)(d.Z,{htmlFor:"allowedIP",children:"Allowed IP"}),(0,v.jsx)(x.Z,{multiline:!0,id:"allowedIP",name:"allowedIP",value:t.allowedIP,onChange:n,"aria-label":"empty textarea",placeholder:"Ex: 192.167.22.340, 192.167.22.341"})]})}),(0,v.jsx)(r.ZP,{item:!0,xs:12,md:6,children:(0,v.jsxs)(l.Z,{spacing:1,children:[(0,v.jsx)(d.Z,{htmlFor:"deniedIP",children:"Denied IP"}),(0,v.jsx)(x.Z,{multiline:!0,id:"deniedIP",name:"deniedIP",defaultValue:t.deniedIP,onChange:n,"aria-label":"empty textarea",placeholder:"Ex: 192.167.22.340, 192.167.22.341"})]})}),(0,v.jsx)(r.ZP,{item:!0,xs:12,md:6,children:(0,v.jsxs)(l.Z,{spacing:1,children:[(0,v.jsx)(d.Z,{htmlFor:"allowedPages",children:"Allowed Pages"}),(0,v.jsx)(x.Z,{multiline:!0,id:"allowedPages",name:"allowedPages",defaultValue:t.allowedPages,onChange:n,"aria-label":"empty textarea",placeholder:"Ex: https://xyz.com, https://abc.com"})]})}),(0,v.jsx)(r.ZP,{item:!0,xs:12,md:6,children:(0,v.jsxs)(l.Z,{spacing:1,children:[(0,v.jsx)(d.Z,{htmlFor:"deniedPages",children:"Denied Pages"}),(0,v.jsx)(x.Z,{multiline:!0,id:"deniedPages",name:"deniedPages",defaultValue:t.deniedPages,onChange:n,"aria-label":"empty textarea",placeholder:"Ex: https://xyz.com, https://abc.com"})]})})]})}function A(e){let{errors:t,isSubmitting:n}=e;return(0,v.jsxs)(v.Fragment,{children:[t.submit&&(0,v.jsx)(r.ZP,{item:!0,xs:12,children:(0,v.jsx)(m.Z,{error:!0,children:t.submit})}),(0,v.jsx)(r.ZP,{item:!0,xs:12,mt:2,children:(0,v.jsx)(w.Z,{children:(0,v.jsx)(P.Z,{disableElevation:!0,isLoading:n,fullWidth:!0,size:"large",type:"submit",variant:"contained",color:"primary",children:"Save Settings"})})})]})}function N(e,t){return e?isNaN(e)?t:Number(e):e}function I(e){let{id:t,name:n,value:a,onChange:r,...s}=e;const i=o.useRef(),l=e=>r(n,e);return(0,v.jsx)(g.V,{ref:i,id:t||n,name:n,addOnBlur:!0,value:a||[],onChange:l,onInputChange:e=>{e.endsWith(",")&&(a=[...a,e.substring(0,e.length-1)],l(a),i.current.value="")},...s})}},80730:(e,t,n)=>{n.d(t,{Od:()=>l,TY:()=>h,U2:()=>r,gz:()=>i,v_:()=>s});var o=n(89637),a=n(32203);async function r(e,t){return d("GET",e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}async function s(e,t){return d("POST",e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}async function i(e,t){return d("PUT",e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}async function l(e,t){return d("DELETE",e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}async function d(e,t,n){let{headers:o,noAuth:a,...r}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const s="POST"===e||"PUT"===e||"DELETE"===e;if(t=h(t,s?void 0:n),n=n&&"object"===typeof n&&s?JSON.stringify(n):void 0,o||(o={}),o["Content-Type"]="application/json",o.Accept="application/json",!1!==a){const e=sessionStorage.getItem("token");e&&(o.Authorization="Bearer ".concat(e))}const i=await fetch(t,{...r,headers:o,body:n,method:e}),l=await i.json();if(i.ok){const{data:e,...t}=l;return delete t.status,e&&!Object.keys(t).length?e:l}throw l.message?new Error(l.message):l}const c=(0,o.lf)(a.Hi,"/");function h(e,t){if(!e)return e;const n=t&&Object.keys(t);if(null!==n&&void 0!==n&&n.length){const o=n.reduce(((e,n)=>{let o=t[n];return null===o||void 0===o?e:(o="".concat(n,"=").concat(encodeURIComponent(o)),e?"".concat(e,"&").concat(o):o)}),"");o&&(e="".concat(e).concat(e.includes("?")?"&":"?").concat(o))}return e.startsWith("https://")?e:"".concat(c).concat(e)}},45960:(e,t,n)=>{n.d(t,{Bc:()=>l,Iz:()=>d,Od:()=>i,Vx:()=>s,lz:()=>r,pb:()=>c});var o=n(80730),a=n(23509);async function r(e){const{organization:{websiteUrl:t,_id:n}}=a.tN.getState(),r={organizationId:n,websiteUrl:t,botName:e,botDesign:{botLogo:{name:"",url:""},visitorMessageLogo:{name:"",url:""},botMessageLogo:{name:"",url:""},backgroundColor:"#e7a654",textColor:"#ffffff",dimensions:{heightInPixel:"500px",heightInPercent:"70%",widthInPixel:"350px",widthInPercent:"25%"},botLogoDimensions:{heightInPixel:"30px",heightInPercent:"100%",widthInPixel:"30px",widthInPercent:"100%"}}},s=await o.v_("/bot/initialize-create-bot",r),i=s._id;let{botsMap:l,botsList:d}=a.tN.getState();l={...l,[i]:s},d=[...d],d.push(s._doc),a.tN.setState({selectedBotId:i,botsMap:l,botsList:d})}async function s(e,t,n){const{organizationId:r}=a.tN.getState();if(!r||!e)throw new Error("Bot details not found");const s=await o.gz("/bot/".concat(r,"/").concat(e),t);return h(s,n),s}async function i(e){const{organizationId:t,selectedBotId:n}=a.tN.getState();if(!t||!e)throw new Error("Bot details not found");const{deleted:r}=await o.Od("/bot/".concat(t,"/").concat(e));if(r){let{botsMap:e,botsList:t}=a.tN.getState();e={...e},t=[...t],delete e[r];const o=t.findIndex((e=>e._id===r));o>=0&&t.splice(o,1);const i={botsMap:e,botsList:t};var s;if(n===r)i.selectedBotId=(null===(s=t[0])||void 0===s?void 0:s._id)||null;a.tN.setState(i)}return!!r}function l(e,t){let{botDesign:n}=a.tN.getState();return n={...n,...t},s(e,{botDesign:n})}function d(e,t){return s(e,{botName:t})}function c(e,t){let{botSettings:n={}}=a.tN.getState();return n={...n,...t},s(e,{botSettings:n})}function h(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=e._id;let{botsMap:o,botsList:r}=a.tN.getState();o={...o,[n]:e},r=[...r];const s=r.findIndex((e=>e._id===n));s>=0?r[s]=e:r.push(e);const i={botsMap:o,botsList:r};t&&(i.selectedBotId=n),a.tN.setState(i)}},969:(e,t,n)=>{n.d(t,{g:()=>a});var o=n(23509);function a(e){const t=(0,o.tN)((e=>e.selectedBotId)),n=(0,o.tN)((n=>n.botsMap[e||t]));return[e||t,n]}},89637:(e,t,n)=>{function o(e,t){return e.replace(new RegExp("".concat(a(t),"+$")),"")}function a(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function r(e){const t=new Date(e),n=t.getDate(),o=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][t.getMonth()],a=t.getFullYear();return"".concat(o," ").concat(n,", ").concat(a)}n.d(t,{lf:()=>o,p6:()=>r})},32203:(e,t,n)=>{n.d(t,{Hi:()=>o,LC:()=>i,lB:()=>a,rn:()=>s,yu:()=>r});const o="https://devbackend.livhousing.com",a={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_NGROK_BACKEND_URL:"https://60f1-203-192-224-75.ngrok-free.app",REACT_APP_VERSION:"1",REACT_APP_BACKEND_URL:"https://devbackend.livhousing.com"}.REACT_APP_IP_DATA_API_KEY||"d5f26b13e02d0e43f0870c726797b2c2f726b739a4c91bf9e4bb59c2",r={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_NGROK_BACKEND_URL:"https://60f1-203-192-224-75.ngrok-free.app",REACT_APP_VERSION:"1",REACT_APP_BACKEND_URL:"https://devbackend.livhousing.com"}.TRAINING_MEDIA_MAXSIZE,s={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_NGROK_BACKEND_URL:"https://60f1-203-192-224-75.ngrok-free.app",REACT_APP_VERSION:"1",REACT_APP_BACKEND_URL:"https://devbackend.livhousing.com"}.CONVERSATION_MEDIA_MAXSIZE,i="https://60f1-203-192-224-75.ngrok-free.app"}}]);