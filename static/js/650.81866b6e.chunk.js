"use strict";(self.webpackChunklib_prop_ui=self.webpackChunklib_prop_ui||[]).push([[650],{88983:(e,t,o)=>{o.d(t,{Z:()=>a});var r=o(93701),n=o(46417);function a(e){let{children:t,type:o}=e;return(0,n.jsx)(r.E.div,{whileHover:{scale:1},whileTap:{scale:.9},children:t})}a.defaultProps={type:"scale"}},97316:(e,t,o)=>{o.d(t,{Z:()=>h});var r=o(47313),n=o(19860),a=o(73428),s=o(54641),i=o(61113),d=o(93405),l=o(46417);const c={p:2.5,"& .MuiCardHeader-action":{m:"0px auto",alignSelf:"center"}},h=(0,r.forwardRef)(((e,t)=>{let{border:o=!0,boxShadow:r,children:h,content:u=!0,contentSX:p={},darkTitle:m,elevation:x,secondary:g,shadow:b,sx:_={},title:f,...C}=e;const w=(0,n.Z)();return r="dark"===w.palette.mode?r||!0:r,(0,l.jsxs)(a.Z,{elevation:x||0,ref:t,...C,sx:{border:o?"1px solid":"none",borderRadius:2,borderColor:"dark"===w.palette.mode?w.palette.divider:w.palette.grey.A800,boxShadow:!r||o&&"dark"!==w.palette.mode?"inherit":b||w.customShadows.z1,":hover":{boxShadow:r?b||w.customShadows.z1:"inherit"},"& pre":{m:0,p:"16px !important",fontFamily:w.typography.fontFamily,fontSize:"0.75rem"},..._},children:[!m&&f&&(0,l.jsx)(s.Z,{sx:c,titleTypographyProps:{variant:"subtitle1"},title:f,action:g}),m&&f&&(0,l.jsx)(s.Z,{sx:c,title:(0,l.jsx)(i.Z,{variant:"h3",children:f}),action:g}),u&&(0,l.jsx)(d.Z,{sx:p,children:h}),!u&&h]})}))},45650:(e,t,o)=>{o.r(t),o.d(t,{default:()=>P});var r=o(47313),n=o(41806),a=o(9019),s=o(19536),i=o(61113),d=o(42832),l=o(23306),c=o(55685),h=o(83929),u=o(74268),p=o(44758),m=o(15480),x=o(31095),g=o(46676),b=o(21933),_=o(24977),f=o(97316),C=o(88983),w=o(969),y=o(45960),v=o(46417);const S=b.Ry().shape({bgColor:b.Z_().matches(/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{8})$/,"Is not a valid color code").required("Background color is required"),fontColor:b.Z_().matches(/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{8})$/,"Is not a valid color code").required("Font color is required")}),j={margin:{xs:2.5,md:3},"& > *":{flexGrow:1,flexBasis:"50%"}},E={leadCaptureType:"flow",leadCaptureFormMode:"count",showFormAfterChats:3};const P=function(){const[e,t]=(0,w.g)(),{botSettings:o=E}=t;return(0,v.jsx)(f.Z,{sx:j,content:!1,border:!1,boxShadow:!0,children:(0,v.jsx)(n.Z,{sx:{p:{xs:2,sm:3,md:4,xl:5}},children:(0,v.jsx)(_.J9,{initialValues:o,validationSchema:S,onSubmit:async(t,o)=>{let{setErrors:r,setStatus:n,setSubmitting:a}=o;try{await(0,y.pb)(e,t),n({success:!1}),a(!1)}catch(s){console.error(s),n({success:!1}),r({submit:s.message}),a(!1)}},children:e=>(0,v.jsx)("form",{noValidate:!0,onSubmit:e.handleSubmit,children:(0,v.jsxs)(a.ZP,{container:!0,spacing:3,children:[(0,v.jsx)(A,{...e}),(0,v.jsx)(T,{...e})]})})})})})};function A(e){let{values:t,touched:o,errors:r,handleBlur:n,handleChange:x,setFieldValue:g}=e;const b="form"===t.leadCaptureType,_="form"!==t.leadCaptureType||"keyword"===t.leadCaptureFormMode;return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(a.ZP,{item:!0,xs:12,children:(0,v.jsx)(s.Z,{children:(0,v.jsx)(i.Z,{variant:"caption",children:"Lead Capture Settings"})})}),(0,v.jsx)(a.ZP,{item:!0,xs:12,md:6,children:(0,v.jsxs)(d.Z,{spacing:1,children:[(0,v.jsx)(l.Z,{htmlFor:"leadCaptureType",children:"Input Type"}),(0,v.jsxs)(c.Z,{defaultValue:"flow",name:"leadCaptureType",onChange:x,children:[(0,v.jsx)(h.Z,{value:"flow",control:(0,v.jsx)(u.Z,{}),label:"Flow"}),(0,v.jsx)(h.Z,{value:"form",control:(0,v.jsx)(u.Z,{}),label:"Form"})]})]})}),b&&(0,v.jsx)(a.ZP,{item:!0,xs:12,md:6,children:(0,v.jsxs)(d.Z,{spacing:1,children:[(0,v.jsx)(l.Z,{htmlFor:"leadCaptureFormMode",children:"When you want the form to be displayed?"}),(0,v.jsxs)(c.Z,{defaultValue:"count",id:"leadCaptureFormMode",name:"leadCaptureFormMode",onChange:x,children:[(0,v.jsx)(h.Z,{value:"keyword",control:(0,v.jsx)(u.Z,{}),label:"Show form when the keyword matches"}),(0,v.jsx)(h.Z,{value:"count",control:(0,v.jsx)(u.Z,{}),label:(0,v.jsxs)(v.Fragment,{children:["Show form after conversations:"," ",(0,v.jsx)("input",{value:t.showFormAfterChats,maxLength:2,style:{width:"50px"},disabled:"form"!==t.leadCaptureType||t.leadCaptureFormMode&&"count"!==t.leadCaptureFormMode,onChange:e=>console.log({showFormAfterChats:Z(e.target.value,t.showFormAfterChats)})})]})})]})]})}),!b&&(0,v.jsx)(a.ZP,{item:!0,xs:12,md:6,children:(0,v.jsxs)(d.Z,{spacing:1,children:[(0,v.jsx)(l.Z,{htmlFor:"leadCaptureFlowMandatory",children:"Can user proceed without providing contact details?"}),(0,v.jsx)(h.Z,{value:"keyword",control:(0,v.jsx)(p.Z,{checked:t.leadCaptureFlowMandatory,name:"leadCaptureFlowMandatory",onChange:x}),label:"Make the input mandatory"})]})}),_&&(0,v.jsx)(a.ZP,{item:!0,xs:12,children:(0,v.jsxs)(d.Z,{spacing:1,children:[(0,v.jsx)(l.Z,{htmlFor:"phoneNumberKeywords",children:"Keywords for Phone Number Collection *"}),(0,v.jsx)(N,{name:"phoneNumberKeywords",value:t.phoneNumberKeywords||[],error:Boolean(o.phoneNumberKeywords&&r.phoneNumberKeywords),onBlur:n,onChange:g,placeholder:"Type keyword and press enter to add more...",inputProps:{maxLength:25}}),o.phoneNumberKeywords&&r.phoneNumberKeywords&&(0,v.jsx)(m.Z,{error:!0,id:"helper-text-email-keywords",children:r.phoneNumberKeywords})]})}),_&&(0,v.jsx)(a.ZP,{item:!0,xs:12,children:(0,v.jsxs)(d.Z,{spacing:1,children:[(0,v.jsx)(l.Z,{htmlFor:"emailKeywords",children:"Keywords for Email Address Collection *"}),(0,v.jsx)(N,{name:"emailKeywords",value:t.emailKeywords||[],error:Boolean(o.emailKeywords&&r.emailKeywords),onBlur:n,onChange:g,placeholder:"Type keyword and press enter to add more...",inputProps:{maxLength:25}}),o.emailKeywords&&r.emailKeywords&&(0,v.jsx)(m.Z,{error:!0,id:"helper-text-email-keywords",children:r.emailKeywords})]})})]})}function T(e){let{errors:t,isSubmitting:o}=e;return(0,v.jsxs)(v.Fragment,{children:[t.submit&&(0,v.jsx)(a.ZP,{item:!0,xs:12,children:(0,v.jsx)(m.Z,{error:!0,children:t.submit})}),(0,v.jsx)(a.ZP,{item:!0,xs:12,children:(0,v.jsx)(C.Z,{children:(0,v.jsx)(x.Z,{disableElevation:!0,disabled:o,fullWidth:!0,size:"large",type:"submit",variant:"contained",color:"primary",children:"Save Settings"})})})]})}function Z(e,t){return e?isNaN(e)?t:Number(e):e}function N(e){let{id:t,name:o,value:n,onChange:a,...s}=e;const i=r.useRef(),d=e=>a(o,e);return(0,v.jsx)(g.V,{ref:i,id:t||o,name:o,addOnBlur:!0,value:n||[],onChange:d,onInputChange:e=>{e.endsWith(",")&&(n=[...n,e.substring(0,e.length-1)],d(n),i.current.value="")},...s})}},69753:(e,t,o)=>{function r(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}o.d(t,{Vj:()=>i,U2:()=>a,v_:()=>s,TY:()=>u});var n=o(32203);async function a(e,t){return d("GET",e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}async function s(e,t){return d("POST",e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}async function i(e,t){return d("DELETE",e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}async function d(e,t,o){let{headers:r,noAuth:n,...a}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const s="POST"===e||"PUT"===e||"DELETE"===e;if(t=u(t),o=o&&"object"===typeof o&&s?JSON.stringify(o):void 0,r||(r={}),r["Content-Type"]="application/json",r.Accept="application/json",!1!==n){const e=sessionStorage.getItem("token");e&&(r.Authorization="Bearer ".concat(e))}const i=await fetch(t,{...a,headers:r,body:o,method:e}),d=await i.json();if(i.ok){const{data:e,...t}=d;return delete t.status,e&&!Object.keys(t).length?e:d}throw d.message?new Error(d.message):d}const l=(c=n.Hi,h="/",c.replace(new RegExp("".concat(r(h),"+$")),""));var c,h;function u(e){return e?e.startsWith("https://")?e:"".concat(l).concat(e):e}},45960:(e,t,o)=>{o.d(t,{Bc:()=>s,Iz:()=>i,lz:()=>a,pb:()=>d});var r=o(69753),n=o(23509);async function a(e){const{organization:{websiteUrl:t,_id:o}}=n.tN.getState(),a={organizationId:o,websiteUrl:t,botName:e,botDesign:{botLogo:{name:"",url:""},backgroundColor:"coral",textColor:"#fff",dimensions:{heightInPixel:"500px",heightInPercent:"70%",widthInPixel:"350px",widthInPercent:"25%"},botLogoDimensions:{heightInPixel:"30px",heightInPercent:"100%",widthInPixel:"30px",widthInPercent:"100%"}}};l(await r.v_("/bot/initialize-create-bot",a))}async function s(e,t){let{botDesign:o}=n.tN.getState();o={...o,...t};l(await r.v_("/bot/save-bot-design",{botDesign:o},{headers:{botId:e}}))}async function i(e){l(await r.v_("/bot/edit-bot-details",e))}async function d(e,t){let{botSettings:o}=n.tN.getState();o={...botDesign,...t};l(await r.v_("/bot/save-bot-settings",{botSettings:o},{headers:{botId:e}}))}function l(e){const t=e._id;let{botsMap:o,botsList:r}=n.tN.getState();o={...o,[t]:e},r=[...r];const a=r.findIndex((e=>e._id===t));a>=0?r[a]=e:r.push(e),n.tN.setState({selectedBotId:t,botsMap:o,botsList:r})}},969:(e,t,o)=>{o.d(t,{g:()=>n});var r=o(23509);function n(e){const t=(0,r.tN)((e=>e.selectedBotId)),o=(0,r.tN)((o=>o.botsMap[e||t]));return[e||t,o]}},32203:(e,t,o)=>{o.d(t,{Hi:()=>r,LC:()=>i,lB:()=>n,rn:()=>s,yu:()=>a});const r="https://devbackend.livhousing.com",n={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_NGROK_BACKEND_URL:"https://60f1-203-192-224-75.ngrok-free.app",REACT_APP_VERSION:"1",REACT_APP_BACKEND_URL:"https://devbackend.livhousing.com"}.REACT_APP_IP_DATA_API_KEY,a={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_NGROK_BACKEND_URL:"https://60f1-203-192-224-75.ngrok-free.app",REACT_APP_VERSION:"1",REACT_APP_BACKEND_URL:"https://devbackend.livhousing.com"}.TRAINING_MEDIA_MAXSIZE,s={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_NGROK_BACKEND_URL:"https://60f1-203-192-224-75.ngrok-free.app",REACT_APP_VERSION:"1",REACT_APP_BACKEND_URL:"https://devbackend.livhousing.com"}.CONVERSATION_MEDIA_MAXSIZE,i="https://60f1-203-192-224-75.ngrok-free.app"}}]);