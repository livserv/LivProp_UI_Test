"use strict";(self.webpackChunklib_prop_ui=self.webpackChunklib_prop_ui||[]).push([[1489],{32829:(e,t,n)=>{n.d(t,{A:()=>o});var i=n(25371),a=n(44414);function o(e){let{children:t,type:n}=e;return(0,a.jsx)(i.P.div,{whileHover:{scale:1},whileTap:{scale:.9},children:t})}o.defaultProps={type:"scale"}},46278:(e,t,n)=>{n.d(t,{A:()=>l});n(9950);var i=n(63464),a=n(40033),o=n(28170),s=n(79739),r=n(10226),c=n(44414);const l=e=>{const{title:t,children:n,open:l,setOpen:d,onConfirm:u}=e;return(0,c.jsxs)(i.A,{open:l,onClose:()=>d(!1),style:{zIndex:1e4},children:[(0,c.jsx)(a.A,{sx:{m:0,p:2},id:"confirm-dialog",children:t}),(0,c.jsx)(o.A,{dividers:!0,children:n}),(0,c.jsxs)(s.A,{children:[(0,c.jsx)(r.A,{size:"large",type:"submit",variant:"contained",color:"secondary",onClick:()=>d(!1),children:"No"}),(0,c.jsx)(r.A,{size:"large",type:"submit",variant:"contained",color:"success",onClick:()=>{d(!1),u()},children:"Yes"})]})]})}},92728:(e,t,n)=>{n.d(t,{A:()=>s});var i=n(9950),a=n(48205),o=n(44414);const s=i.forwardRef((function(e,t){return(0,o.jsx)(a.A,{direction:"up",ref:t,...e})}))},51637:(e,t,n)=>{n.d(t,{A:()=>u});var i=n(9950),a=n(14857),o=n(48089),s=n(45180),r=n(82053),c=n(50704),l=n(44414);const d={p:2.5,"& .MuiCardHeader-action":{m:"0px auto",alignSelf:"center"}},u=(0,i.forwardRef)(((e,t)=>{let{border:n=!0,boxShadow:i,children:u,content:h=!0,contentSX:g={},darkTitle:p,elevation:x,secondary:m,shadow:f,sx:b={},title:A,...y}=e;const j=(0,a.A)();return i="dark"===j.palette.mode?i||!0:i,(0,l.jsxs)(o.A,{elevation:x||0,ref:t,...y,sx:{border:n?"1px solid":"none",borderRadius:2,borderColor:"dark"===j.palette.mode?j.palette.divider:j.palette.grey.A800,boxShadow:!i||n&&"dark"!==j.palette.mode?"inherit":f||j.customShadows.z1,":hover":{boxShadow:i?f||j.customShadows.z1:"inherit"},"& pre":{m:0,p:"16px !important",fontFamily:j.typography.fontFamily,fontSize:"0.75rem"},...b},children:[!p&&A&&(0,l.jsx)(s.A,{sx:d,titleTypographyProps:{variant:"subtitle1"},title:A,action:m}),p&&A&&(0,l.jsx)(s.A,{sx:d,title:(0,l.jsx)(r.A,{variant:"h3",children:A}),action:m}),h&&(0,l.jsx)(c.A,{sx:g,children:u}),!h&&u]})}))},26092:(e,t,n)=>{n.d(t,{A:()=>g});n(9950);var i=n(92728),a=n(63464),o=n(40033),s=n(28170),r=n(96319),c=n(59254),l=n(14857),d=n(25333),u=n(44414);const h=(0,c.Ay)(a.A)((e=>{let{theme:t}=e;return{"& .MuiDialogContent-root":{padding:t.spacing(2)},"& .MuiDialogActions-root":{padding:t.spacing(1)}}}));function g(e){const t=(0,l.A)(),{breakpoints:n}=t,{openPopUpDialog:a,setPopUpDialog:c,onClose:g=()=>c(!1),title:p,width:x="70%"}=e;return(0,u.jsxs)(h,{TransitionComponent:i.A,"aria-labelledby":"customized-dialog-title",open:a,PaperProps:{sx:{width:{width:x},[n.down("sm")]:{width:"90%"}}},children:[(0,u.jsx)(o.A,{sx:{m:0,p:2},id:"customized-dialog-title",children:p}),(0,u.jsx)(d.A,{"aria-label":"close",onClick:g,sx:{position:"absolute",right:8,top:8},children:(0,u.jsx)(r.A,{})}),(0,u.jsx)(s.A,{dividers:!0,children:e.children})]})}},93383:(e,t,n)=>{n.d(t,{A:()=>r});var i=n(9950),a=n(10226),o=n(46639),s=n(44414);const r=function(e){let{onClick:t,disabled:n,isLoading:r,children:c,...l}=e;const[d,u]=i.useState(r);return(0,s.jsxs)(a.A,{onClick:e=>{if(!t)return;const n=t(e);"function"===typeof(null===n||void 0===n?void 0:n.finally)&&(u(!0),n.finally((()=>u(!1))))},disabled:d||r||n,...l,children:[(d||r)&&(0,s.jsx)(o.A,{size:16,color:"primary",style:{marginRight:"10px"}}),c]})}},6716:(e,t,n)=>{n.d(t,{A:()=>b});n(9950);var i=n(60899),a=n(93230),o=n(3788),s=n(82053),r=n(10226),c=n(24516),l=n(29714),d=n(61467),u=n(32829),h=n(26092),g=n(44364),p=n(30334),x=n(70855),m=n(58178),f=n(44414);const b=function(e){let{isOpen:t,toggleOpen:n}=e;return(0,f.jsx)(h.A,{openPopUpDialog:t,setPopUpDialog:n,title:"Upload Training Documents",children:(0,f.jsx)(j,{setDocumentUploadDialogOpen:n})})},A=g.Og?g.Og:5242880,y=l.Ik().shape({file:l.gl().required("File is not selected").test("is-valid-size","Maximum allowed file size is ".concat(A/1048576," MB"),(e=>e&&e.size<=A))});function j(e){let{setDocumentUploadDialogOpen:t}=e;const[,n]=(0,x.G)(),l=null===n||void 0===n?void 0:n.trainingMedia;return(0,f.jsxs)(i.Ay,{container:!0,spacing:1,children:[(0,f.jsx)(i.Ay,{item:!0,xs:12,md:12,style:{display:"flex",justifyContent:"center"},children:(0,f.jsx)(a.A,{spacing:1,children:(0,f.jsx)(o.A,{children:"File Upload (.csv, .txt, .docx, .pdf)"})})}),(0,f.jsx)(i.Ay,{item:!0,xs:12,md:12,style:{display:"flex",justifyContent:"center"},children:(0,f.jsx)(d.l1,{initialValues:{file:null},validationSchema:y,onSubmit:async(e,n)=>{let{setErrors:i,setStatus:a,setSubmitting:o}=n;try{const{name:n}=e.file;l.some((e=>e.originalName===n))?(0,m.i)(!0,"The file already uploaded!. Please select another file","error"):(o(!0),await(0,p.MD)(e.file),a({success:!0}),t(!1),(0,m.i)(!0,"The file uploaded successfully!","success"))}catch(s){console.error("Error uploading the document:",s),a({success:!1}),i({submit:s.message}),o(!1),t(!1),(0,m.i)(!0,"Not able to upload the file. Try after sometime!","error")}},children:e=>{let{values:t,errors:n,isSubmitting:a,setFieldValue:o}=e;return(0,f.jsxs)(d.lV,{children:[(0,f.jsxs)(i.Ay,{container:!0,spacing:2,children:[(0,f.jsx)(i.Ay,{item:!0,xs:12,md:12,children:t.file&&(0,f.jsxs)(s.A,{variant:"body2",children:["Selected File: ",t.file.name]})}),(0,f.jsx)(i.Ay,{item:!0,xs:6,md:6,container:!0,justifyContent:"flex-end",children:(0,f.jsx)(d.D0,{type:"file",name:"file",as:e=>{let{field:t}=e;return(0,f.jsx)(u.A,{children:(0,f.jsxs)(r.A,{variant:"contained",component:"label",htmlFor:"file-input",size:"large",sx:{whiteSpace:"nowrap"},children:["Select File",(0,f.jsx)("input",{...t,type:"file",id:"file-input",style:{display:"none"},onChange:e=>{o("file",e.currentTarget.files[0])},accept:".csv,.txt,.docx,.doc,.pdf,text/plain"})]})})}})}),(0,f.jsx)(i.Ay,{item:!0,xs:6,md:6,children:(0,f.jsx)(u.A,{children:(0,f.jsx)(r.A,{variant:"contained",size:"large",type:"submit",disabled:a,children:a?"Uploading...":"Upload"})})})]}),(0,f.jsx)(i.Ay,{item:!0,xs:12,md:12,style:{display:"flex",justifyContent:"center"},children:(0,f.jsx)(c.A,{error:!0,id:"helper-text-file-input",children:n.file})})]})}})})]})}},11489:(e,t,n)=>{n.r(t),n.d(t,{default:()=>K});var i=n(9950),a=n(16491),o=n(60899),s=n(82053),r=n(93230),c=n(3788),l=n(2660),d=n(24516),u=n(33092),h=n(59254),g=n(80417),p=n(79046),x=n(12504),m=n(4120),f=n(94540),b=n(29714),A=n(61467),y=n(33340),j=n(70855),v=n(32829),S=n(30334),w=n(93383),D=n(26092),_=n(58178),E=n(57988),I=n(62375),T=n(50704),C=n(53065),P=n(25713),M=n(25333),U=n(25277),k=n(51637),N=n(46278);function O(e,t,n,i){function a(e,t,n){const{botsList:i}=y.nc.getState(),a=i.find((t=>t._id===e));if(a){const i=a.trainingMedia.map((e=>e.url===t?{...e,name:n}:e));((e,t)=>{y.nc.setState((n=>{const i=n.botsList.map((n=>n._id===e?{...n,trainingMedia:t}:n));return{...n,botsList:i}}))})(e,i),y.nc.setState((()=>({trainingMediaUpdate:!0})))}else console.error("Bot not found for the given ID.")}a(n,e,"delete"===i?e:t)}var R=n(44414);const z=function(e){let{media:t,botId:n,organizationId:a}=e;const[r,c]=i.useState(!1),{name:u,url:h,type:g,originalName:p}=t;return(0,R.jsxs)(k.A,{contentSX:{p:2.25},children:[(0,R.jsxs)(T.A,{style:{padding:0,minHeight:"65px",maxHeight:"65px"},children:[p&&(0,R.jsxs)(s.A,{variant:"h6",style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:"300px"},children:[(0,R.jsx)("strong",{children:"File Name :"})," ",(0,R.jsx)(C.A,{style:{cursor:"pointer"},title:p,children:(0,R.jsx)("span",{children:(0,R.jsx)("a",{href:h,target:"_blank",rel:"noreferrer",children:p})})})]}),"single_page"===g&&(0,R.jsxs)(s.A,{variant:"h6",style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:"300px"},children:[(0,R.jsx)("strong",{children:"URL :"})," ",(0,R.jsx)(C.A,{style:{cursor:"pointer"},title:h,children:(0,R.jsx)("span",{children:(0,R.jsx)("a",{href:h,target:"_blank",rel:"noreferrer",children:h})})})]}),(0,R.jsxs)(s.A,{variant:"h6",children:[(0,R.jsx)("strong",{children:"Type :"})," ","single_page"===g?"Web Page":"Document"]}),(0,R.jsxs)(s.A,{variant:"h6",children:[(0,R.jsx)("strong",{children:"Document Name :"})," ",u===h?"NA":(0,R.jsx)(U.A,{label:u,onDelete:()=>((e,t,n)=>{O(e,t,n,"delete")})(h,u,n)})]})]}),(0,R.jsx)(P.A,{style:{justifyContent:"flex-end",padding:"1px"},children:(0,R.jsxs)(o.Ay,{container:!0,children:[(0,R.jsx)(o.Ay,{item:!0,xs:10,md:10,children:u===h&&(0,R.jsx)(A.l1,{initialValues:{trainingMediaName:"",url:h},validationSchema:b.Ik().shape({trainingMediaName:b.Yj().max(50,"Training Media Name length must be less than 50 characters").min(3,"Training Media Name length must be at least 3 characters").required("Training Media Name is required")}),onSubmit:async(e,t)=>{let{setErrors:i,setStatus:a,setSubmitting:o}=t;const{trainingMediaName:s}=e;try{O(h,s,n,"add"),a({success:!0}),o(!0)}catch(r){a({success:!1}),i({submit:r.message}),o(!1)}},children:e=>{let{errors:t,handleBlur:n,handleChange:i,handleSubmit:a,isSubmitting:s,touched:r,values:c}=e;return(0,R.jsx)("form",{noValidate:!0,onSubmit:a,children:(0,R.jsxs)(o.Ay,{container:!0,spacing:1,children:[(0,R.jsxs)(o.Ay,{item:!0,xs:8,md:8,children:[(0,R.jsx)(l.A,{id:"trainingMediaName",type:"trainingMediaName",name:"trainingMediaName",placeholder:"Document Name",defaultValue:c.trainingMediaName,onBlur:n,onChange:i,fullWidth:!0,autoComplete:"off",error:Boolean(r.trainingMediaName&&t&&t.trainingMediaName)}),r.trainingMediaName&&t.trainingMediaName&&(0,R.jsx)(d.A,{error:!0,id:"helper-text-training-media-name",children:t.trainingMediaName})]}),(0,R.jsx)(o.Ay,{item:!0,xs:1,md:1,children:(0,R.jsx)(v.A,{children:(0,R.jsx)(w.A,{isLoading:s,disabled:s,type:"submit",variant:"contained",color:"primary",children:"Add"})})})]})})}})}),(0,R.jsx)(o.Ay,{item:!0,xs:1,md:1,children:(0,R.jsx)(C.A,{title:"text/plain"===g?"View Document":"View Web Page",children:(0,R.jsx)(M.A,{variant:"text",onClick:()=>{return e=h,void window.open(e);var e},children:(0,R.jsx)(I.A,{style:{color:"#5ad74e"}})})})}),(0,R.jsxs)(o.Ay,{item:!0,xs:1,md:1,children:[(0,R.jsx)(C.A,{title:"Delete",children:(0,R.jsx)(M.A,{variant:"text",onClick:()=>c(!0),children:(0,R.jsx)(E.A,{style:{color:"#ff0000"},fontSize:"small"})})}),(0,R.jsxs)(N.A,{title:"Delete file?",open:r,setOpen:c,onConfirm:()=>(async(e,t,n,i)=>{try{const a={organizationId:i,botId:n,fileName:t,fileUrl:e};await(0,S.qt)(a,n,i),(0,_.i)(!0,"The file deleted successfully!","success")}catch(a){(0,_.i)(!0,"Not able to delete the file. Try after sometime!","error")}})(h,p,n,a),children:["Confirm the deletion of ",p||h,"?"]})]})]})})]})};var F=n(6716),L=n(98415);const B=(0,h.Ay)(g.A)((e=>{let{theme:t}=e;return{position:"fixed","#trainingDocumentsSpeedDial &":{"&.MuiSpeedDial-directionDown, &.MuiSpeedDial-directionRight":{left:"auto",right:t.spacing(2)},"&.MuiSpeedDial-directionUp, &.MuiSpeedDial-directionLeft":{right:"auto",left:t.spacing(2)}}}}));function W(e){let{botId:t,organizationId:n}=e;const[a,o]=i.useState(!1),[s,r]=i.useState(!1),c=[{icon:(0,R.jsx)(x.A,{}),name:"File Upload (.csv, .txt, .docx, .pdf)",method:()=>{r(!0)}},{icon:(0,R.jsx)(m.A,{}),name:"Add Web Page url",method:()=>{o(!0)}}];return(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(B,{ariaLabel:"Upload Training Documents",hidden:!1,icon:(0,R.jsx)(p.A,{}),direction:"down",sx:{"& .MuiFab-primary":{width:40,height:40}},children:c.map((e=>(0,R.jsx)(u.A,{icon:e.icon,tooltipTitle:e.name,onClick:e.method},e.name)))}),(0,R.jsx)(D.A,{openPopUpDialog:a,setPopUpDialog:o,title:"Upload Training Documents",children:(0,R.jsx)(V,{botId:t,organizationId:n,setWebPageUrlAddDialogOpen:o})}),(0,R.jsx)(F.A,{isOpen:s,toggleOpen:r})]})}const K=function(){var e;const[t,n]=(0,i.useState)(!1),[r,c]=(0,i.useState)(!1),l=(0,y.nc)((e=>e.botsList)),d=(0,y.nc)((e=>e.organizationId)),u=(0,y.nc)((e=>e.trainingMediaUpdate)),[h]=(0,j.G)(),g=null===(e=l.find((e=>e._id===h)))||void 0===e?void 0:e.trainingMedia;return(0,R.jsx)(R.Fragment,{children:(0,R.jsxs)(a.A,{children:[(0,R.jsxs)(o.Ay,{container:!0,spacing:3,children:[(0,R.jsx)(o.Ay,{item:!0,xs:3,children:(0,R.jsx)(s.A,{variant:"h5",children:"Training Documents"})}),(0,R.jsx)(o.Ay,{item:!0,xs:6,sx:{position:"relative",display:"flex",justifyContent:"flex-end"},children:(0,R.jsx)("div",{style:{position:"fixed",right:75},children:(0,R.jsxs)(o.Ay,{container:!0,spacing:3,children:[(0,R.jsx)(o.Ay,{item:!0,children:u&&(0,R.jsx)(v.A,{children:(0,R.jsx)(w.A,{isLoading:t,disabled:t,variant:"contained",color:"success",size:"large",onClick:async()=>{try{n(!0),await(0,L.yo)(h,{trainingMedia:g}),y.nc.setState((()=>({trainingMediaUpdate:!1}))),(0,_.i)(!0,"The document names updated successfully!","success"),n(!1)}catch(e){n(!1),(0,_.i)(!0,"Not able to add document names. Try after sometime!","error")}},children:"Save Changes"})})}),(0,R.jsx)(o.Ay,{item:!0,children:(0,R.jsx)(v.A,{children:(0,R.jsx)(w.A,{isLoading:r,disabled:r,variant:"contained",color:"success",size:"large",onClick:async()=>{c(!0);try{const e=await(0,S.Ei)(h,d),{deleted:t,totalDocs:i,supportedDocsCount:a,processedDocsCount:o,created:s,failedDocs:r}=e,l=r.length,u=l>0?l+" are failed to process":"all supported files processed successfully";c(!1),(0,_.i)(!0,"The bot training completed successfully! In ".concat(i," files ").concat(a," are supported, ").concat(o," files processed, ").concat(t," FAQ's deleted, ").concat(s," FAQ's created and ").concat(u),"success"),n(!1)}catch(e){c(!1),(0,_.i)(!0,"Not able to train the bot. Try after sometime!","error")}},children:"Train the bot"})})})]})})}),(0,R.jsx)(o.Ay,{item:!0,xs:1,sx:{position:"relative"},id:"trainingDocumentsSpeedDial",children:(0,R.jsx)(W,{botId:h,organizationId:d})})]}),(0,R.jsx)(a.A,{children:(0,R.jsx)(o.Ay,{container:!0,spacing:3,children:(0,R.jsx)(H,{trainingMedia:g,botId:h,organizationId:d})})})]})})};function V(e){let{botId:t,organizationId:n,setWebPageUrlAddDialogOpen:i}=e;const[,a]=(0,j.G)();return(0,R.jsx)(R.Fragment,{children:(0,R.jsx)(o.Ay,{item:!0,xs:12,children:(0,R.jsx)(A.l1,{initialValues:{webpageUrl:""},validationSchema:b.Ik().shape({webpageUrl:b.Yj().url("Enter valid url!").required("please enter webpage url")}),onSubmit:async(e,o)=>{let{setErrors:s,setStatus:r,setSubmitting:c}=o;try{const{trainingMedia:o}=a;if(o.some((t=>{var n,i;return(null===(n=t.url)||void 0===n?void 0:n.toLowerCase())===(null===(i=e.webpageUrl)||void 0===i?void 0:i.toLowerCase())})))(0,_.i)(!0,"This URL already available in the Training Documents!. Please add another URL","error");else{const a={url:e.webpageUrl};c(!0),await(0,S.KM)(a,t,n),r({success:!0}),i(!1),(0,_.i)(!0,"The url added successfully!","success")}}catch(l){console.error("Error adding training documents:-",l),r({success:!1}),s({submit:l.message}),c(!1),i(!1),(0,_.i)(!0,"Not able to add the url. Try after sometime!","error")}},children:e=>{let{errors:t,handleBlur:n,handleChange:i,handleSubmit:a,isSubmitting:s,touched:u,values:h}=e;return(0,R.jsx)("form",{noValidate:!0,onSubmit:a,children:(0,R.jsxs)(o.Ay,{container:!0,spacing:1,children:[(0,R.jsx)(o.Ay,{item:!0,xs:9,md:9,children:(0,R.jsxs)(r.A,{spacing:1,children:[(0,R.jsx)(c.A,{htmlFor:"webpage-url",children:"Webpage Url"}),(0,R.jsx)(l.A,{id:"webpage-url",type:"webpageUrl",defaultValue:h.webpageUrl,name:"webpageUrl",onBlur:n,onChange:i,autoComplete:"off",fullWidth:!0,placeholder:"https://www.yourwebsite.com/product-info",error:Boolean(u.webpageUrl&&t.webpageUrl)}),u.webpageUrl&&t.webpageUrl&&(0,R.jsx)(d.A,{error:!0,id:"helper-text-webpage-url",children:t.webpageUrl})]})}),(0,R.jsx)(o.Ay,{item:!0,xs:2,md:2,children:(0,R.jsxs)(r.A,{spacing:1,children:[(0,R.jsx)(c.A,{children:"\xa0"}),(0,R.jsx)(v.A,{children:(0,R.jsx)(w.A,{isLoading:s,disabled:s,color:"primary",size:"large",type:"submit",variant:"contained",id:"webpageUrlSubmit",children:"Add"})})]})})]})})}})})})}function H(e){let{trainingMedia:t,botId:n,organizationId:i}=e;return(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(o.Ay,{item:!0,xs:12,children:t&&0===t.length&&(0,R.jsx)(s.A,{variant:"caption",color:"#FF0000",children:(0,R.jsxs)(o.Ay,{container:!0,spacing:1,children:[(0,R.jsx)(o.Ay,{item:!0,xs:12,md:12,style:{display:"flex",justifyContent:"center"},children:(0,R.jsx)(f.A,{style:{fontSize:40}})}),(0,R.jsx)(o.Ay,{item:!0,xs:12,md:12,style:{display:"flex",justifyContent:"center"},children:"Training Documents are not uploaded!"})]})})}),t&&t.map(((e,t)=>(0,R.jsx)(o.Ay,{item:!0,xs:12,sm:6,md:4,children:(0,R.jsx)(z,{media:e,botId:n,organizationId:i})},t)))]})}},8478:(e,t,n)=>{n.d(t,{Jt:()=>o,TF:()=>c,bE:()=>s,yJ:()=>r});var i=n(32026),a=n(44364);async function o(e,t){return l("GET",e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}async function s(e,t){return l("POST",e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}async function r(e,t){return l("PUT",e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}async function c(e,t){return l("DELETE",e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}async function l(e,t,n){let{headers:i,noAuth:a,...o}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const s="POST"===e||"PUT"===e||"DELETE"===e;t=function(e,t){if(!e)return e;const n=t&&Object.keys(t);if(null!==n&&void 0!==n&&n.length){const i=n.reduce(((e,n)=>{let i=t[n];return null===i||void 0===i?e:(i="".concat(n,"=").concat(encodeURIComponent(i)),e?"".concat(e,"&").concat(i):i)}),"");i&&(e="".concat(e).concat(e.includes("?")?"&":"?").concat(i))}if(e.startsWith("https://"))return e;return"".concat(d).concat(e)}(t,s?void 0:n);const r=n instanceof FormData;if(r||(n=n&&"object"===typeof n&&s?JSON.stringify(n):void 0),i||(i={}),r||(i["Content-Type"]="application/json"),i.Accept="application/json",!1!==a){const e=sessionStorage.getItem("token");e&&(i.Authorization="Bearer ".concat(e))}try{const a=await fetch(t,{...o,headers:i,body:n,method:e}),s=await a.json();if(a.ok){const{data:e,...t}=s;return delete t.status,e&&!Object.keys(t).length?e:s}throw s.message?new Error(s.message):s}catch(l){var c;throw console.error("Error calling API: ",l),null!==(c=l.message)&&void 0!==c&&c.includes("fetch")?new Error("Unable to reach server. Please check your network connectivity and try again."):new Error(l.message)}}const d=(0,i.s8)(a.jn,"/")},98415:(e,t,n)=>{n.d(t,{Ci:()=>u,I4:()=>d,TF:()=>c,gI:()=>s,gR:()=>g,jo:()=>l,rv:()=>p,so:()=>h,yo:()=>r});var i=n(8478),a=n(33340),o=n(32026);async function s(e){const{organization:{websiteUrl:t,_id:n}}=a.nc.getState(),o={organizationId:n,websiteUrl:t,botName:e,botDesign:{visitorMessageLogo:{name:"",url:""},botMessageLogo:{name:"",url:""},botChatButton:{name:"",url:""},botLogo:{name:"",url:""},backgroundColor:"#e7a654",textColor:"#ffffff",dimensions:{heightInPixel:"500px",heightInPercent:"70%",widthInPixel:"350px",widthInPercent:"25%"},botLogoDimensions:{heightInPixel:"30px",heightInPercent:"100%",widthInPixel:"30px",widthInPercent:"100%"}}};x(await i.bE("/bot/".concat(n),o),!0)}async function r(e,t,n){const{organizationId:o}=a.nc.getState();if(!o||!e)throw new Error("Bot details not found");const s=await i.yJ("/bot/".concat(o,"/").concat(e),t);return x(s,n),s}async function c(e){const{organizationId:t,selectedBotId:n}=a.nc.getState();if(!t||!e)throw new Error("Bot details not found");const{deleted:o}=await i.TF("/bot/".concat(t,"/").concat(e));if(o){let{botsMap:e,botsList:t}=a.nc.getState();e={...e},t=[...t],delete e[o];const i=t.findIndex((e=>e._id===o));i>=0&&t.splice(i,1);const r={botsMap:e,botsList:t};var s;if(n===o)r.selectedBotId=(null===(s=t[0])||void 0===s?void 0:s._id)||null;a.nc.setState(r)}return!!o}function l(e,t){let{botDesign:n}=a.nc.getState();return n={...n,...t},r(e,{botDesign:n})}async function d(e,t){const{organizationId:n,selectedBotId:o}=a.nc.getState(),s=new FormData;s.append("file",t);const r=await i.bE("/bot/".concat(n,"/").concat(o,"/update-logo/").concat(e),s);return p(o,r),r["botDesign.".concat(e)]}async function u(e){const{organizationId:t,selectedBotId:n}=a.nc.getState(),o=await i.TF("/bot/".concat(t,"/").concat(n,"/update-logo/").concat(e));return p(n,o),o["botDesign.".concat(e)]}function h(e,t){return r(e,{botName:t})}function g(e,t){let{botSettings:n={}}=a.nc.getState();return n={...n,...t},r(e,{botSettings:n})}function p(e,t){const{botsMap:n}=a.nc.getState(),i=n[e];if(!i)return;x(Object.keys(t).reduce(((e,n)=>(0,o.G6)(e,n,t[n])),i))}function x(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=e._id;let{botsMap:i,botsList:o}=a.nc.getState();i={...i,[n]:e},o=[...o];const s=o.findIndex((e=>e._id===n));s>=0?o[s]=e:o.push(e);const r={botsMap:i,botsList:o};t&&(r.selectedBotId=n),a.nc.setState(r)}},77382:(e,t,n)=>{n.d(t,{CA:()=>r,Mk:()=>o,bZ:()=>s});var i=n(8478),a=n(33340);async function o(e){const{organizationId:t,selectedBotId:n}=a.nc.getState(),o=await i.bE("/bot/".concat(t,"/").concat(n,"/knowledge-base"),e);a.nc.setState((t=>{const i={...t.kbDocs||{}};if(i[n]=[...i[n]],e._id){const e=i[n].findIndex((e=>e._id===o._id));e>=0?i[n][e]=o:i[n].push(o)}else i[n].push(o);return{kbDocs:i}}))}async function s(e){const{organizationId:t,selectedBotId:n,kbDocs:o}=a.nc.getState();if(e&&Array.isArray(null===o||void 0===o?void 0:o[n]))return;const s=await i.Jt("/bot/".concat(t,"/").concat(n,"/knowledge-base/list"));a.nc.setState((e=>({kbDocs:{...e.kbDocs||{},[n]:s}})))}async function r(e){const{organizationId:t,selectedBotId:n}=a.nc.getState();await i.TF("/bot/".concat(t,"/").concat(n,"/knowledge-base/").concat(e)),a.nc.setState((t=>{var i;const a={...t.kbDocs||{}};return a[n]=null===(i=a[n])||void 0===i?void 0:i.filter((t=>t._id!==e)),{kbDocs:a}}))}},30334:(e,t,n)=>{n.d(t,{Ei:()=>d,KM:()=>r,MD:()=>c,pn:()=>u,qt:()=>l});var i=n(8478),a=n(33340),o=n(77382),s=n(98415);async function r(e,t,n){const a=await i.bE("/bot/".concat(n,"/").concat(t,"/add-training-media"),e);(0,s.rv)(t,{trainingMedia:a.trainingMedia})}async function c(e){const{organizationId:t,selectedBotId:n}=a.nc.getState(),o=new FormData;o.append("file",e);try{const e=await i.bE("/bot/".concat(t,"/").concat(n,"/add-training-media"),o);(0,s.rv)(n,{trainingMedia:e.trainingMedia})}catch(r){throw new Error("File upload failed. Please try again.",r)}}async function l(e,t,n){const a=await i.bE("/bot/".concat(n,"/").concat(t,"/delete-training-media-document"),e);(0,s.rv)(t,{trainingMedia:a.trainingDocuments})}async function d(e,t){const n=await i.bE("/bot/".concat(t,"/").concat(e,"/knowledge-base/train"));return a.nc.setState((t=>{const n={...t.kbDocs||{}};return delete n[e],{kbDocs:n}})),(0,o.bZ)().catch((e=>console.error("Error fetching Knowledge base content:",e))),n}async function u(e,t,n){const a=await i.bE("/bot/".concat(t,"/").concat(n,"/add-bot-tax-details"),e),{_id:o,botDetailsForVerification:r}=a;return(0,s.rv)(o,{botDetailsForVerification:r}),r}},70855:(e,t,n)=>{n.d(t,{G:()=>a});var i=n(33340);function a(e){const t=(0,i.nc)((e=>e.selectedBotId)),n=(0,i.nc)((n=>n.botsMap[e||t]));return[e||t,n]}},32026:(e,t,n)=>{function i(e,t){return e.replace(new RegExp("".concat(a(t),"+$")),"")}function a(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function o(e){const t=new Date(e),n=t.getDate(),i=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][t.getMonth()],a=t.getFullYear();return"".concat(i," ").concat(n,", ").concat(a)}function s(e,t,n){if(!t&&!e)return n;e=e||{};const i=Array.isArray(e)?[...e]:{...e};if(t.includes(".")){const a=t.indexOf("."),o=t.substring(0,a),r=t.substring(a+1);i[o]=s(e[o],r,n)}else i[t]=n;return i}function r(e,t){return btoa("".concat(e,"_").concat(t,"_whatsapp_int"))}function c(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:12;const t="abcdefghijklmnopqrstuvwxyz0123456789";let n="";for(let i=0;i<e;i++)n+=t.charAt(Math.floor(36*Math.random()));return n}function l(e,t,n){if(!t&&!e)return n;e=e||{};const i=Array.isArray(e)?[...e]:{...e};if(t.includes(".")){const a=t.indexOf("."),o=t.substring(0,a),s=t.substring(a+1);i[o]=l(e[o],s,n)}else i[t]=n;return i}n.d(t,{G6:()=>s,OX:()=>c,Yq:()=>o,do:()=>l,qW:()=>r,s8:()=>i})},44364:(e,t,n)=>{n.d(t,{DX:()=>r,Og:()=>o,jn:()=>i,pA:()=>s,pR:()=>a});const i="https://devbackend.livhousing.com:444",a="c17b949cf58c45cae47ce1cc65efc8240f77a2a69ca09ad4c4208852",o={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_IP_DATA_API_KEY:"c17b949cf58c45cae47ce1cc65efc8240f77a2a69ca09ad4c4208852",REACT_APP_VERSION:"1",REACT_APP_BACKEND_URL:"https://devbackend.livhousing.com:444"}.TRAINING_MEDIA_MAXSIZE,s={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_IP_DATA_API_KEY:"c17b949cf58c45cae47ce1cc65efc8240f77a2a69ca09ad4c4208852",REACT_APP_VERSION:"1",REACT_APP_BACKEND_URL:"https://devbackend.livhousing.com:444"}.CONVERSATION_MEDIA_MAXSIZE,r={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_IP_DATA_API_KEY:"c17b949cf58c45cae47ce1cc65efc8240f77a2a69ca09ad4c4208852",REACT_APP_VERSION:"1",REACT_APP_BACKEND_URL:"https://devbackend.livhousing.com:444"}.REACT_APP_NGROK_BACKEND_URL||"https://devbackend.livhousing.com:444"}}]);