"use strict";(self.webpackChunklib_prop_ui=self.webpackChunklib_prop_ui||[]).push([[9186],{14623:(t,e,n)=>{n.d(e,{A:()=>r});var o=n(9950),s=n(44414);const r=function(t){let{text:e="We are Online!",onHide:n,design:r,isLeft:a}=t;const i=function(t,e){let{spacingCorner:n,spacingBottom:o}=(null===t||void 0===t?void 0:t.launcher)||{};n=parseFloat(n)||void 0,o=parseFloat(o)||void 0,n&&(n+=5);o&&(o+=75);if(n||o)return{bottom:o,[e?"left":"right"]:n}}(r,a),[l,c]=o.useState(!0),d=o.useCallback((t=>{t.preventDefault(),t.stopPropagation(),c(!1),null===n||void 0===n||n()}),[n]);return l?(0,s.jsxs)("div",{className:"button-tooltip",style:i,children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("img",{draggable:!1,className:"chat-hand",alt:"\ud83d\udc4b",src:"https://cwc.livserv.in/uploads/Templates/cwc_trend1/hand.png"}),(0,s.jsx)("b",{children:e}),(0,s.jsx)("br",{})]}),(0,s.jsx)("a",{className:"close-indicator",onClick:d,children:(0,s.jsx)("svg",{width:"12",height:"12",viewBox:"0 0 1792 1792",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{d:"M1490 1245q0 40-24 68l-136 136q-24 24-68 24t-68-28l-294-294-294 294q-24 24-68 24t-68-28l-136-136q-24-24-24-68t24-68l294-294-294-294q-24-24-24-68t24-68l136-136q24-24 68-24t68 28l294 294 294-294q24-24 68-28t68 28l136 136q28 24 24 68t-24 68l-294 294 294 294q24 24 24 68z",fill:"#fff"})})})]}):null}},72438:(t,e,n)=>{n.d(e,{A:()=>i});var o=n(28891),s=n(14623),r=n(93436),a=n(44414);const i=function(t){let{design:e,onToggle:n}=t;const{launcher:{launcherType:i,buttonLogoUrl:l,buttonOnMobile:c,barText:d,fontSize:u,spacingCorner:g,spacingBottom:h}={},header:{bgColor:p,secBgColor:v,fontColor:b}={},window:{fontFamily:f,align:C}={}}=e||{},y="bottomLeft"===C,m={bottom:h,[y?"left":"right"]:g};return"icon"===i||c?(0,a.jsxs)("div",{id:"lp-launcher",className:"lp-launcher button"+(l?"":" bordered"),onClick:n,style:{borderColor:p,color:b,background:l?"transparent":"linear-gradient(to right,"+p+", "+v+")",verticalAlign:"middle",padding:l?void 0:"16px",display:"flex",...m},children:[(0,a.jsx)(s.A,{design:e,isLeft:y}),l&&(0,a.jsx)("img",{src:l,alt:"Live Chat"}),!l&&o.Or]}):"expand"===i?(0,a.jsx)(r.A,{isLeft:y,color:b,style:m,bgColor:p,secBgColor:v,imageUrl:l,chatIcon:o.Or,barText:d,fontSize:u,onClick:n}):(0,a.jsxs)("div",{id:"lp-launcher",className:"lp-launcher bar",onClick:n,style:{background:"linear-gradient(to right, "+p+", "+v+")",color:b,fontFamily:f,...m},children:[o.Or,(0,a.jsx)("span",{children:d||"Live Chat"})]})}},47014:(t,e,n)=>{n.d(e,{A:()=>p});var o=n(9950),s=n(15820),r=n(4709),a=n(78023),i=n(26038),l=n(2933),c=n(96651),d=n(72438),u=(n(13938),n(44414));const g={window:{spacingCorner:"0px",spacingBottom:"7px"},launcher:{spacingCorner:"0px",spacingBottom:"7px"}},h=["lead","options","stop"];const p=function(t){var e,n;const{botDetails:p,botDesign:v,startupFlow:b,onReceiveChatResponse:f,autoLaunch:C,recipientId:y,origin:m,onCallback:w,optionsRenderer:I}=t,[x,k]=o.useState(C||!1),[S,L]=o.useState(v),[j,A]=o.useState(!1),[B,F]=o.useState(p),[H,T]=o.useState(b),[R,M]=o.useState(null===b||void 0===b?void 0:b.messages),[_,D]=o.useState(y),[E,N]=o.useState([]),[q,U]=o.useState(),[$,O]=o.useState(),z=o.useRef({autoLaunch:C});z.current.recipientId=_,z.current.bot=B,z.current.chatFlowId=null===H||void 0===H?void 0:H.flowId,z.current.startupMessages=R,z.current.origin=m,z.current.preferredLanguage=$;const J=o.useCallback((t=>{r.eB(t),O(t)}),[]);z.current.setAndBroadcastHistory=o.useCallback((t=>{var e;"function"===typeof t?N((e=>{var n;const o=t(e);return(0,l.C)(o,z.current.origin,null===(n=z.current.bot)||void 0===n?void 0:n._id,!0),o})):(N(t),(0,l.C)(t,z.current.origin,null===(e=z.current.bot)||void 0===e?void 0:e._id,!0))}),[]),z.current.onCallback=o.useCallback(((t,e)=>{"set-visitor-id"===t&&e.recipientId&&D(e.recipientId),null===w||void 0===w||w(t,e)}),[w]),z.current.history=E,z.current.showBot=x,z.current.design=S,z.current.locationDetails=q,z.current.onReceiveChatResponse=f,z.current.isLoadedInConsole=!!f,o.useEffect((()=>{F(p)}),[p]),o.useEffect((()=>{var t;const{updateContact:e,bot:n}=z.current;T(b),null!==b&&void 0!==b&&null!==(t=b.messages)&&void 0!==t&&t.length?M((0,i.If)([...b.messages],{updateContact:e,botSettings:n.botSettings})):M(!1)}),[b]),o.useEffect((()=>{if(B&&!z.current.isLoadedInConsole)return(0,l.c)({botId:B._id,origin:z.current.origin,onHistoryChange:t=>{var e;(null!==t&&void 0!==t&&t.length||null!==(e=z.current.history)&&void 0!==e&&e.length)&&N(t)},getHistory:()=>z.current.history})}),[B]),o.useEffect((()=>{L(v)}),[v]),o.useEffect((()=>{O(r.cO());const{updateContact:t,bot:e,recipientId:n,autoLaunch:o,setAndBroadcastHistory:s,startupMessages:l}=z.current;e?(0,i.SF)(e,n,t,{autoLaunch:o,startupMessages:(0,i.If)(l,{updateContact:t,botSettings:e.botSettings})}).then(s):(0,i.CZ)(n).then((e=>{let{bot:r,startupFlow:l}=e;F(r),T(l);const c=(0,i.If)(null===l||void 0===l?void 0:l.messages,{updateContact:t,botSettings:r.botSettings});M(c);const{design:d,isLoadedInConsole:u}=z.current;!d&&r.botDesign&&L((0,a.Y)(r.botDesign,u?void 0:g)),(0,i.SF)(r,n,t,{autoLaunch:o,startupMessages:(0,i.If)(c,{updateContact:t,botSettings:r.botSettings})}).then(s)})),r.a().then(U)}),[]);const P=o.useCallback(((t,e)=>{var n,o,s,r;let{showBot:a,design:i,onCallback:l}=z.current;a=t?!a:a,null===l||void 0===l||l("windowToggle",{state:a,design:a?{width:null===i||void 0===i||null===(n=i.window)||void 0===n?void 0:n.width,height:null===i||void 0===i||null===(o=i.window)||void 0===o?void 0:o.height,spacingBottom:null===i||void 0===i||null===(s=i.window)||void 0===s?void 0:s.spacingBottom,spacingCorner:null===i||void 0===i||null===(r=i.window)||void 0===r?void 0:r.spacingCorner}:e})}),[]),W=o.useCallback((async t=>{var e;null!==(e=z.current.history)&&void 0!==e&&e.length||setTimeout((()=>{var t;if(null!==(t=z.current.startupMessages)&&void 0!==t&&t.length)return void z.current.setAndBroadcastHistory((t=>t.concat(...z.current.startupMessages)));const e=(0,i.TO)();z.current.setAndBroadcastHistory((t=>t?t.concat(e):[e]))}),t||1700)}),[]),G=o.useCallback((()=>{P(!0),k((t=>!t)),A(!0),setTimeout((()=>A(!1)),1e3),W()}),[P,W]);o.useLayoutEffect((()=>{S&&P(!1,!0)}),[S,P]);const Z=o.useCallback((async t=>(0,i.o9)(t,z.current)),[]);z.current.updateContact=o.useCallback((async t=>{const e=await Z(t);z.current.setAndBroadcastHistory((t=>t.filter((t=>!h.includes(t.type))).concat(...e)))}),[Z]);const Q=o.useCallback((()=>{z.current.setAndBroadcastHistory([]),r.oy(),delete z.current.history,W(700)}),[W]);if(!B||!q)return null;let Y="hide-chat";x&&j?Y="opening":x&&!j?Y="show-chat":!x&&j&&(Y="closing"),Y+="bottomLeft"===(null===S||void 0===S||null===(e=S.window)||void 0===e?void 0:e.align)?" bottom-left ":" bottom-right ",f&&(Y+=" test-console");const K=E&&h.includes(null===(n=E[E.length-1])||void 0===n?void 0:n.type);return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(c.A,{design:S}),(0,u.jsxs)("div",{className:"chat-handler "+Y,children:[x&&!!B&&(0,u.jsx)(s.A,{botDesign:S,messages:E,showTime:!0,onUserMessage:Z,disabledMessage:K,onHistoryChange:z.current.setAndBroadcastHistory,onClear:Q,onHide:G,onCallback:z.current.onCallback,optionsRenderer:I,language:$,setLanguage:J}),!x&&!j&&(0,u.jsx)(d.A,{design:S,onToggle:G})]})]})}},93436:(t,e,n)=>{n.d(e,{A:()=>r});var o=n(9950),s=n(44414);const r=function(t){let{isLeft:e,bgColor:n,secBgColor:r,imageUrl:a,chatIcon:i,barText:l="Live Chat",fontSize:c,color:d,autoAnimate:u=!0,style:g,onClick:h}=t;const p=e?"bottom-left":"bottom-right",v={backgroundColor:n},b={backgroundImage:`linear-gradient(90deg, ${n}, ${r})`},f=o.useRef(null);return o.useEffect((()=>{if(u){const t=setInterval((()=>{var t;null===(t=f.current)||void 0===t||t.classList.remove("bar-hide"),setTimeout((()=>{var t;return null===(t=f.current)||void 0===t?void 0:t.classList.add("bar-hide")}),7e3)}),35e3);return()=>clearInterval(t)}}),[u]),(0,s.jsxs)("div",{className:`lp-launcher expand-button ${p}`,onClick:h,style:g,children:[(0,s.jsx)("div",{ref:f,className:"text-container bar-hide",style:b,children:(0,s.jsx)("div",{className:"bar-text",style:{minWidth:"150px",fontSize:c,color:d},children:(0,s.jsxs)("p",{children:["Hi there, ",(0,s.jsx)("img",{draggable:!1,className:"chat-hand",alt:"\ud83d\udc4b",src:"https://cwc.livserv.in/uploads/Templates/cwc_trend1/hand.png"})," We are online!"]})})}),(0,s.jsx)("div",{className:"image-container",style:v,children:(0,s.jsxs)("div",{className:"image-sub-container",children:[a&&(0,s.jsx)("img",{src:a,alt:l}),!a&&i]})})]})}},96651:(t,e,n)=>{n.d(e,{A:()=>r});var o=n(17119),s=n(44414);const r=function(t){let{design:e}=t;const n=null===e||void 0===e?void 0:e.remoteFontLink;return n?o.createPortal((0,s.jsx)("link",{rel:"stylesheet",href:n}),document.head,"remoteFont"):null}},2933:(t,e,n)=>{n.d(e,{C:()=>a,c:()=>r});var o=n(4709);let s=null;function r(t){t.origin||(t.origin=null),t.botId||(t.botId=null);try{const{origin:e,botId:n}=t;s=new BroadcastChannel("lp_web_chat");const r=function(t){let{onHistoryChange:e,getHistory:n,origin:s=null,botId:r=null}=t;return t=>{const i=t.data||{};if(i.origin===s&&i.botId===r)try{if("GetConversationId"===i.action){a(n(),s,r)}else if("SetConversationId"===i.action){const{conversationId:t,history:n}=i;t?o.d6(t||void 0):o.oy(),n&&(null===e||void 0===e||e(n))}}catch(l){console.log("Error occurred when trying to handle session sharing:",l)}}}(t);return s.addEventListener("message",r),s.postMessage({action:"GetConversationId",origin:e,botId:n}),()=>{s&&(s.removeEventListener("message",r),s.close(),s=null)}}catch(e){console.error("Unable to start session sharing:",e)}}function a(t,e,n,r){if(s)try{const a=o.Db()||"";if(!r&&!a)return;s.postMessage({action:"SetConversationId",origin:e,botId:n,conversationId:a,history:t})}catch(a){console.error("Error sharing session:",a)}}},26038:(t,e,n)=>{n.d(e,{CZ:()=>l,If:()=>i,SF:()=>c,TO:()=>r,o9:()=>a});var o=n(8478),s=n(4709);function r(){return{role:"assistant",type:"text",content:"Hello, greetings for the day, how may I assist you?"}}function a(t,e){var n;const{updateContact:r,onReceiveChatResponse:a,bot:l,locationDetails:c,onCallback:d,recipientId:u,history:g,chatFlowId:h,preferredLanguage:p}=e,{flowId:v,flowType:b}=(null===g||void 0===g||null===(n=g[g.length-1])||void 0===n?void 0:n.media)||{};return"string"===typeof t&&v&&(t={method:"flow-response",type:b,flowId:v,answer:t}),async function(t,e,n,r){let{onReceiveChatResponse:a,updateContact:l,onCallback:c,recipientId:d,chatFlowId:u,language:g}=n;const h=s.Db(),{_id:p,organizationId:v,botSettings:b}=e,f={userQuery:t,recipientDetails:{recipientId:d,conversationId:h,language:g,...r},chatFlowId:u};a&&(f.testMode=!0);try{const t=await o.bE(`/bot/${v}/${p}/chat`,f,{noAuth:!0});return null===a||void 0===a||a(t),function(t,e){let{updateContact:n,botSettings:o,onCallback:r}=e;const{chatRefId:a,recipientId:l,messages:c}=t;return s.d6(a),null===r||void 0===r||r("set-visitor-id",{recipientId:l}),i(c,{updateContact:n,botSettings:o})}(t,{updateContact:l,botSettings:b,onCallback:c})}catch(C){return[{role:"assistant",type:"text",content:C.message||"Unknown Server error"}]}}(t,l,{onReceiveChatResponse:a,updateContact:r,onCallback:d,recipientId:u,chatFlowId:h,language:p},c)}function i(t,e){let{updateContact:n,botSettings:o}=e;if(null===t||void 0===t||!t.length)return t;const s=t[t.length-1];return"form"===s.type&&t.push({role:"user",type:"lead",content:"",profile:s.media,updateContact:n,botSettings:o}),t}async function l(t){try{const e=new URLSearchParams(window.location.search),n={authToken:e.get("token"),recipientId:t},{startupFlow:s,...r}=await o.Jt("/bot/get-bot-details-by-auth-token",n,{noAuth:!0});return{startupFlow:s,bot:r}}catch(e){console.log("Failed to init chat:-",e)}}async function c(t,e,n,r){let{autoLaunch:a,startupMessages:l}=r;const{_id:c,organizationId:d,botSettings:u={}}=t,g=s.Db();if(!e||!g)return a?l||[{role:"assistant",type:"text",content:"Hello, greetings for the day, how may I assist you?"}]:[];try{const t=await o.Jt(`/bot/${d}/${c}/chat/history/${e}/${g}`,null,{noAuth:!0}),{messages:s}=t||{};return i(s,{updateContact:n,botSettings:u})}catch(h){console.error("Failed to fetch chat history:-",h)}return a?[{role:"assistant",type:"text",content:"Hello, greetings for the day, how may I assist you?"}]:[]}},31739:(t,e,n)=>{n.d(e,{J:()=>r,u:()=>s});const o="lp-vid";function s(t,e){if("set-visitor-id"===t){const{recipientId:t}=e||{};t&&function(t){try{localStorage.setItem(o,t)}catch(e){console.error("Unable to use browser cache",e)}}(t)}}function r(){try{return localStorage.getItem(o)||void 0}catch(t){console.error("Unable to use browser cache",t)}}},13938:()=>{}}]);