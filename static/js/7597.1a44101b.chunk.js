"use strict";(self.webpackChunklib_prop_ui=self.webpackChunklib_prop_ui||[]).push([[7597],{51637:(e,t,a)=>{a.d(t,{A:()=>u});var n=a(9950),r=a(14857),o=a(48089),i=a(45180),s=a(82053),l=a(50704),c=a(44414);const d={p:2.5,"& .MuiCardHeader-action":{m:"0px auto",alignSelf:"center"}},u=(0,n.forwardRef)(((e,t)=>{let{border:a=!0,boxShadow:n,children:u,content:h=!0,contentSX:m={},darkTitle:x,elevation:p,secondary:g,shadow:f,sx:v={},title:y,...A}=e;const j=(0,r.A)();return n="dark"===j.palette.mode?n||!0:n,(0,c.jsxs)(o.A,{elevation:p||0,ref:t,...A,sx:{border:a?"1px solid":"none",borderRadius:2,borderColor:"dark"===j.palette.mode?j.palette.divider:j.palette.grey.A800,boxShadow:!n||a&&"dark"!==j.palette.mode?"inherit":f||j.customShadows.z1,":hover":{boxShadow:n?f||j.customShadows.z1:"inherit"},"& pre":{m:0,p:"16px !important",fontFamily:j.typography.fontFamily,fontSize:"0.75rem"},...v},children:[!x&&y&&(0,c.jsx)(i.A,{sx:d,titleTypographyProps:{variant:"subtitle1"},title:y,action:g}),x&&y&&(0,c.jsx)(i.A,{sx:d,title:(0,c.jsx)(s.A,{variant:"h3",children:y}),action:g}),h&&(0,c.jsx)(l.A,{sx:m,children:u}),!h&&u]})}))},31408:(e,t,a)=>{a.d(t,{A:()=>o});var n=a(59051),r=a.n(n);const o=function(e){let{value:t,dateOnly:a}=e;return r()(t).format(a?"DD-MMM-YYYY":"DD-MMM-YYYY HH:mm:ss")}},3602:(e,t,a)=>{a.d(t,{Ay:()=>u});var n=a(9950),r=a(59051),o=a.n(r),i=a(32796),s=(a(52010),a(44414));const l=["This month","One month","Prev month","This week","Last 7 days","Prev week","Prev 2 weeks","Last 14 days"];function c(){return{"This month":[o()().startOf("month").toDate(),o()().endOf("month").toDate()],"One month":[o()().subtract(1,"months").toDate(),o()().toDate()],"Prev month":[o()().subtract(1,"months").startOf("month").toDate(),o()().subtract(1,"months").endOf("month").toDate()],"This week":[o()().startOf("week").toDate(),o()().endOf("week").toDate()],"Last 7 days":[o()().subtract(6,"days").toDate(),o()().toDate()],"Prev week":[o()().subtract(1,"weeks").startOf("week").toDate(),o()().subtract(1,"weeks").endOf("week").toDate()]}}function d(e){const t=n.useMemo(c,[]),{timePicker24Hour:a,displayFormat:r}=function(e){let t=d.defaultTimeFormat||" hh:mm tt";const a=-1===t.indexOf("tt");t=t.replace("tt","A").replace(".ss","").replace(":ss","");const n=e.dateFormat||"DD-MMM-YYYY".concat(e.showTime?t:"");return{timePicker24Hour:a,displayFormat:n}}(e),{value:u,range:p}=e,[g,f]=n.useState((()=>h(u,p,r))),v=n.useCallback((e=>f((t=>({...t,...e})))),[f]),y=n.useRef(),A=n.useRef({props:e,state:g,displayFormat:r});A.current.state=g,A.current.props=e,A.current.displayFormat=r;const j=n.useCallback((()=>v(h(u,p,A.current.displayFormat))),[u,p,v]);n.useEffect((()=>{j()}),[j]);const b=n.useCallback(((e,t)=>{var a,n;const{props:r,displayFormat:o}=A.current;A.current.manuallyEdited=!1;const{range:i,field:s,args:c}=r;let d=t.startDate,u=null===(a=d)||void 0===a?void 0:a.toDate(),h="";if(i){const{chosenLabel:e,startDate:a,endDate:n}=t;if(a&&n){u={fromDate:a.toDate(),toDate:n.toDate()};const t=l.indexOf(e);t>=0&&(u.quickDate=t),h="".concat(a.format(o)," - ").concat(n.format(o)),d=[u.fromDate,u.toDate]}}else null!==(n=d)&&void 0!==n&&n.isValid()&&(h=d.format(o));v({value:d,displayDate:h}),r.onChange(u,s,c)}),[v]),D=n.useCallback((e=>{const{manuallyEdited:t,props:a,state:n,displayFormat:r}=A.current;if(t){let{target:{value:t}}=e;if(t=t.trim(),!t&&!0===a.allowClear)return void b(null,{startDate:null});let i=o()(t,r);i.isValid()||(i=o()(t)),i.isValid()&&i.format(r)===t||(i=n.value),y.setStartDate(i),y.setEndDate(i),b(null,{fromDate:i})}else null!==e&&void 0!==e&&e.currentTarget&&a.onBlur&&a.onBlur(e)}),[b]),S=n.useCallback((e=>{const{props:t}=A.current,{keyCode:a}=e;13===a?D(e):t.onKeyDown&&(27===a&&(j(t),A.current.manuallyEdited=!1),t.onKeyDown(e))}),[D,j]),w=n.useCallback((()=>A.current.manuallyEdited=!0),[]),{disabled:C,style:P,className:k,autoFocus:_,fullWidth:E}=e,{displayDate:T}=g;return(0,s.jsx)("div",{className:"react-bootstrap-daterangepicker-container "+(k||""),children:(0,s.jsx)(i.A,{ref:y,style:P,className:k,disabled:C,initialSettings:x({timePicker24Hour:a,dateRange:t,props:e,state:g}),onApply:b,children:(0,s.jsx)("span",{children:(0,s.jsx)("input",{type:"text",className:"date-range-ctl",value:T,readOnly:p,placeholder:m(e),autoFocus:_,onChange:p?void 0:w,onBlur:p?void 0:D,onKeyDown:S,style:E?{width:"100%",height:"40px"}:null})})})})}const u=d;function h(e,t,a){const n={displayDate:""};return e?t?"object"===typeof e&&(e=e.quickDate>=0?function(e,t){if(0===e||e>0){const a=c(),n=l[e],r=n&&a[n]||[];return t?r.map((e=>o()(e))):r}}(e.quickDate,!0):"object"===typeof e&&e.fromDate?[o()(e.fromDate),o()(e.toDate)||null]:[],n.value=e,e[0]&&e[1]&&(n.displayDate="".concat(e[0].format(a)," - ").concat(e[1].format(a)))):(n.value=o()(e),n.displayDate=n.value.format(a)):t&&(n.value=[]),n}function m(e){const{range:t}=e;let{placeholder:a}=e;return!0===t&&(a=a||"Select a date range"),a||"Select a date"}function x(e){let{dateRange:t,timePicker24Hour:a,props:{showTime:n,range:r,minDate:o,maxDate:i,maxSpan:s=6},state:{value:l}}=e;const c={showDropdowns:!0,timePicker:n||!1,alwaysShowCalendars:!1,maxSpan:s,autoApply:!0,linkedCalendars:!1,autoUpdateInput:!1,minDate:o,maxDate:i};let d=null;return d=r?{...c,fromDate:l[0],toDate:l[1],ranges:t,singleDatePicker:!1,showCustomRangeLabel:!0}:{...c,singleDatePicker:!0,fromDate:l,toDate:l,timePicker24Hour:a},d}},93176:(e,t,a)=>{a.r(t),a.d(t,{default:()=>ve});var n=a(9950),r=a(59051),o=a.n(r),i=a(60899),s=a(82053),l=a(3602),c=a(93230),d=a(25277),u=a(16491),h=a(51637),m=a(40271),x=a(18182),p=a(44414);const g=function(e){let{title:t,count:a,percentage:n,extra:r,period:o="month",color:l=(r<0?"warning":"success")}=e;const g=r<0;return r=Math.abs(r||0),(0,p.jsxs)(h.A,{contentSX:{p:2.25},children:[(0,p.jsxs)(c.A,{spacing:.5,children:[(0,p.jsx)(s.A,{variant:"h6",color:"textSecondary",children:t}),(0,p.jsxs)(i.Ay,{container:!0,alignItems:"center",children:[(0,p.jsx)(i.Ay,{item:!0,children:(0,p.jsx)(s.A,{variant:"h4",color:"inherit",children:a})}),!!n&&(0,p.jsx)(i.Ay,{item:!0,children:(0,p.jsx)(d.A,{variant:"combined",color:l,icon:(0,p.jsxs)(p.Fragment,{children:[!g&&(0,p.jsx)(m.A,{style:{fontSize:"0.75rem",color:"inherit"}}),g&&(0,p.jsx)(x.A,{style:{fontSize:"0.75rem",color:"inherit"}})]}),label:"".concat(n,"%"),sx:{ml:1.25,pl:1},size:"small"})})]})]}),g&&(0,p.jsx)(u.A,{sx:{pt:2.25},children:(0,p.jsxs)(s.A,{variant:"caption",color:"textSecondary",children:["You're down by "," ",(0,p.jsx)(s.A,{component:"span",variant:"caption",sx:{color:"".concat(l||"primary",".main")},children:r})," ","this ",o]})}),!g&&(0,p.jsx)(u.A,{sx:{pt:2.25},children:(0,p.jsxs)(s.A,{variant:"caption",color:"textSecondary",children:["You made an extra"," ",(0,p.jsx)(s.A,{component:"span",variant:"caption",sx:{color:"".concat(l||"primary",".main")},children:r})," ","this ",o]})})]})};var f=a(33340);const v=function(){const e=(0,f.qi)((e=>e.overview)),{current:t={},difference:a={},diffPercentage:n={}}=e||{};return(0,p.jsxs)(p.Fragment,{children:[t.totalVisitors>0&&(0,p.jsx)(i.Ay,{item:!0,xs:12,sm:6,md:4,lg:3,children:(0,p.jsx)(g,{title:"Total Visitors",count:t.totalVisitors,percentage:n.totalVisitors,extra:a.totalVisitors})}),(0,p.jsx)(i.Ay,{item:!0,xs:12,sm:6,md:4,lg:3,children:(0,p.jsx)(g,{title:"Interactive Visitors",count:t.interactiveVisitors,percentage:n.interactiveVisitors,extra:a.interactiveVisitors})}),(0,p.jsx)(i.Ay,{item:!0,xs:12,sm:6,md:4,lg:3,children:(0,p.jsx)(g,{title:"Presales",count:t.preSale,percentage:n.preSale,extra:a.preSale})}),(0,p.jsx)(i.Ay,{item:!0,xs:12,sm:6,md:4,lg:3,children:(0,p.jsx)(g,{title:"General",count:t.general,percentage:n.general,extra:a.general})}),!t.revisit&&(0,p.jsx)(i.Ay,{item:!0,xs:12,sm:6,md:4,lg:3,children:(0,p.jsx)(g,{title:"Others",count:t.others,percentage:n.others,extra:a.others})}),!!t.revisit&&(0,p.jsx)(i.Ay,{item:!0,xs:12,sm:6,md:4,lg:3,children:(0,p.jsx)(g,{title:"Revisit Count",count:t.revisit,percentage:n.revisit,extra:a.revisit})}),(0,p.jsx)(i.Ay,{item:!0,md:8,sx:{display:{sm:"none",md:"block",lg:"none"}}})]})};var y=a(8478);async function A(){const{organizationId:e,selectedBotId:t}=f.nc.getState(),a=f.qi.getState(),{organizationId:n,botId:r}=a;let{fromDate:i,toDate:s}=a;i=o()(i).startOf("day").toDate(),s=o()(s).endOf("day").toDate();e===n&&t===r||f.qi.setState((0,f.Vs)(e,t),!0);const l=await y.Jt("/analytics/".concat(e,"/").concat(t,"/dashboard/overview"),{fromDate:i,toDate:s}),c=function(e,t){e=o()(e),t=o()(t);const a=t.diff(e,"days"),n=e.clone().subtract(1,"days");return{start:n.clone().subtract(a,"days").startOf("day").toDate(),end:n.endOf("day").toDate()}}(i,s);i=c.start,s=c.end;const d=await y.Jt("/analytics/".concat(e,"/").concat(t,"/dashboard/overview"),{fromDate:i,toDate:s}),u={interactiveVisitors:(l.interactiveVisitors||0)-(d.interactiveVisitors||0),preSale:(l.preSale||0)-(d.preSale||0),general:(l.general||0)-(d.general||0),others:(l.others||0)-(d.others||0),revisit:(l.revisit||0)-(d.revisit||0)},h={current:l,previous:d,difference:u,diffPercentage:{interactiveVisitors:D(d.interactiveVisitors,u.interactiveVisitors),preSale:D(d.preSale,u.preSale),general:D(d.general,u.general),others:D(d.others,u.others),revisit:D(d.revisit,u.revisit)}};f.qi.setState({overview:h})}async function j(e){const{organizationId:t,selectedBotId:a}=f.nc.getState(),n=f.qi.getState();let{visitorProps:r}=n;r={page:1,count:10,...r,...e},f.qi.setState({visitorProps:r,visitorList:null,visitorsListTotal:0});const{total:o,visitorList:i}=await y.Jt("/analytics/".concat(t,"/").concat(a,"/dashboard/visitors-list"),r);f.qi.setState({visitorsListTotal:o,visitorList:i})}function b(e){let{fromDate:t,toDate:a}=e;return f.qi.setState({fromDate:o()(t).startOf("day").toDate(),toDate:o()(a).endOf("day").toDate()}),A()}function D(e,t){return t&&e?parseFloat((100*t/e).toFixed(2)):0}var S=a(10226);const w=function(e){let{showToday:t=!1,value:a=(t?"day":"week"),customRange:r,onChange:s}=e;const[l,d]=n.useState(a),u=n.useRef({onChange:s,slot:l});u.current.slot=l,u.current.customRange=r,n.useEffect((()=>{if("custom"===u.current.slot){const{onChange:e}=u.current;e(r)}}),[r]);const h=n.useCallback((e=>{d(e);const{onChange:t}=u.current;if(t)if("custom"===e)t(u.current.customRange);else{t({fromDate:o()().add(-1,e).startOf("day").toDate(),toDate:o()().endOf("day").toDate()})}}),[]);return u.current.handleChange=h,n.useEffect((()=>{u.current.handleChange(u.current.slot)}),[]),(0,p.jsx)(i.Ay,{item:!0,style:{paddingTop:"14px"},children:(0,p.jsxs)(c.A,{direction:"row",alignItems:"center",spacing:0,children:[!!r&&(0,p.jsx)(S.A,{size:"small",onClick:()=>h("custom"),color:"custom"===l?"primary":"secondary",variant:"custom"===l?"outlined":"text",children:"Custom"}),(0,p.jsx)(S.A,{size:"small",onClick:()=>h("month"),color:"month"===l?"primary":"secondary",variant:"month"===l?"outlined":"text",children:"Month"}),(0,p.jsx)(S.A,{size:"small",onClick:()=>h("week"),color:"week"===l?"primary":"secondary",variant:"week"===l?"outlined":"text",children:"Week"}),t&&(0,p.jsx)(S.A,{size:"small",onClick:()=>h("day"),color:"day"===l?"primary":"secondary",variant:"day"===l?"outlined":"text",children:"Today"})]})})};var C=a(69780),P=a(9213),k=a(21671),_=a(7251),E=a(72595),T=a(6258),O=a(1320),R=a(15769),I=a(34075),V=a(71295),L=a(14857);const N=e=>{let{color:t,size:a}=e;const n=(0,L.A)();let r;switch(t){case"secondary":r=n.palette.secondary.main;break;case"error":r=n.palette.error.main;break;case"warning":r=n.palette.warning.main;break;case"info":r=n.palette.info.main;break;case"success":r=n.palette.success.main;break;default:r=n.palette.primary.main}return(0,p.jsx)(u.A,{sx:{width:a||8,height:a||8,borderRadius:"50%",bgcolor:r}})};var M=a(31408),F=a(48746),q=a(32026);const B=[{id:"name",label:"Name"},{id:"email",disablePadding:!0,label:"Email Id"},{id:"phoneNumber",label:"Phone Number",sortable:!1},{id:"country",label:"Country"},{id:"city",label:"City"},{id:"visitTime",label:"Visit Time"},{id:"category",label:"Category"},{id:"transcriptUrl",align:"right",label:"Transcript",sortable:!1}];function Y(e){let{order:t,orderBy:a}=e;return(0,p.jsx)(C.A,{children:(0,p.jsx)(P.A,{children:B.map((e=>(0,p.jsxs)(k.A,{align:e.align||"left",padding:e.disablePadding?"none":"normal",sortDirection:a===e.id&&("desc"===t?"asc":"desc"),children:[!1===e.sortable&&e.label,!1!==e.sortable&&(0,p.jsxs)(_.A,{active:a===e.id,direction:a===e.id?"desc"===t?"asc":"desc":"asc",onClick:()=>j({orderBy:e.id,order:a===e.id?"desc"===t?"asc":"desc":"asc"}),children:[e.label,a===e.id?(0,p.jsx)(u.A,{component:"span",sx:V.A,children:"desc"===t?"sorted descending":"sorted ascending"}):null]})]},e.id)))})})}function K(e){let{page:t=0,rowsCount:a,rowsPerPage:n=10}=e;return(0,p.jsx)(E.A,{children:(0,p.jsx)(P.A,{children:(0,p.jsx)(k.A,{colSpan:B.length,children:(0,p.jsx)(T.A,{component:"div",count:a,page:t,rowsPerPage:n,onPageChange:(e,t)=>j({page:t+1}),onRowsPerPageChange:(e,t)=>{let{props:{value:a}}=t;return j({count:a,page:1})}})})})})}const z=e=>{let t,{value:a}=e;switch(a){case"Pre-Sale":t="success";break;case"General":t="primary";break;case"Others":t="warning";break;default:t="error"}return(0,p.jsxs)(c.A,{direction:"row",spacing:1,alignItems:"center",children:[(0,p.jsx)(N,{color:t}),(0,p.jsx)(s.A,{children:a})]})};function H(e){let{data:t,rowsCount:a,page:r,rowsPerPage:o,order:s,orderBy:l,dateRange:c}=e;const[d]=(0,n.useState)([]);let h=null;c&&(h="Leads - "+(0,q.Yq)(c.fromDate)+" to "+(0,q.Yq)(c.toDate));const m=(0,n.useRef)(null);return(0,p.jsx)(u.A,{children:(0,p.jsxs)(O.A,{sx:{width:"100%",overflowX:"auto",position:"relative",display:"block",maxWidth:"100%","& td, & th":{whiteSpace:"nowrap"}},children:[(0,p.jsxs)(R.A,{ref:m,"aria-labelledby":"VisitorList",sx:{"& .MuiTableCell-root:first-of-type":{pl:2},"& .MuiTableCell-root:last-of-type":{pr:3}},children:[(0,p.jsx)(Y,{order:s,orderBy:l}),(0,p.jsxs)(I.A,{children:[!(null!==t&&void 0!==t&&t.length)&&(0,p.jsx)(P.A,{sx:{"&:last-child td, &:last-child th":{border:0}},children:(0,p.jsx)(k.A,{colSpan:7,children:"No visitors exists for the selected duration"})}),(null===t||void 0===t?void 0:t.length)>0&&t.map(((e,t)=>{return(0,p.jsx)(U,{row:e,index:t,isSelected:(a=e._id,-1!==d.indexOf(a))},e._id);var a}))]})]}),(0,p.jsxs)(i.Ay,{container:!0,spacing:2,justifyContent:"flex-end",alignItems:"center",children:[(0,p.jsx)(i.Ay,{item:!0,children:(0,p.jsx)(F.DownloadTableExcel,{filename:h,sheet:"Leads",currentTableRef:m.current,children:(0,p.jsx)(S.A,{size:"large",variant:"contained",color:"success",disabled:!((null===t||void 0===t?void 0:t.length)>0),children:"Download excel"})})}),(0,p.jsx)(i.Ay,{item:!0,children:(0,p.jsx)(K,{rowsCount:a,page:r,rowsPerPage:o,order:s,orderBy:l})})]})]})})}function U(e){let{row:t,index:a,isSelected:n}=e;const r="enhanced-table-checkbox-".concat(a);return(0,p.jsxs)(P.A,{hover:!0,role:"checkbox",sx:{"&:last-child td, &:last-child th":{border:0}},"aria-checked":n,tabIndex:-1,selected:n,children:[(0,p.jsx)(k.A,{component:"th",id:r,scope:"row",align:"left",children:t.name}),(0,p.jsx)(k.A,{align:"left",children:t.email}),(0,p.jsx)(k.A,{align:"left",children:t.phoneNumber}),(0,p.jsx)(k.A,{align:"left",children:t.country}),(0,p.jsx)(k.A,{align:"left",children:t.city}),(0,p.jsx)(k.A,{align:"left",children:(0,p.jsx)(M.A,{value:t.visitTime})}),(0,p.jsx)(k.A,{align:"left",children:(0,p.jsx)(z,{value:t.category})}),(0,p.jsx)(k.A,{align:"right",children:(0,p.jsx)("a",{href:t.transcriptUrl,target:"_blank",rel:"noreferrer",children:(0,p.jsx)(s.A,{children:"View"})})})]},t._id)}var W=a(25979),G=a(3788),J=a(70006),X=a(2660),$=a(23266),Z=a(93038),Q=a(83563);const ee={PaperProps:{style:{maxHeight:224,width:250}}},te=[{value:"preSale",label:"Pre-Sale"},{value:"general",label:"General"},{value:"others",label:"Others"}],ae=te.reduce(((e,t)=>(e[t.value]=t.label,e)),{});const ne=function(e){let{value:t=[],onChange:a}=e;return(0,p.jsxs)(W.A,{sx:{m:1,width:300,float:"left"},children:[(0,p.jsx)(G.A,{id:"visitor-type-label",style:{lineHeight:"15px"},children:"Visitor Category"}),(0,p.jsx)(J.A,{labelId:"visitor-type-label",id:"visitor-type",multiple:!0,value:t||[],onChange:e=>{a(e.target.value)},input:(0,p.jsx)(X.A,{label:"Visitor Category"}),renderValue:e=>e.map((e=>ae[e])).join(", "),MenuProps:ee,children:te.map((e=>{let{value:a,label:n}=e;return(0,p.jsxs)($.A,{value:a,children:[(0,p.jsx)(Z.A,{checked:null===t||void 0===t?void 0:t.includes(a)}),(0,p.jsx)(Q.A,{primary:n})]},a)}))})]})};const re=function(e){let{customRange:t}=e;const[a,r]=n.useState(),{visitorList:o,visitorProps:l,visitorsListTotal:c}=(0,f.qi)(),{category:d,count:u,page:m,orderBy:x,order:g}=l||{};return n.useEffect((()=>{a&&j(a).catch((e=>console.log("Error loading visitor list:-",e)))}),[a]),(0,p.jsxs)(i.Ay,{item:!0,xs:12,children:[(0,p.jsxs)(i.Ay,{container:!0,alignItems:"center",justifyContent:"space-between",children:[(0,p.jsx)(i.Ay,{item:!0,children:(0,p.jsx)(s.A,{variant:"h5",children:"Visitors List"})}),(0,p.jsx)(i.Ay,{item:!0,xs:9,alignItems:"right",children:(0,p.jsxs)(i.Ay,{container:!0,alignItems:"right",justifyContent:"flex-end",children:[(0,p.jsx)(i.Ay,{item:!0,children:(0,p.jsx)(ne,{value:d,onChange:e=>j({category:e})})}),(0,p.jsx)(w,{showToday:!0,customRange:t,onChange:r})]})})]}),(0,p.jsx)(h.A,{sx:{mt:2},content:!1,children:(0,p.jsx)(H,{data:o,orderBy:x,order:g,category:d,rowsCount:c||0,rowsPerPage:u||10,page:(m||1)-1,dateRange:a})})]})},oe=[{value:"country",text:"Country"},{value:"city",text:"City"},{value:"os",text:"OS Name"},{value:"browser",text:"Browser"},{value:"date",text:"Date"},{value:"landing_page",text:"Landing Page"}],ie=oe.reduce(((e,t)=>(e[t.value]=t.text,e)),{});const se=function(e){let{value:t,onChange:a}=e;return(0,p.jsx)(le,{list:oe,value:t,onChange:a})};function le(e){let{list:t,value:a,onChange:n}=e;return(0,p.jsx)(i.Ay,{item:!0,children:(0,p.jsx)(c.A,{direction:"row",alignItems:"center",spacing:0,children:t.map((e=>(0,p.jsx)(S.A,{size:"small",onClick:()=>n(e.value),color:a===e.value?"primary":"secondary",variant:a===e.value?"outlined":"text",children:e.text},e.value)))})})}var ce=a(90587);const de=[{id:"group",label:"Group"},{id:"totalInteractions",disablePadding:!0,label:"Interactions"},{id:"preSale",label:"Pre-Sale"},{id:"general",label:"General"},{id:"others",label:"Others"}];function ue(e){let{order:t,orderBy:a}=e;return(0,p.jsx)(C.A,{children:(0,p.jsx)(P.A,{children:de.map((e=>(0,p.jsx)(k.A,{align:e.align||"left",padding:e.disablePadding?"none":"normal",sortDirection:a===e.id&&t,children:e.label},e.id)))})})}function he(e){let{data:t}=e;const[a]=(0,n.useState)("asc"),[r]=(0,n.useState)("_id"),[o]=(0,n.useState)([]);return(0,p.jsx)(u.A,{children:(0,p.jsx)(O.A,{sx:{width:"100%",overflowX:"auto",position:"relative",display:"block",maxWidth:"100%","& td, & th":{whiteSpace:"nowrap"}},children:(0,p.jsxs)(R.A,{"aria-labelledby":"VisitorList",sx:{"& .MuiTableCell-root:first-of-type":{pl:2},"& .MuiTableCell-root:last-of-type":{pr:3}},children:[(0,p.jsx)(ue,{order:a,orderBy:r}),(0,p.jsxs)(I.A,{children:[!(null!==t&&void 0!==t&&t.length)&&(0,p.jsx)(P.A,{sx:{"&:last-child td, &:last-child th":{border:0}},children:(0,p.jsx)(k.A,{colSpan:7,children:"No visitors exists for the selected duration"})}),(null===t||void 0===t?void 0:t.length)>0&&(0,ce.q)(t,(0,ce.h)(a,r)).map(((e,t)=>{return(0,p.jsx)(me,{row:e,index:t,isSelected:(a=e._id,-1!==o.indexOf(a))},e.group);var a}))]})]})})})}function me(e){let{row:t,index:a,isSelected:n}=e;const r="enhanced-table-checkbox-".concat(a);return(0,p.jsxs)(P.A,{hover:!0,role:"checkbox",sx:{"&:last-child td, &:last-child th":{border:0}},"aria-checked":n,tabIndex:-1,selected:n,children:[(0,p.jsx)(k.A,{component:"th",id:r,scope:"row",align:"left",children:t.group}),(0,p.jsx)(k.A,{align:"left",children:t.totalInteractions}),(0,p.jsx)(k.A,{align:"left",children:t.preSale||"-"}),(0,p.jsx)(k.A,{align:"left",children:t.general||"-"}),(0,p.jsx)(k.A,{align:"left",children:t.others||"-"})]})}const xe=function(){const[e,t]=n.useState("country"),a=(0,f.qi)((e=>e.visitorGroupedList)),{fromDate:r,toDate:o}=f.qi.getState();return n.useEffect((()=>{e&&async function(e){const{organizationId:t,selectedBotId:a}=f.nc.getState(),{fromDate:n,toDate:r}=f.qi.getState();f.qi.setState({visitorGroupedList:null});const o=await y.Jt("/analytics/".concat(t,"/").concat(a,"/dashboard/grouped/").concat(e),{fromDate:n,toDate:r});f.qi.setState({visitorGroupedList:o})}(e).catch((e=>console.log("Error loading visitor grouped list:-",e)))}),[e]),(0,p.jsxs)(i.Ay,{item:!0,xs:12,children:[(0,p.jsxs)(i.Ay,{container:!0,alignItems:"center",justifyContent:"space-between",children:[(0,p.jsx)(i.Ay,{item:!0,children:(0,p.jsxs)(s.A,{variant:"h5",children:["Analytics - [",ie[e]," Wise] (",(0,p.jsx)(M.A,{value:r,dateOnly:!0})," - ",(0,p.jsx)(M.A,{value:o,dateOnly:!0}),")"]})}),(0,p.jsx)(se,{value:e,onChange:t})]}),(0,p.jsx)(h.A,{sx:{mt:2},content:!1,children:(0,p.jsx)(he,{data:a})})]})},pe=new Date("2023-10-01"),ge=o()().endOf("day").toDate(),fe={month:3};const ve=function(){const{fromDate:e,toDate:t}=(0,f.qi)(),a=n.useMemo((()=>({fromDate:e,toDate:t})),[e,t]);return n.useEffect((()=>{A().catch((e=>console.error("Unable to load analytics data",e)))}),[]),(0,p.jsxs)(i.Ay,{container:!0,rowSpacing:4.5,columnSpacing:2.75,children:[(0,p.jsxs)(i.Ay,{item:!0,xs:12,children:[(0,p.jsx)(s.A,{variant:"h5",style:{display:"inline-block",marginRight:"18px"},children:"Dashboard"}),(0,p.jsx)(l.Ay,{range:!0,value:a,onChange:b,minDate:pe,maxDate:ge,maxSpan:fe})]}),(0,p.jsx)(i.Ay,{item:!0,md:8,sx:{display:{sm:"none",md:"block",lg:"none"}}}),(0,p.jsx)(v,{}),(0,p.jsx)(xe,{}),(0,p.jsx)(re,{customRange:a})]})}},8478:(e,t,a)=>{a.d(t,{Jt:()=>o,Ne:()=>u,TF:()=>l,bE:()=>i,yJ:()=>s});var n=a(32026),r=a(44364);async function o(e,t){return c("GET",e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}async function i(e,t){return c("POST",e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}async function s(e,t){return c("PUT",e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}async function l(e,t){return c("DELETE",e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}async function c(e,t,a){let{headers:n,noAuth:r,...o}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const i="POST"===e||"PUT"===e||"DELETE"===e;t=u(t,i?void 0:a);const s=a instanceof FormData;if(s||(a=a&&"object"===typeof a&&i?JSON.stringify(a):void 0),n||(n={}),s||(n["Content-Type"]="application/json"),n.Accept="application/json",!1!==r){const e=sessionStorage.getItem("token");e&&(n.Authorization="Bearer ".concat(e))}try{const r=await fetch(t,{...o,headers:n,body:a,method:e}),i=await r.json();if(r.ok){const{data:e,...t}=i;return delete t.status,e&&!Object.keys(t).length?e:i}throw i.message?new Error(i.message):i}catch(c){var l;throw console.error("Error calling API: ",c),null!==(l=c.message)&&void 0!==l&&l.includes("fetch")?new Error("Unable to reach server. Please check your network connectivity and try again."):new Error(c.message)}}const d=(0,n.s8)(r.jn,"/");function u(e,t){if(!e)return e;const a=t&&Object.keys(t);if(null!==a&&void 0!==a&&a.length){const n=a.reduce(((e,a)=>{let n=t[a];return null===n||void 0===n?e:(n="".concat(a,"=").concat(encodeURIComponent(n)),e?"".concat(e,"&").concat(n):n)}),"");n&&(e="".concat(e).concat(e.includes("?")?"&":"?").concat(n))}return e.startsWith("https://")?e:"".concat(d).concat(e)}},32026:(e,t,a)=>{function n(e,t){return e.replace(new RegExp("".concat(r(t),"+$")),"")}function r(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function o(e){const t=new Date(e),a=t.getDate(),n=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][t.getMonth()],r=t.getFullYear();return"".concat(n," ").concat(a,", ").concat(r)}function i(e,t,a){if(!t&&!e)return a;e=e||{};const n=Array.isArray(e)?[...e]:{...e};if(t.includes(".")){const r=t.indexOf("."),o=t.substring(0,r),s=t.substring(r+1);n[o]=i(e[o],s,a)}else n[t]=a;return n}function s(e,t){return btoa("".concat(e,"_").concat(t,"_whatsapp_int"))}function l(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:12;const t="abcdefghijklmnopqrstuvwxyz0123456789";let a="";for(let n=0;n<e;n++)a+=t.charAt(Math.floor(36*Math.random()));return a}function c(e,t,a){if(!t&&!e)return a;e=e||{};const n=Array.isArray(e)?[...e]:{...e};if(t.includes(".")){const r=t.indexOf("."),o=t.substring(0,r),i=t.substring(r+1);n[o]=c(e[o],i,a)}else n[t]=a;return n}a.d(t,{G6:()=>i,OX:()=>l,Yq:()=>o,do:()=>c,qW:()=>s,s8:()=>n})},44364:(e,t,a)=>{a.d(t,{DX:()=>s,Og:()=>o,jn:()=>n,pA:()=>i,pR:()=>r});const n="https://devbackend.livhousing.com",r="c17b949cf58c45cae47ce1cc65efc8240f77a2a69ca09ad4c4208852",o={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_IP_DATA_API_KEY:"c17b949cf58c45cae47ce1cc65efc8240f77a2a69ca09ad4c4208852",REACT_APP_VERSION:"1",REACT_APP_BACKEND_URL:"https://devbackend.livhousing.com"}.TRAINING_MEDIA_MAXSIZE,i={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_IP_DATA_API_KEY:"c17b949cf58c45cae47ce1cc65efc8240f77a2a69ca09ad4c4208852",REACT_APP_VERSION:"1",REACT_APP_BACKEND_URL:"https://devbackend.livhousing.com"}.CONVERSATION_MEDIA_MAXSIZE,s={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_IP_DATA_API_KEY:"c17b949cf58c45cae47ce1cc65efc8240f77a2a69ca09ad4c4208852",REACT_APP_VERSION:"1",REACT_APP_BACKEND_URL:"https://devbackend.livhousing.com"}.REACT_APP_NGROK_BACKEND_URL||"https://devbackend.livhousing.com"},90587:(e,t,a)=>{function n(e,t){return"desc"===e?(e,a)=>r(e,a,t):(e,a)=>-r(e,a,t)}function r(e,t,a){return t[a]<e[a]?-1:t[a]>e[a]?1:0}function o(e,t){const a=e.map(((e,t)=>[e,t]));return a.sort(((e,a)=>{const n=t(e[0],a[0]);return 0!==n?n:e[1]-a[1]})),a.map((e=>e[0]))}a.d(t,{h:()=>n,q:()=>o})}}]);