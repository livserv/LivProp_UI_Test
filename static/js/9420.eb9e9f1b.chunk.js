"use strict";(self.webpackChunklib_prop_ui=self.webpackChunklib_prop_ui||[]).push([[9420],{32829:(e,t,n)=>{n.d(t,{A:()=>a});var i=n(25371),o=n(44414);function a(e){let{children:t,type:n}=e;return(0,o.jsx)(i.P.div,{whileHover:{scale:1},whileTap:{scale:.9},children:t})}a.defaultProps={type:"scale"}},92728:(e,t,n)=>{n.d(t,{A:()=>r});var i=n(9950),o=n(48205),a=n(44414);const r=i.forwardRef((function(e,t){return(0,a.jsx)(o.A,{direction:"up",ref:t,...e})}))},51637:(e,t,n)=>{n.d(t,{A:()=>u});var i=n(9950),o=n(14857),a=n(48089),r=n(45180),c=n(82053),s=n(50704),l=n(44414);const d={p:2.5,"& .MuiCardHeader-action":{m:"0px auto",alignSelf:"center"}},u=(0,i.forwardRef)(((e,t)=>{let{border:n=!0,boxShadow:i,children:u,content:v=!0,contentSX:h={},darkTitle:m,elevation:g,secondary:A,shadow:p,sx:x={},title:f,...y}=e;const j=(0,o.A)();return i="dark"===j.palette.mode?i||!0:i,(0,l.jsxs)(a.A,{elevation:g||0,ref:t,...y,sx:{border:n?"1px solid":"none",borderRadius:2,borderColor:"dark"===j.palette.mode?j.palette.divider:j.palette.grey.A800,boxShadow:!i||n&&"dark"!==j.palette.mode?"inherit":p||j.customShadows.z1,":hover":{boxShadow:i?p||j.customShadows.z1:"inherit"},"& pre":{m:0,p:"16px !important",fontFamily:j.typography.fontFamily,fontSize:"0.75rem"},...x},children:[!m&&f&&(0,l.jsx)(r.A,{sx:d,titleTypographyProps:{variant:"subtitle1"},title:f,action:A}),m&&f&&(0,l.jsx)(r.A,{sx:d,title:(0,l.jsx)(c.A,{variant:"h3",children:f}),action:A}),v&&(0,l.jsx)(s.A,{sx:h,children:u}),!v&&u]})}))},26092:(e,t,n)=>{n.d(t,{A:()=>h});n(9950);var i=n(92728),o=n(63464),a=n(40033),r=n(28170),c=n(96319),s=n(59254),l=n(14857),d=n(25333),u=n(44414);const v=(0,s.Ay)(o.A)((e=>{let{theme:t}=e;return{"& .MuiDialogContent-root":{padding:t.spacing(2)},"& .MuiDialogActions-root":{padding:t.spacing(1)}}}));function h(e){const t=(0,l.A)(),{breakpoints:n}=t,{openPopUpDialog:o,setPopUpDialog:s,onClose:h=(()=>s(!1)),title:m,width:g="60%"}=e;return(0,u.jsxs)(v,{TransitionComponent:i.A,"aria-labelledby":"customized-dialog-title",open:o,PaperProps:{sx:{width:{width:g},[n.down("sm")]:{width:"90%"}}},children:[(0,u.jsx)(a.A,{sx:{m:0,p:2},id:"customized-dialog-title",children:m}),(0,u.jsx)(d.A,{"aria-label":"close",onClick:h,sx:{position:"absolute",right:8,top:8},children:(0,u.jsx)(c.A,{})}),(0,u.jsx)(r.A,{dividers:!0,children:e.children})]})}},31408:(e,t,n)=>{n.d(t,{A:()=>a});var i=n(59051),o=n.n(i);const a=function(e){let{value:t,dateOnly:n}=e;return o()(t).format(n?"DD-MMM-YYYY":"DD-MMM-YYYY HH:mm:ss")}},93383:(e,t,n)=>{n.d(t,{A:()=>c});var i=n(9950),o=n(10226),a=n(46639),r=n(44414);const c=function(e){let{onClick:t,disabled:n,isLoading:c,children:s,...l}=e;const[d,u]=i.useState(c);return(0,r.jsxs)(o.A,{onClick:e=>{if(!t)return;const n=t(e);"function"===typeof(null===n||void 0===n?void 0:n.finally)&&(u(!0),n.finally((()=>u(!1))))},disabled:d||c||n,...l,children:[(d||c)&&(0,r.jsx)(a.A,{size:16,color:"primary",style:{marginRight:"10px"}}),s]})}},69420:(e,t,n)=>{n.r(t),n.d(t,{default:()=>X});var i=n(9950),o=n(60899),a=n(82053),r=n(51637),c=n(32829),s=n(93383),l=n(58178),d=n(16491),u=n(46639),v=n(1320),h=n(15769),m=n(69780),g=n(9213),A=n(21671),p=n(7251),x=n(34075),f=n(72595),y=n(6258),j=n(29635),b=n(69755),I=n(41507),S=n(33340),C=n(31408),P=n(53065),_=n(8478);async function w(){try{const e=await async function(){return _.Jt("/organization/invoice/last-invoice-number")}(),t=0!==e?e+1:"";return await _.bE("/organization/invoice/generate?invoiceNumber=".concat(t))}catch(e){throw console.error("Error generating invoice:",e),e}}var E=n(44364),T=n(32026),N=n(90587),R=n(44414);const z=function(e){let{defaultOrder:t,defaultOrderBy:n}=e;const[o,r]=(0,i.useState)(t),[c,s]=(0,i.useState)(n),[j]=(0,i.useState)([]),[b,C]=(0,i.useState)(10),[P,w]=(0,i.useState)(0),[E,T]=(0,i.useState)(!0),z=(0,S.nc)((e=>e.organizationsInvoiceList));if((0,i.useEffect)((()=>{(async()=>{try{await(0,I.cw)()}catch(e){(0,l.i)(!0,"Not able to fetch Organizations Invoice. Try after sometime!","error")}finally{T(!1)}})()}),[]),E)return(0,R.jsx)(d.A,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh",children:(0,R.jsx)(u.A,{})});if(!z||0===z.length)return(0,R.jsx)(d.A,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh",children:(0,R.jsx)(a.A,{variant:"h6",children:"No Data Available"})});const k=async e=>{try{const t=await async function(e){return await _.bE(e)}(e),{sentCount:n,totalCount:i}=t;(0,l.i)(!0,"".concat(n," invoices send out of ").concat(i," to the organizations"),"success")}catch(t){(0,l.i)(!0,"Not able to send the invoices send to  organizations. Try after sometime!","error")}};return(0,R.jsx)(d.A,{children:(0,R.jsx)(v.A,{sx:{width:"100%",overflowX:"auto",position:"relative",display:"block",maxWidth:"100%","& td, & th":{whiteSpace:"nowrap"}},children:(0,R.jsxs)(h.A,{"aria-labelledby":"organizationsInvoiceList",sx:{"& .MuiTableCell-root:first-of-type":{pl:2},"& .MuiTableCell-root:last-of-type":{pr:3}},children:[(0,R.jsx)(m.A,{children:(0,R.jsx)(g.A,{children:D.map((e=>(0,R.jsxs)(A.A,{align:e.align||"center",padding:e.disablePadding?"none":"normal",sortDirection:c===e.id&&o,children:[!1===e.sortable&&e.label,!1!==e.sortable&&(0,R.jsxs)(p.A,{active:c===e.id,direction:c===e.id?o:"asc",onClick:()=>(e=>{r("asc"===o?"desc":"asc"),s(e)})(e.id),children:[e.label,c===e.id?(0,R.jsx)(d.A,{component:"span",sx:M,children:"desc"===o?"sorted descending":"sorted ascending"}):null]})]},e.id)))})}),(0,R.jsx)(x.A,{children:(0,N.q)(z,(0,N.h)(o,c)).slice(P*b,P*b+b).map(((e,t)=>{return(0,R.jsx)(O,{row:e,index:t,isSelected:(n=e.period,-1!==j.indexOf(n)),sendInvoice:k},t);var n}))}),(0,R.jsx)(f.A,{children:(0,R.jsx)(g.A,{children:(0,R.jsx)(A.A,{colSpan:D.length,children:(0,R.jsx)(y.A,{component:"div",count:z.length,page:P,rowsPerPage:b,onPageChange:(e,t)=>w(t),onRowsPerPageChange:e=>{C(parseInt(e.target.value,10)),w(0)}})})})})]})})})},D=[{id:"period",label:"Invoice Period",align:"left"},{id:"totalInvoices",label:"Total Invoices"},{id:"invoiceDate",label:"Invoice Date",align:"left"},{id:"totalAmount",label:"Total Amount"},{id:"emailPendingCount",label:"Pending Email"},{id:"downloadPath",label:"Download",sortable:!1},{id:"triggerEmailPath",label:"Send Email",sortable:!1}];function O(e){let{row:t,index:n,isSelected:i,sendInvoice:o}=e;const a=(0,T.s8)(E.jn,"/"),r="enhanced-table-".concat(n);return(0,R.jsxs)(g.A,{hover:!0,role:"checkbox","aria-checked":i,tabIndex:-1,selected:i,children:[(0,R.jsx)(A.A,{component:"th",id:r,scope:"row",align:"left",children:t.period}),(0,R.jsx)(A.A,{align:"center",children:t.totalInvoices}),(0,R.jsx)(A.A,{align:"left",children:(0,R.jsx)(C.A,{value:t.invoiceDate})}),(0,R.jsx)(A.A,{align:"center",children:t.totalAmount.toFixed(3)}),(0,R.jsx)(A.A,{align:"center",children:t.emailPendingCount}),(0,R.jsx)(A.A,{align:"center",children:(0,R.jsx)("a",{href:a+t.downloadPath,target:"_blank",rel:"noopener noreferrer",children:(0,R.jsx)(P.A,{title:"Download",children:(0,R.jsx)(j.A,{})})})}),(0,R.jsx)(A.A,{align:"center",children:t.triggerEmailPath&&(0,R.jsx)(P.A,{title:"Send email",children:(0,R.jsx)(b.A,{onClick:()=>o(t.triggerEmailPath)})})})]},"row-".concat(n))}const M={border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1};var k=n(26092),B=n(2660),L=n(24516),H=n(74745),q=n(10226),F=n(61467),U=n(29714),W=n(93230),Y=n(3788);const K=function(e){var t,n,i,a,r,c,s,l,d,u,v,h,m,g,A,p,x,f,y,j,b,I,S,C,P,_,w,E,T,N,z,D,O,M,k,q,F,U,K,V;let{invoice:J,index:X,handleBlur:G,handleChange:$,errors:Z,touched:Q}=e;return(0,R.jsxs)(R.Fragment,{children:[(0,R.jsxs)(o.Ay,{container:!0,spacing:1,children:[(0,R.jsx)(o.Ay,{item:!0,xs:12,sm:12,md:1,lg:1,children:(0,R.jsxs)(W.A,{spacing:1,children:[(0,R.jsx)(Y.A,{htmlFor:"invoiceItems.".concat(X,".itemNo"),children:"Sl. No"}),(0,R.jsx)(B.A,{id:"invoiceItems.".concat(X,".itemNo"),type:"text",value:J.itemNo,name:"invoiceItems.".concat(X,".itemNo"),fullWidth:!0,disabled:!0})]})}),(0,R.jsx)(o.Ay,{item:!0,xs:12,sm:12,md:2,lg:2,children:(0,R.jsxs)(W.A,{spacing:1,children:[(0,R.jsx)(Y.A,{htmlFor:"invoiceItems.".concat(X,".desc"),children:"Description"}),(0,R.jsx)(B.A,{id:"invoiceItems.".concat(X,".desc"),type:"text",value:J.desc,name:"invoiceItems.".concat(X,".desc"),autoComplete:"off",onBlur:G,onChange:$,fullWidth:!0,error:Boolean((null===(t=Q.invoiceItems)||void 0===t||null===(n=t[X])||void 0===n?void 0:n.desc)&&(null===(i=Z.invoiceItems)||void 0===i||null===(a=i[X])||void 0===a?void 0:a.desc))}),(null===(r=Q.invoiceItems)||void 0===r||null===(c=r[X])||void 0===c?void 0:c.desc)&&(null===(s=Z.invoiceItems)||void 0===s||null===(l=s[X])||void 0===l?void 0:l.desc)&&(0,R.jsx)(L.A,{error:!0,id:"helper-text-invoiceItems.".concat(X,".desc"),children:Z.invoiceItems[X].desc})]})}),(0,R.jsx)(o.Ay,{item:!0,xs:12,sm:12,md:2,lg:2,children:(0,R.jsxs)(W.A,{spacing:1,children:[(0,R.jsx)(Y.A,{htmlFor:"invoiceItems.".concat(X,".uom"),children:"UMO"}),(0,R.jsx)(B.A,{id:"invoiceItems.".concat(X,".uom"),type:"text",value:J.uom,name:"invoiceItems.".concat(X,".uom"),autoComplete:"off",onBlur:G,onChange:$,fullWidth:!0,error:Boolean((null===(d=Q.invoiceItems)||void 0===d||null===(u=d[X])||void 0===u?void 0:u.uom)&&(null===(v=Z.invoiceItems)||void 0===v||null===(h=v[X])||void 0===h?void 0:h.uom))}),(null===(m=Q.invoiceItems)||void 0===m||null===(g=m[X])||void 0===g?void 0:g.uom)&&(null===(A=Z.invoiceItems)||void 0===A||null===(p=A[X])||void 0===p?void 0:p.uom)&&(0,R.jsx)(L.A,{error:!0,id:"helper-text-invoiceItems.".concat(X,".uom"),children:Z.invoiceItems[X].uom})]})}),(0,R.jsx)(o.Ay,{item:!0,xs:12,sm:12,md:2,lg:2,children:(0,R.jsxs)(W.A,{spacing:1,children:[(0,R.jsx)(Y.A,{htmlFor:"invoiceItems.".concat(X,".quantity"),children:"Quantity"}),(0,R.jsx)(B.A,{id:"invoiceItems.".concat(X,".quantity"),type:"number",value:J.quantity,name:"invoiceItems.".concat(X,".quantity"),autoComplete:"off",onBlur:G,onChange:$,fullWidth:!0,error:Boolean((null===(x=Q.invoiceItems)||void 0===x||null===(f=x[X])||void 0===f?void 0:f.quantity)&&(null===(y=Z.invoiceItems)||void 0===y||null===(j=y[X])||void 0===j?void 0:j.quantity))}),(null===(b=Q.invoiceItems)||void 0===b||null===(I=b[X])||void 0===I?void 0:I.quantity)&&(null===(S=Z.invoiceItems)||void 0===S||null===(C=S[X])||void 0===C?void 0:C.quantity)&&(0,R.jsx)(L.A,{error:!0,id:"helper-text-invoiceItems.".concat(X,".quantity"),children:Z.invoiceItems[X].quantity})]})}),(0,R.jsx)(o.Ay,{item:!0,xs:12,sm:12,md:2,lg:2,children:(0,R.jsxs)(W.A,{spacing:1,children:[(0,R.jsx)(Y.A,{htmlFor:"invoiceItems.".concat(X,".unitPrice"),children:"Unit Price"}),(0,R.jsx)(B.A,{id:"invoiceItems.".concat(X,".unitPrice"),type:"number",value:J.unitPrice,name:"invoiceItems.".concat(X,".unitPrice"),autoComplete:"off",onBlur:G,onChange:$,fullWidth:!0,error:Boolean((null===(P=Q.invoiceItems)||void 0===P||null===(_=P[X])||void 0===_?void 0:_.unitPrice)&&(null===(w=Z.invoiceItems)||void 0===w||null===(E=w[X])||void 0===E?void 0:E.unitPrice))}),(null===(T=Q.invoiceItems)||void 0===T||null===(N=T[X])||void 0===N?void 0:N.unitPrice)&&(null===(z=Z.invoiceItems)||void 0===z||null===(D=z[X])||void 0===D?void 0:D.unitPrice)&&(0,R.jsx)(L.A,{error:!0,id:"helper-text-invoiceItems.".concat(X,".unitPrice"),children:Z.invoiceItems[X].unitPrice})]})}),(0,R.jsx)(o.Ay,{item:!0,xs:12,sm:12,md:2,lg:2,children:(0,R.jsxs)(W.A,{spacing:1,children:[(0,R.jsx)(Y.A,{htmlFor:"invoiceItems.".concat(X,".total"),children:"Total"}),(0,R.jsx)(B.A,{id:"invoiceItems.".concat(X,".total"),type:"number",value:J.total,name:"invoiceItems.".concat(X,".total"),autoComplete:"off",onBlur:G,onChange:$,fullWidth:!0,error:Boolean((null===(O=Q.invoiceItems)||void 0===O||null===(M=O[X])||void 0===M?void 0:M.total)&&(null===(k=Z.invoiceItems)||void 0===k||null===(q=k[X])||void 0===q?void 0:q.total))}),(null===(F=Q.invoiceItems)||void 0===F||null===(U=F[X])||void 0===U?void 0:U.total)&&(null===(K=Z.invoiceItems)||void 0===K||null===(V=K[X])||void 0===V?void 0:V.total)&&(0,R.jsx)(L.A,{error:!0,id:"helper-text-invoiceItems.".concat(X,".total"),children:Z.invoiceItems[X].total})]})})]}),(0,R.jsx)(H.A,{sx:{mt:2,mb:2}})]})};const V=function(e){let{onDone:t}=e;const[n,a]=(0,i.useState)(null);return(0,R.jsx)(o.Ay,{container:!0,alignItems:"center",justifyContent:"space-between",children:(0,R.jsxs)(o.Ay,{item:!0,xs:12,lg:12,md:12,children:[(0,R.jsx)(F.l1,{initialValues:{invoiceNo:""},onSubmit:async(e,t)=>{let{setErrors:n,setStatus:i,setSubmitting:o}=t;try{o(!0);const t=await async function(e){return _.Jt("/organization/invoice/get/".concat(e))}(e.invoiceNo);a(t),i({success:!0})}catch(r){i({success:!1}),n({submit:r.message}),o(!1),(0,l.i)(!0,r.message,"error")}},validationSchema:U.Ik().shape({invoiceNo:U.Yj().max(25).required("Invoice Number is required")}),children:e=>{let{errors:t,handleBlur:n,handleChange:i,handleSubmit:o,isSubmitting:a,touched:r,values:l}=e;return(0,R.jsxs)("form",{onSubmit:o,children:[(0,R.jsxs)(d.A,{display:"flex",alignItems:"center",children:[(0,R.jsx)(B.A,{id:"invoiceNo",type:"text",value:l.invoiceNo,placeholder:"Invoice Number",name:"invoiceNo",autoComplete:"off",onBlur:n,onChange:i,error:Boolean(r.invoiceNo&&t.invoiceNo),sx:{marginRight:2}}),(0,R.jsx)(c.A,{children:(0,R.jsx)(s.A,{isLoading:a,disabled:a,color:"primary",size:"large",type:"submit",variant:"contained",id:"invoiceSearchBtn",children:"Search"})})]}),r.invoiceNo&&t.invoiceNo&&(0,R.jsx)(L.A,{error:!0,id:"helper-text-invoiceNo",children:t.invoiceNo})]})}}),n&&(0,R.jsxs)(o.Ay,{item:!0,xs:12,lg:12,md:12,children:[(0,R.jsx)(H.A,{sx:{mt:2,mb:2}}),(0,R.jsx)(J,{invoice:n,onDone:t})]})]})})};function J(e){let{invoice:t,onDone:n}=e;const i={_id:t._id||"",invoiceItems:t.details.items||[]},a=U.Ik().shape({invoiceItems:U.YO().of(U.Ik().shape({desc:U.Yj().required("Description is required"),total:U.Yj().required("Total is required")}))});return(0,R.jsx)(F.l1,{initialValues:i,onSubmit:async(e,t)=>{let{setErrors:i,setStatus:o,setSubmitting:a}=t;try{a(!0),await async function(e){return _.bE("/organization/invoice/create-or-update",e)}(e),n(),o({success:!0})}catch(r){o({success:!1}),i({submit:r.message}),a(!1),(0,l.i)(!0,r.message,"error")}},validationSchema:a,children:e=>{let{errors:t,handleBlur:n,handleChange:i,handleSubmit:a,isSubmitting:r,touched:l,values:d}=e;return(0,R.jsx)("form",{onSubmit:a,children:(0,R.jsx)(F.ED,{name:"invoiceItems",children:e=>{let{push:a}=e;return(0,R.jsxs)(R.Fragment,{children:[d.invoiceItems.map(((e,o)=>(0,R.jsx)(K,{invoice:e,index:o,handleBlur:n,handleChange:i,errors:t,touched:l},o))),(0,R.jsxs)(o.Ay,{container:!0,justifyContent:"flex-end",children:[(0,R.jsx)(o.Ay,{item:!0,children:(0,R.jsx)(c.A,{children:(0,R.jsx)(s.A,{isLoading:r,disabled:r,color:"primary",size:"large",type:"submit",variant:"contained",id:"invoiceSearchBtn",children:"Update Invoice"})})}),(0,R.jsx)(o.Ay,{item:!0,children:(0,R.jsx)(q.A,{sx:{marginLeft:2},variant:"contained",size:"large",onClick:()=>{const e=d.invoiceItems.length+1;a({itemNo:e,uom:"",quantity:"",unitPrice:"",desc:"",total:""})},children:"Add Item"})})]})]})}})})}})}const X=function(){const[e,t]=(0,i.useState)(!1),[n,d]=i.useState(!1),u=()=>d(!1);return(0,R.jsxs)(o.Ay,{container:!0,rowSpacing:4.5,columnSpacing:2.75,children:[(0,R.jsx)(o.Ay,{item:!0,xs:12,sx:{mb:-2.25},children:(0,R.jsxs)(o.Ay,{container:!0,alignItems:"center",justifyContent:"space-between",children:[(0,R.jsx)(o.Ay,{item:!0,xs:12,lg:6,md:12,children:(0,R.jsx)(a.A,{variant:"h5",children:"Organizations Invoice"})}),(0,R.jsxs)(o.Ay,{item:!0,xs:12,lg:6,md:12,container:!0,justifyContent:"flex-end",children:[(0,R.jsx)(c.A,{children:(0,R.jsx)(s.A,{isLoading:n,disabled:n,variant:"contained",color:"success",size:"large",onClick:async()=>{d(!0)},sx:{marginRight:2},children:"Edit Invoice"})}),(0,R.jsx)(c.A,{children:(0,R.jsx)(s.A,{isLoading:e,disabled:e,variant:"contained",color:"success",size:"large",onClick:async()=>{t(!0);try{const e=await w();if(e){t(!1);const{generated:n}=e;(0,l.i)(!0,"All Organizations invoice generated. Total number of invoice generated "+n,"success")}else t(!1),(0,l.i)(!0,"Not able to generate invoices, Please try after some time","error")}catch(e){t(!1),(0,l.i)(!0,"Not able to generate invoices, Please try after some time","error")}},children:"Generate Invoice"})})]}),(0,R.jsx)(k.A,{openPopUpDialog:n,onClose:u,title:"Edit or Create invoice",children:(0,R.jsx)(V,{onDone:u})})]})}),(0,R.jsx)(o.Ay,{item:!0,xs:12,zeroMinWidth:!0,children:(0,R.jsx)(r.A,{sx:{mt:2},content:!1,children:(0,R.jsx)(z,{})})})]})}},8478:(e,t,n)=>{n.d(t,{Jt:()=>a,Ne:()=>u,TF:()=>s,bE:()=>r,yJ:()=>c});var i=n(32026),o=n(44364);async function a(e,t){return l("GET",e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}async function r(e,t){return l("POST",e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}async function c(e,t){return l("PUT",e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}async function s(e,t){return l("DELETE",e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}async function l(e,t,n){let{headers:i,noAuth:o,...a}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const r="POST"===e||"PUT"===e||"DELETE"===e;t=u(t,r?void 0:n);const c=n instanceof FormData;if(c||(n=n&&"object"===typeof n&&r?JSON.stringify(n):void 0),i||(i={}),c||(i["Content-Type"]="application/json"),i.Accept="application/json",!1!==o){const e=sessionStorage.getItem("token");e&&(i.Authorization="Bearer ".concat(e))}try{const o=await fetch(t,{...a,headers:i,body:n,method:e}),r=await o.json();if(o.ok){const{data:e,...t}=r;return delete t.status,e&&!Object.keys(t).length?e:r}throw r.message?new Error(r.message):r}catch(l){var s;throw console.error("Error calling API: ",l),null!==(s=l.message)&&void 0!==s&&s.includes("fetch")?new Error("Unable to reach server. Please check your network connectivity and try again."):new Error(l.message)}}const d=(0,i.s8)(o.jn,"/");function u(e,t){if(!e)return e;const n=t&&Object.keys(t);if(null!==n&&void 0!==n&&n.length){const i=n.reduce(((e,n)=>{let i=t[n];return null===i||void 0===i?e:(i="".concat(n,"=").concat(encodeURIComponent(i)),e?"".concat(e,"&").concat(i):i)}),"");i&&(e="".concat(e).concat(e.includes("?")?"&":"?").concat(i))}return e.startsWith("https://")?e:"".concat(d).concat(e)}},41507:(e,t,n)=>{n.d(t,{Ds:()=>s,L_:()=>r,NC:()=>c,YS:()=>a,cw:()=>d,qb:()=>l});var i=n(8478),o=n(33340);async function a(e,t){const n=await async function(){const e=o.nc.getState();let{organizationList:t,organizationId:n,organization:a}=e;if(!e.isSuperUser||Array.isArray(t))return;if(t=await i.bE("/superAdmin/get-all-organization"),t.length)if(n=n||sessionStorage.getItem("orgId"),n){if(!a){var r;a=null===(r=t)||void 0===r?void 0:r.filter((e=>e._id===n))[0]}}else{const e=t[0];n=e._id,a=e}return o.nc.setState({organizationList:t,organizationId:n,organization:a}),!0}(),{organizationId:a}=o.nc.getState();return e?e!==a&&o.nc.setState({organizationId:e}):e=a,!e||(n||await async function(e){const t=await i.bE("/organization/get-organization-by-id",{organizationId:e});o.nc.setState({organization:t})}(e),await s(e,t),!0)}async function r(e,t){t||(t=o.nc.getState().organizationId);const n=await i.yJ("/organization/".concat(t),e);o.nc.setState((e=>{const{organizationList:i,organizationId:o,organization:a}=e,r={};return o===t&&(r.organization={...a,...n}),i&&(r.organizationList=i.map((e=>e._id===t?{...e,...n}:e))),r}))}function c(e){if(!e||"object"!==typeof e)return;let{organization:t}=o.nc.getState();t&&(t={...t,...e},o.nc.setState({organization:t}))}async function s(e,t){var n;const a=await i.bE("/bot/get-all-bots",{organizationId:e}),r=t||(null===(n=a[0])||void 0===n?void 0:n._id),c=a.reduce(((e,t)=>(e[t._id]=t,e)),{});return o.nc.setState({organizationId:e,botsList:a,botsMap:c,selectedBotId:r}),r}function l(e){o.nc.setState({selectedBotId:e})}async function d(){const e=await i.Jt("/organization/invoice/list");o.nc.setState({organizationsInvoiceList:e})}},32026:(e,t,n)=>{function i(e,t){return e.replace(new RegExp("".concat(o(t),"+$")),"")}function o(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function a(e){const t=new Date(e),n=t.getDate(),i=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][t.getMonth()],o=t.getFullYear();return"".concat(i," ").concat(n,", ").concat(o)}function r(e,t,n){if(!t&&!e)return n;e=e||{};const i=Array.isArray(e)?[...e]:{...e};if(t.includes(".")){const o=t.indexOf("."),a=t.substring(0,o),c=t.substring(o+1);i[a]=r(e[a],c,n)}else i[t]=n;return i}function c(e,t){return btoa("".concat(e,"_").concat(t,"_whatsapp_int"))}function s(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:12;const t="abcdefghijklmnopqrstuvwxyz0123456789";let n="";for(let i=0;i<e;i++)n+=t.charAt(Math.floor(36*Math.random()));return n}function l(e,t,n){if(!t&&!e)return n;e=e||{};const i=Array.isArray(e)?[...e]:{...e};if(t.includes(".")){const o=t.indexOf("."),a=t.substring(0,o),r=t.substring(o+1);i[a]=l(e[a],r,n)}else i[t]=n;return i}n.d(t,{G6:()=>r,OX:()=>s,Yq:()=>a,do:()=>l,qW:()=>c,s8:()=>i})},44364:(e,t,n)=>{n.d(t,{DX:()=>c,Og:()=>a,jn:()=>i,pA:()=>r,pR:()=>o});const i="https://devbackend.livhousing.com",o="c17b949cf58c45cae47ce1cc65efc8240f77a2a69ca09ad4c4208852",a={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_IP_DATA_API_KEY:"c17b949cf58c45cae47ce1cc65efc8240f77a2a69ca09ad4c4208852",REACT_APP_VERSION:"1",REACT_APP_BACKEND_URL:"https://devbackend.livhousing.com"}.TRAINING_MEDIA_MAXSIZE,r={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_IP_DATA_API_KEY:"c17b949cf58c45cae47ce1cc65efc8240f77a2a69ca09ad4c4208852",REACT_APP_VERSION:"1",REACT_APP_BACKEND_URL:"https://devbackend.livhousing.com"}.CONVERSATION_MEDIA_MAXSIZE,c={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_IP_DATA_API_KEY:"c17b949cf58c45cae47ce1cc65efc8240f77a2a69ca09ad4c4208852",REACT_APP_VERSION:"1",REACT_APP_BACKEND_URL:"https://devbackend.livhousing.com"}.REACT_APP_NGROK_BACKEND_URL||"https://devbackend.livhousing.com"},90587:(e,t,n)=>{function i(e,t){return"desc"===e?(e,n)=>o(e,n,t):(e,n)=>-o(e,n,t)}function o(e,t,n){return t[n]<e[n]?-1:t[n]>e[n]?1:0}function a(e,t){const n=e.map(((e,t)=>[e,t]));return n.sort(((e,n)=>{const i=t(e[0],n[0]);return 0!==i?i:e[1]-n[1]})),n.map((e=>e[0]))}n.d(t,{h:()=>i,q:()=>a})},29635:(e,t,n)=>{var i=n(24994);t.A=void 0;var o=i(n(79526)),a=n(44414);t.A=(0,o.default)((0,a.jsx)("path",{d:"M5 20h14v-2H5zM19 9h-4V3H9v6H5l7 7z"}),"Download")},69755:(e,t,n)=>{var i=n(24994);t.A=void 0;var o=i(n(79526)),a=n(44414);t.A=(0,o.default)((0,a.jsx)("path",{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2m0 4-8 5-8-5V6l8 5 8-5z"}),"Email")},48089:(e,t,n)=>{n.d(t,{A:()=>p});var i=n(58168),o=n(98587),a=n(9950),r=n(72004),c=n(74061),s=n(59254),l=n(48283),d=n(2235),u=n(80863),v=n(68483);function h(e){return(0,v.Ay)("MuiCard",e)}(0,u.A)("MuiCard",["root"]);var m=n(44414);const g=["className","raised"],A=(0,s.Ay)(d.A,{name:"MuiCard",slot:"Root",overridesResolver:(e,t)=>t.root})((()=>({overflow:"hidden"}))),p=a.forwardRef((function(e,t){const n=(0,l.A)({props:e,name:"MuiCard"}),{className:a,raised:s=!1}=n,d=(0,o.A)(n,g),u=(0,i.A)({},n,{raised:s}),v=(e=>{const{classes:t}=e;return(0,c.A)({root:["root"]},h,t)})(u);return(0,m.jsx)(A,(0,i.A)({className:(0,r.A)(v.root,a),elevation:s?8:void 0,ref:t,ownerState:u},d))}))},50704:(e,t,n)=>{n.d(t,{A:()=>A});var i=n(58168),o=n(98587),a=n(9950),r=n(72004),c=n(74061),s=n(59254),l=n(48283),d=n(80863),u=n(68483);function v(e){return(0,u.Ay)("MuiCardContent",e)}(0,d.A)("MuiCardContent",["root"]);var h=n(44414);const m=["className","component"],g=(0,s.Ay)("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(e,t)=>t.root})((()=>({padding:16,"&:last-child":{paddingBottom:24}}))),A=a.forwardRef((function(e,t){const n=(0,l.A)({props:e,name:"MuiCardContent"}),{className:a,component:s="div"}=n,d=(0,o.A)(n,m),u=(0,i.A)({},n,{component:s}),A=(e=>{const{classes:t}=e;return(0,c.A)({root:["root"]},v,t)})(u);return(0,h.jsx)(g,(0,i.A)({as:s,className:(0,r.A)(A.root,a),ownerState:u,ref:t},d))}))},45180:(e,t,n)=>{n.d(t,{A:()=>j});var i=n(98587),o=n(58168),a=n(9950),r=n(72004),c=n(74061),s=n(82053),l=n(48283),d=n(59254),u=n(80863),v=n(68483);function h(e){return(0,v.Ay)("MuiCardHeader",e)}const m=(0,u.A)("MuiCardHeader",["root","avatar","action","content","title","subheader"]);var g=n(44414);const A=["action","avatar","className","component","disableTypography","subheader","subheaderTypographyProps","title","titleTypographyProps"],p=(0,d.Ay)("div",{name:"MuiCardHeader",slot:"Root",overridesResolver:(e,t)=>(0,o.A)({["& .".concat(m.title)]:t.title,["& .".concat(m.subheader)]:t.subheader},t.root)})({display:"flex",alignItems:"center",padding:16}),x=(0,d.Ay)("div",{name:"MuiCardHeader",slot:"Avatar",overridesResolver:(e,t)=>t.avatar})({display:"flex",flex:"0 0 auto",marginRight:16}),f=(0,d.Ay)("div",{name:"MuiCardHeader",slot:"Action",overridesResolver:(e,t)=>t.action})({flex:"0 0 auto",alignSelf:"flex-start",marginTop:-4,marginRight:-8,marginBottom:-4}),y=(0,d.Ay)("div",{name:"MuiCardHeader",slot:"Content",overridesResolver:(e,t)=>t.content})({flex:"1 1 auto"}),j=a.forwardRef((function(e,t){const n=(0,l.A)({props:e,name:"MuiCardHeader"}),{action:a,avatar:d,className:u,component:v="div",disableTypography:m=!1,subheader:j,subheaderTypographyProps:b,title:I,titleTypographyProps:S}=n,C=(0,i.A)(n,A),P=(0,o.A)({},n,{component:v,disableTypography:m}),_=(e=>{const{classes:t}=e;return(0,c.A)({root:["root"],avatar:["avatar"],action:["action"],content:["content"],title:["title"],subheader:["subheader"]},h,t)})(P);let w=I;null==w||w.type===s.A||m||(w=(0,g.jsx)(s.A,(0,o.A)({variant:d?"body2":"h5",className:_.title,component:"span",display:"block"},S,{children:w})));let E=j;return null==E||E.type===s.A||m||(E=(0,g.jsx)(s.A,(0,o.A)({variant:d?"body2":"body1",className:_.subheader,color:"text.secondary",component:"span",display:"block"},b,{children:E}))),(0,g.jsxs)(p,(0,o.A)({className:(0,r.A)(_.root,u),as:v,ref:t,ownerState:P},C,{children:[d&&(0,g.jsx)(x,{className:_.avatar,ownerState:P,children:d}),(0,g.jsxs)(y,{className:_.content,ownerState:P,children:[w,E]}),a&&(0,g.jsx)(f,{className:_.action,ownerState:P,children:a})]}))}))}}]);