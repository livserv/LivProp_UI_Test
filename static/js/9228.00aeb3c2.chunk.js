"use strict";(self.webpackChunklib_prop_ui=self.webpackChunklib_prop_ui||[]).push([[9228],{89228:(e,n,t)=>{t.r(n),t.d(n,{default:()=>C});var i=t(9950),s=t(46639),o=t(16491),r=t(60899),l=t(82053),c=t(80417),d=t(79046),a=t(33092),u=t(89262),x=t(12504),h=t(29635),j=t(59254),m=t(33340),A=t(77382),p=t(6716),g=t(68033),f=t(6834),y=t(44414);function b(){const[e,n]=(0,i.useState)(!1),t=async()=>{n(!0);try{await(0,A.gJ)()}catch(e){console.log("Error while downloading docs:",e)}finally{n(!1)}};return e?(0,y.jsx)(s.A,{size:16,color:"primary",style:{marginLeft:"5px"}}):(0,y.jsx)("span",{title:"Click to download the content as CSV file",children:(0,y.jsx)(h.A,{onClick:t,style:{verticalAlign:"bottom",cursor:"pointer"}})})}const C=function(){const[e,n]=i.useState(!1),t=(0,m.nc)((e=>{var n;return null===(n=e.kbDocs)||void 0===n?void 0:n[e.selectedBotId]})),s=i.useCallback((()=>n((e=>!e))),[]);return i.useEffect((()=>{(0,A.bZ)().catch((e=>console.error("Error fetching organization details:",e)))}),[]),(0,y.jsx)(o.A,{children:(0,y.jsxs)(r.Ay,{container:!0,item:!0,xs:12,children:[(0,y.jsxs)(l.A,{variant:"h5",children:["FAQ / Knowledge base ",(0,y.jsx)(b,{})]}),!e&&(0,y.jsx)(r.Ay,{item:!0,sx:{marginLeft:"60px"},children:(0,y.jsx)(k,{onAddClick:s})}),e&&(0,y.jsx)(r.Ay,{item:!0,xs:12,mt:1,children:(0,y.jsx)(r.Ay,{item:!0,xs:12,lg:8,mt:5,children:(0,y.jsx)(f.A,{onCancel:s})})}),(0,y.jsx)(r.Ay,{item:!0,xs:12,mt:5,children:(0,y.jsx)(g.A,{docsList:t})})]})})},v=(0,j.Ay)(c.A)((e=>{let{theme:n}=e;return{position:"fixed","#trainingDocumentsSpeedDial &":{"&.MuiSpeedDial-directionDown, &.MuiSpeedDial-directionRight":{left:"auto",right:n.spacing(2)},"&.MuiSpeedDial-directionUp, &.MuiSpeedDial-directionLeft":{right:"auto",left:n.spacing(2)}}}}));function k(e){let{onAddClick:n}=e;const[t,s]=i.useState(!1);return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)(v,{ariaLabel:"Knowledge base options",direction:"down",sx:{position:"absolute",top:70,right:16},icon:(0,y.jsx)(d.A,{}),children:[(0,y.jsx)(a.A,{icon:(0,y.jsx)(u.A,{}),tooltipTitle:"Add Question & Answer",onClick:n}),(0,y.jsx)(a.A,{icon:(0,y.jsx)(x.A,{}),tooltipTitle:"Upload training document (.csv,.pdf,.doc,.docx,.txt)",onClick:()=>s(!0)})]}),t&&(0,y.jsx)(p.A,{isOpen:t,toggleOpen:s})]})}},6834:(e,n,t)=>{t.d(n,{A:()=>f});var i=t(9950),s=t(60899),o=t(3788),r=t(93230),l=t(2660),c=t(10226),d=t(29714),a=t(61467),u=t(24516),x=t(21788),h=t(32829),j=t(93383),m=t(77382),A=t(44414);const p=()=>d.Yj(),g=d.Ik().shape({question:p(),content:p()});const f=function(e){let{document:n={},onCancel:t,onUpdate:d}=e;const p=i.useCallback((()=>t(!1)),[t]);return(0,A.jsx)(a.l1,{initialValues:n,validationSchema:g,onSubmit:async(e,n)=>{let{setStatus:t,setSubmitting:i}=n;try{const n=await(0,m.Mk)(e);t({success:!1}),i(!1),p(),(0,x.i)(!0,"Content added successfully!","success"),null===d||void 0===d||d(n)}catch(s){console.error(s),(0,x.i)(!0,"Error occurred while trying to save content.","error")}},children:e=>{let{values:n,errors:t,handleChange:i,touched:d,isSubmitting:a,handleSubmit:x}=e;return(0,A.jsxs)("form",{noValidate:!0,onSubmit:x,children:[(0,A.jsxs)(s.Ay,{item:!0,xs:12,mt:5,children:[(0,A.jsx)(o.A,{htmlFor:"question",children:"Question"}),(0,A.jsxs)(r.A,{spacing:2,mb:3,children:[(0,A.jsx)(l.A,{multiline:!0,fullWidth:!0,id:"question",name:"question",value:n.question,onChange:i,placeholder:"Please enter the question"}),d.question&&t.question&&(0,A.jsx)(u.A,{error:!0,id:"helper-text-message-placeholder",children:t.question})]}),(0,A.jsx)(o.A,{htmlFor:"content",children:"Answer"}),(0,A.jsxs)(r.A,{spacing:2,mb:3,children:[(0,A.jsx)(l.A,{multiline:!0,rows:6,fullWidth:!0,id:"content",name:"content",value:n.content,onChange:i,placeholder:"Please enter the answer"}),d.content&&t.content&&(0,A.jsx)(u.A,{error:!0,id:"helper-text-message-placeholder",children:t.content})]})]}),(0,A.jsx)(s.Ay,{item:!0,xs:12,display:"flex",justifyContent:"flex-end",children:(0,A.jsxs)(r.A,{spacing:2,direction:"row",children:[(0,A.jsx)(c.A,{variant:"outlined",onClick:p,children:"Cancel"}),(0,A.jsx)(h.A,{children:(0,A.jsx)(j.A,{isLoading:a,color:"primary",size:"large",type:"submit",variant:"contained",onClick:x,children:"Save"})})]})})]})}})}},68033:(e,n,t)=>{t.d(n,{A:()=>v});var i=t(9950),s=t(60899),o=t(82053),r=t(10226),l=t(63464),c=t(40033),d=t(79739),a=t(57988),u=t(7999),x=t(25333),h=t(63359),j=t(85967),m=t(74745),A=t(21788),p=t(32829),g=t(93383),f=t(70855),y=t(6834),b=t(77382),C=t(44414);const v=function(e){let{docsList:n,onUpdate:t}=e;const[,i]=(0,f.G)();return null===n||void 0===n?void 0:n.map(((e,n)=>(0,C.jsx)(k,{index:n,document:e,trainingMedia:i.trainingMedia,onUpdate:t},e._id)))};function k(e){let{document:n,index:t,trainingMedia:s,onUpdate:o}=e;const[r,l]=i.useState(!1);return r?(0,C.jsx)(y.A,{document:n,onCancel:l,onUpdate:o}):(0,C.jsx)(w,{index:t,document:n,trainingMedia:s,onEdit:l})}function w(e){let{document:n,index:t,trainingMedia:r,onEdit:l}=e;const c=i.useCallback((()=>l(!0)),[l]);return(0,C.jsxs)(s.Ay,{container:!0,mt:1,children:[(0,C.jsxs)(s.Ay,{item:!0,children:[(0,C.jsxs)(o.A,{variant:"h5",children:["Q",t+1," . ",n.question]}),(0,C.jsxs)(o.A,{variant:"body2",children:[(0,C.jsx)("b",{children:"Ans . "})," ",n.content]}),n.sourceDocument&&(null===r||void 0===r?void 0:r.length)>0&&(0,C.jsx)(S,{document:n,trainingMedia:r})]}),(0,C.jsxs)(s.Ay,{xs:12,item:!0,display:"flex",justifyContent:"flex-end",children:[(0,C.jsx)(x.A,{size:"small",sx:{color:h.A[500]},onClick:c,children:(0,C.jsx)(u.A,{})}),(0,C.jsx)(D,{documentId:n._id})]}),(0,C.jsx)(m.A,{xs:12,sx:{width:"100%",borderColor:"#b6abab"}})]})}function S(e){let{document:n,trainingMedia:t}=e;const s=n.sourceDocument,r=i.useMemo((()=>{const e=t.filter((e=>e.docId===s))[0];if(!e)return e;const n=decodeURIComponent(e.url.substring(e.url.lastIndexOf("/")+1));return{...e,fileName:n}}),[s,t]);return r?(0,C.jsxs)(o.A,{variant:"body2",children:[(0,C.jsx)("b",{children:"Source Document:"})," ",(0,C.jsxs)("a",{href:r.url,rel:"noreferrer",target:"_blank",style:{cursor:"pointer"},children:[r.fileName,r.name?` ( ${r.name} )`:""]})]}):null}function D(e){let{documentId:n}=e;const[t,s]=i.useState(!1),u=()=>s((e=>!e)),h=i.useCallback((async()=>{await(0,b.CA)(n),s(!1),(0,A.i)(!0,"Deleted response successfully","success")}),[n]);return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(x.A,{sx:{color:j.A[500]},onClick:u,children:(0,C.jsx)(a.A,{})}),t&&(0,C.jsxs)(l.A,{open:t,onClose:u,children:[(0,C.jsx)(c.A,{id:"delete-confirm-dialog-title",children:(0,C.jsx)(o.A,{gutterBottom:!0,children:"Are sure you want to delete the response ?"})}),(0,C.jsxs)(d.A,{children:[(0,C.jsx)(r.A,{onClick:u,children:"Cancel"}),(0,C.jsx)(p.A,{children:(0,C.jsx)(g.A,{color:"primary",type:"submit",variant:"contained",onClick:h,children:"Delete"})})]})]})]})}}}]);