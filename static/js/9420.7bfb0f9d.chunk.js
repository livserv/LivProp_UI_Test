"use strict";(self.webpackChunklib_prop_ui=self.webpackChunklib_prop_ui||[]).push([[9420],{32829:(e,n,t)=>{t.d(n,{A:()=>a});var i=t(25371),o=t(44414);function a(e){let{children:n,type:t}=e;return(0,o.jsx)(i.P.div,{whileHover:{scale:1},whileTap:{scale:.9},children:n})}a.defaultProps={type:"scale"}},92728:(e,n,t)=>{t.d(n,{A:()=>c});var i=t(9950),o=t(48205),a=t(44414);const c=i.forwardRef((function(e,n){return(0,a.jsx)(o.A,{direction:"up",ref:n,...e})}))},51637:(e,n,t)=>{t.d(n,{A:()=>u});var i=t(9950),o=t(14857),a=t(48089),c=t(45180),r=t(82053),s=t(50704),l=t(44414);const d={p:2.5,"& .MuiCardHeader-action":{m:"0px auto",alignSelf:"center"}},u=(0,i.forwardRef)(((e,n)=>{let{border:t=!0,boxShadow:i,children:u,content:h=!0,contentSX:v={},darkTitle:m,elevation:g,secondary:A,shadow:x,sx:p={},title:f,...j}=e;const y=(0,o.A)();return i="dark"===y.palette.mode?i||!0:i,(0,l.jsxs)(a.A,{elevation:g||0,ref:n,...j,sx:{border:t?"1px solid":"none",borderRadius:2,borderColor:"dark"===y.palette.mode?y.palette.divider:y.palette.grey.A800,boxShadow:!i||t&&"dark"!==y.palette.mode?"inherit":x||y.customShadows.z1,":hover":{boxShadow:i?x||y.customShadows.z1:"inherit"},"& pre":{m:0,p:"16px !important",fontFamily:y.typography.fontFamily,fontSize:"0.75rem"},...p},children:[!m&&f&&(0,l.jsx)(c.A,{sx:d,titleTypographyProps:{variant:"subtitle1"},title:f,action:A}),m&&f&&(0,l.jsx)(c.A,{sx:d,title:(0,l.jsx)(r.A,{variant:"h3",children:f}),action:A}),h&&(0,l.jsx)(s.A,{sx:v,children:u}),!h&&u]})}))},26092:(e,n,t)=>{t.d(n,{A:()=>v});t(9950);var i=t(92728),o=t(63464),a=t(40033),c=t(28170),r=t(96319),s=t(59254),l=t(14857),d=t(25333),u=t(44414);const h=(0,s.Ay)(o.A)((e=>{let{theme:n}=e;return{"& .MuiDialogContent-root":{padding:n.spacing(2)},"& .MuiDialogActions-root":{padding:n.spacing(1)}}}));function v(e){const n=(0,l.A)(),{breakpoints:t}=n,{openPopUpDialog:o,setPopUpDialog:s,onClose:v=(()=>s(!1)),title:m,width:g="60%"}=e;return(0,u.jsxs)(h,{TransitionComponent:i.A,"aria-labelledby":"customized-dialog-title",open:o,PaperProps:{sx:{width:{width:g},[t.down("sm")]:{width:"90%"}}},children:[(0,u.jsx)(a.A,{sx:{m:0,p:2},id:"customized-dialog-title",children:m}),(0,u.jsx)(d.A,{"aria-label":"close",onClick:v,sx:{position:"absolute",right:8,top:8},children:(0,u.jsx)(r.A,{})}),(0,u.jsx)(c.A,{dividers:!0,children:e.children})]})}},31408:(e,n,t)=>{t.d(n,{A:()=>a});var i=t(59051),o=t.n(i);const a=function(e){let{value:n,dateOnly:t}=e;return o()(n).format(t?"DD-MMM-YYYY":"DD-MMM-YYYY HH:mm:ss")}},93383:(e,n,t)=>{t.d(n,{A:()=>r});var i=t(9950),o=t(10226),a=t(46639),c=t(44414);const r=function(e){let{onClick:n,disabled:t,isLoading:r,children:s,...l}=e;const[d,u]=i.useState(r);return(0,c.jsxs)(o.A,{onClick:e=>{if(!n)return;const t=n(e);"function"===typeof(null===t||void 0===t?void 0:t.finally)&&(u(!0),t.finally((()=>u(!1))))},disabled:d||r||t,...l,children:[(d||r)&&(0,c.jsx)(a.A,{size:16,color:"primary",style:{marginRight:"10px"}}),s]})}},69420:(e,n,t)=>{t.r(n),t.d(n,{default:()=>G});var i=t(9950),o=t(60899),a=t(82053),c=t(51637),r=t(32829),s=t(93383),l=t(58178),d=t(16491),u=t(46639),h=t(1320),v=t(15769),m=t(69780),g=t(9213),A=t(21671),x=t(7251),p=t(34075),f=t(72595),j=t(6258),y=t(29635),b=t(69755),I=t(41507),S=t(33340),C=t(31408),P=t(53065),E=t(8478);async function _(){try{const e=await async function(){return E.Jt("/organization/invoice/last-invoice-number")}(),n=0!==e?e+1:"";return await E.bE("/organization/invoice/generate?invoiceNumber=".concat(n))}catch(e){throw console.error("Error generating invoice:",e),e}}var w=t(44364),z=t(32026),T=t(90587),D=t(44414);const k=function(e){let{defaultOrder:n,defaultOrderBy:t}=e;const[o,c]=(0,i.useState)(n),[r,s]=(0,i.useState)(t),[y]=(0,i.useState)([]),[b,C]=(0,i.useState)(10),[P,_]=(0,i.useState)(0),[w,z]=(0,i.useState)(!0),k=(0,S.nc)((e=>e.organizationsInvoiceList));if((0,i.useEffect)((()=>{(async()=>{try{await(0,I.cw)()}catch(e){(0,l.i)(!0,"Not able to fetch Organizations Invoice. Try after sometime!","error")}finally{z(!1)}})()}),[]),w)return(0,D.jsx)(d.A,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh",children:(0,D.jsx)(u.A,{})});if(!k||0===k.length)return(0,D.jsx)(d.A,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh",children:(0,D.jsx)(a.A,{variant:"h6",children:"No Data Available"})});const M=async e=>{try{const n=await async function(e){return await E.bE(e)}(e),{sentCount:t,totalCount:i}=n;(0,l.i)(!0,"".concat(t," invoices send out of ").concat(i," to the organizations"),"success")}catch(n){(0,l.i)(!0,"Not able to send the invoices send to  organizations. Try after sometime!","error")}};return(0,D.jsx)(d.A,{children:(0,D.jsx)(h.A,{sx:{width:"100%",overflowX:"auto",position:"relative",display:"block",maxWidth:"100%","& td, & th":{whiteSpace:"nowrap"}},children:(0,D.jsxs)(v.A,{"aria-labelledby":"organizationsInvoiceList",sx:{"& .MuiTableCell-root:first-of-type":{pl:2},"& .MuiTableCell-root:last-of-type":{pr:3}},children:[(0,D.jsx)(m.A,{children:(0,D.jsx)(g.A,{children:N.map((e=>(0,D.jsxs)(A.A,{align:e.align||"center",padding:e.disablePadding?"none":"normal",sortDirection:r===e.id&&o,children:[!1===e.sortable&&e.label,!1!==e.sortable&&(0,D.jsxs)(x.A,{active:r===e.id,direction:r===e.id?o:"asc",onClick:()=>(e=>{c("asc"===o?"desc":"asc"),s(e)})(e.id),children:[e.label,r===e.id?(0,D.jsx)(d.A,{component:"span",sx:R,children:"desc"===o?"sorted descending":"sorted ascending"}):null]})]},e.id)))})}),(0,D.jsx)(p.A,{children:(0,T.q)(k,(0,T.h)(o,r)).slice(P*b,P*b+b).map(((e,n)=>{return(0,D.jsx)(O,{row:e,index:n,isSelected:(t=e.period,-1!==y.indexOf(t)),sendInvoice:M},n);var t}))}),(0,D.jsx)(f.A,{children:(0,D.jsx)(g.A,{children:(0,D.jsx)(A.A,{colSpan:N.length,children:(0,D.jsx)(j.A,{component:"div",count:k.length,page:P,rowsPerPage:b,onPageChange:(e,n)=>_(n),onRowsPerPageChange:e=>{C(parseInt(e.target.value,10)),_(0)}})})})})]})})})},N=[{id:"period",label:"Invoice Period",align:"left"},{id:"totalInvoices",label:"Total Invoices"},{id:"invoiceDate",label:"Invoice Date",align:"left"},{id:"totalAmount",label:"Total Amount"},{id:"emailPendingCount",label:"Pending Email"},{id:"downloadPath",label:"Download",sortable:!1},{id:"triggerEmailPath",label:"Send Email",sortable:!1}];function O(e){let{row:n,index:t,isSelected:i,sendInvoice:o}=e;const a=(0,z.s8)(w.jn,"/"),c="enhanced-table-".concat(t);return(0,D.jsxs)(g.A,{hover:!0,role:"checkbox","aria-checked":i,tabIndex:-1,selected:i,children:[(0,D.jsx)(A.A,{component:"th",id:c,scope:"row",align:"left",children:n.period}),(0,D.jsx)(A.A,{align:"center",children:n.totalInvoices}),(0,D.jsx)(A.A,{align:"left",children:(0,D.jsx)(C.A,{value:n.invoiceDate})}),(0,D.jsx)(A.A,{align:"center",children:n.totalAmount.toFixed(3)}),(0,D.jsx)(A.A,{align:"center",children:n.emailPendingCount}),(0,D.jsx)(A.A,{align:"center",children:(0,D.jsx)("a",{href:a+n.downloadPath,target:"_blank",rel:"noopener noreferrer",children:(0,D.jsx)(P.A,{title:"Download",children:(0,D.jsx)(y.A,{})})})}),(0,D.jsx)(A.A,{align:"center",children:n.triggerEmailPath&&(0,D.jsx)(P.A,{title:"Send email",children:(0,D.jsx)(b.A,{onClick:()=>o(n.triggerEmailPath)})})})]},"row-".concat(t))}const R={border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1};var M=t(26092),B=t(2660),L=t(24516),H=t(74745),q=t(93038),F=t(10226),U=t(61467),W=t(29714),Y=t(93230),K=t(3788);const V=function(e){var n,t,i,a,c,r,s,l,d,u,h,v,m,g,A,x,p,f,j,y,b,I,S,C,P,E,_,w,z,T,k,N,O,R,M,q,F,U,W,V;let{invoice:J,index:X,handleBlur:G,handleChange:$,errors:Z,touched:Q}=e;return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsxs)(o.Ay,{container:!0,spacing:1,children:[(0,D.jsx)(o.Ay,{item:!0,xs:12,sm:12,md:1,lg:1,children:(0,D.jsxs)(Y.A,{spacing:1,children:[(0,D.jsx)(K.A,{htmlFor:"invoiceItems.".concat(X,".itemNo"),children:"Sl. No"}),(0,D.jsx)(B.A,{id:"invoiceItems.".concat(X,".itemNo"),type:"text",value:J.itemNo,name:"invoiceItems.".concat(X,".itemNo"),fullWidth:!0,disabled:!0})]})}),(0,D.jsx)(o.Ay,{item:!0,xs:12,sm:12,md:2,lg:2,children:(0,D.jsxs)(Y.A,{spacing:1,children:[(0,D.jsx)(K.A,{htmlFor:"invoiceItems.".concat(X,".desc"),children:"Description"}),(0,D.jsx)(B.A,{id:"invoiceItems.".concat(X,".desc"),type:"text",value:J.desc,name:"invoiceItems.".concat(X,".desc"),autoComplete:"off",onBlur:G,onChange:$,fullWidth:!0,error:Boolean((null===(n=Q.invoiceItems)||void 0===n||null===(t=n[X])||void 0===t?void 0:t.desc)&&(null===(i=Z.invoiceItems)||void 0===i||null===(a=i[X])||void 0===a?void 0:a.desc))}),(null===(c=Q.invoiceItems)||void 0===c||null===(r=c[X])||void 0===r?void 0:r.desc)&&(null===(s=Z.invoiceItems)||void 0===s||null===(l=s[X])||void 0===l?void 0:l.desc)&&(0,D.jsx)(L.A,{error:!0,id:"helper-text-invoiceItems.".concat(X,".desc"),children:Z.invoiceItems[X].desc})]})}),(0,D.jsx)(o.Ay,{item:!0,xs:12,sm:12,md:2,lg:2,children:(0,D.jsxs)(Y.A,{spacing:1,children:[(0,D.jsx)(K.A,{htmlFor:"invoiceItems.".concat(X,".uom"),children:"UMO"}),(0,D.jsx)(B.A,{id:"invoiceItems.".concat(X,".uom"),type:"text",value:J.uom,name:"invoiceItems.".concat(X,".uom"),autoComplete:"off",onBlur:G,onChange:$,fullWidth:!0,error:Boolean((null===(d=Q.invoiceItems)||void 0===d||null===(u=d[X])||void 0===u?void 0:u.uom)&&(null===(h=Z.invoiceItems)||void 0===h||null===(v=h[X])||void 0===v?void 0:v.uom))}),(null===(m=Q.invoiceItems)||void 0===m||null===(g=m[X])||void 0===g?void 0:g.uom)&&(null===(A=Z.invoiceItems)||void 0===A||null===(x=A[X])||void 0===x?void 0:x.uom)&&(0,D.jsx)(L.A,{error:!0,id:"helper-text-invoiceItems.".concat(X,".uom"),children:Z.invoiceItems[X].uom})]})}),(0,D.jsx)(o.Ay,{item:!0,xs:12,sm:12,md:2,lg:2,children:(0,D.jsxs)(Y.A,{spacing:1,children:[(0,D.jsx)(K.A,{htmlFor:"invoiceItems.".concat(X,".quantity"),children:"Quantity"}),(0,D.jsx)(B.A,{id:"invoiceItems.".concat(X,".quantity"),type:"number",value:J.quantity,name:"invoiceItems.".concat(X,".quantity"),autoComplete:"off",onBlur:G,onChange:$,fullWidth:!0,error:Boolean((null===(p=Q.invoiceItems)||void 0===p||null===(f=p[X])||void 0===f?void 0:f.quantity)&&(null===(j=Z.invoiceItems)||void 0===j||null===(y=j[X])||void 0===y?void 0:y.quantity))}),(null===(b=Q.invoiceItems)||void 0===b||null===(I=b[X])||void 0===I?void 0:I.quantity)&&(null===(S=Z.invoiceItems)||void 0===S||null===(C=S[X])||void 0===C?void 0:C.quantity)&&(0,D.jsx)(L.A,{error:!0,id:"helper-text-invoiceItems.".concat(X,".quantity"),children:Z.invoiceItems[X].quantity})]})}),(0,D.jsx)(o.Ay,{item:!0,xs:12,sm:12,md:2,lg:2,children:(0,D.jsxs)(Y.A,{spacing:1,children:[(0,D.jsx)(K.A,{htmlFor:"invoiceItems.".concat(X,".unitPrice"),children:"Unit Price"}),(0,D.jsx)(B.A,{id:"invoiceItems.".concat(X,".unitPrice"),type:"number",value:J.unitPrice,name:"invoiceItems.".concat(X,".unitPrice"),autoComplete:"off",onBlur:G,onChange:$,fullWidth:!0,error:Boolean((null===(P=Q.invoiceItems)||void 0===P||null===(E=P[X])||void 0===E?void 0:E.unitPrice)&&(null===(_=Z.invoiceItems)||void 0===_||null===(w=_[X])||void 0===w?void 0:w.unitPrice))}),(null===(z=Q.invoiceItems)||void 0===z||null===(T=z[X])||void 0===T?void 0:T.unitPrice)&&(null===(k=Z.invoiceItems)||void 0===k||null===(N=k[X])||void 0===N?void 0:N.unitPrice)&&(0,D.jsx)(L.A,{error:!0,id:"helper-text-invoiceItems.".concat(X,".unitPrice"),children:Z.invoiceItems[X].unitPrice})]})}),(0,D.jsx)(o.Ay,{item:!0,xs:12,sm:12,md:2,lg:2,children:(0,D.jsxs)(Y.A,{spacing:1,children:[(0,D.jsx)(K.A,{htmlFor:"invoiceItems.".concat(X,".total"),children:"Total"}),(0,D.jsx)(B.A,{id:"invoiceItems.".concat(X,".total"),type:"number",value:J.total,name:"invoiceItems.".concat(X,".total"),autoComplete:"off",onBlur:G,onChange:$,fullWidth:!0,error:Boolean((null===(O=Q.invoiceItems)||void 0===O||null===(R=O[X])||void 0===R?void 0:R.total)&&(null===(M=Z.invoiceItems)||void 0===M||null===(q=M[X])||void 0===q?void 0:q.total))}),(null===(F=Q.invoiceItems)||void 0===F||null===(U=F[X])||void 0===U?void 0:U.total)&&(null===(W=Z.invoiceItems)||void 0===W||null===(V=W[X])||void 0===V?void 0:V.total)&&(0,D.jsx)(L.A,{error:!0,id:"helper-text-invoiceItems.".concat(X,".total"),children:Z.invoiceItems[X].total})]})})]}),(0,D.jsx)(H.A,{sx:{mt:2,mb:2}})]})};const J=function(e){let{onDone:n}=e;const[t,a]=(0,i.useState)(null);return(0,D.jsx)(o.Ay,{container:!0,alignItems:"center",justifyContent:"space-between",children:(0,D.jsxs)(o.Ay,{item:!0,xs:12,lg:12,md:12,children:[(0,D.jsx)(U.l1,{initialValues:{invoiceNo:""},onSubmit:async(e,n)=>{let{setErrors:t,setStatus:i,setSubmitting:o}=n;try{o(!0);const n=await async function(e){return E.Jt("/organization/invoice/get/".concat(e))}(e.invoiceNo);a(n),i({success:!0})}catch(c){i({success:!1}),t({submit:c.message}),o(!1),(0,l.i)(!0,c.message,"error")}},validationSchema:W.Ik().shape({invoiceNo:W.Yj().max(25).required("Invoice Number is required")}),children:e=>{let{errors:n,handleBlur:t,handleChange:i,handleSubmit:o,isSubmitting:a,touched:c,values:l}=e;return(0,D.jsxs)("form",{onSubmit:o,children:[(0,D.jsxs)(d.A,{display:"flex",alignItems:"center",children:[(0,D.jsx)(B.A,{id:"invoiceNo",type:"text",value:l.invoiceNo,placeholder:"Invoice Number",name:"invoiceNo",autoComplete:"off",onBlur:t,onChange:i,error:Boolean(c.invoiceNo&&n.invoiceNo),sx:{marginRight:2}}),(0,D.jsx)(r.A,{children:(0,D.jsx)(s.A,{isLoading:a,disabled:a,color:"primary",size:"large",type:"submit",variant:"contained",id:"invoiceSearchBtn",children:"Search"})})]}),c.invoiceNo&&n.invoiceNo&&(0,D.jsx)(L.A,{error:!0,id:"helper-text-invoiceNo",children:n.invoiceNo})]})}}),t&&(0,D.jsxs)(o.Ay,{item:!0,xs:12,lg:12,md:12,children:[(0,D.jsx)(H.A,{sx:{mt:2,mb:2}}),(0,D.jsx)(X,{invoice:t,onDone:n})]})]})})};function X(e){let{invoice:n,onDone:t}=e;const i={_id:n._id||"",period:n.period,invoiceItems:n.details.items||[],sendEmail:!1},a=W.Ik().shape({invoiceItems:W.YO().of(W.Ik().shape({desc:W.Yj().required("Description is required"),total:W.Yj().required("Total is required")}))});return(0,D.jsx)(U.l1,{initialValues:i,onSubmit:async(e,n)=>{let{setErrors:i,setStatus:o,setSubmitting:a}=n;try{a(!0),await async function(e){return E.bE("/organization/invoice/create-or-update",e)}(e),t(),o({success:!0})}catch(c){o({success:!1}),i({submit:c.message}),a(!1),(0,l.i)(!0,c.message,"error")}},validationSchema:a,children:e=>{let{errors:n,handleBlur:t,handleChange:i,handleSubmit:a,isSubmitting:c,touched:l,values:d}=e;return(0,D.jsx)("form",{onSubmit:a,children:(0,D.jsx)(U.ED,{name:"invoiceItems",children:e=>{let{push:a}=e;return(0,D.jsxs)(D.Fragment,{children:[d.invoiceItems.map(((e,o)=>(0,D.jsx)(V,{invoice:e,index:o,handleBlur:t,handleChange:i,errors:n,touched:l},o))),(0,D.jsxs)(o.Ay,{container:!0,justifyContent:"flex-end",children:[(0,D.jsxs)(o.Ay,{item:!0,children:[(0,D.jsx)(q.A,{name:"sendEmail",onChange:i,inputProps:{"aria-label":"controlled"}}),"send email immediately"]}),(0,D.jsx)(o.Ay,{item:!0,sx:{marginLeft:2},children:(0,D.jsx)(r.A,{children:(0,D.jsx)(s.A,{isLoading:c,disabled:c,color:"primary",size:"large",type:"submit",variant:"contained",id:"invoiceSearchBtn",children:"Update Invoice"})})}),(0,D.jsx)(o.Ay,{item:!0,children:(0,D.jsx)(F.A,{sx:{marginLeft:2},variant:"contained",size:"large",onClick:()=>{const e=d.invoiceItems.length+1;a({itemNo:e,uom:"",quantity:"",unitPrice:"",desc:"",total:""})},children:"Add Item"})})]})]})}})})}})}const G=function(){const[e,n]=(0,i.useState)(!1),[t,d]=i.useState(!1),u=()=>d(!1);return(0,D.jsxs)(o.Ay,{container:!0,rowSpacing:4.5,columnSpacing:2.75,children:[(0,D.jsx)(o.Ay,{item:!0,xs:12,sx:{mb:-2.25},children:(0,D.jsxs)(o.Ay,{container:!0,alignItems:"center",justifyContent:"space-between",children:[(0,D.jsx)(o.Ay,{item:!0,xs:12,lg:6,md:12,children:(0,D.jsx)(a.A,{variant:"h5",children:"Organizations Invoice"})}),(0,D.jsxs)(o.Ay,{item:!0,xs:12,lg:6,md:12,container:!0,justifyContent:"flex-end",children:[(0,D.jsx)(r.A,{children:(0,D.jsx)(s.A,{isLoading:t,disabled:t,variant:"contained",color:"success",size:"large",onClick:async()=>{d(!0)},sx:{marginRight:2},children:"Edit Invoice"})}),(0,D.jsx)(r.A,{children:(0,D.jsx)(s.A,{isLoading:e,disabled:e,variant:"contained",color:"success",size:"large",onClick:async()=>{n(!0);try{const e=await _();if(e){n(!1);const{generated:t}=e;(0,l.i)(!0,"All Organizations invoice generated. Total number of invoice generated "+t,"success")}else n(!1),(0,l.i)(!0,"Not able to generate invoices, Please try after some time","error")}catch(e){n(!1),(0,l.i)(!0,"Not able to generate invoices, Please try after some time","error")}},children:"Generate Invoice"})})]}),(0,D.jsx)(M.A,{openPopUpDialog:t,onClose:u,title:"Edit or Create invoice",children:(0,D.jsx)(J,{onDone:u})})]})}),(0,D.jsx)(o.Ay,{item:!0,xs:12,zeroMinWidth:!0,children:(0,D.jsx)(c.A,{sx:{mt:2},content:!1,children:(0,D.jsx)(k,{})})})]})}},8478:(e,n,t)=>{t.d(n,{Jt:()=>a,Ne:()=>u,TF:()=>s,bE:()=>c,yJ:()=>r});var i=t(32026),o=t(44364);async function a(e,n){return l("GET",e,n,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}async function c(e,n){return l("POST",e,n,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}async function r(e,n){return l("PUT",e,n,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}async function s(e,n){return l("DELETE",e,n,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}async function l(e,n,t){let{headers:i,noAuth:o,...a}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const c="POST"===e||"PUT"===e||"DELETE"===e;n=u(n,c?void 0:t);const r=t instanceof FormData;if(r||(t=t&&"object"===typeof t&&c?JSON.stringify(t):void 0),i||(i={}),r||(i["Content-Type"]="application/json"),i.Accept="application/json",!1!==o){const e=sessionStorage.getItem("token");e&&(i.Authorization="Bearer ".concat(e))}try{const o=await fetch(n,{...a,headers:i,body:t,method:e}),c=await o.json();if(o.ok){const{data:e,...n}=c;return delete n.status,e&&!Object.keys(n).length?e:c}throw c.message?new Error(c.message):c}catch(l){var s;throw console.error("Error calling API: ",l),null!==(s=l.message)&&void 0!==s&&s.includes("fetch")?new Error("Unable to reach server. Please check your network connectivity and try again."):new Error(l.message)}}const d=(0,i.s8)(o.jn,"/");function u(e,n){if(!e)return e;const t=n&&Object.keys(n);if(null!==t&&void 0!==t&&t.length){const i=t.reduce(((e,t)=>{let i=n[t];return null===i||void 0===i?e:(i="".concat(t,"=").concat(encodeURIComponent(i)),e?"".concat(e,"&").concat(i):i)}),"");i&&(e="".concat(e).concat(e.includes("?")?"&":"?").concat(i))}return e.startsWith("https://")?e:"".concat(d).concat(e)}},41507:(e,n,t)=>{t.d(n,{Ds:()=>s,L_:()=>c,NC:()=>r,YS:()=>a,cw:()=>d,qb:()=>l});var i=t(8478),o=t(33340);async function a(e,n){const t=await async function(){const e=o.nc.getState();let{organizationList:n,organizationId:t,organization:a}=e;if(!e.isSuperUser||Array.isArray(n))return;if(n=await i.bE("/superAdmin/get-all-organization"),n.length)if(t=t||sessionStorage.getItem("orgId"),t){if(!a){var c;a=null===(c=n)||void 0===c?void 0:c.filter((e=>e._id===t))[0]}}else{const e=n[0];t=e._id,a=e}return o.nc.setState({organizationList:n,organizationId:t,organization:a}),!0}(),{organizationId:a}=o.nc.getState();return e?e!==a&&o.nc.setState({organizationId:e}):e=a,!e||(t||await async function(e){const n=await i.bE("/organization/get-organization-by-id",{organizationId:e});o.nc.setState({organization:n})}(e),await s(e,n),!0)}async function c(e,n){n||(n=o.nc.getState().organizationId);const t=await i.yJ("/organization/".concat(n),e);o.nc.setState((e=>{const{organizationList:i,organizationId:o,organization:a}=e,c={};return o===n&&(c.organization={...a,...t}),i&&(c.organizationList=i.map((e=>e._id===n?{...e,...t}:e))),c}))}function r(e){if(!e||"object"!==typeof e)return;let{organization:n}=o.nc.getState();n&&(n={...n,...e},o.nc.setState({organization:n}))}async function s(e,n){var t;const a=await i.bE("/bot/get-all-bots",{organizationId:e}),c=n||(null===(t=a[0])||void 0===t?void 0:t._id),r=a.reduce(((e,n)=>(e[n._id]=n,e)),{});return o.nc.setState({organizationId:e,botsList:a,botsMap:r,selectedBotId:c}),c}function l(e){o.nc.setState({selectedBotId:e})}async function d(){const e=await i.Jt("/organization/invoice/list");o.nc.setState({organizationsInvoiceList:e})}},32026:(e,n,t)=>{function i(e,n){return e.replace(new RegExp("".concat(o(n),"+$")),"")}function o(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function a(e){const n=new Date(e),t=n.getDate(),i=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][n.getMonth()],o=n.getFullYear();return"".concat(i," ").concat(t,", ").concat(o)}function c(e,n,t){if(!n&&!e)return t;e=e||{};const i=Array.isArray(e)?[...e]:{...e};if(n.includes(".")){const o=n.indexOf("."),a=n.substring(0,o),r=n.substring(o+1);i[a]=c(e[a],r,t)}else i[n]=t;return i}function r(e,n){return btoa("".concat(e,"_").concat(n,"_whatsapp_int"))}function s(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:12;const n="abcdefghijklmnopqrstuvwxyz0123456789";let t="";for(let i=0;i<e;i++)t+=n.charAt(Math.floor(36*Math.random()));return t}function l(e,n,t){if(!n&&!e)return t;e=e||{};const i=Array.isArray(e)?[...e]:{...e};if(n.includes(".")){const o=n.indexOf("."),a=n.substring(0,o),c=n.substring(o+1);i[a]=l(e[a],c,t)}else i[n]=t;return i}t.d(n,{G6:()=>c,OX:()=>s,Yq:()=>a,do:()=>l,qW:()=>r,s8:()=>i})},44364:(e,n,t)=>{t.d(n,{DX:()=>r,Og:()=>a,jn:()=>i,pA:()=>c,pR:()=>o});const i="https://devbackend.livhousing.com",o="c17b949cf58c45cae47ce1cc65efc8240f77a2a69ca09ad4c4208852",a={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_IP_DATA_API_KEY:"c17b949cf58c45cae47ce1cc65efc8240f77a2a69ca09ad4c4208852",REACT_APP_VERSION:"1",REACT_APP_BACKEND_URL:"https://devbackend.livhousing.com"}.TRAINING_MEDIA_MAXSIZE,c={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_IP_DATA_API_KEY:"c17b949cf58c45cae47ce1cc65efc8240f77a2a69ca09ad4c4208852",REACT_APP_VERSION:"1",REACT_APP_BACKEND_URL:"https://devbackend.livhousing.com"}.CONVERSATION_MEDIA_MAXSIZE,r={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_IP_DATA_API_KEY:"c17b949cf58c45cae47ce1cc65efc8240f77a2a69ca09ad4c4208852",REACT_APP_VERSION:"1",REACT_APP_BACKEND_URL:"https://devbackend.livhousing.com"}.REACT_APP_NGROK_BACKEND_URL||"https://devbackend.livhousing.com"},90587:(e,n,t)=>{function i(e,n){return"desc"===e?(e,t)=>o(e,t,n):(e,t)=>-o(e,t,n)}function o(e,n,t){return n[t]<e[t]?-1:n[t]>e[t]?1:0}function a(e,n){const t=e.map(((e,n)=>[e,n]));return t.sort(((e,t)=>{const i=n(e[0],t[0]);return 0!==i?i:e[1]-t[1]})),t.map((e=>e[0]))}t.d(n,{h:()=>i,q:()=>a})},29635:(e,n,t)=>{var i=t(24994);n.A=void 0;var o=i(t(79526)),a=t(44414);n.A=(0,o.default)((0,a.jsx)("path",{d:"M5 20h14v-2H5zM19 9h-4V3H9v6H5l7 7z"}),"Download")},69755:(e,n,t)=>{var i=t(24994);n.A=void 0;var o=i(t(79526)),a=t(44414);n.A=(0,o.default)((0,a.jsx)("path",{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2m0 4-8 5-8-5V6l8 5 8-5z"}),"Email")},93038:(e,n,t)=>{t.d(n,{A:()=>_});var i=t(98587),o=t(58168),a=t(9950),c=t(72004),r=t(74061),s=t(99269),l=t(46282),d=t(23235),u=t(44414);const h=(0,d.A)((0,u.jsx)("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),v=(0,d.A)((0,u.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),m=(0,d.A)((0,u.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");var g=t(61676),A=t(48283),x=t(59254),p=t(19608),f=t(80863),j=t(68483);function y(e){return(0,j.Ay)("MuiCheckbox",e)}const b=(0,f.A)("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]),I=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size","className"],S=(0,x.Ay)(l.A,{shouldForwardProp:e=>(0,p.A)(e)||"classes"===e,name:"MuiCheckbox",slot:"Root",overridesResolver:(e,n)=>{const{ownerState:t}=e;return[n.root,t.indeterminate&&n.indeterminate,n["size".concat((0,g.A)(t.size))],"default"!==t.color&&n["color".concat((0,g.A)(t.color))]]}})((e=>{let{theme:n,ownerState:t}=e;return(0,o.A)({color:(n.vars||n).palette.text.secondary},!t.disableRipple&&{"&:hover":{backgroundColor:n.vars?"rgba(".concat("default"===t.color?n.vars.palette.action.activeChannel:n.vars.palette[t.color].mainChannel," / ").concat(n.vars.palette.action.hoverOpacity,")"):(0,s.X4)("default"===t.color?n.palette.action.active:n.palette[t.color].main,n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"default"!==t.color&&{["&.".concat(b.checked,", &.").concat(b.indeterminate)]:{color:(n.vars||n).palette[t.color].main},["&.".concat(b.disabled)]:{color:(n.vars||n).palette.action.disabled}})})),C=(0,u.jsx)(v,{}),P=(0,u.jsx)(h,{}),E=(0,u.jsx)(m,{}),_=a.forwardRef((function(e,n){var t,s;const l=(0,A.A)({props:e,name:"MuiCheckbox"}),{checkedIcon:d=C,color:h="primary",icon:v=P,indeterminate:m=!1,indeterminateIcon:x=E,inputProps:p,size:f="medium",className:j}=l,b=(0,i.A)(l,I),_=m?x:v,w=m?x:d,z=(0,o.A)({},l,{color:h,indeterminate:m,size:f}),T=(e=>{const{classes:n,indeterminate:t,color:i,size:a}=e,c={root:["root",t&&"indeterminate","color".concat((0,g.A)(i)),"size".concat((0,g.A)(a))]},s=(0,r.A)(c,y,n);return(0,o.A)({},n,s)})(z);return(0,u.jsx)(S,(0,o.A)({type:"checkbox",inputProps:(0,o.A)({"data-indeterminate":m},p),icon:a.cloneElement(_,{fontSize:null!=(t=_.props.fontSize)?t:f}),checkedIcon:a.cloneElement(w,{fontSize:null!=(s=w.props.fontSize)?s:f}),ownerState:z,ref:n,className:(0,c.A)(T.root,j)},b,{classes:T}))}))}}]);