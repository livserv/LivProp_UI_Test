"use strict";(self.webpackChunklib_prop_ui=self.webpackChunklib_prop_ui||[]).push([[1533],{32829:(e,i,n)=>{n.d(i,{A:()=>a});var t=n(25371),r=n(44414);function a(e){let{children:i,type:n}=e;return(0,r.jsx)(t.P.div,{whileHover:{scale:1},whileTap:{scale:.9},children:i})}a.defaultProps={type:"scale"}},46278:(e,i,n)=>{n.d(i,{A:()=>d});n(9950);var t=n(63464),r=n(40033),a=n(28170),o=n(79739),l=n(10226),s=n(44414);const d=e=>{const{title:i,children:n,open:d,setOpen:c,onConfirm:h}=e;return(0,s.jsxs)(t.A,{open:d,onClose:()=>c(!1),style:{zIndex:1e4},children:[(0,s.jsx)(r.A,{sx:{m:0,p:2},id:"confirm-dialog",children:i}),(0,s.jsx)(a.A,{dividers:!0,children:n}),(0,s.jsxs)(o.A,{children:[(0,s.jsx)(l.A,{size:"large",type:"submit",variant:"contained",color:"secondary",onClick:()=>c(!1),children:"No"}),(0,s.jsx)(l.A,{size:"large",type:"submit",variant:"contained",color:"success",onClick:()=>{c(!1),h()},children:"Yes"})]})]})}},92728:(e,i,n)=>{n.d(i,{A:()=>o});var t=n(9950),r=n(48205),a=n(44414);const o=t.forwardRef((function(e,i){return(0,a.jsx)(r.A,{direction:"up",ref:i,...e})}))},51637:(e,i,n)=>{n.d(i,{A:()=>h});var t=n(9950),r=n(14857),a=n(48089),o=n(45180),l=n(82053),s=n(50704),d=n(44414);const c={p:2.5,"& .MuiCardHeader-action":{m:"0px auto",alignSelf:"center"}},h=(0,t.forwardRef)(((e,i)=>{let{border:n=!0,boxShadow:t,children:h,content:p=!0,contentSX:u={},darkTitle:m,elevation:x,secondary:A,shadow:g,sx:j={},title:b,...y}=e;const f=(0,r.A)();return t="dark"===f.palette.mode?t||!0:t,(0,d.jsxs)(a.A,{elevation:x||0,ref:i,...y,sx:{border:n?"1px solid":"none",borderRadius:2,borderColor:"dark"===f.palette.mode?f.palette.divider:f.palette.grey.A800,boxShadow:!t||n&&"dark"!==f.palette.mode?"inherit":g||f.customShadows.z1,":hover":{boxShadow:t?g||f.customShadows.z1:"inherit"},"& pre":{m:0,p:"16px !important",fontFamily:f.typography.fontFamily,fontSize:"0.75rem"},...j},children:[!m&&b&&(0,d.jsx)(o.A,{sx:c,titleTypographyProps:{variant:"subtitle1"},title:b,action:A}),m&&b&&(0,d.jsx)(o.A,{sx:c,title:(0,d.jsx)(l.A,{variant:"h3",children:b}),action:A}),p&&(0,d.jsx)(s.A,{sx:u,children:h}),!p&&h]})}))},26092:(e,i,n)=>{n.d(i,{A:()=>u});n(9950);var t=n(92728),r=n(63464),a=n(40033),o=n(28170),l=n(96319),s=n(59254),d=n(14857),c=n(25333),h=n(44414);const p=(0,s.Ay)(r.A)((e=>{let{theme:i}=e;return{"& .MuiDialogContent-root":{padding:i.spacing(2)},"& .MuiDialogActions-root":{padding:i.spacing(1)},zIndex:11010}}));function u(e){const i=(0,d.A)(),{breakpoints:n}=i,{openPopUpDialog:r,setPopUpDialog:s,onClose:u=()=>s(!1),title:m,width:x="70%"}=e;return(0,h.jsxs)(p,{TransitionComponent:t.A,"aria-labelledby":"customized-dialog-title",open:r,PaperProps:{sx:{width:{width:x},[n.down("sm")]:{width:"90%"}}},children:[(0,h.jsx)(a.A,{sx:{m:0,p:2},id:"customized-dialog-title",children:m}),(0,h.jsx)(c.A,{"aria-label":"close",onClick:u,sx:{position:"absolute",right:8,top:8},children:(0,h.jsx)(l.A,{})}),(0,h.jsx)(o.A,{dividers:!0,children:e.children})]})}},93383:(e,i,n)=>{n.d(i,{A:()=>l});var t=n(9950),r=n(10226),a=n(46639),o=n(44414);const l=function(e){let{onClick:i,disabled:n,isLoading:l,children:s,...d}=e;const[c,h]=t.useState(l);return(0,o.jsxs)(r.A,{onClick:e=>{if(!i)return;const n=i(e);"function"===typeof(null===n||void 0===n?void 0:n.finally)&&(h(!0),n.finally((()=>h(!1))))},disabled:c||l||n,...d,children:[(c||l)&&(0,o.jsx)(a.A,{size:16,color:"primary",style:{marginRight:"10px"}}),s]})}},41533:(e,i,n)=>{n.r(i),n.d(i,{default:()=>Z});var t=n(9950),r=n(16491),a=n(60899),o=n(82053),l=n(10226),s=n(53065),d=n(2660),c=n(24516),h=n(50704),p=n(59254),u=n(80417),m=n(79046),x=n(33092),A=n(92613),g=n(15942),j=n(7999),b=n(57988),y=n(25333),f=n(69935),v=n(61467),C=n(29714),I=n(33340),S=n(70855),k=n(8478),N=n(21788);async function w(e){const i=await k.Jt(`/integrations/${e.organizationId}/${e.botId}/crm-callback-integration/list`),{botId:n}=e;((e,i)=>{I.nc.setState((n=>{const t=n.botsList.map((n=>n._id===e?{...n,integrations:i}:n));return{...n,botsList:t}}))})(n,i)}async function _(e){const i=await k.bE(`/integrations/${e.organizationId}/${e.botId}/crm-callback-integration`,e),n={organizationId:i.organizationId,botId:i.botId};try{await w(n)}catch(t){(0,N.i)(!0,"Not able to fetch all integrations. Try after sometime!","error")}}async function U(e){const{organizationId:i,selectedBotId:n}=I.nc.getState();await k.bE(`/integrations/${i}/${n}/whatsapp`,e);try{await w({organizationId:i,botId:n})}catch(t){(0,N.i)(!0,"Not able to fetch all integrations. Try after sometime!","error")}}var P=n(95189),T=n.n(P),E=n(26092),R=n(51637),z=n(46278),D=n(32829),B=n(93383),L=n(93230),$=n(3788),F=n(44414);const O=function(e){let{botId:i,organizationId:n,setPopUpDialog:t}=e;return(0,F.jsx)(a.Ay,{item:!0,xs:12,children:(0,F.jsx)(v.l1,{initialValues:{crmCallBackUrl:""},validationSchema:C.Ik().shape({crmCallBackUrl:C.Yj().url("Enter valid url!").required("CRM Callback URL is required")}),onSubmit:async(e,r)=>{let{setErrors:a,setStatus:o,setSubmitting:l}=r;try{const r={botId:i,organizationId:n,callbackURL:e.crmCallBackUrl,channelId:"CRM_Callback_123",channelName:"CRM_Callback"};await _(r),o({success:!0}),l(!0),t(!1),(0,N.i)(!0,"The CRM callback url added successfully!","success")}catch(s){o({success:!1}),a({submit:s.message}),l(!1),(0,N.i)(!0,"Not able to CRM callback url. Try after sometime!","error")}},children:e=>{let{errors:i,handleBlur:n,handleChange:t,handleSubmit:r,isSubmitting:o,touched:l,values:s}=e;return(0,F.jsx)("form",{noValidate:!0,onSubmit:r,children:(0,F.jsxs)(a.Ay,{container:!0,spacing:1,children:[(0,F.jsx)(a.Ay,{item:!0,xs:12,md:12,children:(0,F.jsxs)(L.A,{spacing:1,children:[(0,F.jsx)($.A,{htmlFor:"email-login",children:"CRM callback URL"}),(0,F.jsx)(d.A,{id:"crmCallBackUrl",type:"url",defaultValue:s.crmCallBackUrl,name:"crmCallBackUrl",onBlur:n,onChange:t,fullWidth:!0,autoComplete:"off",error:Boolean(l.crmCallBackUrl&&i.crmCallBackUrl)}),l.crmCallBackUrl&&i.crmCallBackUrl&&(0,F.jsx)(c.A,{error:!0,id:"helper-text-crm-url",children:i.crmCallBackUrl})]})}),i.submit&&(0,F.jsx)(a.Ay,{item:!0,xs:12,children:(0,F.jsx)(c.A,{error:!0,children:i.submit})}),(0,F.jsx)(a.Ay,{item:!0,xs:12,container:!0,justifyContent:"flex-end",children:(0,F.jsx)(D.A,{children:(0,F.jsx)(B.A,{isLoading:o,disabled:o,color:"primary",size:"large",type:"submit",variant:"contained",children:"Add"})})})]})})}})})};var W=n(44364),M=n(32026);const H=function(e){let{botId:i,organizationId:n,setPopUpDialog:t,whatsappIntegrationObj:r,edit:o}=e;return(0,F.jsx)(a.Ay,{item:!0,xs:12,children:(0,F.jsx)(v.l1,{initialValues:{webHookUrl:`${W.DX}/whatsapp/${n}/${i}/entrypoint`,webHookSecret:(0,M.qW)(n,i),appId:(null===r||void 0===r?void 0:r.appId)||"",appSecret:(null===r||void 0===r?void 0:r.appSecret)||"",appName:(null===r||void 0===r?void 0:r.appName)||"",phoneNumberId:(null===r||void 0===r?void 0:r.phoneNumberId)||"",verificationToken:(null===r||void 0===r?void 0:r.verificationToken)||"",channelId:"whatsapp_123",channelName:"whatsapp",leadCategory:(null===r||void 0===r?void 0:r.leadCategory)||"preSale"},validationSchema:C.Ik().shape({appId:C.ai().required("App ID must be a number"),appSecret:C.Yj().required("App secret is required"),appName:C.Yj().required("App name is required"),phoneNumberId:C.ai().min(10,"Please enter a valid phone number id").required("Phone number is required"),verificationToken:C.Yj().required("verification Token  is required")}),onSubmit:async(e,i)=>{let{setErrors:n,setStatus:a,setSubmitting:o}=i;try{let i=e;const n=null===r||void 0===r?void 0:r._id;n&&(i={...e,objId:n}),await U(i),a({success:!0}),o(!0),t(!1),(0,N.i)(!0,"The WhatsApp integration added successfully!","success")}catch(l){a({success:!1}),n({submit:l.message}),o(!1),(0,N.i)(!0,"Not able to activate WhatsApp integration. Try after sometime!","error")}},children:e=>{let{errors:i,handleBlur:n,handleChange:t,handleSubmit:r,isSubmitting:l,touched:s,values:h}=e;return(0,F.jsx)("form",{noValidate:!0,onSubmit:r,children:(0,F.jsxs)(a.Ay,{container:!0,spacing:1,children:[(0,F.jsx)(a.Ay,{item:!0,xs:12,md:6,children:(0,F.jsxs)(L.A,{spacing:1,children:[(0,F.jsx)($.A,{htmlFor:"webhook-url",children:"Webhook Callback URL *"}),(0,F.jsx)(T(),{text:h.webHookUrl,onCopy:()=>(0,N.i)(!0,"Webhook Callback URL copied to clipboard","success"),children:(0,F.jsx)(d.A,{id:"webHookUrl",type:"url",defaultValue:h.webHookUrl,name:"webHookUrl",onBlur:n,onChange:t,fullWidth:!0,autoComplete:"off",error:Boolean(s.webHookUrl&&i.webHookUrl)})}),s.webHookUrl&&i.webHookUrl&&(0,F.jsx)(c.A,{error:!0,id:"helper-text-webHookUrl",children:i.webHookUrl})]})}),(0,F.jsx)(a.Ay,{item:!0,xs:12,md:6,children:(0,F.jsxs)(L.A,{spacing:1,children:[(0,F.jsx)($.A,{htmlFor:"webHookSecret",children:"Webhook Verify Token *"}),(0,F.jsx)(T(),{text:h.webHookSecret,onCopy:()=>(0,N.i)(!0,"Webhook Verify Token copied to clipboard","success"),children:(0,F.jsx)(d.A,{id:"webHookSecret",type:"url",defaultValue:h.webHookSecret,name:"webHookSecret",onBlur:n,onChange:t,fullWidth:!0,autoComplete:"off",error:Boolean(s.webHookSecret&&i.webHookSecret)})}),s.webHookSecret&&i.webHookSecret&&(0,F.jsx)(c.A,{error:!0,id:"helper-text-webHookSecret",children:i.webHookSecret})]})}),(0,F.jsx)(a.Ay,{item:!0,xs:12,md:6,children:(0,F.jsxs)(L.A,{spacing:1,children:[(0,F.jsx)($.A,{htmlFor:"app-id",children:"App ID *"}),(0,F.jsx)(d.A,{id:"appId",type:"url",defaultValue:h.appId,name:"appId",onBlur:n,onChange:t,fullWidth:!0,autoComplete:"off",error:Boolean(s.appId&&i.appId)}),s.appId&&i.appId&&(0,F.jsx)(c.A,{error:!0,id:"helper-text-appId",children:i.appId})]})}),(0,F.jsx)(a.Ay,{item:!0,xs:12,md:6,children:(0,F.jsxs)(L.A,{spacing:1,children:[(0,F.jsx)($.A,{htmlFor:"app-secret",children:"App Secret *"}),(0,F.jsx)(d.A,{id:"appSecret",type:"url",defaultValue:h.appSecret,name:"appSecret",onBlur:n,onChange:t,fullWidth:!0,autoComplete:"off",error:Boolean(s.appSecret&&i.appSecret)}),s.appSecret&&i.appSecret&&(0,F.jsx)(c.A,{error:!0,id:"helper-text-appSecret",children:i.appSecret})]})}),(0,F.jsx)(a.Ay,{item:!0,xs:12,md:6,children:(0,F.jsxs)(L.A,{spacing:1,children:[(0,F.jsx)($.A,{htmlFor:"app-name",children:"App Name *"}),(0,F.jsx)(d.A,{id:"appName",type:"url",defaultValue:h.appName,name:"appName",onBlur:n,onChange:t,fullWidth:!0,autoComplete:"off",error:Boolean(s.appName&&i.appName)}),s.appName&&i.appName&&(0,F.jsx)(c.A,{error:!0,id:"helper-text-appName",children:i.appName})]})}),(0,F.jsx)(a.Ay,{item:!0,xs:12,md:6,children:(0,F.jsxs)(L.A,{spacing:1,children:[(0,F.jsx)($.A,{htmlFor:"phone-number",children:"Phone Number ID *"}),(0,F.jsx)(d.A,{id:"phoneNumberId",type:"text",defaultValue:h.phoneNumberId,name:"phoneNumberId",onBlur:n,onChange:t,fullWidth:!0,autoComplete:"off",error:Boolean(s.phoneNumberId&&i.phoneNumberId)}),s.phoneNumberId&&i.phoneNumberId&&(0,F.jsx)(c.A,{error:!0,id:"helper-text-phoneNumberId",children:i.phoneNumberId})]})}),(0,F.jsx)(a.Ay,{item:!0,xs:12,children:(0,F.jsxs)(L.A,{spacing:1,children:[(0,F.jsx)($.A,{htmlFor:"verification-token",children:"Access Token *"}),(0,F.jsx)(d.A,{id:"verificationToken",type:"phone",defaultValue:h.verificationToken,name:"verificationToken",onBlur:n,onChange:t,fullWidth:!0,autoComplete:"off",error:Boolean(s.verificationToken&&i.verificationToken)}),s.verificationToken&&i.verificationToken&&(0,F.jsx)(c.A,{error:!0,id:"helper-text-verificationToken",children:i.verificationToken})]})}),(0,F.jsx)(a.Ay,{item:!0,xs:12,md:6,children:(0,F.jsxs)(L.A,{spacing:1,children:[(0,F.jsx)($.A,{htmlFor:"lead-category",children:"Initial Lead Category"}),(0,F.jsxs)("select",{id:"leadCategory",title:"Select Category",style:{height:"45px"},value:h.leadCategory||"preSale",onBlur:n,onChange:t,children:[(0,F.jsx)("option",{value:"preSale",children:"Presale"}),(0,F.jsx)("option",{value:"general",children:"General"}),(0,F.jsx)("option",{value:"others",children:"Others"})]}),s.leadCategory&&i.leadCategory&&(0,F.jsx)(c.A,{error:!0,id:"helper-text-leadCategory",children:i.leadCategory})]})}),i.submit&&(0,F.jsx)(a.Ay,{item:!0,xs:12,children:(0,F.jsx)(c.A,{error:!0,children:i.submit})}),(0,F.jsx)(a.Ay,{item:!0,xs:12,container:!0,justifyContent:"flex-end",children:(0,F.jsx)(D.A,{children:(0,F.jsx)(B.A,{isLoading:l,disabled:l,color:"primary",size:"large",type:"submit",variant:"contained",children:o?"Edit":"Add"})})})]})})}})})};var G=n(74745),V=n(47813);const q=function(e){var i,n,t,r,o,l,s,h,p,u,m,x,A,g,j,b,y,f,v,C,I,S,k,N;let{admins:w,index:_,handleBlur:U,handleChange:P,errors:T,touched:E,remove:R}=e;return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsxs)(a.Ay,{container:!0,spacing:1,children:[(0,F.jsx)(a.Ay,{item:!0,xs:12,sm:12,md:3,lg:3,children:(0,F.jsxs)(L.A,{spacing:1,children:[(0,F.jsx)($.A,{htmlFor:`admins.${_}.adminName`,children:"Admin Name"}),(0,F.jsx)(d.A,{id:`admins.${_}.adminName`,type:"text",value:w.adminName,name:`admins.${_}.adminName`,autoComplete:"off",onBlur:U,onChange:P,fullWidth:!0,disabled:0===_,error:Boolean((null===(i=E.admins)||void 0===i||null===(n=i[_])||void 0===n?void 0:n.adminName)&&(null===(t=T.adminss)||void 0===t||null===(r=t[_])||void 0===r?void 0:r.adminName))}),(null===(o=E.admins)||void 0===o||null===(l=o[_])||void 0===l?void 0:l.adminName)&&(null===(s=T.admins)||void 0===s||null===(h=s[_])||void 0===h?void 0:h.adminName)&&(0,F.jsx)(c.A,{error:!0,id:`helper-text-admins.${_}.adminName`,children:T.admins[_].adminName})]})}),(0,F.jsx)(a.Ay,{item:!0,xs:12,sm:12,md:3,lg:3,children:(0,F.jsxs)(L.A,{spacing:1,children:[(0,F.jsx)($.A,{htmlFor:`admins.${_}.role`,children:"Role"}),(0,F.jsx)(d.A,{id:`admins.${_}.role`,type:"text",value:w.role,name:`admins.${_}.role`,autoComplete:"off",onBlur:U,onChange:P,fullWidth:!0,disabled:0===_,error:Boolean((null===(p=E.admins)||void 0===p||null===(u=p[_])||void 0===u?void 0:u.role)&&(null===(m=T.admins)||void 0===m||null===(x=m[_])||void 0===x?void 0:x.role))}),(null===(A=E.admins)||void 0===A||null===(g=A[_])||void 0===g?void 0:g.role)&&(null===(j=T.admins)||void 0===j||null===(b=j[_])||void 0===b?void 0:b.role)&&(0,F.jsx)(c.A,{error:!0,id:`helper-text-role.${_}.role`,children:T.admins[_].role})]})}),(0,F.jsx)(a.Ay,{item:!0,xs:12,sm:12,md:5,lg:5,children:(0,F.jsxs)(L.A,{spacing:1,children:[(0,F.jsx)($.A,{htmlFor:`admins.${_}.email`,children:"Email"}),(0,F.jsx)(d.A,{id:`admins.${_}.email`,type:"text",value:w.email,name:`admins.${_}.email`,autoComplete:"off",onBlur:U,onChange:P,fullWidth:!0,disabled:0===_,error:Boolean((null===(y=E.admins)||void 0===y||null===(f=y[_])||void 0===f?void 0:f.email)&&(null===(v=T.admins)||void 0===v||null===(C=v[_])||void 0===C?void 0:C.email))}),(null===(I=E.admins)||void 0===I||null===(S=I[_])||void 0===S?void 0:S.email)&&(null===(k=T.admins)||void 0===k||null===(N=k[_])||void 0===N?void 0:N.email)&&(0,F.jsx)(c.A,{error:!0,id:`helper-text-email.${_}.email`,children:T.admins[_].email})]})}),(0,F.jsx)(a.Ay,{item:!0,xs:12,sm:12,md:1,lg:1,children:0!=_&&(0,F.jsxs)(L.A,{spacing:1,children:[(0,F.jsx)($.A,{htmlFor:`admins.${_}.delete`,children:"Delete"}),(0,F.jsx)(V.A,{sx:{cursor:"pointer",color:"#ee2a2a"},onClick:()=>R(_)})]})})]}),(0,F.jsx)(G.A,{sx:{mt:2,mb:2}})]})};var Y=n(41507);const K=function(e){let{organizationId:i}=e;const n={admins:(0,I.nc)((e=>{var i;return null===(i=e.organization)||void 0===i?void 0:i.admins}))||[]},t=new RegExp(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/),r=C.Ik().shape({admins:C.YO().of(C.Ik().shape({adminName:C.Yj().required("Admin Name is required"),role:C.Yj().required("Role is required"),email:C.Yj().trim().required("Email is required").email("Invalid email id").matches(t,"Invalid email id")}))});return(0,F.jsx)(R.A,{contentSX:{p:2.25},children:(0,F.jsxs)(h.A,{style:{padding:0},children:[(0,F.jsxs)(o.A,{variant:"h6",children:[(0,F.jsx)("strong",{children:"Lead emails are sending to below given email ids"}),(0,F.jsx)("br",{}),(0,F.jsx)("br",{})]}),(0,F.jsx)(v.l1,{initialValues:n,onSubmit:async(e,n)=>{let{setErrors:t,setStatus:r,setSubmitting:a}=n;try{a(!0),await(0,Y.L_)(e,i),r({success:!0})}catch(o){r({success:!1}),t({submit:o.message}),a(!1),alertSnackbar(!0,o.message,"error")}},validationSchema:r,children:e=>{let{errors:i,handleBlur:n,handleChange:t,handleSubmit:r,touched:o,values:s,setFieldValue:d,isSubmitting:c}=e;return(0,F.jsx)("form",{onSubmit:e=>{r(e)},children:(0,F.jsx)(v.ED,{name:"admins",children:e=>{let{push:r,remove:h}=e;return(0,F.jsxs)(F.Fragment,{children:[s.admins.map(((e,r)=>(0,F.jsx)(q,{admins:e,index:r,handleBlur:n,handleChange:t,errors:i,touched:o,remove:e=>{h(e);const i=s.admins.filter(((i,n)=>n!==e)).map(((e,i)=>({...e,itemNo:i+1})));d("admins",i)}},r))),(0,F.jsxs)(a.Ay,{container:!0,justifyContent:"flex-end",children:[(0,F.jsx)(a.Ay,{item:!0,children:(0,F.jsx)(l.A,{sx:{marginLeft:2},variant:"contained",size:"large",onClick:()=>{r({adminName:"",role:"",email:""})},children:"Add Email"})}),(0,F.jsx)(a.Ay,{item:!0,sx:{marginLeft:2},children:(0,F.jsx)(D.A,{children:(0,F.jsx)(B.A,{isLoading:c,disabled:c,color:"primary",size:"large",type:"submit",variant:"contained",id:"updateEmailsBtn",children:"Save Changes"})})})]})]})}})})}})]})})};const J=function(e){let{botId:i,organizationId:n,setPopUpDialog:t,gupshupIntegrationObj:r,edit:o}=e;return(0,F.jsx)(a.Ay,{item:!0,xs:12,children:(0,F.jsx)(v.l1,{initialValues:{webHookUrl:`${W.DX}/gupshup/${n}/${i}/entrypoint`,appId:(null===r||void 0===r?void 0:r.appId)||"",appName:(null===r||void 0===r?void 0:r.appName)||"",phoneNumberId:(null===r||void 0===r?void 0:r.phoneNumberId)||"",channelId:"gupshup_123",channelName:"gupshup",leadCategory:(null===r||void 0===r?void 0:r.leadCategory)||"preSale"},validationSchema:C.Ik().shape({appId:C.Yj().required("App ID must is required"),appName:C.Yj().required("App name is required"),phoneNumberId:C.ai().min(10,"Please enter a valid phone number id").required("Phone number is required")}),onSubmit:async(e,i)=>{let{setErrors:n,setStatus:a,setSubmitting:o}=i;try{let i=e;const n=null===r||void 0===r?void 0:r._id;r&&(i={...e,objId:n}),await U(i),a({success:!0}),o(!0),t(!1),(0,N.i)(!0,"The Gupshup integration added successfully!","success")}catch(l){a({success:!1}),n({submit:l.message}),o(!1),(0,N.i)(!0,"Not able to activate Gupshup integration. Try after sometime!","error")}},children:e=>{let{errors:i,handleBlur:n,handleChange:t,handleSubmit:r,isSubmitting:l,touched:s,values:h}=e;return(0,F.jsx)("form",{noValidate:!0,onSubmit:r,children:(0,F.jsxs)(a.Ay,{container:!0,spacing:1,children:[(0,F.jsx)(a.Ay,{item:!0,xs:12,md:6,children:(0,F.jsxs)(L.A,{spacing:1,children:[(0,F.jsx)($.A,{htmlFor:"webhook-url",children:"Gupshup Callback URL *"}),(0,F.jsx)(T(),{text:h.webHookUrl,onCopy:()=>(0,N.i)(!0,"Webhook Callback URL copied to clipboard","success"),children:(0,F.jsx)(d.A,{id:"webHookUrl",type:"url",defaultValue:h.webHookUrl,name:"webHookUrl",onBlur:n,onChange:t,fullWidth:!0,autoComplete:"off",error:Boolean(s.webHookUrl&&i.webHookUrl)})}),s.webHookUrl&&i.webHookUrl&&(0,F.jsx)(c.A,{error:!0,id:"helper-text-webHookUrl",children:i.webHookUrl})]})}),(0,F.jsx)(a.Ay,{item:!0,xs:12,md:6,children:(0,F.jsxs)(L.A,{spacing:1,children:[(0,F.jsx)($.A,{htmlFor:"app-id",children:"Gupshup App ID *"}),(0,F.jsx)(d.A,{id:"appId",type:"appId",defaultValue:h.appId,name:"appId",onBlur:n,onChange:t,fullWidth:!0,autoComplete:"off",error:Boolean(s.appId&&i.appId)}),s.appId&&i.appId&&(0,F.jsx)(c.A,{error:!0,id:"helper-text-appId",children:i.appId})]})}),(0,F.jsx)(a.Ay,{item:!0,xs:12,md:6,children:(0,F.jsxs)(L.A,{spacing:1,children:[(0,F.jsx)($.A,{htmlFor:"app-name",children:"Gupshup App Name *"}),(0,F.jsx)(d.A,{id:"appName",type:"url",defaultValue:h.appName,name:"appName",onBlur:n,onChange:t,fullWidth:!0,autoComplete:"off",error:Boolean(s.appName&&i.appName)}),s.appName&&i.appName&&(0,F.jsx)(c.A,{error:!0,id:"helper-text-appName",children:i.appName})]})}),(0,F.jsx)(a.Ay,{item:!0,xs:12,md:6,children:(0,F.jsxs)(L.A,{spacing:1,children:[(0,F.jsx)($.A,{htmlFor:"phone-number",children:"Phone Number *"}),(0,F.jsx)(d.A,{id:"phoneNumberId",type:"number",defaultValue:h.phoneNumberId,name:"phoneNumberId",onBlur:n,onChange:t,fullWidth:!0,autoComplete:"off",error:Boolean(s.phoneNumberId&&i.phoneNumberId)}),s.phoneNumberId&&i.phoneNumberId&&(0,F.jsx)(c.A,{error:!0,id:"helper-text-phoneNumberId",children:i.phoneNumberId})]})}),(0,F.jsx)(a.Ay,{item:!0,xs:12,md:6,children:(0,F.jsxs)(L.A,{spacing:1,children:[(0,F.jsx)($.A,{htmlFor:"lead-category",children:"Initial Lead Category"}),(0,F.jsxs)("select",{id:"leadCategory",title:"Select Category",style:{height:"45px"},value:h.leadCategory||"preSale",onBlur:n,onChange:t,children:[(0,F.jsx)("option",{value:"preSale",children:"Presale"}),(0,F.jsx)("option",{value:"general",children:"General"}),(0,F.jsx)("option",{value:"others",children:"Others"})]}),s.leadCategory&&i.leadCategory&&(0,F.jsx)(c.A,{error:!0,id:"helper-text-leadCategory",children:i.leadCategory})]})}),i.submit&&(0,F.jsx)(a.Ay,{item:!0,xs:12,children:(0,F.jsx)(c.A,{error:!0,children:i.submit})}),(0,F.jsx)(a.Ay,{item:!0,xs:12,container:!0,justifyContent:"flex-end",children:(0,F.jsx)(D.A,{children:(0,F.jsx)(B.A,{isLoading:l,disabled:l,color:"primary",size:"large",type:"submit",variant:"contained",children:o?"Edit":"Add"})})})]})})}})})},X=(0,p.Ay)(u.A)((e=>{let{theme:i}=e;return{position:"fixed","#trainingDocumentsSpeedDial &":{"&.MuiSpeedDial-directionDown, &.MuiSpeedDial-directionRight":{left:"auto",right:i.spacing(2)},"&.MuiSpeedDial-directionUp, &.MuiSpeedDial-directionLeft":{right:"auto",left:i.spacing(2)}}}}));const Z=function(){var e;const[i]=(0,S.G)(),n=(0,I.nc)((e=>e.botsList)),l=(0,I.nc)((e=>e.organizationId)),s=(0,I.nc)((e=>e.isSuperUser));t.useEffect((()=>{(async()=>{const e={organizationId:l,botId:i};try{await w(e)}catch(n){(0,N.i)(!0,"Not able to fetch integrations details. Try after sometime!","error")}})()}),[i,l]);const d=null===(e=n.find((e=>e._id===i)))||void 0===e?void 0:e.integrations;return(0,F.jsxs)(r.A,{children:[(0,F.jsxs)(a.Ay,{container:!0,spacing:3,children:[(0,F.jsxs)(a.Ay,{item:!0,xs:11,children:[(0,F.jsx)(o.A,{variant:"h5",children:"Integrations"}),(0,F.jsx)("br",{})]}),(0,F.jsx)(a.Ay,{item:!0,xs:1,sx:{position:"relative"},id:"trainingDocumentsSpeedDial",children:(0,F.jsx)(Q,{botId:i,organizationId:l,integrations:d})})]}),(0,F.jsxs)(a.Ay,{container:!0,spacing:3,children:[d&&d.map(((e,i)=>(0,F.jsx)(a.Ay,{item:!0,xs:12,children:(0,F.jsx)(ee,{integrationObj:e})},i))),s&&(0,F.jsx)(a.Ay,{item:!0,xs:12,children:(0,F.jsx)(K,{organizationId:l})})]})]})};function Q(e){let{botId:i,organizationId:n,integrations:r}=e;const a=(0,I.nc)((e=>e.isSuperUser));let o=null,l=null,s=null;void 0!==r&&(o=r.find((e=>"CRM_Callback"===e.channelName)),l=r.find((e=>"whatsapp"===e.channelName)),s=r.find((e=>"gupshup"===e.channelName)));const[d,c]=t.useState(!1),[h,p]=t.useState(!1),[u,j]=t.useState(!1),b=[{icon:(0,F.jsx)(A.A,{style:{fill:"#45B735"}}),name:"WhatsApp integration",method:()=>{c(!0)}},{icon:(0,F.jsx)(g.A,{style:{fill:"#7476EF"}}),name:"Add crm callback url",method:()=>{p(!0)}},{icon:(0,F.jsx)(A.A,{style:{fill:"#7476EF"}}),name:"Gupshup Integration",method:()=>{j(!0)}}],y=a?b:b.filter((e=>"Gupshup Integration"!==e.name));return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(X,{ariaLabel:"Integration Url",hidden:!1,icon:(0,F.jsx)(m.A,{}),direction:"down",sx:{"& .MuiFab-primary":{width:40,height:40}},children:y.map((e=>(0,F.jsx)(x.A,{icon:e.icon,tooltipTitle:e.name,onClick:e.method},e.name)))}),(0,F.jsx)(E.A,{openPopUpDialog:d,setPopUpDialog:c,title:"WhatsApp integration",children:l?"The Whatsapp integration already configured.":(0,F.jsx)(H,{botId:i,organizationId:n,setPopUpDialog:c})}),(0,F.jsx)(E.A,{openPopUpDialog:h,setPopUpDialog:p,title:"Add CRM callback URL",children:o?"The CRM Callback URL has been successfully configured.":(0,F.jsx)(O,{botId:i,organizationId:n,setPopUpDialog:p})}),(0,F.jsx)(E.A,{openPopUpDialog:u,setPopUpDialog:j,title:"Gupshup integration",children:s?"The Gupshup integration already configured.":(0,F.jsx)(J,{botId:i,organizationId:n,setPopUpDialog:c})})]})}function ee(e){let{integrationObj:i}=e;const[n,r]=(0,t.useState)(!1),[p,u]=(0,t.useState)(!1),[m,x]=(0,t.useState)(!1),[A,g]=(0,t.useState)(!1),I=async(e,i)=>{try{await async function(e){await k.TF(`/integrations/${e.organizationId}/${e.botId}/crm-callback-integration/${e._id}`,e);try{await w(e)}catch(i){(0,N.i)(!0,"Not able to fetch all integrations. Try after sometime!","error")}}(e),(0,N.i)(!0,`The  ${i} deleted successfully!`,"success")}catch(n){(0,N.i)(!0,`Not able to delete the ${i}. Try after sometime!`,"error")}},S=async(e,i)=>{let{setErrors:n,setStatus:t,setSubmitting:a}=i;try{await _(e),t({success:!0}),a(!0),(0,N.i)(!0,"The CRM callback url updated successfully!","success"),r(!1)}catch(o){t({success:!1}),n({submit:o.message}),a(!1),(0,N.i)(!0,"Not able to update CRM callback url. Try after sometime!","error")}},U=e=>{const i=new Date(e);return new Intl.DateTimeFormat("en-GB",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0}).format(i)};let T=null;"Webchat"===i.channelName&&(T=(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(o.A,{variant:"h5",children:(0,F.jsx)("strong",{children:"Chat window Script Tag"})}),(0,F.jsxs)(a.Ay,{container:!0,children:[(0,F.jsx)(a.Ay,{item:!0,xs:10,md:10,children:(0,F.jsx)(o.A,{variant:"h6",children:i.scriptTag})}),(0,F.jsx)(a.Ay,{children:(0,F.jsx)(D.A,{children:(0,F.jsx)(l.A,{startIcon:(0,F.jsx)(f.A,{}),variant:"outlined",size:"medium",children:(0,F.jsx)(P.CopyToClipboard,{text:i.scriptTag,onCopy:()=>(0,N.i)(!0,"chat script copied to clipboard","success"),children:(0,F.jsx)("span",{children:"Copy"})})})})})]}),(0,F.jsxs)(o.A,{variant:"h6",children:[(0,F.jsx)("strong",{children:"Integrated At : "}),U(i.integratedAt)]})]}));const L={overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:"500px",display:"inline-block",verticalAlign:"bottom"};if("whatsapp"===i.channelName){const e=`${W.DX}/whatsapp/${i.organizationId}/${i.botId}/entrypoint`,n=(0,M.qW)(i.organizationId,i.botId);T=(0,F.jsxs)(F.Fragment,{children:[(0,F.jsxs)(a.Ay,{container:!0,children:[(0,F.jsx)(a.Ay,{item:!0,children:(0,F.jsx)(o.A,{variant:"h5",children:(0,F.jsx)("strong",{children:"WhatsApp Integration"})})}),(0,F.jsxs)(a.Ay,{item:!0,children:[(0,F.jsx)(s.A,{title:"Edit",children:(0,F.jsx)(y.A,{sx:{color:"#3386FF"},size:"small",onClick:()=>u(!0),children:(0,F.jsx)(j.A,{})})}),(0,F.jsx)(s.A,{title:"Delete",children:(0,F.jsx)(y.A,{sx:{color:"#FF5733"},size:"small",onClick:()=>g(!0),children:(0,F.jsx)(b.A,{})})}),(0,F.jsx)(z.A,{title:"Delete Whatsapp integration?",open:A,setOpen:g,onConfirm:()=>I(i,"Whatsapp integration"),children:"Confirm the deletion of Whatsapp integration."})]})]}),(0,F.jsxs)(o.A,{children:[(0,F.jsx)("strong",{children:"App Name :"})," ",i.appName]}),(0,F.jsxs)(o.A,{children:[(0,F.jsx)("strong",{children:"App Id :"})," ",i.appId]}),(0,F.jsxs)(o.A,{children:[(0,F.jsx)("strong",{children:"Phone Number ID :"})," ",i.phoneNumberId]}),(0,F.jsx)("div",{children:(0,F.jsx)(P.CopyToClipboard,{text:e,onCopy:()=>(0,N.i)(!0,"Web hook callback url copied to clipboard","success"),children:(0,F.jsxs)("span",{children:[(0,F.jsx)("strong",{children:"Webhook Callback Url : "})," ",(0,F.jsx)("div",{style:L,children:e})," ",(0,F.jsx)(s.A,{title:"Copy",children:(0,F.jsx)(f.A,{style:{cursor:"pointer",fontSize:"14px"}})})]})})}),(0,F.jsxs)("div",{children:[(0,F.jsx)("strong",{children:"Verification Token : "})," ",(0,F.jsx)("div",{style:L,children:n})," ",(0,F.jsx)(P.CopyToClipboard,{text:n,onCopy:()=>(0,N.i)(!0,"Web hook callback url verification token copied to clipboard","success"),children:(0,F.jsx)(s.A,{title:"Copy",children:(0,F.jsx)(f.A,{style:{cursor:"pointer",fontSize:"14px"}})})})]}),(0,F.jsxs)(o.A,{children:[(0,F.jsx)("strong",{children:"Initial Lead Category :"})," ",i.leadCategory||"preSales"]}),(0,F.jsxs)(o.A,{variant:"h6",children:[(0,F.jsx)("strong",{children:"Integrated At : "}),U(i.integratedAt)]}),p&&(0,F.jsx)(E.A,{openPopUpDialog:p,setPopUpDialog:u,title:"Update WhatsApp integration",children:(0,F.jsx)(H,{botId:i.botId,organizationId:i.organizationId,setPopUpDialog:u,whatsappIntegrationObj:i,edit:!0})})]})}else if("gupshup"===i.channelName){const e=`${W.DX}/gupshup/${i.organizationId}/${i.botId}/entrypoint`;T=(0,F.jsxs)(F.Fragment,{children:[(0,F.jsxs)(a.Ay,{container:!0,children:[(0,F.jsx)(a.Ay,{item:!0,children:(0,F.jsx)(o.A,{variant:"h5",children:(0,F.jsx)("strong",{children:"Gupshup Integration"})})}),(0,F.jsxs)(a.Ay,{item:!0,children:[(0,F.jsx)(s.A,{title:"Edit",children:(0,F.jsx)(y.A,{sx:{color:"#3386FF"},size:"small",onClick:()=>x(!0),children:(0,F.jsx)(j.A,{})})}),(0,F.jsx)(s.A,{title:"Delete",children:(0,F.jsx)(y.A,{sx:{color:"#FF5733"},size:"small",onClick:()=>g(!0),children:(0,F.jsx)(b.A,{})})}),(0,F.jsx)(z.A,{title:"Delete Gupshup integration?",open:A,setOpen:g,onConfirm:()=>I(i,"Gupshup integration"),children:"Confirm the deletion of Gupshup integration."})]})]}),(0,F.jsxs)(o.A,{children:[(0,F.jsx)("strong",{children:"App Name :"})," ",i.appName]}),(0,F.jsxs)(o.A,{children:[(0,F.jsx)("strong",{children:"App Id :"})," ",i.appId]}),(0,F.jsxs)(o.A,{children:[(0,F.jsx)("strong",{children:"Phone Number :"})," ",i.phoneNumberId]}),(0,F.jsx)("div",{children:(0,F.jsx)(P.CopyToClipboard,{text:e,onCopy:()=>(0,N.i)(!0,"Web hook callback url copied to clipboard","success"),children:(0,F.jsxs)("span",{children:[(0,F.jsx)("strong",{children:"Webhook Callback Url : "})," ",(0,F.jsx)("div",{style:L,children:e})," ",(0,F.jsx)(s.A,{title:"Copy",children:(0,F.jsx)(f.A,{style:{cursor:"pointer",fontSize:"14px"}})})]})})}),(0,F.jsxs)(o.A,{children:[(0,F.jsx)("strong",{children:"Initial Lead Category :"})," ",i.leadCategory||"preSales"]}),(0,F.jsxs)(o.A,{variant:"h6",children:[(0,F.jsx)("strong",{children:"Integrated At : "}),U(i.integratedAt)]}),m&&(0,F.jsx)(E.A,{openPopUpDialog:m,setPopUpDialog:x,title:"Update Gupshup integration",children:(0,F.jsx)(J,{botId:i.botId,organizationId:i.organizationId,setPopUpDialog:x,gupshupIntegrationObj:i,edit:!0})})]})}else"CRM_Callback"===i.channelName&&(T=(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(o.A,{variant:"h6",children:(0,F.jsx)("strong",{children:"CRM Callback URL"})}),n?(0,F.jsx)(v.l1,{initialValues:i,validationSchema:C.Ik().shape({callbackURL:C.Yj().url("Enter valid url!").required("CRM Callback URL is required")}),onSubmit:S,children:e=>{let{errors:i,handleBlur:n,handleChange:t,handleSubmit:r,isSubmitting:o,touched:l,values:s}=e;return(0,F.jsx)("form",{noValidate:!0,onSubmit:r,children:(0,F.jsxs)(a.Ay,{container:!0,spacing:1,children:[(0,F.jsxs)(a.Ay,{item:!0,xs:10,md:10,children:[(0,F.jsx)(d.A,{id:"callbackURL",type:"url",defaultValue:s.callbackURL,name:"callbackURL",onBlur:n,onChange:t,fullWidth:!0,autoComplete:"off",error:Boolean(l.callbackURL&&i.callbackURL)}),l.callbackURL&&i.callbackURL&&(0,F.jsx)(c.A,{error:!0,id:"helper-text-crm-url",children:i.callbackURL})]}),(0,F.jsx)(a.Ay,{item:!0,xs:2,md:2,children:(0,F.jsx)(D.A,{children:(0,F.jsx)(B.A,{isLoading:o,disabled:o,color:"primary",size:"large",type:"submit",variant:"contained",children:"Update"})})}),i.submit&&(0,F.jsx)(a.Ay,{item:!0,xs:12,children:(0,F.jsx)(c.A,{error:!0,children:i.submit})})]})})}}):(0,F.jsx)(F.Fragment,{children:(0,F.jsxs)(a.Ay,{container:!0,children:[(0,F.jsx)(a.Ay,{item:!0,xs:10,md:10,children:(0,F.jsxs)(a.Ay,{container:!0,children:[(0,F.jsx)(a.Ay,{item:!0,children:(0,F.jsx)(o.A,{variant:"h6",children:i.callbackURL})}),(0,F.jsxs)(a.Ay,{item:!0,display:"flex",justifyContent:"flex-end",children:[(0,F.jsx)(s.A,{title:"Edit",children:(0,F.jsx)(y.A,{sx:{color:"#3386FF"},size:"small",onClick:()=>r(!0),children:(0,F.jsx)(j.A,{})})}),(0,F.jsx)(s.A,{title:"Delete",children:(0,F.jsx)(y.A,{sx:{color:"#FF5733"},size:"small",onClick:()=>g(!0),children:(0,F.jsx)(b.A,{})})}),(0,F.jsx)(z.A,{title:"Delete CRM callback URL?",open:A,setOpen:g,onConfirm:()=>I(i,"crm callback url"),children:"Confirm the deletion of CRM callback URL."})]})]})}),(0,F.jsx)(a.Ay,{item:!0,xs:2,md:2,children:(0,F.jsx)(D.A,{children:(0,F.jsx)(l.A,{startIcon:(0,F.jsx)(f.A,{}),variant:"outlined",size:"medium",children:(0,F.jsx)(P.CopyToClipboard,{text:i.callbackURL,onCopy:()=>(0,N.i)(!0,"CRM callback URL copied to clipboard","success"),children:(0,F.jsx)("span",{children:"Copy"})})})})})]})}),(0,F.jsxs)(o.A,{variant:"h6",children:[(0,F.jsx)("strong",{children:"Integrated At : "}),U(i.integratedAt)]})]}));return(0,F.jsx)(R.A,{contentSX:{p:2.25},children:(0,F.jsx)(h.A,{style:{padding:0},children:T})})}},8478:(e,i,n)=>{n.d(i,{Jt:()=>a,TF:()=>s,bE:()=>o,yJ:()=>l});var t=n(32026),r=n(44364);async function a(e,i){return d("GET",e,i,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}async function o(e,i){return d("POST",e,i,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}async function l(e,i){return d("PUT",e,i,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}async function s(e,i){return d("DELETE",e,i,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}async function d(e,i,n){let{headers:t,noAuth:r,...a}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const o="POST"===e||"PUT"===e||"DELETE"===e;i=function(e,i){if(!e)return e;const n=i&&Object.keys(i);if(null!==n&&void 0!==n&&n.length){const t=n.reduce(((e,n)=>{let t=i[n];return null===t||void 0===t?e:(t=`${n}=${encodeURIComponent(t)}`,e?`${e}&${t}`:t)}),"");t&&(e=`${e}${e.includes("?")?"&":"?"}${t}`)}if(e.startsWith("https://"))return e;return`${c}${e}`}(i,o?void 0:n);const l=n instanceof FormData;if(l||(n=n&&"object"===typeof n&&o?JSON.stringify(n):void 0),t||(t={}),l||(t["Content-Type"]="application/json"),t.Accept="application/json",!1!==r){const e=sessionStorage.getItem("token");e&&(t.Authorization=`Bearer ${e}`)}try{const r=await fetch(i,{...a,headers:t,body:n,method:e}),o=await r.json();if(r.ok){const{data:e,...i}=o;return delete i.status,e&&!Object.keys(i).length?e:o}throw o.message?new Error(o.message):o}catch(d){var s;throw console.error("Error calling API: ",d),null!==(s=d.message)&&void 0!==s&&s.includes("fetch")?new Error("Unable to reach server. Please check your network connectivity and try again."):new Error(d.message)}}const c=(0,t.s8)(r.jn,"/")},41507:(e,i,n)=>{n.d(i,{Ds:()=>s,L_:()=>o,NC:()=>l,YS:()=>a,cw:()=>c,qb:()=>d});var t=n(8478),r=n(33340);async function a(e,i){const n=await async function(){const e=r.nc.getState();let{organizationList:i,organizationId:n,organization:a}=e;if(!e.isSuperUser||Array.isArray(i))return;if(i=await t.bE("/organization/list"),i.length)if(n=n||sessionStorage.getItem("orgId"),n){if(!a){var o;a=null===(o=i)||void 0===o?void 0:o.filter((e=>e._id===n))[0]}}else{const e=i[0];n=e._id,a=e}return r.nc.setState({organizationList:i,organizationId:n,organization:a}),!0}(),{organizationId:a}=r.nc.getState();return e?e!==a&&r.nc.setState({organizationId:e}):e=a,!e||(n||await async function(e){const i=await t.bE("/organization/get-organization-by-id",{organizationId:e});r.nc.setState({organization:i})}(e),await s(e,i),!0)}async function o(e,i){i||(i=r.nc.getState().organizationId);const n=await t.yJ(`/organization/${i}`,e);r.nc.setState((e=>{const{organizationList:t,organizationId:r,organization:a}=e,o={};return r===i&&(o.organization={...a,...n}),t&&(o.organizationList=t.map((e=>e._id===i?{...e,...n}:e))),o}))}function l(e){if(!e||"object"!==typeof e)return;let{organization:i}=r.nc.getState();i&&(i={...i,...e},r.nc.setState({organization:i}))}async function s(e,i){var n;const a=await t.Jt(`/bot/${e}/list`),o=i||(null===(n=a[0])||void 0===n?void 0:n._id),l=a.reduce(((e,i)=>(e[i._id]=i,e)),{});return r.nc.setState({organizationId:e,botsList:a,botsMap:l,selectedBotId:o}),o}function d(e){r.nc.setState({selectedBotId:e})}async function c(){const e=await t.Jt("/organization/invoice/list");r.nc.setState({organizationsInvoiceList:e})}},70855:(e,i,n)=>{n.d(i,{G:()=>r});var t=n(33340);function r(e){const i=(0,t.nc)((e=>e.selectedBotId)),n=(0,t.nc)((n=>n.botsMap[e||i]));return[e||i,n]}},32026:(e,i,n)=>{function t(e,i){return e.replace(new RegExp(`${r(i)}+$`),"")}function r(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function a(e){const i=new Date(e),n=i.getDate();return`${["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][i.getMonth()]} ${n}, ${i.getFullYear()}`}function o(e,i,n){if(!i&&!e)return n;e=e||{};const t=Array.isArray(e)?[...e]:{...e};if(i.includes(".")){const r=i.indexOf("."),a=i.substring(0,r),l=i.substring(r+1);t[a]=o(e[a],l,n)}else t[i]=n;return t}function l(e,i){return btoa(`${e}_${i}_whatsapp_int`)}function s(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:12;const i="abcdefghijklmnopqrstuvwxyz0123456789";let n="";for(let t=0;t<e;t++)n+=i.charAt(Math.floor(36*Math.random()));return n}function d(e,i,n){if(!i&&!e)return n;e=e||{};const t=Array.isArray(e)?[...e]:{...e};if(i.includes(".")){const r=i.indexOf("."),a=i.substring(0,r),o=i.substring(r+1);t[a]=d(e[a],o,n)}else t[i]=n;return t}function c(e,i){const n=new Blob([e],{type:arguments.length>2&&void 0!==arguments[2]?arguments[2]:"text/csv"}),t=document.createElement("a");t.href=URL.createObjectURL(n),t.download=i,document.body.appendChild(t),t.click(),document.body.removeChild(t)}n.d(i,{G6:()=>o,OX:()=>s,PE:()=>c,Yq:()=>a,do:()=>d,qW:()=>l,s8:()=>t})},44364:(e,i,n)=>{n.d(i,{DX:()=>s,Og:()=>a,jn:()=>t,mB:()=>l,pA:()=>o,pR:()=>r});const t="https://devbackend.livhousing.com:444",r="c17b949cf58c45cae47ce1cc65efc8240f77a2a69ca09ad4c4208852",a={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_IP_DATA_API_KEY:"c17b949cf58c45cae47ce1cc65efc8240f77a2a69ca09ad4c4208852",REACT_APP_VERSION:"1",REACT_APP_GOOGLE_MAPS_API_KEY:"AIzaSyAQMYGdP2AmloNtJm4ZDrJxPuSfuo2RSXM",REACT_APP_BACKEND_URL:"https://devbackend.livhousing.com:444"}.TRAINING_MEDIA_MAXSIZE,o={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_IP_DATA_API_KEY:"c17b949cf58c45cae47ce1cc65efc8240f77a2a69ca09ad4c4208852",REACT_APP_VERSION:"1",REACT_APP_GOOGLE_MAPS_API_KEY:"AIzaSyAQMYGdP2AmloNtJm4ZDrJxPuSfuo2RSXM",REACT_APP_BACKEND_URL:"https://devbackend.livhousing.com:444"}.CONVERSATION_MEDIA_MAXSIZE,l="AIzaSyAQMYGdP2AmloNtJm4ZDrJxPuSfuo2RSXM",s={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_IP_DATA_API_KEY:"c17b949cf58c45cae47ce1cc65efc8240f77a2a69ca09ad4c4208852",REACT_APP_VERSION:"1",REACT_APP_GOOGLE_MAPS_API_KEY:"AIzaSyAQMYGdP2AmloNtJm4ZDrJxPuSfuo2RSXM",REACT_APP_BACKEND_URL:"https://devbackend.livhousing.com:444"}.REACT_APP_NGROK_BACKEND_URL||"https://devbackend.livhousing.com:444"}}]);