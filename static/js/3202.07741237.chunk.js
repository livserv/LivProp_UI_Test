"use strict";(self.webpackChunklib_prop_ui=self.webpackChunklib_prop_ui||[]).push([[3202],{33202:(t,e,n)=>{n.r(e),n.d(e,{default:()=>i});var o=n(9950),c=n(28564),a=n(44414);function r(t){let{}=t;return(0,a.jsx)("div",{children:"Placeholder for Bot Flow Designer. This component can be replaced."})}function i(){const[t,e]=o.useState(null),[n,i]=o.useState(),[s,d]=o.useState(""),u=o.useRef({flow:n});u.current.flow=n;const l=o.useCallback((()=>{(0,c.Ek)().then((t=>{var n;e(t),d(null===(n=t[0])||void 0===n?void 0:n.value)}))}),[]);o.useEffect(l,[l]),o.useEffect((()=>{var t;s&&(null===(t=u.current.flow)||void 0===t?void 0:t._id)!==s&&(0,c.EO)(s).then(i)}),[s]);const _=o.useCallback((async(t,e)=>{const n=await(0,c.EZ)(t.organizationId,t.botId,t,!0===e);d(n._id),i(n),l()}),[l]),E=o.useCallback((async t=>{await(0,c.C7)(t.organizationId,t.botId,t._id)&&(e(null),d(""),l())}),[l]);return(0,a.jsx)(r,{flowData:n,flowList:t,onSave:_,onVersionSelected:d,onDelete:E})}},8478:(t,e,n)=>{n.d(e,{Jt:()=>a,TF:()=>s,bE:()=>r,yJ:()=>i});var o=n(32026),c=n(44364);async function a(t,e){return d("GET",t,e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}async function r(t,e){return d("POST",t,e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}async function i(t,e){return d("PUT",t,e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}async function s(t,e){return d("DELETE",t,e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}async function d(t,e,n){let{headers:o,noAuth:c,...a}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const r="POST"===t||"PUT"===t||"DELETE"===t;e=function(t,e){if(!t)return t;const n=e&&Object.keys(e);if(null!==n&&void 0!==n&&n.length){const o=n.reduce(((t,n)=>{let o=e[n];return null===o||void 0===o?t:(o=`${n}=${encodeURIComponent(o)}`,t?`${t}&${o}`:o)}),"");o&&(t=`${t}${t.includes("?")?"&":"?"}${o}`)}if(t.startsWith("https://"))return t;return`${u}${t}`}(e,r?void 0:n);const i=n instanceof FormData;if(i||(n=n&&"object"===typeof n&&r?JSON.stringify(n):void 0),o||(o={}),i||(o["Content-Type"]="application/json"),o.Accept="application/json",!1!==c){const t=sessionStorage.getItem("token");t&&(o.Authorization=`Bearer ${t}`)}try{const c=await fetch(e,{...a,headers:o,body:n,method:t}),r=await c.json();if(c.ok){const{data:t,...e}=r;return delete e.status,t&&!Object.keys(e).length?t:r}throw r.message?new Error(r.message):r}catch(d){var s;throw console.error("Error calling API: ",d),null!==(s=d.message)&&void 0!==s&&s.includes("fetch")?new Error("Unable to reach server. Please check your network connectivity and try again."):new Error(d.message)}}const u=(0,o.s8)(c.jn,"/")},28564:(t,e,n)=>{n.d(e,{C7:()=>s,CC:()=>u,EO:()=>a,EZ:()=>i,Ek:()=>d,Gl:()=>r});var o=n(33340),c=n(8478);async function a(t){const{selectedBotId:e,organizationId:n}=o.nc.getState();return await r(n,e,t)}async function r(t,e,n){return await c.Jt(`/bot/${t}/${e}/chat-flow/${n}`)}async function i(t,e,n){const o=`/bot/${t}/${e}/chat-flow${arguments.length>3&&void 0!==arguments[3]&&arguments[3]?"?deploy=true":""}`;return await c.bE(o,n)}async function s(t,e,n){return await c.TF(`/bot/${t}/${e}/chat-flow/${n}`)}async function d(){const{selectedBotId:t,organizationId:e}=o.nc.getState();return(await c.Jt(`/bot/${e}/${t}/chat-flow`)).map(u)}function u(t){return{value:t._id,label:`v${t.version} - ${t.deployedAt?"Deployed":"Draft"}`}}},32026:(t,e,n)=>{function o(t,e){return t.replace(new RegExp(`${c(e)}+$`),"")}function c(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function a(t){const e=new Date(t),n=e.getDate();return`${["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][e.getMonth()]} ${n}, ${e.getFullYear()}`}function r(t,e,n){if(!e&&!t)return n;t=t||{};const o=Array.isArray(t)?[...t]:{...t};if(e.includes(".")){const c=e.indexOf("."),a=e.substring(0,c),i=e.substring(c+1);o[a]=r(t[a],i,n)}else o[e]=n;return o}function i(t,e){return btoa(`${t}_${e}_whatsapp_int`)}function s(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:12;const e="abcdefghijklmnopqrstuvwxyz0123456789";let n="";for(let o=0;o<t;o++)n+=e.charAt(Math.floor(36*Math.random()));return n}function d(t,e,n){if(!e&&!t)return n;t=t||{};const o=Array.isArray(t)?[...t]:{...t};if(e.includes(".")){const c=e.indexOf("."),a=e.substring(0,c),r=e.substring(c+1);o[a]=d(t[a],r,n)}else o[e]=n;return o}function u(t,e){const n=new Blob([t],{type:arguments.length>2&&void 0!==arguments[2]?arguments[2]:"text/csv"}),o=document.createElement("a");o.href=URL.createObjectURL(n),o.download=e,document.body.appendChild(o),o.click(),document.body.removeChild(o)}n.d(e,{G6:()=>r,OX:()=>s,PE:()=>u,Yq:()=>a,do:()=>d,qW:()=>i,s8:()=>o})},44364:(t,e,n)=>{n.d(e,{DX:()=>s,Og:()=>a,jn:()=>o,mB:()=>i,pA:()=>r,pR:()=>c});const o="https://devbackend.livhousing.com:444",c="c17b949cf58c45cae47ce1cc65efc8240f77a2a69ca09ad4c4208852",a={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_IP_DATA_API_KEY:"c17b949cf58c45cae47ce1cc65efc8240f77a2a69ca09ad4c4208852",REACT_APP_VERSION:"1",REACT_APP_BACKEND_URL:"https://devbackend.livhousing.com:444"}.TRAINING_MEDIA_MAXSIZE,r={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_IP_DATA_API_KEY:"c17b949cf58c45cae47ce1cc65efc8240f77a2a69ca09ad4c4208852",REACT_APP_VERSION:"1",REACT_APP_BACKEND_URL:"https://devbackend.livhousing.com:444"}.CONVERSATION_MEDIA_MAXSIZE,i={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_IP_DATA_API_KEY:"c17b949cf58c45cae47ce1cc65efc8240f77a2a69ca09ad4c4208852",REACT_APP_VERSION:"1",REACT_APP_BACKEND_URL:"https://devbackend.livhousing.com:444"}.GOOGLE_MAPS_API_KEY,s={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_IP_DATA_API_KEY:"c17b949cf58c45cae47ce1cc65efc8240f77a2a69ca09ad4c4208852",REACT_APP_VERSION:"1",REACT_APP_BACKEND_URL:"https://devbackend.livhousing.com:444"}.REACT_APP_NGROK_BACKEND_URL||"https://devbackend.livhousing.com:444"}}]);