"use strict";(self.webpackChunklib_prop_ui=self.webpackChunklib_prop_ui||[]).push([[572],{88983:(e,t,i)=>{i.d(t,{Z:()=>r});var n=i(93701),a=i(46417);function r(e){let{children:t,type:i}=e;return(0,a.jsx)(n.E.div,{whileHover:{scale:1},whileTap:{scale:.9},children:t})}r.defaultProps={type:"scale"}},61489:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(47313),a=i(50301),r=i(46417);const s=n.forwardRef((function(e,t){return(0,r.jsx)(a.Z,{direction:"up",ref:t,...e})}))},97316:(e,t,i)=>{i.d(t,{Z:()=>p});var n=i(47313),a=i(19860),r=i(73428),s=i(54641),o=i(61113),l=i(93405),d=i(46417);const c={p:2.5,"& .MuiCardHeader-action":{m:"0px auto",alignSelf:"center"}},p=(0,n.forwardRef)(((e,t)=>{let{border:i=!0,boxShadow:n,children:p,content:h=!0,contentSX:x={},darkTitle:u,elevation:g,secondary:m,shadow:j,sx:Z={},title:f,...b}=e;const y=(0,a.Z)();return n="dark"===y.palette.mode?n||!0:n,(0,d.jsxs)(r.Z,{elevation:g||0,ref:t,...b,sx:{border:i?"1px solid":"none",borderRadius:2,borderColor:"dark"===y.palette.mode?y.palette.divider:y.palette.grey.A800,boxShadow:!n||i&&"dark"!==y.palette.mode?"inherit":j||y.customShadows.z1,":hover":{boxShadow:n?j||y.customShadows.z1:"inherit"},"& pre":{m:0,p:"16px !important",fontFamily:y.typography.fontFamily,fontSize:"0.75rem"},...Z},children:[!u&&f&&(0,d.jsx)(s.Z,{sx:c,titleTypographyProps:{variant:"subtitle1"},title:f,action:m}),u&&f&&(0,d.jsx)(s.Z,{sx:c,title:(0,d.jsx)(o.Z,{variant:"h3",children:f}),action:m}),h&&(0,d.jsx)(l.Z,{sx:x,children:p}),!h&&p]})}))},46538:(e,t,i)=>{i.d(t,{Z:()=>x});i(47313);var n=i(61489),a=i(66149),r=i(33604),s=i(96467),o=i(11198),l=i(17592),d=i(19860),c=i(47131),p=i(46417);const h=(0,l.ZP)(a.Z)((e=>{let{theme:t}=e;return{"& .MuiDialogContent-root":{padding:t.spacing(2)},"& .MuiDialogActions-root":{padding:t.spacing(1)}}}));function x(e){const t=(0,d.Z)(),{breakpoints:i}=t,{openPopUpDialog:a,setPopUpDialog:l,title:x}=e;return(0,p.jsxs)(h,{TransitionComponent:n.Z,"aria-labelledby":"customized-dialog-title",open:a,PaperProps:{sx:{width:"40%",[i.down("sm")]:{width:"90%"}}},children:[(0,p.jsx)(r.Z,{sx:{m:0,p:2},id:"customized-dialog-title",children:x}),(0,p.jsx)(c.Z,{"aria-label":"close",onClick:()=>{l(!1)},sx:{position:"absolute",right:8,top:8},children:(0,p.jsx)(o.Z,{})}),(0,p.jsx)(s.Z,{dividers:!0,children:e.children})]})}},66578:(e,t,i)=>{i.d(t,{Z:()=>s});i(47313);var n=i(31095),a=i(85281),r=i(46417);const s=e=>{let{isLoading:t,children:i,...s}=e;return(0,r.jsx)(n.Z,{...s,children:t?(0,r.jsx)(a.Z,{size:25,color:"primary"}):i})}},13572:(e,t,i)=>{i.r(t),i.d(t,{default:()=>W});var n=i(47313),a=i(41806),r=i(9019),s=i(61113),o=i(42832),l=i(23306),d=i(15480),c=i(23509),p=i(969),h=i(37843),x=i(31095),u=i(88983),g=i(11686),m=i(3463),j=i(24977),Z=i(69753);var f=i(66578),b=i(17592),y=i(29210),v=i(70246),w=i(14487),P=i(44661),S=i(19259),D=i(46538),U=i(86043),z=i(97316),_=i(51997),I=i(10237),C=i(93405),T=i(56104),A=i(61689),N=i(47131),E=i(46417);const R=async(e,t,i,n)=>{try{const a={organizationId:n,botId:i,fileName:t,fileUrl:e};await async function(e,t,i){const n=await Z.v("/bot/delete-training-media-document",e,{headers:{botId:t,organizationId:i}}),{trainingDocuments:a}=n;((e,t)=>{c.tN.setState((i=>{const n=i.botsList.map((i=>i._id===e?{...i,trainingMedia:t}:i));return{...i,botsList:n}}))})(t,a)}(a,i,n),(0,U.W)(!0,"The file deleted successfully!","success")}catch(a){(0,U.W)(!0,"Not able to delete the file. Try after sometime!","error")}};const k=function(e){let{media:t,botId:i,organizationId:n}=e;const{name:a,url:o,type:l,originalName:d}=t;return(0,E.jsxs)(z.Z,{contentSX:{p:2.25},children:[(0,E.jsxs)(C.Z,{style:{padding:0,minHeight:"100px",maxHeight:"100px"},children:[d&&(0,E.jsxs)(s.Z,{variant:"h6",children:[(0,E.jsx)("strong",{children:"File Name :"})," ",d]}),"single_page"===l&&(0,E.jsxs)(s.Z,{variant:"h6",style:{overflow:"hidden",textOverflow:"ellipsis"},children:[(0,E.jsx)("strong",{children:"URL :"})," ",o]}),(0,E.jsxs)(s.Z,{variant:"h6",children:[(0,E.jsx)("strong",{children:"Type :"})," ","text/plain"===l?"Document":"Web Page"]}),(0,E.jsxs)(s.Z,{variant:"h6",children:[(0,E.jsx)("strong",{children:"Document Name :"})," ",a===o?"NA":a]})]}),(0,E.jsx)(T.Z,{style:{justifyContent:"flex-end",padding:"5px"},children:(0,E.jsxs)(r.ZP,{container:!0,children:[(0,E.jsx)(r.ZP,{item:!0,xs:10,md:10,children:a===o&&(0,E.jsxs)(r.ZP,{container:!0,spacing:1,children:[(0,E.jsx)(r.ZP,{item:!0,xs:8,md:8,children:(0,E.jsx)(h.Z,{id:"trainingMediaName",type:"trainingMediaName",name:"trainingMediaName",placeholder:"Document Name",fullWidth:!0})}),(0,E.jsx)(r.ZP,{item:!0,xs:1,md:1,children:(0,E.jsx)(u.Z,{children:(0,E.jsx)(x.Z,{disableElevation:!0,size:"large",type:"submit",variant:"contained",color:"primary",children:"Add"})})})]})}),(0,E.jsx)(r.ZP,{item:!0,xs:1,md:1,children:(0,E.jsx)(A.Z,{title:"text/plain"===l?"View Document":"View Web Page",children:(0,E.jsx)(N.Z,{variant:"text",onClick:()=>{return e=o,void window.open(e);var e},children:(0,E.jsx)(I.Z,{style:{color:"#5ad74e"}})})})}),(0,E.jsx)(r.ZP,{item:!0,xs:1,md:1,children:(0,E.jsx)(A.Z,{title:"Delete",children:(0,E.jsx)(N.Z,{variant:"text",onClick:()=>R(o,a,i,n),children:(0,E.jsx)(_.Z,{style:{color:"#ff0000"},fontSize:"small"})})})})]})})]})},F=(0,b.ZP)(y.Z)((e=>{let{theme:t}=e;return{position:"fixed","#trainingDocumentsSpeedDial &":{"&.MuiSpeedDial-directionDown, &.MuiSpeedDial-directionRight":{left:"auto",right:t.spacing(2)},"&.MuiSpeedDial-directionUp, &.MuiSpeedDial-directionLeft":{right:"auto",left:t.spacing(2)}}}}));function M(e){let{botId:t,organizationId:i}=e;const[a,r]=n.useState(!1),[s,o]=n.useState(!1),l=[{icon:(0,E.jsx)(w.Z,{}),name:"File Upload (.pdf,.doc,.docx,.txt)",method:()=>{o(!0)}},{icon:(0,E.jsx)(P.Z,{}),name:"Add Web Page url",method:()=>{r(!0)}}];return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(F,{ariaLabel:"Upload Training Documents",hidden:!1,icon:(0,E.jsx)(v.Z,{}),direction:"down",sx:{"& .MuiFab-primary":{width:40,height:40}},children:l.map((e=>(0,E.jsx)(g.Z,{icon:e.icon,tooltipTitle:e.name,onClick:e.method},e.name)))}),(0,E.jsx)(D.Z,{openPopUpDialog:a,setPopUpDialog:r,title:"Upload Training Documents",children:(0,E.jsx)(O,{botId:t,organizationId:i,setWebPageUrlAddDialogOpen:r})}),(0,E.jsx)(D.Z,{openPopUpDialog:s,setPopUpDialog:o,title:"Upload Documents",children:(0,E.jsx)(L,{organizationId:i})})]})}const W=function(){var e;const t=(0,c.tN)((e=>e.botsList)),i=(0,c.tN)((e=>e.organizationId)),[n]=(0,p.g)(),o=null===(e=t.find((e=>e._id===n)))||void 0===e?void 0:e.trainingMedia;return(0,E.jsxs)(a.Z,{children:[(0,E.jsxs)(r.ZP,{container:!0,spacing:3,children:[(0,E.jsx)(r.ZP,{item:!0,xs:10,children:(0,E.jsx)(s.Z,{variant:"h5",children:"Training Documents"})}),(0,E.jsx)(r.ZP,{item:!0,xs:2,sx:{position:"relative"},id:"trainingDocumentsSpeedDial",children:(0,E.jsx)(M,{botId:n,organizationId:i})})]}),(0,E.jsx)(a.Z,{children:(0,E.jsx)(r.ZP,{container:!0,spacing:3,children:(0,E.jsx)(H,{trainingMedia:o,botId:n,organizationId:i})})})]})};function O(e){let{botId:t,organizationId:i,setWebPageUrlAddDialogOpen:n}=e;return(0,E.jsx)(E.Fragment,{children:(0,E.jsx)(r.ZP,{item:!0,xs:12,children:(0,E.jsx)(j.J9,{initialValues:{webpageUrl:""},validationSchema:m.Ry().shape({webpageUrl:m.Z_().matches(/((https?):\/\/)?(www.)?[a-z0-9]+(\.[a-z]{2,}){1,3}(#?\/?[a-za-z0-9#]+)*\/?(\?[a-za-z0-9-_]+=[a-za-z0-9-%]+&?)?$/,"Enter valid url!").required("please enter webpage url")}),onSubmit:async(e,a)=>{let{setErrors:r,setStatus:s,setSubmitting:o}=a;try{const a={url:e.webpageUrl};await async function(e,t,i){const n=await Z.v("/bot/add-training-media",e,{headers:{botId:t,organizationId:i}}),{trainingMedia:a}=n;((e,t)=>{c.tN.setState((i=>{const n=i.botsList.map((i=>i._id===e?{...i,trainingMedia:t}:i));return{...i,botsList:n}}))})(t,a)}(a,t,i),s({success:!1}),o(!1),n(!1),(0,U.W)(!0,"The url added successfully!","success")}catch(l){s({success:!1}),r({submit:l.message}),o(!1),n(!1),(0,U.W)(!0,"Not able to add the url. Try after sometime!","error")}},children:e=>{let{errors:t,handleBlur:i,handleChange:n,handleSubmit:a,isSubmitting:s,touched:c,values:p}=e;return(0,E.jsx)("form",{noValidate:!0,onSubmit:a,children:(0,E.jsxs)(r.ZP,{container:!0,spacing:1,children:[(0,E.jsx)(r.ZP,{item:!0,xs:9,md:9,children:(0,E.jsxs)(o.Z,{spacing:1,children:[(0,E.jsx)(l.Z,{htmlFor:"webpage-url",children:"Webpage Url"}),(0,E.jsx)(h.Z,{id:"webpage-url",type:"webpageUrl",defaultValue:p.webpageUrl,name:"webpageUrl",onBlur:i,onChange:n,autoComplete:"off",fullWidth:!0,placeholder:"http://www.abc.com/index.html",error:Boolean(c.webpageUrl&&t.webpageUrl)}),c.webpageUrl&&t.webpageUrl&&(0,E.jsx)(d.Z,{error:!0,id:"helper-text-webpage-url",children:t.webpageUrl})]})}),(0,E.jsx)(r.ZP,{item:!0,xs:2,md:2,children:(0,E.jsxs)(o.Z,{spacing:1,children:[(0,E.jsx)(l.Z,{children:"\xa0"}),(0,E.jsx)(u.Z,{children:(0,E.jsx)(f.Z,{isLoading:s,disabled:s,color:"primary",size:"large",type:"submit",variant:"contained",id:"webpageUrlSubmit",children:"Add"})})]})})]})})}})})})}function L(e){let{organizationId:t}=e;return(0,E.jsxs)(r.ZP,{container:!0,spacing:1,children:[(0,E.jsx)(r.ZP,{item:!0,xs:12,md:12,style:{display:"flex",justifyContent:"center"},children:(0,E.jsx)(o.Z,{spacing:1,children:(0,E.jsx)(l.Z,{children:"File Upload (.pdf,.doc,.docx,.txt)"})})}),(0,E.jsx)(r.ZP,{item:!0,xs:12,md:12,style:{display:"flex",justifyContent:"center"},children:(0,E.jsx)(j.J9,{initialValues:{file:""},validationSchema:m.Ry({files:m.nK().required("please enter webpage url")}),onSubmit:async(e,i)=>{let{setErrors:n,setStatus:a,setSubmitting:r}=i;try{const i={organizationId:t,data:e};console.log(i),a({success:!1}),r(!1)}catch(s){a({success:!1}),n({submit:s.message}),r(!1)}},children:(0,E.jsx)(j.gN,{type:"file",name:"file",as:e=>{let{field:t}=e;return(0,E.jsx)(u.Z,{children:(0,E.jsxs)(x.Z,{variant:"contained",component:"label",htmlFor:"file-input",size:"large",children:["Upload File",(0,E.jsx)("input",{...t,type:"file",id:"file-input",style:{display:"none"},onChange:e=>handleFileChange(e,setFieldValue),accept:".pdf,.doc,.docx,.txt,text/plain"})]})})}})})})]})}function H(e){let{trainingMedia:t,botId:i,organizationId:n}=e;return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(r.ZP,{item:!0,xs:12,children:t&&0===t.length&&(0,E.jsx)(s.Z,{variant:"caption",color:"#FF0000",children:(0,E.jsxs)(r.ZP,{container:!0,spacing:1,children:[(0,E.jsx)(r.ZP,{item:!0,xs:12,md:12,style:{display:"flex",justifyContent:"center"},children:(0,E.jsx)(S.Z,{style:{fontSize:40}})}),(0,E.jsx)(r.ZP,{item:!0,xs:12,md:12,style:{display:"flex",justifyContent:"center"},children:"Training Documents are not uploaded!"})]})})}),t&&t.map(((e,t)=>(0,E.jsx)(r.ZP,{item:!0,xs:12,sm:6,md:4,children:(0,E.jsx)(k,{media:e,botId:i,organizationId:n})},t)))]})}},69753:(e,t,i)=>{function n(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}i.d(t,{U:()=>r,v:()=>s});var a=i(32203);async function r(e,t){return o("GET",e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}async function s(e,t){return o("POST",e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}async function o(e,t,i){let{headers:n,noAuth:a,...r}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const s="POST"===e||"PUT"===e;if(t=function(e){if(!e)return e;if(e.startsWith("https://"))return e;return"".concat(l).concat(e)}(t),i=i&&"object"===typeof i&&s?JSON.stringify(i):void 0,n||(n={}),n["Content-Type"]="application/json",n.Accept="application/json",!1!==a){const e=sessionStorage.getItem("token");e&&(n.Authorization="Bearer ".concat(e))}const o=await fetch(t,{...r,headers:n,body:i,method:e}),d=await o.json();if(o.ok){const{data:e,...t}=d;return delete t.status,e&&!Object.keys(t).length?e:d}throw d.message?new Error(d.message):d}const l=(d=a.H,c="/",d.replace(new RegExp("".concat(n(c),"+$")),""));var d,c},969:(e,t,i)=>{i.d(t,{g:()=>a});var n=i(23509);function a(e){const t=(0,n.tN)((e=>e.selectedBotId)),i=(0,n.tN)((i=>i.botsMap[e||t]));return[e||t,i]}},32203:(e,t,i)=>{i.d(t,{H:()=>n,l:()=>a});const n="https://devbackend.livhousing.com",a={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_NGROK_BACKEND_URL:"https://60f1-203-192-224-75.ngrok-free.app",REACT_APP_VERSION:"1",REACT_APP_BACKEND_URL:"https://devbackend.livhousing.com"}.REACT_APP_IP_DATA_API_KEY}}]);