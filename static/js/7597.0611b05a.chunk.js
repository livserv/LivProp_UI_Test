"use strict";(self.webpackChunklib_prop_ui=self.webpackChunklib_prop_ui||[]).push([[7597],{51637:(e,t,a)=>{a.d(t,{A:()=>x});var n=a(89379),r=a(80045),o=a(9950),i=a(14857),s=a(48089),l=a(45180),c=a(82053),d=a(50704),u=a(44414);const h=["border","boxShadow","children","content","contentSX","darkTitle","elevation","secondary","shadow","sx","title"],m={p:2.5,"& .MuiCardHeader-action":{m:"0px auto",alignSelf:"center"}},x=(0,o.forwardRef)(((e,t)=>{let{border:a=!0,boxShadow:o,children:x,content:p=!0,contentSX:g={},darkTitle:A,elevation:f,secondary:v,shadow:y,sx:j={},title:b}=e,D=(0,r.A)(e,h);const S=(0,i.A)();return o="dark"===S.palette.mode?o||!0:o,(0,u.jsxs)(s.A,(0,n.A)((0,n.A)({elevation:f||0,ref:t},D),{},{sx:(0,n.A)({border:a?"1px solid":"none",borderRadius:2,borderColor:"dark"===S.palette.mode?S.palette.divider:S.palette.grey.A800,boxShadow:!o||a&&"dark"!==S.palette.mode?"inherit":y||S.customShadows.z1,":hover":{boxShadow:o?y||S.customShadows.z1:"inherit"},"& pre":{m:0,p:"16px !important",fontFamily:S.typography.fontFamily,fontSize:"0.75rem"}},j),children:[!A&&b&&(0,u.jsx)(l.A,{sx:m,titleTypographyProps:{variant:"subtitle1"},title:b,action:v}),A&&b&&(0,u.jsx)(l.A,{sx:m,title:(0,u.jsx)(c.A,{variant:"h3",children:b}),action:v}),p&&(0,u.jsx)(d.A,{sx:g,children:x}),!p&&x]}))}))},31408:(e,t,a)=>{a.d(t,{A:()=>o});var n=a(59051),r=a.n(n);const o=function(e){let{value:t,dateOnly:a}=e;return r()(t).format(a?"DD-MMM-YYYY":"DD-MMM-YYYY HH:mm:ss")}},3602:(e,t,a)=>{a.d(t,{Ay:()=>h});var n=a(89379),r=a(9950),o=a(59051),i=a.n(o),s=a(32796),l=(a(52010),a(44414));const c=["This month","One month","Prev month","This week","Last 7 days","Prev week","Prev 2 weeks","Last 14 days"];function d(){return{"This month":[i()().startOf("month").toDate(),i()().endOf("month").toDate()],"One month":[i()().subtract(1,"months").toDate(),i()().toDate()],"Prev month":[i()().subtract(1,"months").startOf("month").toDate(),i()().subtract(1,"months").endOf("month").toDate()],"This week":[i()().startOf("week").toDate(),i()().endOf("week").toDate()],"Last 7 days":[i()().subtract(6,"days").toDate(),i()().toDate()],"Prev week":[i()().subtract(1,"weeks").startOf("week").toDate(),i()().subtract(1,"weeks").endOf("week").toDate()]}}function u(e){const t=r.useMemo(d,[]),{timePicker24Hour:a,displayFormat:o}=function(e){let t=u.defaultTimeFormat||" hh:mm tt";const a=-1===t.indexOf("tt");t=t.replace("tt","A").replace(".ss","").replace(":ss","");const n=e.dateFormat||"DD-MMM-YYYY".concat(e.showTime?t:"");return{timePicker24Hour:a,displayFormat:n}}(e),{value:h,range:g}=e,[A,f]=r.useState((()=>m(h,g,o))),v=r.useCallback((e=>f((t=>(0,n.A)((0,n.A)({},t),e)))),[f]),y=r.useRef(),j=r.useRef({props:e,state:A,displayFormat:o});j.current.state=A,j.current.props=e,j.current.displayFormat=o;const b=r.useCallback((()=>v(m(h,g,j.current.displayFormat))),[h,g,v]);r.useEffect((()=>{b()}),[b]);const D=r.useCallback(((e,t)=>{var a,n;const{props:r,displayFormat:o}=j.current;j.current.manuallyEdited=!1;const{range:i,field:s,args:l}=r;let d=t.startDate,u=null===(a=d)||void 0===a?void 0:a.toDate(),h="";if(i){const{chosenLabel:e,startDate:a,endDate:n}=t;if(a&&n){u={fromDate:a.toDate(),toDate:n.toDate()};const t=c.indexOf(e);t>=0&&(u.quickDate=t),h="".concat(a.format(o)," - ").concat(n.format(o)),d=[u.fromDate,u.toDate]}}else null!==(n=d)&&void 0!==n&&n.isValid()&&(h=d.format(o));v({value:d,displayDate:h}),r.onChange(u,s,l)}),[v]),S=r.useCallback((e=>{const{manuallyEdited:t,props:a,state:n,displayFormat:r}=j.current;if(t){let{target:{value:t}}=e;if(t=t.trim(),!t&&!0===a.allowClear)return void D(null,{startDate:null});let o=i()(t,r);o.isValid()||(o=i()(t)),o.isValid()&&o.format(r)===t||(o=n.value),y.setStartDate(o),y.setEndDate(o),D(null,{fromDate:o})}else null!==e&&void 0!==e&&e.currentTarget&&a.onBlur&&a.onBlur(e)}),[D]),w=r.useCallback((e=>{const{props:t}=j.current,{keyCode:a}=e;13===a?S(e):t.onKeyDown&&(27===a&&(b(t),j.current.manuallyEdited=!1),t.onKeyDown(e))}),[S,b]),P=r.useCallback((()=>j.current.manuallyEdited=!0),[]),{disabled:C,style:_,className:k,autoFocus:E,fullWidth:T}=e,{displayDate:O}=A;return(0,l.jsx)("div",{className:"react-bootstrap-daterangepicker-container "+(k||""),children:(0,l.jsx)(s.A,{ref:y,style:_,className:k,disabled:C,initialSettings:p({timePicker24Hour:a,dateRange:t,props:e,state:A}),onApply:D,children:(0,l.jsx)("span",{children:(0,l.jsx)("input",{type:"text",className:"date-range-ctl",value:O,readOnly:g,placeholder:x(e),autoFocus:E,onChange:g?void 0:P,onBlur:g?void 0:S,onKeyDown:w,style:T?{width:"100%",height:"40px"}:null})})})})}const h=u;function m(e,t,a){const n={displayDate:""};return e?t?"object"===typeof e&&(e=e.quickDate>=0?function(e,t){if(0===e||e>0){const a=d(),n=c[e],r=n&&a[n]||[];return t?r.map((e=>i()(e))):r}}(e.quickDate,!0):"object"===typeof e&&e.fromDate?[i()(e.fromDate),i()(e.toDate)||null]:[],n.value=e,e[0]&&e[1]&&(n.displayDate="".concat(e[0].format(a)," - ").concat(e[1].format(a)))):(n.value=i()(e),n.displayDate=n.value.format(a)):t&&(n.value=[]),n}function x(e){const{range:t}=e;let{placeholder:a}=e;return!0===t&&(a=a||"Select a date range"),a||"Select a date"}function p(e){let{dateRange:t,timePicker24Hour:a,props:{showTime:r,range:o,minDate:i,maxDate:s,maxSpan:l=6},state:{value:c}}=e;const d={showDropdowns:!0,timePicker:r||!1,alwaysShowCalendars:!1,maxSpan:l,autoApply:!0,linkedCalendars:!1,autoUpdateInput:!1,minDate:i,maxDate:s};let u=null;return u=o?(0,n.A)((0,n.A)({},d),{},{fromDate:c[0],toDate:c[1],ranges:t,singleDatePicker:!1,showCustomRangeLabel:!0}):(0,n.A)((0,n.A)({},d),{},{singleDatePicker:!0,fromDate:c,toDate:c,timePicker24Hour:a}),u}},93176:(e,t,a)=>{a.r(t),a.d(t,{default:()=>ve});var n=a(9950),r=a(59051),o=a.n(r),i=a(60899),s=a(82053),l=a(3602),c=a(81616),d=a(25277),u=a(78317),h=a(51637),m=a(40271),x=a(18182),p=a(44414);const g=function(e){let{title:t,count:a,percentage:n,extra:r,period:o="month",color:l=(r<0?"warning":"success")}=e;const g=r<0;return r=Math.abs(r||0),(0,p.jsxs)(h.A,{contentSX:{p:2.25},children:[(0,p.jsxs)(c.A,{spacing:.5,children:[(0,p.jsx)(s.A,{variant:"h6",color:"textSecondary",children:t}),(0,p.jsxs)(i.Ay,{container:!0,alignItems:"center",children:[(0,p.jsx)(i.Ay,{item:!0,children:(0,p.jsx)(s.A,{variant:"h4",color:"inherit",children:a})}),!!n&&(0,p.jsx)(i.Ay,{item:!0,children:(0,p.jsx)(d.A,{variant:"combined",color:l,icon:(0,p.jsxs)(p.Fragment,{children:[!g&&(0,p.jsx)(m.A,{style:{fontSize:"0.75rem",color:"inherit"}}),g&&(0,p.jsx)(x.A,{style:{fontSize:"0.75rem",color:"inherit"}})]}),label:"".concat(n,"%"),sx:{ml:1.25,pl:1},size:"small"})})]})]}),g&&(0,p.jsx)(u.A,{sx:{pt:2.25},children:(0,p.jsxs)(s.A,{variant:"caption",color:"textSecondary",children:["You're down by "," ",(0,p.jsx)(s.A,{component:"span",variant:"caption",sx:{color:"".concat(l||"primary",".main")},children:r})," ","this ",o]})}),!g&&(0,p.jsx)(u.A,{sx:{pt:2.25},children:(0,p.jsxs)(s.A,{variant:"caption",color:"textSecondary",children:["You made an extra"," ",(0,p.jsx)(s.A,{component:"span",variant:"caption",sx:{color:"".concat(l||"primary",".main")},children:r})," ","this ",o]})})]})};var A=a(33340);const f=function(){const e=(0,A.qi)((e=>e.overview)),{current:t={},difference:a={},diffPercentage:n={}}=e||{};return(0,p.jsxs)(p.Fragment,{children:[t.totalVisitors>0&&(0,p.jsx)(i.Ay,{item:!0,xs:12,sm:6,md:4,lg:3,children:(0,p.jsx)(g,{title:"Total Visitors",count:t.totalVisitors,percentage:n.totalVisitors,extra:a.totalVisitors})}),(0,p.jsx)(i.Ay,{item:!0,xs:12,sm:6,md:4,lg:3,children:(0,p.jsx)(g,{title:"Interactive Visitors",count:t.interactiveVisitors,percentage:n.interactiveVisitors,extra:a.interactiveVisitors})}),(0,p.jsx)(i.Ay,{item:!0,xs:12,sm:6,md:4,lg:3,children:(0,p.jsx)(g,{title:"Presales",count:t.preSale,percentage:n.preSale,extra:a.preSale})}),(0,p.jsx)(i.Ay,{item:!0,xs:12,sm:6,md:4,lg:3,children:(0,p.jsx)(g,{title:"General",count:t.general,percentage:n.general,extra:a.general})}),!t.revisit&&(0,p.jsx)(i.Ay,{item:!0,xs:12,sm:6,md:4,lg:3,children:(0,p.jsx)(g,{title:"Others",count:t.others,percentage:n.others,extra:a.others})}),!!t.revisit&&(0,p.jsx)(i.Ay,{item:!0,xs:12,sm:6,md:4,lg:3,children:(0,p.jsx)(g,{title:"Revisit Count",count:t.revisit,percentage:n.revisit,extra:a.revisit})}),(0,p.jsx)(i.Ay,{item:!0,md:8,sx:{display:{sm:"none",md:"block",lg:"none"}}})]})};var v=a(89379),y=a(8478);async function j(){const{organizationId:e,selectedBotId:t}=A.nc.getState(),a=A.qi.getState(),{organizationId:n,botId:r}=a;let{fromDate:i,toDate:s}=a;i=o()(i).startOf("day").toDate(),s=o()(s).endOf("day").toDate();e===n&&t===r||A.qi.setState((0,A.Vs)(e,t),!0);const l=await y.Jt("/analytics/".concat(e,"/").concat(t,"/dashboard/overview"),{fromDate:i,toDate:s}),c=function(e,t){e=o()(e),t=o()(t);const a=t.diff(e,"days"),n=e.clone().subtract(1,"days");return{start:n.clone().subtract(a,"days").startOf("day").toDate(),end:n.endOf("day").toDate()}}(i,s);i=c.start,s=c.end;const d=await y.Jt("/analytics/".concat(e,"/").concat(t,"/dashboard/overview"),{fromDate:i,toDate:s}),u={interactiveVisitors:(l.interactiveVisitors||0)-(d.interactiveVisitors||0),preSale:(l.preSale||0)-(d.preSale||0),general:(l.general||0)-(d.general||0),others:(l.others||0)-(d.others||0),revisit:(l.revisit||0)-(d.revisit||0)},h={current:l,previous:d,difference:u,diffPercentage:{interactiveVisitors:S(d.interactiveVisitors,u.interactiveVisitors),preSale:S(d.preSale,u.preSale),general:S(d.general,u.general),others:S(d.others,u.others),revisit:S(d.revisit,u.revisit)}};A.qi.setState({overview:h})}async function b(e){const{organizationId:t,selectedBotId:a}=A.nc.getState(),n=A.qi.getState();let{visitorProps:r}=n;r=(0,v.A)((0,v.A)({page:1,count:10},r),e),A.qi.setState({visitorProps:r,visitorList:null,visitorsListTotal:0});const{total:o,visitorList:i}=await y.Jt("/analytics/".concat(t,"/").concat(a,"/dashboard/visitors-list"),r);A.qi.setState({visitorsListTotal:o,visitorList:i})}function D(e){let{fromDate:t,toDate:a}=e;return A.qi.setState({fromDate:o()(t).startOf("day").toDate(),toDate:o()(a).endOf("day").toDate()}),j()}function S(e,t){return t&&e?parseFloat((100*t/e).toFixed(2)):0}var w=a(10226);const P=function(e){let{showToday:t=!1,value:a=(t?"day":"week"),customRange:r,onChange:s}=e;const[l,d]=n.useState(a),u=n.useRef({onChange:s,slot:l});u.current.slot=l,u.current.customRange=r,n.useEffect((()=>{if("custom"===u.current.slot){const{onChange:e}=u.current;e(r)}}),[r]);const h=n.useCallback((e=>{d(e);const{onChange:t}=u.current;if(t)if("custom"===e)t(u.current.customRange);else{t({fromDate:o()().add(-1,e).add(1,"day").startOf("day").toDate(),toDate:o()().endOf("day").toDate()})}}),[]);return u.current.handleChange=h,n.useEffect((()=>{u.current.handleChange(u.current.slot)}),[]),(0,p.jsx)(i.Ay,{item:!0,style:{paddingTop:"14px"},children:(0,p.jsxs)(c.A,{direction:"row",alignItems:"center",spacing:.5,children:[!!r&&(0,p.jsx)(w.A,{size:"small",onClick:()=>h("custom"),color:"primary",variant:"custom"===l?"contained":"outlined",children:"Custom"}),(0,p.jsx)(w.A,{size:"small",onClick:()=>h("month"),color:"primary",variant:"month"===l?"contained":"outlined",children:"Month"}),(0,p.jsx)(w.A,{size:"small",onClick:()=>h("week"),color:"primary",variant:"week"===l?"contained":"outlined",children:"Week"}),t&&(0,p.jsx)(w.A,{size:"small",onClick:()=>h("day"),color:"primary",variant:"day"===l?"contained":"outlined",children:"Today"})]})})};var C=a(69780),_=a(9213),k=a(21671),E=a(7251),T=a(72595),O=a(6258),R=a(1320),I=a(15769),M=a(34075),L=a(80691),N=a(14857);const V=e=>{let{color:t,size:a}=e;const n=(0,N.A)();let r;switch(t){case"secondary":r=n.palette.secondary.main;break;case"error":r=n.palette.error.main;break;case"warning":r=n.palette.warning.main;break;case"info":r=n.palette.info.main;break;case"success":r=n.palette.success.main;break;default:r=n.palette.primary.main}return(0,p.jsx)(u.A,{sx:{width:a||8,height:a||8,borderRadius:"50%",bgcolor:r}})};var Y=a(31408),F=a(48746),B=a(32026);const q=[{id:"name",label:"Name"},{id:"email",disablePadding:!0,label:"Email Id"},{id:"phoneNumber",label:"Phone Number",sortable:!1},{id:"country",label:"Country"},{id:"city",label:"City"},{id:"visitTime",label:"Visit Time"},{id:"category",label:"Category"},{id:"transcriptUrl",align:"right",label:"Transcript",sortable:!1}];function z(e){let{order:t,orderBy:a}=e;return(0,p.jsx)(C.A,{children:(0,p.jsx)(_.A,{children:q.map((e=>(0,p.jsxs)(k.A,{align:e.align||"left",padding:e.disablePadding?"none":"normal",sortDirection:a===e.id&&("desc"===t?"asc":"desc"),children:[!1===e.sortable&&e.label,!1!==e.sortable&&(0,p.jsxs)(E.A,{active:a===e.id,direction:a===e.id?"desc"===t?"asc":"desc":"asc",onClick:()=>b({orderBy:e.id,order:a===e.id?"desc"===t?"asc":"desc":"asc"}),children:[e.label,a===e.id?(0,p.jsx)(u.A,{component:"span",sx:L.A,children:"desc"===t?"sorted descending":"sorted ascending"}):null]})]},e.id)))})})}function K(e){let{page:t=0,rowsCount:a,rowsPerPage:n=10}=e;return(0,p.jsx)(T.A,{children:(0,p.jsx)(_.A,{children:(0,p.jsx)(k.A,{colSpan:q.length,children:(0,p.jsx)(O.A,{component:"div",count:a,page:t,rowsPerPage:n,onPageChange:(e,t)=>b({page:t+1}),onRowsPerPageChange:(e,t)=>{let{props:{value:a}}=t;return b({count:a,page:1})}})})})})}const G=e=>{let t,{value:a}=e;switch(a){case"Pre-Sale":t="success";break;case"General":t="primary";break;case"Others":t="warning";break;default:t="error"}return(0,p.jsxs)(c.A,{direction:"row",spacing:1,alignItems:"center",children:[(0,p.jsx)(V,{color:t}),(0,p.jsx)(s.A,{children:a})]})};function U(e){let{data:t,rowsCount:a,page:r,rowsPerPage:o,order:s,orderBy:l,dateRange:c}=e;const[d]=(0,n.useState)([]);let h=null;c&&(h="Leads - "+(0,B.Yq)(c.fromDate)+" to "+(0,B.Yq)(c.toDate));const m=(0,n.useRef)(null);return(0,p.jsx)(u.A,{children:(0,p.jsxs)(R.A,{sx:{width:"100%",overflowX:"auto",position:"relative",display:"block",maxWidth:"100%","& td, & th":{whiteSpace:"nowrap"}},children:[(0,p.jsxs)(I.A,{ref:m,"aria-labelledby":"VisitorList",sx:{"& .MuiTableCell-root:first-of-type":{pl:2},"& .MuiTableCell-root:last-of-type":{pr:3}},children:[(0,p.jsx)(z,{order:s,orderBy:l}),(0,p.jsxs)(M.A,{children:[!(null!==t&&void 0!==t&&t.length)&&(0,p.jsx)(_.A,{sx:{"&:last-child td, &:last-child th":{border:0}},children:(0,p.jsx)(k.A,{colSpan:7,children:"No visitors exists for the selected duration"})}),(null===t||void 0===t?void 0:t.length)>0&&t.map(((e,t)=>{return(0,p.jsx)(H,{row:e,index:t,isSelected:(a=e._id,-1!==d.indexOf(a))},e._id);var a}))]})]}),(0,p.jsxs)(i.Ay,{container:!0,spacing:2,justifyContent:"flex-end",alignItems:"center",children:[(0,p.jsx)(i.Ay,{item:!0,children:(0,p.jsx)(F.DownloadTableExcel,{filename:h,sheet:"Leads",currentTableRef:m.current,children:(0,p.jsx)(w.A,{size:"large",variant:"contained",color:"success",disabled:!((null===t||void 0===t?void 0:t.length)>0),children:"Download excel"})})}),(0,p.jsx)(i.Ay,{item:!0,children:(0,p.jsx)(K,{rowsCount:a,page:r,rowsPerPage:o,order:s,orderBy:l})})]})]})})}function H(e){let{row:t,index:a,isSelected:n}=e;const r="enhanced-table-checkbox-".concat(a);return(0,p.jsxs)(_.A,{hover:!0,role:"checkbox",sx:{"&:last-child td, &:last-child th":{border:0}},"aria-checked":n,tabIndex:-1,selected:n,children:[(0,p.jsx)(k.A,{component:"th",id:r,scope:"row",align:"left",children:t.name}),(0,p.jsx)(k.A,{align:"left",children:t.email}),(0,p.jsx)(k.A,{align:"left",children:t.phoneNumber}),(0,p.jsx)(k.A,{align:"left",children:t.country}),(0,p.jsx)(k.A,{align:"left",children:t.city}),(0,p.jsx)(k.A,{align:"left",children:(0,p.jsx)(Y.A,{value:t.visitTime})}),(0,p.jsx)(k.A,{align:"left",children:(0,p.jsx)(G,{value:t.category})}),(0,p.jsx)(k.A,{align:"right",children:(0,p.jsx)("a",{href:t.transcriptUrl,target:"_blank",rel:"opener",children:(0,p.jsx)(s.A,{children:"View"})})})]},t._id)}var J=a(25979),W=a(3788),X=a(70006),Z=a(2660),Q=a(23266),$=a(93038),ee=a(83563);const te={PaperProps:{style:{maxHeight:224,width:250}}},ae=[{value:"preSale",label:"Pre-Sale"},{value:"general",label:"General"},{value:"others",label:"Others"}],ne=ae.reduce(((e,t)=>(e[t.value]=t.label,e)),{});const re=function(e){let{value:t=[],onChange:a}=e;return(0,p.jsxs)(J.A,{sx:{m:1,width:300,float:"left"},children:[(0,p.jsx)(W.A,{id:"visitor-type-label",style:{lineHeight:"15px"},children:"Visitor Category"}),(0,p.jsx)(X.A,{labelId:"visitor-type-label",id:"visitor-type",multiple:!0,value:t||[],onChange:e=>{a(e.target.value)},input:(0,p.jsx)(Z.A,{label:"Visitor Category"}),renderValue:e=>e.map((e=>ne[e])).join(", "),MenuProps:te,children:ae.map((e=>{let{value:a,label:n}=e;return(0,p.jsxs)(Q.A,{value:a,children:[(0,p.jsx)($.A,{checked:null===t||void 0===t?void 0:t.includes(a)}),(0,p.jsx)(ee.A,{primary:n})]},a)}))})]})};const oe=function(e){let{customRange:t}=e;const[a,r]=n.useState(),{visitorList:o,visitorProps:l,visitorsListTotal:c}=(0,A.qi)(),{category:d,count:u,page:m,orderBy:x,order:g}=l||{};return n.useEffect((()=>{a&&b(a).catch((e=>console.log("Error loading visitor list:-",e)))}),[a]),(0,p.jsxs)(i.Ay,{item:!0,xs:12,children:[(0,p.jsxs)(i.Ay,{container:!0,alignItems:"center",justifyContent:"space-between",children:[(0,p.jsx)(i.Ay,{item:!0,children:(0,p.jsx)(s.A,{variant:"h5",children:"Visitors List"})}),(0,p.jsx)(i.Ay,{item:!0,xs:9,alignItems:"right",children:(0,p.jsxs)(i.Ay,{container:!0,alignItems:"right",justifyContent:"flex-end",children:[(0,p.jsx)(i.Ay,{item:!0,children:(0,p.jsx)(re,{value:d,onChange:e=>b({category:e})})}),(0,p.jsx)(P,{showToday:!0,customRange:t,onChange:r})]})})]}),(0,p.jsx)(h.A,{sx:{mt:2},content:!1,children:(0,p.jsx)(U,{data:o,orderBy:x,order:g,category:d,rowsCount:c||0,rowsPerPage:u||10,page:(m||1)-1,dateRange:a})})]})},ie=[{value:"country",text:"Country"},{value:"city",text:"City"},{value:"os",text:"OS Name"},{value:"browser",text:"Browser"},{value:"date",text:"Date"},{value:"landing_page",text:"Landing Page"}],se=ie.reduce(((e,t)=>(e[t.value]=t.text,e)),{});const le=function(e){let{value:t,onChange:a}=e;return(0,p.jsx)(ce,{list:ie,value:t,onChange:a})};function ce(e){let{list:t,value:a,onChange:n}=e;return(0,p.jsx)(i.Ay,{item:!0,children:(0,p.jsx)(c.A,{direction:"row",alignItems:"center",spacing:0,children:t.map((e=>(0,p.jsx)(w.A,{size:"small",onClick:()=>n(e.value),color:a===e.value?"primary":"secondary",variant:a===e.value?"outlined":"text",children:e.text},e.value)))})})}var de=a(90587);const ue=[{id:"group",label:"Group"},{id:"totalInteractions",disablePadding:!0,label:"Interactions"},{id:"preSale",label:"Pre-Sale"},{id:"general",label:"General"},{id:"others",label:"Others"}];function he(e){let{order:t,orderBy:a}=e;return(0,p.jsx)(C.A,{children:(0,p.jsx)(_.A,{children:ue.map((e=>(0,p.jsx)(k.A,{align:e.align||"left",padding:e.disablePadding?"none":"normal",sortDirection:a===e.id&&t,children:e.label},e.id)))})})}function me(e){let{data:t}=e;const[a]=(0,n.useState)("asc"),[r]=(0,n.useState)("_id"),[o]=(0,n.useState)([]);return(0,p.jsx)(u.A,{children:(0,p.jsx)(R.A,{sx:{width:"100%",overflowX:"auto",position:"relative",display:"block",maxWidth:"100%","& td, & th":{whiteSpace:"nowrap"}},children:(0,p.jsxs)(I.A,{"aria-labelledby":"VisitorList",sx:{"& .MuiTableCell-root:first-of-type":{pl:2},"& .MuiTableCell-root:last-of-type":{pr:3}},children:[(0,p.jsx)(he,{order:a,orderBy:r}),(0,p.jsxs)(M.A,{children:[!(null!==t&&void 0!==t&&t.length)&&(0,p.jsx)(_.A,{sx:{"&:last-child td, &:last-child th":{border:0}},children:(0,p.jsx)(k.A,{colSpan:7,children:"No visitors exists for the selected duration"})}),(null===t||void 0===t?void 0:t.length)>0&&(0,de.q)(t,(0,de.h)(a,r)).map(((e,t)=>{return(0,p.jsx)(xe,{row:e,index:t,isSelected:(a=e._id,-1!==o.indexOf(a))},e.group);var a}))]})]})})})}function xe(e){let{row:t,index:a,isSelected:n}=e;const r="enhanced-table-checkbox-".concat(a);return(0,p.jsxs)(_.A,{hover:!0,role:"checkbox",sx:{"&:last-child td, &:last-child th":{border:0}},"aria-checked":n,tabIndex:-1,selected:n,children:[(0,p.jsx)(k.A,{component:"th",id:r,scope:"row",align:"left",children:t.group}),(0,p.jsx)(k.A,{align:"left",children:t.totalInteractions}),(0,p.jsx)(k.A,{align:"left",children:t.preSale||"-"}),(0,p.jsx)(k.A,{align:"left",children:t.general||"-"}),(0,p.jsx)(k.A,{align:"left",children:t.others||"-"})]})}const pe=function(){const[e,t]=n.useState("country"),a=(0,A.qi)((e=>e.visitorGroupedList)),{fromDate:r,toDate:o}=A.qi.getState();return n.useEffect((()=>{e&&async function(e){const{organizationId:t,selectedBotId:a}=A.nc.getState(),{fromDate:n,toDate:r}=A.qi.getState();A.qi.setState({visitorGroupedList:null});const o=await y.Jt("/analytics/".concat(t,"/").concat(a,"/dashboard/grouped/").concat(e),{fromDate:n,toDate:r});A.qi.setState({visitorGroupedList:o})}(e).catch((e=>console.log("Error loading visitor grouped list:-",e)))}),[e]),(0,p.jsxs)(i.Ay,{item:!0,xs:12,children:[(0,p.jsxs)(i.Ay,{container:!0,alignItems:"center",justifyContent:"space-between",children:[(0,p.jsx)(i.Ay,{item:!0,children:(0,p.jsxs)(s.A,{variant:"h5",children:["Analytics - [",se[e]," Wise] (",(0,p.jsx)(Y.A,{value:r,dateOnly:!0})," - ",(0,p.jsx)(Y.A,{value:o,dateOnly:!0}),")"]})}),(0,p.jsx)(le,{value:e,onChange:t})]}),(0,p.jsx)(h.A,{sx:{mt:2},content:!1,children:(0,p.jsx)(me,{data:a})})]})},ge=new Date("2023-10-01"),Ae=o()().endOf("day").toDate(),fe={month:3};const ve=function(){const{fromDate:e,toDate:t}=(0,A.qi)(),a=n.useMemo((()=>({fromDate:e,toDate:t})),[e,t]);return n.useEffect((()=>{j().catch((e=>console.error("Unable to load analytics data",e)))}),[]),(0,p.jsxs)(i.Ay,{container:!0,rowSpacing:4.5,columnSpacing:2.75,children:[(0,p.jsxs)(i.Ay,{item:!0,xs:12,children:[(0,p.jsx)(s.A,{variant:"h5",style:{display:"inline-block",marginRight:"18px"},children:"Dashboard"}),(0,p.jsx)(l.Ay,{range:!0,value:a,onChange:D,minDate:ge,maxDate:Ae,maxSpan:fe})]}),(0,p.jsx)(i.Ay,{item:!0,md:8,sx:{display:{sm:"none",md:"block",lg:"none"}}}),(0,p.jsx)(f,{}),(0,p.jsx)(pe,{}),(0,p.jsx)(oe,{customRange:a})]})}},8478:(e,t,a)=>{a.d(t,{Jt:()=>c,TF:()=>h,bE:()=>d,yJ:()=>u});var n=a(89379),r=a(80045),o=a(32026),i=a(44364);const s=["headers","noAuth"],l=["data"];async function c(e,t){return m("GET",e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}async function d(e,t){return m("POST",e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}async function u(e,t){return m("PUT",e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}async function h(e,t){return m("DELETE",e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}async function m(e,t,a){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},{headers:i,noAuth:c}=o,d=(0,r.A)(o,s);const u="POST"===e||"PUT"===e||"DELETE"===e;t=function(e,t){if(!e)return e;const a=t&&Object.keys(t);if(null!==a&&void 0!==a&&a.length){const n=a.reduce(((e,a)=>{let n=t[a];return null===n||void 0===n?e:(n="".concat(a,"=").concat(encodeURIComponent(n)),e?"".concat(e,"&").concat(n):n)}),"");n&&(e="".concat(e).concat(e.includes("?")?"&":"?").concat(n))}if(e.startsWith("https://"))return e;return"".concat(x).concat(e)}(t,u?void 0:a);const h=a instanceof FormData;if(h||(a=a&&"object"===typeof a&&u?JSON.stringify(a):void 0),i||(i={}),h||(i["Content-Type"]="application/json"),i.Accept="application/json",!1!==c){const e=sessionStorage.getItem("token");e&&(i.Authorization="Bearer ".concat(e))}try{const o=await fetch(t,(0,n.A)((0,n.A)({},d),{},{headers:i,body:a,method:e})),s=await o.json();if(o.ok){const{data:e}=s,t=(0,r.A)(s,l);return delete t.status,e&&!Object.keys(t).length?e:s}throw s.message?new Error(s.message):s}catch(p){var m;throw console.error("Error calling API: ",p),null!==(m=p.message)&&void 0!==m&&m.includes("fetch")?new Error("Unable to reach server. Please check your network connectivity and try again."):new Error(p.message)}}const x=(0,o.s8)(i.jn,"/")},32026:(e,t,a)=>{a.d(t,{G6:()=>s,OX:()=>c,PE:()=>u,Yq:()=>i,do:()=>d,qW:()=>l,s8:()=>r});var n=a(89379);function r(e,t){return e.replace(new RegExp("".concat(o(t),"+$")),"")}function o(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function i(e){const t=new Date(e),a=t.getDate(),n=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][t.getMonth()],r=t.getFullYear();return"".concat(n," ").concat(a,", ").concat(r)}function s(e,t,a){if(!t&&!e)return a;e=e||{};const r=Array.isArray(e)?[...e]:(0,n.A)({},e);if(t.includes(".")){const n=t.indexOf("."),o=t.substring(0,n),i=t.substring(n+1);r[o]=s(e[o],i,a)}else r[t]=a;return r}function l(e,t){return btoa("".concat(e,"_").concat(t,"_whatsapp_int"))}function c(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:12;const t="abcdefghijklmnopqrstuvwxyz0123456789";let a="";for(let n=0;n<e;n++)a+=t.charAt(Math.floor(36*Math.random()));return a}function d(e,t,a){if(!t&&!e)return a;e=e||{};const r=Array.isArray(e)?[...e]:(0,n.A)({},e);if(t.includes(".")){const n=t.indexOf("."),o=t.substring(0,n),i=t.substring(n+1);r[o]=d(e[o],i,a)}else r[t]=a;return r}function u(e,t){const a=new Blob([e],{type:arguments.length>2&&void 0!==arguments[2]?arguments[2]:"text/csv"}),n=document.createElement("a");n.href=URL.createObjectURL(a),n.download=t,document.body.appendChild(n),n.click(),document.body.removeChild(n)}},44364:(e,t,a)=>{a.d(t,{DX:()=>l,Og:()=>o,jn:()=>n,mB:()=>s,pA:()=>i,pR:()=>r});const n="https://devbackend.livhousing.com:444",r="c17b949cf58c45cae47ce1cc65efc8240f77a2a69ca09ad4c4208852",o={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_IP_DATA_API_KEY:"c17b949cf58c45cae47ce1cc65efc8240f77a2a69ca09ad4c4208852",REACT_APP_VERSION:"1",REACT_APP_GOOGLE_MAPS_API_KEY:"AIzaSyAQMYGdP2AmloNtJm4ZDrJxPuSfuo2RSXM",REACT_APP_BACKEND_URL:"https://devbackend.livhousing.com:444"}.TRAINING_MEDIA_MAXSIZE,i={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_IP_DATA_API_KEY:"c17b949cf58c45cae47ce1cc65efc8240f77a2a69ca09ad4c4208852",REACT_APP_VERSION:"1",REACT_APP_GOOGLE_MAPS_API_KEY:"AIzaSyAQMYGdP2AmloNtJm4ZDrJxPuSfuo2RSXM",REACT_APP_BACKEND_URL:"https://devbackend.livhousing.com:444"}.CONVERSATION_MEDIA_MAXSIZE,s="AIzaSyAQMYGdP2AmloNtJm4ZDrJxPuSfuo2RSXM",l={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_IP_DATA_API_KEY:"c17b949cf58c45cae47ce1cc65efc8240f77a2a69ca09ad4c4208852",REACT_APP_VERSION:"1",REACT_APP_GOOGLE_MAPS_API_KEY:"AIzaSyAQMYGdP2AmloNtJm4ZDrJxPuSfuo2RSXM",REACT_APP_BACKEND_URL:"https://devbackend.livhousing.com:444"}.REACT_APP_NGROK_BACKEND_URL||"https://devbackend.livhousing.com:444"},90587:(e,t,a)=>{function n(e,t){return"desc"===e?(e,a)=>r(e,a,t):(e,a)=>-r(e,a,t)}function r(e,t,a){return t[a]<e[a]?-1:t[a]>e[a]?1:0}function o(e,t){const a=e.map(((e,t)=>[e,t]));return a.sort(((e,a)=>{const n=t(e[0],a[0]);return 0!==n?n:e[1]-a[1]})),a.map((e=>e[0]))}a.d(t,{h:()=>n,q:()=>o})}}]);