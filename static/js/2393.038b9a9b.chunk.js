"use strict";(self.webpackChunklib_prop_ui=self.webpackChunklib_prop_ui||[]).push([[2393],{32829:(e,t,n)=>{n.d(t,{A:()=>a});var i=n(79875),o=n(44414);function a(e){let{children:t,type:n}=e;return(0,o.jsx)(i.P.div,{whileHover:{scale:1},whileTap:{scale:.9},children:t})}a.defaultProps={type:"scale"}},92728:(e,t,n)=>{n.d(t,{A:()=>c});var i=n(89379),o=n(9950),a=n(48205),r=n(44414);const c=o.forwardRef((function(e,t){return(0,r.jsx)(a.A,(0,i.A)({direction:"up",ref:t},e))}))},51637:(e,t,n)=>{n.d(t,{A:()=>h});var i=n(89379),o=n(80045),a=n(9950),r=n(14857),c=n(48089),s=n(45180),l=n(82053),d=n(50704),u=n(44414);const m=["border","boxShadow","children","content","contentSX","darkTitle","elevation","secondary","shadow","sx","title"],v={p:2.5,"& .MuiCardHeader-action":{m:"0px auto",alignSelf:"center"}},h=(0,a.forwardRef)(((e,t)=>{let{border:n=!0,boxShadow:a,children:h,content:A=!0,contentSX:p={},darkTitle:g,elevation:x,secondary:f,shadow:y,sx:j={},title:b}=e,I=(0,o.A)(e,m);const S=(0,r.A)();return a="dark"===S.palette.mode?a||!0:a,(0,u.jsxs)(c.A,(0,i.A)((0,i.A)({elevation:x||0,ref:t},I),{},{sx:(0,i.A)({border:n?"1px solid":"none",borderRadius:2,borderColor:"dark"===S.palette.mode?S.palette.divider:S.palette.grey.A800,boxShadow:!a||n&&"dark"!==S.palette.mode?"inherit":y||S.customShadows.z1,":hover":{boxShadow:a?y||S.customShadows.z1:"inherit"},"& pre":{m:0,p:"16px !important",fontFamily:S.typography.fontFamily,fontSize:"0.75rem"}},j),children:[!g&&b&&(0,u.jsx)(s.A,{sx:v,titleTypographyProps:{variant:"subtitle1"},title:b,action:f}),g&&b&&(0,u.jsx)(s.A,{sx:v,title:(0,u.jsx)(l.A,{variant:"h3",children:b}),action:f}),A&&(0,u.jsx)(d.A,{sx:p,children:h}),!A&&h]}))}))},26092:(e,t,n)=>{n.d(t,{A:()=>v});n(9950);var i=n(92728),o=n(63464),a=n(40033),r=n(28170),c=n(96319),s=n(59254),l=n(14857),d=n(25333),u=n(44414);const m=(0,s.Ay)(o.A)((e=>{let{theme:t}=e;return{"& .MuiDialogContent-root":{padding:t.spacing(2)},"& .MuiDialogActions-root":{padding:t.spacing(1)},zIndex:11010}}));function v(e){const t=(0,l.A)(),{breakpoints:n}=t,{openPopUpDialog:o,setPopUpDialog:s,setFieldsValues:v,onClose:h=()=>(s(!1),null===v||void 0===v?void 0:v({})),title:A,width:p="70%"}=e;return(0,u.jsxs)(m,{TransitionComponent:i.A,"aria-labelledby":"customized-dialog-title",open:o,PaperProps:{sx:{width:{width:p},[n.down("sm")]:{width:"90%"}}},children:[(0,u.jsx)(a.A,{sx:{m:0,p:2},id:"customized-dialog-title",children:A}),(0,u.jsx)(d.A,{"aria-label":"close",onClick:h,sx:{position:"absolute",right:8,top:8},children:(0,u.jsx)(c.A,{})}),(0,u.jsx)(r.A,{dividers:!0,children:e.children})]})}},31408:(e,t,n)=>{n.d(t,{A:()=>a});var i=n(59051),o=n.n(i);const a=function(e){let{value:t,dateOnly:n}=e;return o()(t).format(n?"DD-MMM-YYYY":"DD-MMM-YYYY HH:mm:ss")}},3602:(e,t,n)=>{n.d(t,{Ay:()=>m});var i=n(89379),o=n(9950),a=n(59051),r=n.n(a),c=n(32796),s=(n(52010),n(44414));const l=["This month","One month","Prev month","This week","Last 7 days","Prev week","Prev 2 weeks","Last 14 days"];function d(){return{"This month":[r()().startOf("month").toDate(),r()().endOf("month").toDate()],"One month":[r()().subtract(1,"months").toDate(),r()().toDate()],"Prev month":[r()().subtract(1,"months").startOf("month").toDate(),r()().subtract(1,"months").endOf("month").toDate()],"This week":[r()().startOf("week").toDate(),r()().endOf("week").toDate()],"Last 7 days":[r()().subtract(6,"days").toDate(),r()().toDate()],"Prev week":[r()().subtract(1,"weeks").startOf("week").toDate(),r()().subtract(1,"weeks").endOf("week").toDate()]}}function u(e){const t=o.useMemo(d,[]),{timePicker24Hour:n,displayFormat:a}=function(e){let t=u.defaultTimeFormat||" hh:mm tt";const n=-1===t.indexOf("tt");t=t.replace("tt","A").replace(".ss","").replace(":ss","");const i=e.dateFormat||"DD-MMM-YYYY".concat(e.showTime?t:"");return{timePicker24Hour:n,displayFormat:i}}(e),{value:m,range:p}=e,[g,x]=o.useState((()=>v(m,p,a))),f=o.useCallback((e=>x((t=>(0,i.A)((0,i.A)({},t),e)))),[x]),y=o.useRef(),j=o.useRef({props:e,state:g,displayFormat:a});j.current.state=g,j.current.props=e,j.current.displayFormat=a;const b=o.useCallback((()=>f(v(m,p,j.current.displayFormat))),[m,p,f]);o.useEffect((()=>{b()}),[b]);const I=o.useCallback(((e,t)=>{var n,i;const{props:o,displayFormat:a}=j.current;j.current.manuallyEdited=!1;const{range:r,field:c,args:s}=o;let d=t.startDate,u=null===(n=d)||void 0===n?void 0:n.toDate(),m="";if(r){const{chosenLabel:e,startDate:n,endDate:i}=t;if(n&&i){u={fromDate:n.toDate(),toDate:i.toDate()};const t=l.indexOf(e);t>=0&&(u.quickDate=t),m="".concat(n.format(a)," - ").concat(i.format(a)),d=[u.fromDate,u.toDate]}}else null!==(i=d)&&void 0!==i&&i.isValid()&&(m=d.format(a));f({value:d,displayDate:m}),o.onChange(u,c,s)}),[f]),S=o.useCallback((e=>{const{manuallyEdited:t,props:n,state:i,displayFormat:o}=j.current;if(t){let{target:{value:t}}=e;if(t=t.trim(),!t&&!0===n.allowClear)return void I(null,{startDate:null});let a=r()(t,o);a.isValid()||(a=r()(t)),a.isValid()&&a.format(o)===t||(a=i.value),y.setStartDate(a),y.setEndDate(a),I(null,{fromDate:a})}else null!==e&&void 0!==e&&e.currentTarget&&n.onBlur&&n.onBlur(e)}),[I]),P=o.useCallback((e=>{const{props:t}=j.current,{keyCode:n}=e;13===n?S(e):t.onKeyDown&&(27===n&&(b(t),j.current.manuallyEdited=!1),t.onKeyDown(e))}),[S,b]),C=o.useCallback((()=>j.current.manuallyEdited=!0),[]),{disabled:D,style:w,className:E,autoFocus:_,fullWidth:z}=e,{displayDate:k}=g;return(0,s.jsx)("div",{className:"react-bootstrap-daterangepicker-container "+(E||""),children:(0,s.jsx)(c.A,{ref:y,style:w,className:E,disabled:D,initialSettings:A({timePicker24Hour:n,dateRange:t,props:e,state:g}),onApply:I,children:(0,s.jsx)("span",{children:(0,s.jsx)("input",{type:"text",className:"date-range-ctl",value:k,readOnly:p,placeholder:h(e),autoFocus:_,onChange:p?void 0:C,onBlur:p?void 0:S,onKeyDown:P,style:z?{width:"100%",height:"40px"}:null})})})})}const m=u;function v(e,t,n){const i={displayDate:""};return e?t?"object"===typeof e&&(e=e.quickDate>=0?function(e,t){if(0===e||e>0){const n=d(),i=l[e],o=i&&n[i]||[];return t?o.map((e=>r()(e))):o}}(e.quickDate,!0):"object"===typeof e&&e.fromDate?[r()(e.fromDate),r()(e.toDate)||null]:[],i.value=e,e[0]&&e[1]&&(i.displayDate="".concat(e[0].format(n)," - ").concat(e[1].format(n)))):(i.value=r()(e),i.displayDate=i.value.format(n)):t&&(i.value=[]),i}function h(e){const{range:t}=e;let{placeholder:n}=e;return!0===t&&(n=n||"Select a date range"),n||"Select a date"}function A(e){let{dateRange:t,timePicker24Hour:n,props:{showTime:o,range:a,minDate:r,maxDate:c,maxSpan:s=6},state:{value:l}}=e;const d={showDropdowns:!0,timePicker:o||!1,alwaysShowCalendars:!1,maxSpan:s,autoApply:!0,linkedCalendars:!1,autoUpdateInput:!1,minDate:r,maxDate:c};let u=null;return u=a?(0,i.A)((0,i.A)({},d),{},{fromDate:l[0],toDate:l[1],ranges:t,singleDatePicker:!1,showCustomRangeLabel:!0}):(0,i.A)((0,i.A)({},d),{},{singleDatePicker:!0,fromDate:l,toDate:l,timePicker24Hour:n}),u}},93383:(e,t,n)=>{n.d(t,{A:()=>d});var i=n(89379),o=n(80045),a=n(9950),r=n(10226),c=n(46639),s=n(44414);const l=["onClick","disabled","isLoading","children"];const d=function(e){let{onClick:t,disabled:n,isLoading:d,children:u}=e,m=(0,o.A)(e,l);const[v,h]=a.useState(d);return(0,s.jsxs)(r.A,(0,i.A)((0,i.A)({onClick:e=>{if(!t)return;const n=t(e);"function"===typeof(null===n||void 0===n?void 0:n.finally)&&(h(!0),n.finally((()=>h(!1))))},disabled:v||d||n},m),{},{children:[(v||d)&&(0,s.jsx)(c.A,{size:16,color:"primary",style:{marginRight:"10px"}}),u]}))}},69420:(e,t,n)=>{n.r(t),n.d(t,{default:()=>ae});var i=n(9950),o=n(60899),a=n(82053),r=n(51637),c=n(32829),s=n(93383),l=n(21788),d=n(78317),u=n(46639),m=n(1320),v=n(15769),h=n(69780),A=n(9213),p=n(21671),g=n(7251),x=n(34075),f=n(72595),y=n(6258),j=n(29635),b=n(69755),I=n(41507),S=n(33340),P=n(31408),C=n(53065),D=n(8478);async function w(){try{const e=(await async function(){const e=D.Jt("/organization/invoice/last-invoice-number");return e}()).lastInvoiceNo,t=0!==e?e+1:"";return await D.bE("/organization/invoice/generate?invoiceNumber=".concat(t))}catch(e){throw console.error("Error generating invoice:",e),e}}var E=n(44364),_=n(32026),z=n(90587),k=n(44414);const T=function(e){let{defaultOrder:t,defaultOrderBy:n,updateInvoiceTable:o,setUpdateInvoiceTable:r}=e;const[c,s]=(0,i.useState)(t),[j,b]=(0,i.useState)(n),[P]=(0,i.useState)([]),[C,w]=(0,i.useState)(10),[E,_]=(0,i.useState)(0),[T,M]=(0,i.useState)(!0),[L,B]=(0,i.useState)(!1),F=(0,S.nc)((e=>e.organizationsInvoiceList));if((0,i.useEffect)((()=>{(async()=>{try{await(0,I.cw)()}catch(e){(0,l.i)(!0,"Not able to fetch Organizations Invoice. Try after sometime!","error")}finally{M(!1)}})()}),[o]),T)return(0,k.jsx)(d.A,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh",children:(0,k.jsx)(u.A,{})});if(!F||0===F.length)return(0,k.jsx)(d.A,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh",children:(0,k.jsx)(a.A,{variant:"h6",children:"No Data Available"})});const H=async e=>{try{B(!0);const t=await async function(e){return await D.bE(e)}(e);r(t);const{sentCount:n,totalCount:i}=t;(0,l.i)(!0,"".concat(n," invoices send out of ").concat(i," to the organizations"),"success"),B(!1)}catch(t){B(!1),(0,l.i)(!0,"Not able to send the invoices  to  organizations. Try after sometime!","error")}};return(0,k.jsx)(d.A,{children:(0,k.jsx)(m.A,{sx:{width:"100%",overflowX:"auto",position:"relative",display:"block",maxWidth:"100%","& td, & th":{whiteSpace:"nowrap"}},children:(0,k.jsxs)(v.A,{"aria-labelledby":"organizationsInvoiceList",sx:{"& .MuiTableCell-root:first-of-type":{pl:2},"& .MuiTableCell-root:last-of-type":{pr:3}},children:[(0,k.jsx)(h.A,{children:(0,k.jsx)(A.A,{children:O.map((e=>(0,k.jsxs)(p.A,{align:e.align||"center",padding:e.disablePadding?"none":"normal",sortDirection:j===e.id&&c,children:[!1===e.sortable&&e.label,!1!==e.sortable&&(0,k.jsxs)(g.A,{active:j===e.id,direction:j===e.id?c:"asc",onClick:()=>(e=>{s("asc"===c?"desc":"asc"),b(e)})(e.id),children:[e.label,j===e.id?(0,k.jsx)(d.A,{component:"span",sx:R,children:"desc"===c?"sorted descending":"sorted ascending"}):null]})]},e.id)))})}),(0,k.jsx)(x.A,{children:(0,z.q)(F,(0,z.h)(c,j)).slice(E*C,E*C+C).map(((e,t)=>{return(0,k.jsx)(N,{row:e,index:t,isSelected:(n=e.period,-1!==P.indexOf(n)),sendInvoice:H,isSendingEmail:L},t);var n}))}),(0,k.jsx)(f.A,{children:(0,k.jsx)(A.A,{children:(0,k.jsx)(p.A,{colSpan:O.length,children:(0,k.jsx)(y.A,{component:"div",count:F.length,page:E,rowsPerPage:C,onPageChange:(e,t)=>_(t),onRowsPerPageChange:e=>{w(parseInt(e.target.value,10)),_(0)}})})})})]})})})},O=[{id:"period",label:"Invoice Period",align:"left"},{id:"totalInvoices",label:"Total Invoices"},{id:"invoiceDate",label:"Invoice Date",align:"left"},{id:"totalAmount",label:"Total Amount"},{id:"emailPendingCount",label:"Pending Email"},{id:"downloadPath",label:"Download",sortable:!1},{id:"triggerEmailPath",label:"Send Email",sortable:!1}];function N(e){let{row:t,index:n,isSelected:i,sendInvoice:o,isSendingEmail:a}=e;const r=(0,_.s8)(E.jn,"/"),c="enhanced-table-".concat(n);return(0,k.jsxs)(A.A,{hover:!0,role:"checkbox","aria-checked":i,tabIndex:-1,selected:i,children:[(0,k.jsx)(p.A,{component:"th",id:c,scope:"row",align:"left",children:t.period}),(0,k.jsx)(p.A,{align:"center",children:t.totalInvoices}),(0,k.jsx)(p.A,{align:"left",children:(0,k.jsx)(P.A,{value:t.invoiceDate})}),(0,k.jsx)(p.A,{align:"center",children:t.totalAmount.toFixed(3)}),(0,k.jsx)(p.A,{align:"center",children:t.emailPendingCount}),(0,k.jsx)(p.A,{align:"center",children:(0,k.jsx)("a",{href:r+t.downloadPath,target:"_blank",rel:"noopener noreferrer",children:(0,k.jsx)(C.A,{title:"Download",children:(0,k.jsx)(j.A,{})})})}),(0,k.jsx)(p.A,{align:"center",children:t.triggerEmailPath&&(0,k.jsx)(C.A,{title:"Send email",children:a?(0,k.jsx)(u.A,{size:16}):(0,k.jsx)(b.A,{onClick:()=>o(t.triggerEmailPath),sx:{cursor:"pointer"}})})})]},"row-".concat(n))}const R={border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1};var M=n(26092),L=n(89379),B=n(2660),F=n(24516),H=n(25979),U=n(45735),q=n(83563),Y=n(8145),K=n(2046),V=n(74745),W=n(93038),J=n(10226),G=n(61467),X=n(29714),Q=n(81616),Z=n(3788),$=n(47813);const ee=function(e){var t,n,i,a,r,c,s,l,d,u,m,v,h,A,p,g,x,f,y,j,b,I,S,P,C,D,w,E,_,z,T,O,N,R,M,L,H,U,q,Y;let{invoice:K,index:W,handleBlur:J,handleChange:G,errors:X,touched:ee,remove:te}=e;return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)(o.Ay,{container:!0,spacing:1,children:[(0,k.jsx)(o.Ay,{item:!0,xs:12,sm:12,md:1,lg:1,children:(0,k.jsxs)(Q.A,{spacing:1,children:[(0,k.jsx)(Z.A,{htmlFor:"invoiceItems.".concat(W,".itemNo"),children:"Sl. No"}),(0,k.jsx)(B.A,{id:"invoiceItems.".concat(W,".itemNo"),type:"text",value:K.itemNo,name:"invoiceItems.".concat(W,".itemNo"),fullWidth:!0,disabled:!0})]})}),(0,k.jsx)(o.Ay,{item:!0,xs:12,sm:12,md:2,lg:2,children:(0,k.jsxs)(Q.A,{spacing:1,children:[(0,k.jsx)(Z.A,{htmlFor:"invoiceItems.".concat(W,".desc"),children:"Description"}),(0,k.jsx)(B.A,{id:"invoiceItems.".concat(W,".desc"),type:"text",value:K.desc,name:"invoiceItems.".concat(W,".desc"),autoComplete:"off",onBlur:J,onChange:G,fullWidth:!0,error:Boolean((null===(t=ee.invoiceItems)||void 0===t||null===(n=t[W])||void 0===n?void 0:n.desc)&&(null===(i=X.invoiceItems)||void 0===i||null===(a=i[W])||void 0===a?void 0:a.desc))}),(null===(r=ee.invoiceItems)||void 0===r||null===(c=r[W])||void 0===c?void 0:c.desc)&&(null===(s=X.invoiceItems)||void 0===s||null===(l=s[W])||void 0===l?void 0:l.desc)&&(0,k.jsx)(F.A,{error:!0,id:"helper-text-invoiceItems.".concat(W,".desc"),children:X.invoiceItems[W].desc})]})}),(0,k.jsx)(o.Ay,{item:!0,xs:12,sm:12,md:2,lg:2,children:(0,k.jsxs)(Q.A,{spacing:1,children:[(0,k.jsx)(Z.A,{htmlFor:"invoiceItems.".concat(W,".uom"),children:"UMO"}),(0,k.jsx)(B.A,{id:"invoiceItems.".concat(W,".uom"),type:"text",value:K.uom,name:"invoiceItems.".concat(W,".uom"),autoComplete:"off",onBlur:J,onChange:G,fullWidth:!0,error:Boolean((null===(d=ee.invoiceItems)||void 0===d||null===(u=d[W])||void 0===u?void 0:u.uom)&&(null===(m=X.invoiceItems)||void 0===m||null===(v=m[W])||void 0===v?void 0:v.uom))}),(null===(h=ee.invoiceItems)||void 0===h||null===(A=h[W])||void 0===A?void 0:A.uom)&&(null===(p=X.invoiceItems)||void 0===p||null===(g=p[W])||void 0===g?void 0:g.uom)&&(0,k.jsx)(F.A,{error:!0,id:"helper-text-invoiceItems.".concat(W,".uom"),children:X.invoiceItems[W].uom})]})}),(0,k.jsx)(o.Ay,{item:!0,xs:12,sm:12,md:2,lg:2,children:(0,k.jsxs)(Q.A,{spacing:1,children:[(0,k.jsx)(Z.A,{htmlFor:"invoiceItems.".concat(W,".quantity"),children:"Quantity"}),(0,k.jsx)(B.A,{id:"invoiceItems.".concat(W,".quantity"),type:"number",value:K.quantity,name:"invoiceItems.".concat(W,".quantity"),autoComplete:"off",onBlur:J,onChange:G,fullWidth:!0,error:Boolean((null===(x=ee.invoiceItems)||void 0===x||null===(f=x[W])||void 0===f?void 0:f.quantity)&&(null===(y=X.invoiceItems)||void 0===y||null===(j=y[W])||void 0===j?void 0:j.quantity))}),(null===(b=ee.invoiceItems)||void 0===b||null===(I=b[W])||void 0===I?void 0:I.quantity)&&(null===(S=X.invoiceItems)||void 0===S||null===(P=S[W])||void 0===P?void 0:P.quantity)&&(0,k.jsx)(F.A,{error:!0,id:"helper-text-invoiceItems.".concat(W,".quantity"),children:X.invoiceItems[W].quantity})]})}),(0,k.jsx)(o.Ay,{item:!0,xs:12,sm:12,md:2,lg:2,children:(0,k.jsxs)(Q.A,{spacing:1,children:[(0,k.jsx)(Z.A,{htmlFor:"invoiceItems.".concat(W,".unitPrice"),children:"Unit Price"}),(0,k.jsx)(B.A,{id:"invoiceItems.".concat(W,".unitPrice"),type:"number",value:K.unitPrice,name:"invoiceItems.".concat(W,".unitPrice"),autoComplete:"off",onBlur:J,onChange:G,fullWidth:!0,error:Boolean((null===(C=ee.invoiceItems)||void 0===C||null===(D=C[W])||void 0===D?void 0:D.unitPrice)&&(null===(w=X.invoiceItems)||void 0===w||null===(E=w[W])||void 0===E?void 0:E.unitPrice))}),(null===(_=ee.invoiceItems)||void 0===_||null===(z=_[W])||void 0===z?void 0:z.unitPrice)&&(null===(T=X.invoiceItems)||void 0===T||null===(O=T[W])||void 0===O?void 0:O.unitPrice)&&(0,k.jsx)(F.A,{error:!0,id:"helper-text-invoiceItems.".concat(W,".unitPrice"),children:X.invoiceItems[W].unitPrice})]})}),(0,k.jsx)(o.Ay,{item:!0,xs:12,sm:12,md:2,lg:2,children:(0,k.jsxs)(Q.A,{spacing:1,children:[(0,k.jsx)(Z.A,{htmlFor:"invoiceItems.".concat(W,".total"),children:"Total"}),(0,k.jsx)(B.A,{id:"invoiceItems.".concat(W,".total"),type:"number",value:K.total,name:"invoiceItems.".concat(W,".total"),autoComplete:"off",onBlur:J,onChange:G,fullWidth:!0,error:Boolean((null===(N=ee.invoiceItems)||void 0===N||null===(R=N[W])||void 0===R?void 0:R.total)&&(null===(M=X.invoiceItems)||void 0===M||null===(L=M[W])||void 0===L?void 0:L.total))}),(null===(H=ee.invoiceItems)||void 0===H||null===(U=H[W])||void 0===U?void 0:U.total)&&(null===(q=X.invoiceItems)||void 0===q||null===(Y=q[W])||void 0===Y?void 0:Y.total)&&(0,k.jsx)(F.A,{error:!0,id:"helper-text-invoiceItems.".concat(W,".total"),children:X.invoiceItems[W].total})]})}),(0,k.jsx)(o.Ay,{item:!0,xs:12,sm:12,md:1,lg:1,children:(0,k.jsxs)(Q.A,{spacing:1,children:[(0,k.jsx)(Z.A,{htmlFor:"invoiceItems.".concat(W,".delete"),children:"Delete"}),(0,k.jsx)($.A,{sx:{cursor:"pointer",color:"#ee2a2a"},onClick:()=>te(W)})]})})]}),(0,k.jsx)(V.A,{sx:{mt:2,mb:2}})]})};var te=n(60767),ne=n(3602);const ie=function(e){let{onDone:t,setUpdateInvoiceTable:n}=e;const[a,r]=(0,i.useState)(null),[u,m]=(0,i.useState)(!1),v=(0,S.nc)((e=>e.organizationList)),[h,A]=(0,i.useState)(null),[p,g]=(0,i.useState)(null);return(0,i.useEffect)((()=>{if(h&&p){r({organizationId:h,invoiceDate:p,details:{items:[{itemNo:1,desc:"",uom:"",quantity:0,unitPrice:0,total:0}]}})}}),[h,p]),(0,k.jsxs)(o.Ay,{container:!0,alignItems:"center",justifyContent:"space-between",children:[(0,k.jsx)(o.Ay,{item:!0,xs:9,lg:9,md:9,children:u?(0,k.jsxs)(o.Ay,{container:!0,alignItems:"center",justifyContent:"space-between",children:[(0,k.jsx)(o.Ay,{item:!0,xs:6,lg:6,md:6,children:(0,k.jsx)(H.A,{sx:{width:{xs:"100%",md:224}},children:(0,k.jsx)(U.A,{options:v,onChange:(e,t)=>{A(t?t._id:null),r(null)},renderOption:(e,t)=>(0,i.createElement)("li",(0,L.A)((0,L.A)({},e),{},{key:t._id}),(0,k.jsx)(q.A,{children:t.organizationName||"(".concat(t._id,")")})),getOptionLabel:e=>e.organizationName||"(".concat(e._id,")"),sx:{width:250},renderInput:e=>(0,k.jsx)(Y.A,(0,L.A)({size:"small",startAdornment:(0,k.jsx)(K.A,{position:"start",sx:{mr:-.5},children:(0,k.jsx)(te.A,{})}),placeholder:"Select Organization"},e))})})}),(0,k.jsx)(o.Ay,{item:!0,xs:6,lg:6,md:6,children:(0,k.jsx)(ne.Ay,{label:"Invoice Date",value:null,onChange:e=>g(e),renderInput:e=>(0,k.jsx)(Y.A,(0,L.A)((0,L.A)({},e),{},{size:"large"})),fullWidth:!0,autoComplete:"off"})})]}):(0,k.jsx)(G.l1,{initialValues:{invoiceNo:""},onSubmit:async(e,t)=>{let{setErrors:n,setStatus:i,setSubmitting:o}=t;try{o(!0);const t=await async function(e){return D.Jt("/organization/invoice/get/".concat(e))}(e.invoiceNo);r(t),i({success:!0})}catch(a){i({success:!1}),n({submit:a.message}),o(!1),(0,l.i)(!0,a.message,"error")}},validationSchema:X.Ik().shape({invoiceNo:X.Yj().max(25).required("Invoice Number is required")}),children:e=>{let{errors:t,handleBlur:n,handleChange:i,handleSubmit:o,isSubmitting:a,touched:r,values:l}=e;return(0,k.jsxs)("form",{onSubmit:o,children:[(0,k.jsxs)(d.A,{display:"flex",alignItems:"center",children:[(0,k.jsx)(B.A,{id:"invoiceNo",type:"text",value:l.invoiceNo,placeholder:"Invoice Number",name:"invoiceNo",autoComplete:"off",onBlur:n,onChange:i,error:Boolean(r.invoiceNo&&t.invoiceNo),sx:{marginRight:2}}),(0,k.jsx)(c.A,{children:(0,k.jsx)(s.A,{isLoading:a,disabled:a,color:"primary",size:"large",type:"submit",variant:"contained",id:"invoiceSearchBtn",children:"Search"})})]}),r.invoiceNo&&t.invoiceNo&&(0,k.jsx)(F.A,{error:!0,id:"helper-text-invoiceNo",children:t.invoiceNo})]})}})}),(0,k.jsx)(o.Ay,{item:!0,xs:3,lg:3,md:3,container:!0,justifyContent:"flex-end",children:(0,k.jsx)(c.A,{children:(0,k.jsx)(s.A,{isLoading:u,disabled:u,color:"primary",size:"large",type:"button",variant:"contained",id:"newInvoiceBtn",onClick:()=>{m(!0),r(null)},children:"New Invoice"})})}),a&&(0,k.jsxs)(o.Ay,{item:!0,xs:12,lg:12,md:12,children:[(0,k.jsx)(V.A,{sx:{mt:2,mb:2}}),(0,k.jsx)(oe,{invoice:a,onDone:t,createInvoice:u,setUpdateInvoiceTable:n})]})]})};function oe(e){let{invoice:t,onDone:n,createInvoice:i,setUpdateInvoiceTable:a}=e;const r={_id:(null===t||void 0===t?void 0:t._id)||"",invoiceDate:(null===t||void 0===t?void 0:t.invoiceDate)||"",organizationId:(null===t||void 0===t?void 0:t.organizationId)||"",period:(null===t||void 0===t?void 0:t.period)||"",invoiceItems:(null===t||void 0===t?void 0:t.details.items)||[],sendEmail:!1},d=X.Ik().shape({invoiceItems:X.YO().of(X.Ik().shape({desc:X.Yj().required("Description is required"),total:X.ai().required("Total is required").min(1,"Total value must be greater than 0"),quantity:X.ai().min(1,"Quantity value must be greater than 0"),unitPrice:X.ai().min(1,"Unit Price value must be greater than 0")}))});return(0,k.jsx)(G.l1,{initialValues:r,onSubmit:async(e,t)=>{let{setErrors:i,setStatus:o,setSubmitting:r}=t;try{r(!0);const t=await async function(e){return D.bE("/organization/invoice/create-or-update",e)}(e);a(t),n(),o({success:!0})}catch(c){o({success:!1}),i({submit:c.message}),r(!1),(0,l.i)(!0,c.message,"error")}},validationSchema:d,children:e=>{let{errors:t,handleBlur:n,handleChange:a,handleSubmit:r,isSubmitting:l,touched:d,values:u,setFieldValue:m}=e;return(0,k.jsx)("form",{onSubmit:e=>{r(e)},children:(0,k.jsx)(G.ED,{name:"invoiceItems",children:e=>{let{push:r,remove:v}=e;return(0,k.jsxs)(k.Fragment,{children:[u.invoiceItems.map(((e,i)=>(0,k.jsx)(ee,{invoice:e,index:i,handleBlur:n,handleChange:a,errors:t,touched:d,remove:e=>{v(e);const t=u.invoiceItems.filter(((t,n)=>n!==e)).map(((e,t)=>(0,L.A)((0,L.A)({},e),{},{itemNo:t+1})));m("invoiceItems",t)}},i))),(0,k.jsxs)(o.Ay,{container:!0,justifyContent:"flex-end",children:[(0,k.jsxs)(o.Ay,{item:!0,children:[(0,k.jsx)(W.A,{name:"sendEmail",onChange:a,inputProps:{"aria-label":"controlled"}}),"send email immediately"]}),(0,k.jsx)(o.Ay,{item:!0,sx:{marginLeft:2},children:(0,k.jsx)(c.A,{children:(0,k.jsx)(s.A,{isLoading:l,disabled:l,color:"primary",size:"large",type:"submit",variant:"contained",id:"invoiceSearchBtn",children:i?"Create Invoice":"Update Invoice"})})}),(0,k.jsx)(o.Ay,{item:!0,children:(0,k.jsx)(J.A,{sx:{marginLeft:2},variant:"contained",size:"large",onClick:()=>{const e=u.invoiceItems.length+1;r({itemNo:e,uom:"",quantity:0,unitPrice:0,desc:"",total:0})},children:"Add Item"})})]})]})}})})}})}const ae=function(){const[e,t]=(0,i.useState)(!1),[n,d]=(0,i.useState)(!1),[u,m]=i.useState(!1),v=()=>m(!1);return(0,k.jsxs)(o.Ay,{container:!0,rowSpacing:4.5,columnSpacing:2.75,children:[(0,k.jsx)(o.Ay,{item:!0,xs:12,sx:{mb:-2.25},children:(0,k.jsxs)(o.Ay,{container:!0,alignItems:"center",justifyContent:"space-between",children:[(0,k.jsx)(o.Ay,{item:!0,xs:12,lg:6,md:12,children:(0,k.jsx)(a.A,{variant:"h5",children:"Organizations Invoice"})}),(0,k.jsxs)(o.Ay,{item:!0,xs:12,lg:6,md:12,container:!0,justifyContent:"flex-end",children:[(0,k.jsx)(c.A,{children:(0,k.jsx)(s.A,{isLoading:u,disabled:u,variant:"contained",color:"success",size:"large",onClick:async()=>{m(!0)},sx:{marginRight:2},children:"Create or Edit Invoice"})}),(0,k.jsx)(c.A,{children:(0,k.jsx)(s.A,{isLoading:n,disabled:n,variant:"contained",color:"success",size:"large",onClick:async()=>{d(!0);try{const e=await w();if(e){d(!1);const{generated:n}=e;t(e),(0,l.i)(!0,"All Organizations invoice generated. Total number of invoice generated "+n,"success")}else d(!1),(0,l.i)(!0,"Not able to generate invoices, Please try after some time","error")}catch(e){d(!1),(0,l.i)(!0,"Not able to generate invoices, Please try after some time","error")}},children:"Generate Invoice"})})]}),(0,k.jsx)(M.A,{openPopUpDialog:u,onClose:v,title:"Edit or Create invoice",children:(0,k.jsx)(ie,{onDone:v,setUpdateInvoiceTable:t})})]})}),(0,k.jsx)(o.Ay,{item:!0,xs:12,zeroMinWidth:!0,children:(0,k.jsx)(r.A,{sx:{mt:2},content:!1,children:(0,k.jsx)(T,{updateInvoiceTable:e,setUpdateInvoiceTable:t})})})]})}},8478:(e,t,n)=>{n.d(t,{Jt:()=>l,TF:()=>m,bE:()=>d,yJ:()=>u});var i=n(89379),o=n(80045),a=n(32026),r=n(44364);const c=["headers","noAuth"],s=["data"];async function l(e,t){return v("GET",e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}async function d(e,t){return v("POST",e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}async function u(e,t){return v("PUT",e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}async function m(e,t){return v("DELETE",e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}async function v(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},{headers:r,noAuth:l}=a,d=(0,o.A)(a,c);const u="POST"===e||"PUT"===e||"DELETE"===e;t=function(e,t){if(!e)return e;const n=t&&Object.keys(t);if(null!==n&&void 0!==n&&n.length){const i=n.reduce(((e,n)=>{let i=t[n];return null===i||void 0===i?e:(i="".concat(n,"=").concat(encodeURIComponent(i)),e?"".concat(e,"&").concat(i):i)}),"");i&&(e="".concat(e).concat(e.includes("?")?"&":"?").concat(i))}if(e.startsWith("https://"))return e;return"".concat(h).concat(e)}(t,u?void 0:n);const m=n instanceof FormData;if(m||(n=n&&"object"===typeof n&&u?JSON.stringify(n):void 0),r||(r={}),m||(r["Content-Type"]="application/json"),r.Accept="application/json",!1!==l){const e=sessionStorage.getItem("token");e&&(r.Authorization="Bearer ".concat(e))}try{const a=await fetch(t,(0,i.A)((0,i.A)({},d),{},{headers:r,body:n,method:e})),c=await a.json();if(a.ok){const{data:e}=c,t=(0,o.A)(c,s);return delete t.status,e&&!Object.keys(t).length?e:c}throw c.message?new Error(c.message):c}catch(A){var v;throw console.error("Error calling API: ",A),null!==(v=A.message)&&void 0!==v&&v.includes("fetch")?new Error("Unable to reach server. Please check your network connectivity and try again."):new Error(A.message)}}const h=(0,a.s8)(r.jn,"/")},41507:(e,t,n)=>{n.d(t,{Ds:()=>l,L_:()=>c,NC:()=>s,YS:()=>r,cw:()=>u,qb:()=>d});var i=n(89379),o=n(8478),a=n(33340);async function r(e,t){const n=await async function(){const e=a.nc.getState();let{organizationList:t,organizationId:n,organization:i}=e;if(!e.isSuperUser||Array.isArray(t))return;if(t=await o.bE("/organization/list"),t.length)if(n=n||sessionStorage.getItem("orgId"),n){if(!i){var r;i=null===(r=t)||void 0===r?void 0:r.filter((e=>e._id===n))[0]}}else{const e=t[0];n=e._id,i=e}return a.nc.setState({organizationList:t,organizationId:n,organization:i}),!0}(),{organizationId:i}=a.nc.getState();return e?e!==i&&a.nc.setState({organizationId:e}):e=i,!e||(n||await async function(e){const t=await o.bE("/organization/get-organization-by-id",{organizationId:e});a.nc.setState({organization:t})}(e),await l(e,t),!0)}async function c(e,t){t||(t=a.nc.getState().organizationId);const n=await o.yJ("/organization/".concat(t),e);a.nc.setState((e=>{const{organizationList:o,organizationId:a,organization:r}=e,c={};return a===t&&(c.organization=(0,i.A)((0,i.A)({},r),n)),o&&(c.organizationList=o.map((e=>e._id===t?(0,i.A)((0,i.A)({},e),n):e))),c}))}function s(e){if(!e||"object"!==typeof e)return;let{organization:t}=a.nc.getState();t&&(t=(0,i.A)((0,i.A)({},t),e),a.nc.setState({organization:t}))}async function l(e,t){var n;const i=await o.Jt("/bot/".concat(e,"/list")),r=t||(null===(n=i[0])||void 0===n?void 0:n._id),c=i.reduce(((e,t)=>(e[t._id]=t,e)),{});return a.nc.setState({organizationId:e,botsList:i,botsMap:c,selectedBotId:r}),r}function d(e){a.nc.setState({selectedBotId:e})}async function u(){const e=await o.Jt("/organization/invoice/list");a.nc.setState({organizationsInvoiceList:e})}},32026:(e,t,n)=>{n.d(t,{G6:()=>c,OX:()=>l,PE:()=>u,Yq:()=>r,do:()=>d,qW:()=>s,s8:()=>o});var i=n(89379);function o(e,t){return e.replace(new RegExp("".concat(a(t),"+$")),"")}function a(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function r(e){const t=new Date(e),n=t.getDate(),i=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][t.getMonth()],o=t.getFullYear();return"".concat(i," ").concat(n,", ").concat(o)}function c(e,t,n){if(!t&&!e)return n;e=e||{};const o=Array.isArray(e)?[...e]:(0,i.A)({},e);if(t.includes(".")){const i=t.indexOf("."),a=t.substring(0,i),r=t.substring(i+1);o[a]=c(e[a],r,n)}else o[t]=n;return o}function s(e,t){return btoa("".concat(e,"_").concat(t,"_whatsapp_int"))}function l(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:12;const t="abcdefghijklmnopqrstuvwxyz0123456789";let n="";for(let i=0;i<e;i++)n+=t.charAt(Math.floor(36*Math.random()));return n}function d(e,t,n){if(!t&&!e)return n;e=e||{};const o=Array.isArray(e)?[...e]:(0,i.A)({},e);if(t.includes(".")){const i=t.indexOf("."),a=t.substring(0,i),r=t.substring(i+1);o[a]=d(e[a],r,n)}else o[t]=n;return o}function u(e,t){const n=new Blob([e],{type:arguments.length>2&&void 0!==arguments[2]?arguments[2]:"text/csv"}),i=document.createElement("a");i.href=URL.createObjectURL(n),i.download=t,document.body.appendChild(i),i.click(),document.body.removeChild(i)}},44364:(e,t,n)=>{n.d(t,{DX:()=>s,Og:()=>a,jn:()=>i,mB:()=>c,pA:()=>r,pR:()=>o});const i="https://devbackend.livhousing.com:444",o="c17b949cf58c45cae47ce1cc65efc8240f77a2a69ca09ad4c4208852",a={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_IP_DATA_API_KEY:"c17b949cf58c45cae47ce1cc65efc8240f77a2a69ca09ad4c4208852",REACT_APP_VERSION:"1",REACT_APP_GOOGLE_MAPS_API_KEY:"AIzaSyAQMYGdP2AmloNtJm4ZDrJxPuSfuo2RSXM",REACT_APP_BACKEND_URL:"https://devbackend.livhousing.com:444"}.TRAINING_MEDIA_MAXSIZE,r={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_IP_DATA_API_KEY:"c17b949cf58c45cae47ce1cc65efc8240f77a2a69ca09ad4c4208852",REACT_APP_VERSION:"1",REACT_APP_GOOGLE_MAPS_API_KEY:"AIzaSyAQMYGdP2AmloNtJm4ZDrJxPuSfuo2RSXM",REACT_APP_BACKEND_URL:"https://devbackend.livhousing.com:444"}.CONVERSATION_MEDIA_MAXSIZE,c="AIzaSyAQMYGdP2AmloNtJm4ZDrJxPuSfuo2RSXM",s={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_IP_DATA_API_KEY:"c17b949cf58c45cae47ce1cc65efc8240f77a2a69ca09ad4c4208852",REACT_APP_VERSION:"1",REACT_APP_GOOGLE_MAPS_API_KEY:"AIzaSyAQMYGdP2AmloNtJm4ZDrJxPuSfuo2RSXM",REACT_APP_BACKEND_URL:"https://devbackend.livhousing.com:444"}.REACT_APP_NGROK_BACKEND_URL||"https://devbackend.livhousing.com:444"},90587:(e,t,n)=>{function i(e,t){return"desc"===e?(e,n)=>o(e,n,t):(e,n)=>-o(e,n,t)}function o(e,t,n){return t[n]<e[n]?-1:t[n]>e[n]?1:0}function a(e,t){const n=e.map(((e,t)=>[e,t]));return n.sort(((e,n)=>{const i=t(e[0],n[0]);return 0!==i?i:e[1]-n[1]})),n.map((e=>e[0]))}n.d(t,{h:()=>i,q:()=>a})},47813:(e,t,n)=>{var i=n(24994);t.A=void 0;var o=i(n(79526)),a=n(44414);t.A=(0,o.default)((0,a.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zm2.46-7.12 1.41-1.41L12 12.59l2.12-2.12 1.41 1.41L13.41 14l2.12 2.12-1.41 1.41L12 15.41l-2.12 2.12-1.41-1.41L10.59 14zM15.5 4l-1-1h-5l-1 1H5v2h14V4z"}),"DeleteForever")},29635:(e,t,n)=>{var i=n(24994);t.A=void 0;var o=i(n(79526)),a=n(44414);t.A=(0,o.default)((0,a.jsx)("path",{d:"M5 20h14v-2H5zM19 9h-4V3H9v6H5l7 7z"}),"Download")},69755:(e,t,n)=>{var i=n(24994);t.A=void 0;var o=i(n(79526)),a=n(44414);t.A=(0,o.default)((0,a.jsx)("path",{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2m0 4-8 5-8-5V6l8 5 8-5z"}),"Email")},93038:(e,t,n)=>{n.d(t,{A:()=>w});var i=n(98587),o=n(58168),a=n(9950),r=n(72004),c=n(88465),s=n(9240),l=n(46282),d=n(23235),u=n(44414);const m=(0,d.A)((0,u.jsx)("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),v=(0,d.A)((0,u.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),h=(0,d.A)((0,u.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");var A=n(61676),p=n(18463),g=n(59254),x=n(19608),f=n(1763),y=n(423);function j(e){return(0,y.Ay)("MuiCheckbox",e)}const b=(0,f.A)("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]),I=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size","className"],S=(0,g.Ay)(l.A,{shouldForwardProp:e=>(0,x.A)(e)||"classes"===e,name:"MuiCheckbox",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.indeterminate&&t.indeterminate,t["size".concat((0,A.A)(n.size))],"default"!==n.color&&t["color".concat((0,A.A)(n.color))]]}})((e=>{let{theme:t,ownerState:n}=e;return(0,o.A)({color:(t.vars||t).palette.text.secondary},!n.disableRipple&&{"&:hover":{backgroundColor:t.vars?"rgba(".concat("default"===n.color?t.vars.palette.action.activeChannel:t.vars.palette[n.color].mainChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):(0,s.X4)("default"===n.color?t.palette.action.active:t.palette[n.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"default"!==n.color&&{["&.".concat(b.checked,", &.").concat(b.indeterminate)]:{color:(t.vars||t).palette[n.color].main},["&.".concat(b.disabled)]:{color:(t.vars||t).palette.action.disabled}})})),P=(0,u.jsx)(v,{}),C=(0,u.jsx)(m,{}),D=(0,u.jsx)(h,{}),w=a.forwardRef((function(e,t){var n,s;const l=(0,p.b)({props:e,name:"MuiCheckbox"}),{checkedIcon:d=P,color:m="primary",icon:v=C,indeterminate:h=!1,indeterminateIcon:g=D,inputProps:x,size:f="medium",className:y}=l,b=(0,i.A)(l,I),w=h?g:v,E=h?g:d,_=(0,o.A)({},l,{color:m,indeterminate:h,size:f}),z=(e=>{const{classes:t,indeterminate:n,color:i,size:a}=e,r={root:["root",n&&"indeterminate","color".concat((0,A.A)(i)),"size".concat((0,A.A)(a))]},s=(0,c.A)(r,j,t);return(0,o.A)({},t,s)})(_);return(0,u.jsx)(S,(0,o.A)({type:"checkbox",inputProps:(0,o.A)({"data-indeterminate":h},x),icon:a.cloneElement(w,{fontSize:null!=(n=w.props.fontSize)?n:f}),checkedIcon:a.cloneElement(E,{fontSize:null!=(s=E.props.fontSize)?s:f}),ownerState:_,ref:t,className:(0,r.A)(z.root,y)},b,{classes:z}))}))}}]);