"use strict";(self.webpackChunklib_prop_ui=self.webpackChunklib_prop_ui||[]).push([[7938],{92728:(e,t,o)=>{o.d(t,{A:()=>a});var n=o(9950),r=o(48205),i=o(44414);const a=n.forwardRef((function(e,t){return(0,i.jsx)(r.A,{direction:"up",ref:t,...e})}))},51637:(e,t,o)=>{o.d(t,{A:()=>u});var n=o(9950),r=o(14857),i=o(48089),a=o(45180),l=o(82053),s=o(50704),d=o(44414);const c={p:2.5,"& .MuiCardHeader-action":{m:"0px auto",alignSelf:"center"}},u=(0,n.forwardRef)(((e,t)=>{let{border:o=!0,boxShadow:n,children:u,content:h=!0,contentSX:g={},darkTitle:x,elevation:p,secondary:m,shadow:b,sx:v={},title:j,...f}=e;const y=(0,r.A)();return n="dark"===y.palette.mode?n||!0:n,(0,d.jsxs)(i.A,{elevation:p||0,ref:t,...f,sx:{border:o?"1px solid":"none",borderRadius:2,borderColor:"dark"===y.palette.mode?y.palette.divider:y.palette.grey.A800,boxShadow:!n||o&&"dark"!==y.palette.mode?"inherit":b||y.customShadows.z1,":hover":{boxShadow:n?b||y.customShadows.z1:"inherit"},"& pre":{m:0,p:"16px !important",fontFamily:y.typography.fontFamily,fontSize:"0.75rem"},...v},children:[!x&&j&&(0,d.jsx)(a.A,{sx:c,titleTypographyProps:{variant:"subtitle1"},title:j,action:m}),x&&j&&(0,d.jsx)(a.A,{sx:c,title:(0,d.jsx)(l.A,{variant:"h3",children:j}),action:m}),h&&(0,d.jsx)(s.A,{sx:g,children:u}),!h&&u]})}))},26092:(e,t,o)=>{o.d(t,{A:()=>g});o(9950);var n=o(92728),r=o(63464),i=o(40033),a=o(28170),l=o(96319),s=o(59254),d=o(14857),c=o(25333),u=o(44414);const h=(0,s.Ay)(r.A)((e=>{let{theme:t}=e;return{"& .MuiDialogContent-root":{padding:t.spacing(2)},"& .MuiDialogActions-root":{padding:t.spacing(1)},zIndex:11010}}));function g(e){const t=(0,d.A)(),{breakpoints:o}=t,{openPopUpDialog:r,setPopUpDialog:s,onClose:g=()=>s(!1),title:x,width:p="70%"}=e;return(0,u.jsxs)(h,{TransitionComponent:n.A,"aria-labelledby":"customized-dialog-title",open:r,PaperProps:{sx:{width:{width:p},[o.down("sm")]:{width:"90%"}}},children:[(0,u.jsx)(i.A,{sx:{m:0,p:2},id:"customized-dialog-title",children:x}),(0,u.jsx)(c.A,{"aria-label":"close",onClick:g,sx:{position:"absolute",right:8,top:8},children:(0,u.jsx)(l.A,{})}),(0,u.jsx)(a.A,{dividers:!0,children:e.children})]})}},81020:(e,t,o)=>{o.r(t),o.d(t,{default:()=>Me});var n=o(9950),r=o(8478),i=o(33340),a=o(60899),l=o(82053),s=o(17119),d=o(15820),c=o(87946),u=o(44364);const h="lp-cid";let g;function x(){try{return sessionStorage.getItem(h)}catch(e){return console.error("Unable to use browser cache",e),g}}function p(e){try{g=e,sessionStorage.setItem(h,e)}catch(t){console.error("Unable to use browser cache",t)}}function m(){try{g=void 0,sessionStorage.removeItem(h)}catch(e){console.error("Unable to use browser cache",e)}}function b(){const e=new URLSearchParams(window.location.search),t=e.get("sourceUrl")||void 0,o=e.get("referrerUrl")||void 0;return{utmParameters:Array.from(e.keys()).reduce(((t,o)=>{if(o.startsWith("utm_")){t=t||{};const n=e.get(o);n&&"null"!==n&&(t[o]=n)}return t}),void 0),sourceUrl:t,referrerUrl:o}}var v=o(28891),j=o(78023),f=o(44414);const y={window:{spacingCorner:"0px",spacingBottom:"7px"},launcher:{spacingCorner:"0px",spacingBottom:"7px"}},C=["lead","options","stop"];const A=function(e){var t,o;let{botDetails:i,botDesign:a,startupFlow:l,onReceiveChatResponse:s,autoLaunch:h,recipientId:g,origin:v,onCallback:A,optionsRenderer:w}=e;const[S,T]=n.useState(h||!1),[U,P]=n.useState(a),[W,D]=n.useState(!1),[_,N]=n.useState(i),[R,V]=n.useState(l),[$,E]=n.useState(g),[H,G]=n.useState([]),[q,O]=n.useState(),J=n.useRef({autoLaunch:h});J.current.recipientId=$,J.current.bot=_,J.current.startupMessages=R,J.current.origin=v,J.current.setAndBroadcastHistory=n.useCallback((e=>{var t;"function"===typeof e?G((t=>{var o;const n=e(t);return M(n,J.current.origin,null===(o=J.current.bot)||void 0===o?void 0:o._id,!0),n})):(G(e),M(e,J.current.origin,null===(t=J.current.bot)||void 0===t?void 0:t._id,!0))}),[]),J.current.onCallback=n.useCallback(((e,t)=>{"set-visitor-id"===e&&t.recipientId&&E(t.recipientId),null===A||void 0===A||A(e,t)}),[A]),J.current.history=H,J.current.showBot=S,J.current.design=U,J.current.locationDetails=q,J.current.onReceiveChatResponse=s,J.current.isLoadedInConsole=!!s,n.useEffect((()=>{N(i)}),[i]),n.useEffect((()=>{const{updateContact:e,bot:t}=J.current;V(l?L([...l],{updateContact:e,botSettings:t.botSettings}):l)}),[l]),n.useEffect((()=>{if(_&&!J.current.isLoadedInConsole)return function(e){e.origin||(e.origin=null);e.botId||(e.botId=null);try{const{origin:t,botId:o}=e;return I=new BroadcastChannel("lp_web_chat"),I.addEventListener("message",k(e)),I.postMessage({action:"GetConversationId",origin:t,botId:o}),()=>{I&&(I.removeEventListener("message",k),I.close(),I=null)}}catch(t){console.error("Unable to start session sharing:",t)}}({botId:_._id,origin:J.current.origin,onHistoryChange:e=>{var t;(null!==e&&void 0!==e&&e.length||null!==(t=J.current.history)&&void 0!==t&&t.length)&&G(e)},getHistory:()=>J.current.history})}),[_]),n.useEffect((()=>{P(a)}),[a]),n.useEffect((()=>{const{updateContact:e,bot:t,recipientId:o,autoLaunch:n,setAndBroadcastHistory:i,startupMessages:a}=J.current;t?F(t,o,e,{autoLaunch:n,startupMessages:L(a,{updateContact:e,botSettings:t.botSettings})}).then(i):async function(e){try{const t=new URLSearchParams(window.location.search),o={authToken:t.get("token"),recipientId:e},{startupFlow:n,...i}=await r.Jt("/bot/get-bot-details-by-auth-token",o,{noAuth:!0});return{startupFlow:n,bot:i}}catch(t){console.log("Failed to init chat:-",t)}}(o).then((t=>{let{bot:r,startupFlow:a}=t;N(r),a=L(a,{updateContact:e,botSettings:r.botSettings}),V(a);const{design:l,isLoadedInConsole:s}=J.current;!l&&r.botDesign&&P((0,j.Y)(r.botDesign,s?void 0:y)),F(r,o,e,{autoLaunch:n,startupMessages:L(a,{updateContact:e,botSettings:r.botSettings})}).then(i)})),async function(){var e,t,o;const n=u.pR;let i=null;const a=sessionStorage.getItem("locationDetails");if(a)try{i=JSON.parse(a)}catch(F){i={country:"Unavailable",city:"Unavailable",ip:"Unavailable",unavailable_reason:"Error parsing from sessionStorage"}}else i=await r.Jt(`https://api.ipdata.co?api-key=${n}`).catch((e=>({country:"Unavailable",city:"Unavailable",ip:"Unavailable",unavailable_reason:e.message}))),sessionStorage.setItem("locationDetails",JSON.stringify(i));const l=(new c.UAParser).getResult()||{},{ip:s,is_eu:d,city:h,region:g,region_code:x,region_type:p,country_name:m,country_code:v,continent_name:j,continent_code:f,latitude:y,longitude:C,postal:A,calling_code:B,time_zone:w,currency:S}=i,L={ipAddress:s,deviceType:null===(e=l.device)||void 0===e?void 0:e.type,browserName:null===(t=l.browser)||void 0===t?void 0:t.name,osName:null===(o=l.os)||void 0===o?void 0:o.name,...b()};return L.locationDetails={is_eu:d,city:h,region:g,region_code:x,region_type:p,country_name:m,country_code:v,continent_name:j,continent_code:f,latitude:y,longitude:C,postal:A,calling_code:B,time_zone:w,currency:S},L}().then(O)}),[]);const Y=n.useCallback(((e,t)=>{var o,n,r,i;let{showBot:a,design:l,onCallback:s}=J.current;a=e?!a:a,null===s||void 0===s||s("windowToggle",{state:a,design:a?{width:null===l||void 0===l||null===(o=l.window)||void 0===o?void 0:o.width,height:null===l||void 0===l||null===(n=l.window)||void 0===n?void 0:n.height,spacingBottom:null===l||void 0===l||null===(r=l.window)||void 0===r?void 0:r.spacingBottom,spacingCorner:null===l||void 0===l||null===(i=l.window)||void 0===i?void 0:i.spacingCorner}:t})}),[]),K=n.useCallback((async e=>{var t;null!==(t=J.current.history)&&void 0!==t&&t.length||setTimeout((()=>{var e;if(null!==(e=J.current.startupMessages)&&void 0!==e&&e.length)return void J.current.setAndBroadcastHistory((e=>e.concat(...J.current.startupMessages)));const t={role:"assistant",type:"text",content:"Hello, greetings for the day, how may I assist you?"};J.current.setAndBroadcastHistory((e=>e?e.concat(t):[t]))}),e||1700)}),[]),Q=n.useCallback((()=>{Y(!0),T((e=>!e)),D(!0),setTimeout((()=>D(!1)),1e3),K()}),[Y,K]);n.useLayoutEffect((()=>{U&&Y(!1,!0)}),[U,Y]);const X=n.useCallback((async e=>function(e,t){const{updateContact:o,onReceiveChatResponse:n,bot:i,locationDetails:a,onCallback:l,recipientId:s}=t;return async function(e,t,o,n){let{onReceiveChatResponse:i,updateContact:a,onCallback:l,recipientId:s}=o;const d=x(),{_id:c,organizationId:u,botSettings:h}=t,g={userQuery:e,recipientDetails:{recipientId:s,conversationId:d,...n}};i&&(g.testMode=!0);try{const e=await r.bE(`/bot/${u}/${c}/chat`,g,{noAuth:!0});return null===i||void 0===i||i(e),function(e,t){let{updateContact:o,botSettings:n,onCallback:r}=t;const{chatRefId:i,recipientId:a,messages:l}=e;return p(i),null===r||void 0===r||r("set-visitor-id",{recipientId:a}),L(l,{updateContact:o,botSettings:n})}(e,{updateContact:a,botSettings:h,onCallback:l})}catch(m){return[{role:"assistant",type:"text",content:m.message||"Unknown Server error"}]}}(e,i,{onReceiveChatResponse:n,updateContact:o,onCallback:l,recipientId:s},a)}(e,J.current)),[]);J.current.updateContact=n.useCallback((async e=>{const t=await X(e);J.current.setAndBroadcastHistory((e=>e.filter((e=>!C.includes(e.type))).concat(...t)))}),[X]);const Z=n.useCallback((()=>{J.current.setAndBroadcastHistory([]),m(),delete J.current.history,K(700)}),[K]);if(!_||!q)return null;let ee="hide-chat";S&&W?ee="opening":S&&!W?ee="show-chat":!S&&W&&(ee="closing"),ee+="bottomLeft"===(null===U||void 0===U||null===(t=U.window)||void 0===t?void 0:t.align)?" bottom-left ":" bottom-right ",s&&(ee+=" test-console");const te=H&&C.includes(null===(o=H[H.length-1])||void 0===o?void 0:o.type);return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(z,{design:U}),(0,f.jsxs)("div",{className:"chat-handler "+ee,children:[S&&!!_&&(0,f.jsx)(d.A,{botDesign:U,messages:H,showTime:!0,onUserMessage:X,disabledMessage:te,onHistoryChange:J.current.setAndBroadcastHistory,onClear:Z,onHide:Q,onCallback:J.current.onCallback,optionsRenderer:w}),!S&&!W&&(0,f.jsx)(B,{design:U,onToggle:Q})]})]})};function B(e){let{design:t,onToggle:o}=e;const{launcher:{launcherType:n,buttonLogoUrl:r,buttonOnMobile:i,barText:a,fontSize:l,spacingCorner:s,spacingBottom:d}={},header:{bgColor:c,secBgColor:u,fontColor:h}={},window:{fontFamily:g,align:x}={}}=t||{},p="bottomLeft"===x,m={bottom:d,[p?"left":"right"]:s};return"icon"===n||i?(0,f.jsxs)("div",{id:"lp-launcher",className:"lp-launcher button"+(r?"":" bordered"),onClick:o,style:{borderColor:c,color:h,background:r?"transparent":"linear-gradient(to right,"+c+", "+u+")",verticalAlign:"middle",padding:r?void 0:"16px",display:"flex",...m},children:[(0,f.jsx)(S,{design:t,isLeft:p}),r&&(0,f.jsx)("img",{src:r,alt:"Live Chat"}),!r&&v.Or]}):"expand"===n?(0,f.jsx)(w,{isLeft:p,color:h,style:m,bgColor:c,secBgColor:u,imageUrl:r,chatIcon:v.Or,barText:a,fontSize:l,onClick:o}):(0,f.jsxs)("div",{id:"lp-launcher",className:"lp-launcher bar",onClick:o,style:{background:"linear-gradient(to right, "+c+", "+u+")",color:h,fontFamily:g,...m},children:[v.Or,(0,f.jsx)("span",{children:a||"Live Chat"})]})}function w(e){let{isLeft:t,bgColor:o,secBgColor:r,imageUrl:i,chatIcon:a,barText:l="Live Chat",fontSize:s,color:d,autoAnimate:c=!0,style:u,onClick:h}=e;const g=t?"bottom-left":"bottom-right",x={backgroundColor:o},p={backgroundImage:`linear-gradient(90deg, ${o}, ${r})`},m=n.useRef();return n.useEffect((()=>{if(c){const e=setInterval((()=>{var e;null===(e=m.current)||void 0===e||e.classList.remove("bar-hide"),setTimeout((()=>{var e;return null===(e=m.current)||void 0===e?void 0:e.classList.add("bar-hide")}),7e3)}),35e3);return()=>clearInterval(e)}}),[c]),(0,f.jsxs)("div",{className:`lp-launcher expand-button ${g}`,onClick:h,style:u,children:[(0,f.jsx)("div",{ref:m,className:"text-container bar-hide",style:p,children:(0,f.jsx)("div",{className:"bar-text",style:{minWidth:"150px",fontSize:s,color:d},children:(0,f.jsxs)("p",{children:["Hi there, ",(0,f.jsx)("img",{draggable:!1,className:"chat-hand",alt:"\ud83d\udc4b",src:"https://cwc.livserv.in/uploads/Templates/cwc_trend1/hand.png"})," We are online!"]})})}),(0,f.jsx)("div",{className:"image-container",style:x,children:(0,f.jsxs)("div",{className:"image-sub-container",children:[i&&(0,f.jsx)("img",{src:i,alt:l}),!i&&a]})})]})}function S(e){let{text:t="We are Online!",onHide:o,design:r,isLeft:i}=e;const a=function(e,t){let{spacingCorner:o,spacingBottom:n}=(null===e||void 0===e?void 0:e.launcher)||{};if(o=parseFloat(o)||void 0,n=parseFloat(n)||void 0,o&&(o+=5),n&&(n+=75),o||n)return{bottom:n,[t?"left":"right"]:o}}(r,i),[l,s]=n.useState(!0),d=n.useCallback((e=>{e.preventDefault(),e.stopPropagation(),s(!1),null===o||void 0===o||o()}),[o]);return l?(0,f.jsxs)("div",{className:"button-tooltip",style:a,children:[(0,f.jsxs)("div",{children:[(0,f.jsx)("img",{draggable:!1,className:"chat-hand",alt:"\ud83d\udc4b",src:"https://cwc.livserv.in/uploads/Templates/cwc_trend1/hand.png"}),(0,f.jsx)("b",{children:t}),(0,f.jsx)("br",{})]}),(0,f.jsx)("a",{className:"close-indicator",onClick:d,children:(0,f.jsx)("svg",{width:"12",height:"12",viewBox:"0 0 1792 1792",xmlns:"http://www.w3.org/2000/svg",children:(0,f.jsx)("path",{d:"M1490 1245q0 40-24 68l-136 136q-24 24-68 24t-68-28l-294-294-294 294q-24 24-68 24t-68-28l-136-136q-24-24-24-68t24-68l294-294-294-294q-24-24-24-68t24-68l136-136q24-24 68-24t68 28l294 294 294-294q24-24 68-28t68 28l136 136q28 24 24 68t-24 68l-294 294 294 294q24 24 24 68z",fill:"#fff"})})})]}):null}function L(e,t){let{updateContact:o,botSettings:n}=t;if(null===e||void 0===e||!e.length)return e;const r=e[e.length-1];return"form"===r.type&&e.push({role:"user",type:"lead",content:"",profile:r.media,updateContact:o,botSettings:n}),e}async function F(e,t,o,n){let{autoLaunch:i,startupMessages:a}=n;const{_id:l,organizationId:s,botSettings:d={}}=e,c=x();if(!t||!c)return i?a||[{role:"assistant",type:"text",content:"Hello, greetings for the day, how may I assist you?"}]:[];try{const e=await r.Jt(`/bot/${s}/${l}/chat/history/${t}/${c}`,null,{noAuth:!0}),{messages:n}=e||{};return L(n,{updateContact:o,botSettings:d})}catch(u){console.error("Failed to fetch chat history:-",u)}return i?[{role:"assistant",type:"text",content:"Hello, greetings for the day, how may I assist you?"}]:[]}let I=null;function k(e){let{onHistoryChange:t,getHistory:o,origin:n=null,botId:r=null}=e;return e=>{const i=e.data||{};if(i.origin===n&&i.botId===r)try{if("GetConversationId"===i.action){M(o(),n,r)}else if("SetConversationId"===i.action){const{conversationId:e,history:o}=i;e?p(e||void 0):m(),o&&(null===t||void 0===t||t(o))}}catch(a){console.log("Error occurred when trying to handle session sharing:",a)}}}function M(e,t,o,n){if(I)try{const r=x()||"";if(!n&&!r)return;I.postMessage({action:"SetConversationId",origin:t,botId:o,conversationId:r,history:e})}catch(r){console.error("Error sharing session:",r)}}function z(e){let{design:t}=e;const o=null===t||void 0===t?void 0:t.remoteFontLink;return o?s.createPortal((0,f.jsx)("link",{rel:"stylesheet",href:o}),document.head,"remoteFont"):null}var T=o(70855),U=o(41507),P=o(32829),W=o(93383),D=o(26092),_=o(11172),N=o(16491),R=o(74745),V=o(93230),$=o(3788),E=o(24516),H=o(2660),G=o(23114),q=o(16497),O=o(85815),J=o(10226),Y=o(70006),K=o(57988),Q=o(23266),X=o(29714),Z=o(61467),ee=o(51637),te=o(27463);const oe=function(e){let{value:t,onChange:o,...r}=e;const[i,a]=n.useState(!1),l=n.useRef(),s=n.useRef(),d=e=>{let{hex:t}=e;o(r.name,t)};return n.useEffect((()=>{const e=e=>{l.current&&!l.current.contains(e.target)&&a(!1)};return document.addEventListener("click",e),()=>{document.removeEventListener("click",e)}}),[]),(0,f.jsxs)("div",{ref:l,style:{position:"relative"},children:[(0,f.jsx)("div",{style:{backgroundColor:t,height:"35px",width:"35px",position:"absolute",top:"3px",left:"3px"}}),(0,f.jsx)(H.A,{inputRef:s,value:t,onChange:e=>d({hex:e.currentTarget.value}),maxLength:9,...r,type:"text",onFocus:()=>a(!0),style:{paddingLeft:"32px"}}),i&&(0,f.jsx)("div",{style:{position:"absolute",zIndex:1,top:"45px"},children:(0,f.jsx)(te.xk,{color:t,onChange:d})})]})};var ne=o(98415);const re=function(e){let{value:t,onChange:o,...r}=e;const i=n.useCallback((e=>o(r.name,"yes"===e.target.value)),[r.name,o]);return(0,f.jsxs)(Y.A,{...r,value:t?"yes":"no",defaultValue:t?"yes":"no",onChange:i,children:[(0,f.jsx)(Q.A,{value:"no",children:"No"}),(0,f.jsx)(Q.A,{value:"yes",children:"Yes"})]})},ie=[{value:"gpt-3.5-turbo-0125",label:"GPT 3.5 Latest Stable (default)",description:"Latest stable model of GPT 3.5. More performant. Random minor inconsistency observed sometimes."},{value:"gpt-3.5-turbo-1106",label:"GPT 3.5 Latest Preview",description:"Latest preview model of GPT 3.5. This is more accurate than latest stable, but some times non responsive while on peek loads."},{value:"gpt-4o-mini",label:"GPT 4o Mini Latest",description:"Latest Mini model of GPT 4o. Cheaper and faster than GPT 4o."},{value:"gpt-4o",label:"GPT 4o Latest (suggested)",description:"Latest model of GPT 4o. More capable, cheaper and faster than GPT 4 Turbo."},{value:"gpt-4",label:"GPT 4 Turbo",description:"Latest stable model of GPT 4. More capable, but is 5 times costly then 3.5 models."},{value:"gpt-4-1106-preview",label:"GPT 4 Latest Preview",description:"Latest preview model of GPT 4. Most capable model, but is 3 times costly then 3.5 models."}],ae=ie.reduce(((e,t)=>(e[t.value]=t,e)),{});const le=function(e){var t;let{value:o,...n}=e;return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(Y.A,{...n,value:o,defaultValue:ie[0].value,children:ie.map((e=>(0,f.jsx)(Q.A,{value:e.value,children:e.label},e.value)))}),(0,f.jsx)(E.A,{id:"bot-model-description",children:o?null===(t=ae[o])||void 0===t?void 0:t.description:ie[0].description})]})};var se=o(59254),de=o(10939),ce=o(21788);const ue=()=>X.Yj().matches(/^#([0-9A-Fa-f]{3}){1,2}$/,"Is not a valid color code").required("Background color is required"),he=e=>X.Yj().matches(/^(\d+px|\d+%) (\d+px|\d+%) (\d+px|\d+%) (\d+px|\d+%|\d+%)$/,`Invalid ${e}! Use the format: 1px 2px 3px 4px not a valid code`),ge=X.Ik().shape({bgColor:ue(),fontColor:ue(),headerPadding:he("padding"),headerLogoMargin:he("margin"),visitorBubbleBorderCurve:he("border-radius"),botBubbleBorderCurve:he("border-radius")}),xe={maxWidth:{xs:600,lg:700,xl:1050},margin:{xs:2.5,md:3},"& > *":{flexGrow:1,flexBasis:"50%"}};const pe=function(e){let{onChange:t}=e;const[o,r]=(0,T.G)(),s=(0,i.nc)((e=>{var t,o;return null===(t=e.organization)||void 0===t||null===(o=t.availableCredits)||void 0===o?void 0:o.toFixed(3)})),[d,c]=(0,n.useState)(!1),u=(0,i.nc)((e=>e.isSuperUser));if(!r)return null;const{botName:h,botDesign:g={}}=r,x={bgColor:g.backgroundColor||"#484a49",botBorderColor:g.botBorderColor||"#484a49",botBackgroundColor:g.botBackgroundColor||"#dfd9df",botFontColor:g.botFontColor||"#000000",visitorBorderColor:g.visitorBorderColor||"#000000",visitorBackgroundColor:g.visitorBackgroundColor||"#ffffff",visitorFontColor:g.visitorFontColor||"#000000",fontType:g.fontType||"normal-font",windowAlign:g.windowAlign||"bottomRight",fontColor:g.textColor||"#484a49",titleText:h,placeholder:"Type your message...",launcherType:"bar",messageBubbleLogo:!0,botLogo:g.botLogo||{},visitorMessageLogo:g.visitorMessageLogo||{},botMessageLogo:g.botMessageLogo||{},botChatButton:g.botChatButton||{},hideLivservBranding:g.hideLivservBranding||!1,...g},p=()=>{c(!1===d)};return(0,f.jsx)(ee.A,{sx:xe,content:!1,border:!1,boxShadow:!0,children:(0,f.jsx)(N.A,{sx:{p:{xs:2,sm:3,md:4,xl:5}},children:(0,f.jsx)(Z.l1,{initialValues:x,validationSchema:ge,onSubmit:async(e,t)=>{let{setErrors:n,setStatus:r,setSubmitting:i}=t;try{var a,l,s,d,c,u,h,x;(null===(a=e.botChatButton)||void 0===a?void 0:a.name)!==(null===(l=g.botChatButton)||void 0===l?void 0:l.name)&&(e.botChatButton=g.botChatButton),(null===(s=e.botLogo)||void 0===s?void 0:s.name)!==(null===(d=g.botLogo)||void 0===d?void 0:d.name)&&(e.botLogo=g.botLogo),(null===(c=e.visitorMessageLogo)||void 0===c?void 0:c.name)!==(null===(u=g.visitorMessageLogo)||void 0===u?void 0:u.name)&&(e.visitorMessageLogo=g.visitorMessageLogo),(null===(h=e.botMessageLogo)||void 0===h?void 0:h.name)!==(null===(x=g.botMessageLogo)||void 0===x?void 0:x.name)&&(e.botMessageLogo=g.botMessageLogo),await(0,ne.jo)(o,e),r({success:!1}),i(!1)}catch(p){console.error(p),r({success:!1}),n({submit:p.message}),i(!1)}},children:e=>(0,f.jsxs)("form",{noValidate:!0,onSubmit:e.handleSubmit,children:[(0,f.jsxs)(a.Ay,{container:!0,spacing:3,children:[(0,f.jsxs)(a.Ay,{item:!0,xs:12,display:"flex",justifyContent:"center",alignItems:"center",children:["Balance : \xa0",(0,f.jsxs)(l.A,{variant:"subtitle1",color:"green",children:[s,"\xa0$"]})]}),(0,f.jsx)(me,{...e}),(0,f.jsx)(Le,{...e}),(0,f.jsx)(ve,{...e}),(0,f.jsx)(je,{...e}),(0,f.jsx)(be,{...e}),(0,f.jsx)(fe,{...e}),(0,f.jsx)(a.Ay,{item:!0,xs:12,children:(0,f.jsx)(P.A,{children:(0,f.jsx)(W.A,{disableElevation:!0,fullWidth:!0,size:"large",variant:"outlined",color:"primary",onClick:p,children:"Advance settings"})})}),d&&(0,f.jsx)(Ae,{...e}),d&&u&&(0,f.jsx)(Be,{...e}),d&&(0,f.jsx)(we,{...e}),(0,f.jsx)(Se,{...e})]}),(0,f.jsx)(Fe,{onChange:t})]})})})})};function me(e){let{values:t,touched:o,errors:n,handleBlur:r,handleChange:i}=e;return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(a.Ay,{item:!0,xs:12,children:(0,f.jsx)(R.A,{children:(0,f.jsx)(l.A,{variant:"subtitle1",children:"General Settings"})})}),(0,f.jsx)(a.Ay,{item:!0,xs:12,children:(0,f.jsxs)(V.A,{spacing:1,children:[(0,f.jsx)($.A,{htmlFor:"botModelName",children:"Underlying GPT Model *"}),(0,f.jsx)(le,{id:"botModelName",value:t.botModelName,name:"botModelName",onBlur:r,onChange:i,error:Boolean(o.botModelName&&n.botModelName)}),o.botModelName&&n.botModelName&&(0,f.jsx)(E.A,{error:!0,id:"helper-text-bg-color",children:n.botModelName})]})})]})}function be(e){let{values:t,touched:o,errors:n,handleBlur:r,handleChange:i,setFieldValue:s}=e;return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(a.Ay,{item:!0,xs:12,children:(0,f.jsx)(R.A,{children:(0,f.jsx)(l.A,{variant:"subtitle1",children:"Header Settings"})})}),(0,f.jsx)(a.Ay,{item:!0,xs:12,md:4,children:(0,f.jsxs)(V.A,{spacing:1,children:[(0,f.jsx)($.A,{htmlFor:"bgColor",children:"Background Color *"}),(0,f.jsx)(oe,{id:"bgColor",type:"color",value:t.bgColor,name:"bgColor",onBlur:r,onChange:s,placeholder:"",fullWidth:!0,error:Boolean(o.bgColor&&n.bgColor)}),o.bgColor&&n.bgColor&&(0,f.jsx)(E.A,{error:!0,id:"helper-text-bg-color",children:n.bgColor})]})}),(0,f.jsx)(a.Ay,{item:!0,xs:12,md:4,children:(0,f.jsxs)(V.A,{spacing:1,children:[(0,f.jsx)($.A,{htmlFor:"fontColor",children:"Font Color *"}),(0,f.jsx)(oe,{id:"fontColor",type:"color",value:t.fontColor,name:"fontColor",onBlur:r,onChange:s,placeholder:"",fullWidth:!0,error:Boolean(o.fontColor&&n.fontColor)}),o.fontColor&&n.fontColor&&(0,f.jsx)(E.A,{error:!0,id:"helper-text-font-color",children:n.fontColor})]})}),(0,f.jsx)(a.Ay,{item:!0,xs:12,md:4,children:(0,f.jsxs)(V.A,{spacing:1,children:[(0,f.jsx)($.A,{htmlFor:"headerFontSize",children:"Font Size"}),(0,f.jsx)(H.A,{fullWidth:!0,type:"text",id:"headerFontSize",name:"headerFontSize",defaultValue:t.headerFontSize,onChange:i,placeholder:"18px"})]})}),(0,f.jsx)(a.Ay,{item:!0,xs:12,md:6,children:(0,f.jsxs)(V.A,{spacing:1,children:[(0,f.jsx)($.A,{htmlFor:"titleText",children:"Chat Window Title *"}),(0,f.jsx)(H.A,{fullWidth:!0,error:Boolean(o.titleText&&n.titleText),id:"titleText",value:t.titleText,name:"titleText",onBlur:r,onChange:i,placeholder:"Provide your bot title text",inputProps:{maxLength:25}}),o.titleText&&n.titleText&&(0,f.jsx)(E.A,{error:!0,id:"helper-text-bot-title",children:n.titleText})]})}),(0,f.jsx)(a.Ay,{item:!0,xs:12,md:6,children:(0,f.jsxs)(V.A,{spacing:1,children:[(0,f.jsx)($.A,{htmlFor:"headerPadding",style:{paddingBottom:"6px"},children:"Chat Window Header Padding"}),(0,f.jsx)(H.A,{id:"headerPadding",name:"headerPadding",value:t.headerPadding,onBlur:r,onChange:i,placeholder:"padding: 2px 5px 2px 5px"}),o.headerPadding&&n.headerPadding&&(0,f.jsx)(E.A,{error:!0,id:"helper-text-bg-color",children:n.headerPadding})]})})]})}function ve(e){let{values:t,touched:o,errors:n,handleBlur:r,handleChange:i}=e;return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(a.Ay,{item:!0,xs:12,children:(0,f.jsx)(R.A,{children:(0,f.jsx)(l.A,{variant:"subtitle1",children:"Composer Settings"})})}),(0,f.jsx)(a.Ay,{item:!0,xs:12,children:(0,f.jsxs)(V.A,{spacing:1,children:[(0,f.jsx)($.A,{htmlFor:"placeholder",children:"Placeholder Text *"}),(0,f.jsx)(H.A,{fullWidth:!0,error:Boolean(o.placeholder&&n.placeholder),id:"placeholder",defaultValue:t.placeholder,name:"placeholder",onBlur:r,onChange:i,placeholder:"Type your message...",inputProps:{maxLength:30}}),o.placeholder&&n.placeholder&&(0,f.jsx)(E.A,{error:!0,id:"helper-text-message-placeholder",children:n.placeholder})]})}),(0,f.jsx)(a.Ay,{item:!0,xs:12,md:6,children:(0,f.jsxs)(V.A,{spacing:1,children:[(0,f.jsx)($.A,{htmlFor:"fontType",children:"Font source"}),(0,f.jsxs)(G.A,{row:!0,id:"fontType",name:"fontType",defaultValue:t.fontType,onChange:i,children:[(0,f.jsx)(q.A,{value:"regular",control:(0,f.jsx)(O.A,{}),label:"Regular"}),(0,f.jsx)(q.A,{value:"remote",control:(0,f.jsx)(O.A,{}),label:"Remote"})]})]})}),(0,f.jsx)(a.Ay,{item:!0,xs:12,md:6,children:(0,f.jsxs)(V.A,{spacing:1,children:[(0,f.jsx)($.A,{htmlFor:"fontType",children:"Font name"}),(0,f.jsx)(H.A,{fullWidth:!0,id:"fontName",name:"fontName",defaultValue:t.fontName,onChange:i,placeholder:"Provide Font Name"})]})}),"remote"==t.fontType&&(0,f.jsx)(a.Ay,{item:!0,xs:12,children:(0,f.jsxs)(V.A,{spacing:1,children:[(0,f.jsx)($.A,{htmlFor:"remoteFontLink",children:"Paste Remote Font Link"}),(0,f.jsx)(H.A,{multiline:!0,id:"remoteFontLink",name:"remoteFontLink",defaultValue:t.remoteFontLink,onChange:i,placeholder:"Ex: https://fonts.googleapis.com"})]})})]})}function je(e){let{values:t,handleChange:o,setFieldValue:n}=e;return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(a.Ay,{item:!0,xs:12,children:(0,f.jsx)(R.A,{children:(0,f.jsx)(l.A,{variant:"subtitle1",children:"Chat Window Settings"})})}),(0,f.jsx)(a.Ay,{item:!0,xs:12,md:4,children:(0,f.jsxs)(V.A,{spacing:1,children:[(0,f.jsx)($.A,{id:"windowAlign",children:"Window Align"}),(0,f.jsxs)(Y.A,{labelId:"windowAlign",defaultValue:t.windowAlign,name:"windowAlign",onChange:o,children:[(0,f.jsx)(Q.A,{value:"bottomLeft",children:"Bottom Left"}),(0,f.jsx)(Q.A,{value:"bottomRight",children:"Bottom Right"})]})]})}),(0,f.jsx)(a.Ay,{item:!0,xs:12,md:4,children:(0,f.jsxs)(V.A,{spacing:1,children:[(0,f.jsx)($.A,{htmlFor:"paddingLeft",children:"Spacing on corner"}),(0,f.jsx)(H.A,{fullWidth:!0,type:"text",id:"paddingLeft",name:"paddingLeft",defaultValue:t.paddingLeft,onChange:o,placeholder:"0px"})]})}),(0,f.jsx)(a.Ay,{item:!0,xs:12,md:4,children:(0,f.jsxs)(V.A,{spacing:1,children:[(0,f.jsx)($.A,{htmlFor:"paddingBottom",children:"Spacing on Bottom"}),(0,f.jsx)(H.A,{fullWidth:!0,type:"text",id:"paddingBottom",name:"paddingBottom",defaultValue:t.paddingBottom,onChange:o,placeholder:"0px"})]})}),(0,f.jsx)(a.Ay,{item:!0,xs:12,md:6,children:(0,f.jsxs)(V.A,{spacing:1,children:[(0,f.jsx)($.A,{id:"autoLaunch",children:"Desktop proactive window"}),(0,f.jsx)(re,{value:t.autoLaunch,name:"autoLaunch",defaultValue:!1,onChange:n})]})}),(0,f.jsx)(a.Ay,{item:!0,xs:12,md:6,children:(0,f.jsxs)(V.A,{spacing:1,children:[(0,f.jsx)($.A,{id:"mobileAutoLaunch",children:"Mobile proactive window"}),(0,f.jsx)(re,{value:t.mobileAutoLaunch,name:"mobileAutoLaunch",defaultValue:!1,onChange:n})]})}),(0,f.jsx)(a.Ay,{item:!0,xs:12,md:6,children:(0,f.jsxs)(V.A,{spacing:1,children:[(0,f.jsx)($.A,{htmlFor:"chatWindowWidth",children:"Chat Window Width"}),(0,f.jsx)(H.A,{fullWidth:!0,type:"text",id:"chatWindowWidth",name:"chatWindowWidth",defaultValue:t.chatWindowWidth,onChange:o,placeholder:"380px"})]})}),(0,f.jsx)(a.Ay,{item:!0,xs:12,md:6,children:(0,f.jsxs)(V.A,{spacing:1,children:[(0,f.jsx)($.A,{htmlFor:"chatWindowHeight",children:"Chat Window Height"}),(0,f.jsx)(H.A,{fullWidth:!0,type:"text",id:"chatWindowHeight",name:"chatWindowHeight",defaultValue:t.chatWindowHeight,onChange:o,placeholder:"500px"})]})})]})}function fe(e){var t;let{values:o,errors:n,handleBlur:r,touched:i,handleChange:s,setFieldValue:d}=e;return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(a.Ay,{item:!0,xs:12,children:(0,f.jsx)(R.A,{children:(0,f.jsx)(l.A,{variant:"subtitle1",children:"Header Logo Settings"})})}),(0,f.jsxs)(a.Ay,{item:!0,xs:12,md:6,children:[(0,f.jsx)($.A,{htmlFor:"uploadHeaderLogo",children:"Upload Header Logo"}),(0,f.jsx)(Ce,{imageUrl:null===(t=o.botLogo)||void 0===t?void 0:t.url,imageName:"botLogo",onChange:d,bgColor:o.bgColor})]}),(0,f.jsx)(a.Ay,{item:!0,xs:12,md:6,children:(0,f.jsxs)(V.A,{spacing:1,children:[(0,f.jsx)($.A,{htmlFor:"headerLogoMargin",children:"Header Logo Margin"}),(0,f.jsx)(H.A,{id:"headerLogoMargin",name:"headerLogoMargin",value:o.headerLogoMargin,onBlur:r,onChange:s,placeholder:"border : 1px 2px 3px 4px"}),i.headerLogoMargin&&n.headerLogoMargin&&(0,f.jsx)(E.A,{error:!0,id:"helper-text-bg-color",children:n.headerLogoMargin})]})}),(0,f.jsx)(a.Ay,{item:!0,xs:12,md:6,children:(0,f.jsxs)(V.A,{spacing:1,children:[(0,f.jsx)($.A,{htmlFor:"logoWidth",children:"Width"}),(0,f.jsx)(H.A,{fullWidth:!0,type:"text",id:"logoWidth",name:"logoWidth",defaultValue:o.logoWidth,onChange:s,placeholder:"64px"})]})}),(0,f.jsx)(a.Ay,{item:!0,xs:12,md:6,children:(0,f.jsxs)(V.A,{spacing:1,children:[(0,f.jsx)($.A,{htmlFor:"logoHeight",children:"Height"}),(0,f.jsx)(H.A,{fullWidth:!0,type:"text",id:"logoHeight",name:"logoHeight",defaultValue:o.logoHeight,onChange:s,placeholder:"64px"})]})})]})}const ye=(0,se.Ay)("input")({clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:1,overflow:"hidden",position:"absolute",bottom:0,left:0,whiteSpace:"nowrap",width:1});function Ce(e){let{imageUrl:t,imageName:o,maxImageSize:r=25e4,onChange:i,bgColor:s}=e;const[d,c]=(0,n.useState)(null),[u,h]=(0,n.useState)(t),g=s&&null!==u&&void 0!==u&&u.endsWith(".png")?s:"transparent",x=!!d,p=!x&&t,m=u?"Replace image":"Select image";return(0,f.jsxs)(f.Fragment,{children:[u&&(0,f.jsx)(a.Ay,{item:!0,xs:12,children:(0,f.jsx)("img",{src:u,alt:"headerLogo",height:50,style:{backgroundColor:g}})}),(0,f.jsxs)(V.A,{spacing:2,direction:"row",children:[(0,f.jsxs)(J.A,{component:"label",variant:"contained",children:[m,(0,f.jsx)(ye,{name:o,type:"file",onChange:e=>{try{const t=e.target.files[0],o=t.size;if(t.type.startsWith("image/")&&o<=r){c(t),h(URL.createObjectURL(t));const e=new FileReader;e.onloadend=()=>{h(e.result)},e.readAsDataURL(t)}else(0,ce.i)(!0,`Please upload valid image file and size is <= ${r/1e3} kb`,"error"),c(null),e.target.value=null}catch(t){console.log("Error uploading the image ::",t),(0,ce.i)(!0,"Please select the image file","error"),e.target.value=null}}},d?d.name:"")]}),p&&(0,f.jsx)(J.A,{variant:"outlined",onClick:async()=>{try{await(0,ne.Ci)(o),i(o,null),h(null),c(null),(0,ce.i)(!0,"Logo deleted successfully.","success")}catch(e){console.log("Deleting logo failed. Please try again later.",e)}},startIcon:(0,f.jsx)(K.A,{}),children:"Delete"}),x&&(0,f.jsx)(P.A,{children:(0,f.jsx)(W.A,{color:"primary",variant:"contained",startIcon:(0,f.jsx)(de.A,{}),onClick:async()=>{try{const e=await(0,ne.I4)(o,d);i(o,e),c(null),(0,ce.i)(!0,"Logo uploaded successfully.","success")}catch(e){console.log("File upload failed. Please try again later.",e)}},ml:5,children:"Upload"})})]}),d&&(0,f.jsxs)(l.A,{variant:"body2",children:["File Name : ",d.name," "]})]})}function Ae(e){let{values:t,handleChange:o}=e;return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(a.Ay,{item:!0,xs:12,children:(0,f.jsx)(R.A,{children:(0,f.jsx)(l.A,{variant:"subtitle1",children:"Legal requirements"})})}),(0,f.jsx)(a.Ay,{item:!0,xs:12,md:12,children:(0,f.jsxs)(V.A,{spacing:1,children:[(0,f.jsx)($.A,{htmlFor:"chatDisclaimer",children:"Chat Disclaimer"}),(0,f.jsx)(H.A,{fullWidth:!0,type:"text",id:"chatDisclaimer",name:"chatDisclaimer",defaultValue:t.chatDisclaimer,onChange:o,inputProps:{maxLength:260},placeholder:"Provide the disclaimer to be shown in chat window"})]})})]})}function Be(e){let{values:t,setFieldValue:o}=e;return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(a.Ay,{item:!0,xs:12,children:(0,f.jsx)(R.A,{children:(0,f.jsx)(l.A,{variant:"subtitle1",children:"Hide Livserv branding"})})}),(0,f.jsx)(a.Ay,{item:!0,xs:12,md:6,children:(0,f.jsxs)(V.A,{spacing:1,children:[(0,f.jsx)($.A,{htmlFor:"hideLivservBranding",children:"Hide Livserv branding"}),(0,f.jsx)(re,{id:"hideLivservBranding",name:"hideLivservBranding",value:t.hideLivservBranding,defaultValue:!1,onChange:o})]})})]})}function we(e){var t,o;let{values:n,touched:r,errors:i,handleBlur:s,handleChange:d,setFieldValue:c}=e;return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(a.Ay,{item:!0,xs:12,children:(0,f.jsx)(R.A,{children:(0,f.jsx)(l.A,{variant:"subtitle1",children:"Message Bubble Settings"})})}),(0,f.jsx)(a.Ay,{item:!0,xs:12,md:6,children:(0,f.jsxs)(V.A,{spacing:1,children:[(0,f.jsx)($.A,{htmlFor:"messageBubbleLogo",children:"Show Message Bubble Logo"}),(0,f.jsx)(re,{id:"messageBubbleLogo",name:"messageBubbleLogo",value:n.messageBubbleLogo,defaultValue:!1,onChange:c})]})}),(0,f.jsx)(a.Ay,{item:!0,xs:12,md:6,children:(0,f.jsxs)(V.A,{spacing:1,children:[(0,f.jsx)($.A,{htmlFor:"fontSize",children:"Font Size"}),(0,f.jsx)(H.A,{fullWidth:!0,type:"text",id:"fontSize",name:"fontSize",defaultValue:n.fontSize,onChange:d,placeholder:"12px"})]})}),(0,f.jsx)(a.Ay,{item:!0,xs:12,children:(0,f.jsx)(l.A,{variant:"overline",display:"block",style:{color:"#9C27B0"},children:"Visitor Bubble Settings"})}),n.messageBubbleLogo&&(0,f.jsxs)(a.Ay,{item:!0,xs:12,children:[(0,f.jsx)($.A,{htmlFor:"uploadVisitorLogo",children:"Upload Visitor Logo"}),(0,f.jsx)(Ce,{imageUrl:null===(t=n.visitorMessageLogo)||void 0===t?void 0:t.url,imageName:"visitorMessageLogo",maxImageSize:5e4,onChange:c})]}),(0,f.jsx)(a.Ay,{item:!0,xs:12,md:6,children:(0,f.jsxs)(V.A,{spacing:1,children:[(0,f.jsx)($.A,{htmlFor:"visitorBackgroundColor",children:"Background Color"}),(0,f.jsx)(oe,{id:"visitorBackgroundColor",type:"color",value:n.visitorBackgroundColor,name:"visitorBackgroundColor",onBlur:s,onChange:c,placeholder:"",fullWidth:!0,error:Boolean(r.visitorBackgroundColor&&i.visitorBackgroundColor)}),r.visitorBackgroundColor&&i.visitorBackgroundColor&&(0,f.jsx)(E.A,{error:!0,id:"helper-text-bg-color",children:i.visitorBackgroundColor})]})}),(0,f.jsx)(a.Ay,{item:!0,xs:12,md:6,children:(0,f.jsxs)(V.A,{spacing:1,children:[(0,f.jsx)($.A,{htmlFor:"visitorFontColor",children:"Font Color"}),(0,f.jsx)(oe,{id:"visitorFontColor",type:"color",value:n.visitorFontColor,name:"visitorFontColor",onBlur:s,onChange:c,placeholder:"",fullWidth:!0,error:Boolean(r.visitorFontColor&&i.visitorFontColor)}),r.visitorFontColor&&i.visitorFontColor&&(0,f.jsx)(E.A,{error:!0,id:"helper-text-bg-color",children:i.visitorFontColor})]})}),n.visitorLogo&&(0,f.jsx)(a.Ay,{item:!0,xs:12,children:(0,f.jsxs)(V.A,{spacing:1,children:[(0,f.jsx)($.A,{htmlFor:"visitorLogoImage",children:"Upload Visitor Logo"}),(0,f.jsx)(H.A,{fullWidth:!0,type:"file",id:"visitorLogoImage",name:"visitorLogoImage",onChange:d,placeholder:"0px"})]})}),(0,f.jsx)(a.Ay,{item:!0,xs:12,md:6,children:(0,f.jsxs)(V.A,{spacing:1,children:[(0,f.jsx)($.A,{htmlFor:"visitorBorderColor",children:"Border Color"}),(0,f.jsx)(oe,{id:"visitorBorderColor",type:"color",value:n.visitorBorderColor,name:"visitorBorderColor",onBlur:s,onChange:c,placeholder:"",fullWidth:!0,error:Boolean(r.visitorBorderColor&&i.visitorBorderColor)}),r.visitorBorderColor&&i.visitorBorderColor&&(0,f.jsx)(E.A,{error:!0,id:"helper-text-bg-color",children:i.visitorBorderColor})]})}),(0,f.jsx)(a.Ay,{item:!0,xs:12,md:6,children:(0,f.jsxs)(V.A,{spacing:1,children:[(0,f.jsx)($.A,{htmlFor:"visitorBubbleBorderCurve",style:{paddingBottom:"6px"},children:"Border Radius"}),(0,f.jsx)(H.A,{id:"visitorBubbleBorderCurve",name:"visitorBubbleBorderCurve",value:n.visitorBubbleBorderCurve,onBlur:s,onChange:d,placeholder:"border : 1px 2px 3px 4px"}),r.visitorBubbleBorderCurve&&i.visitorBubbleBorderCurve&&(0,f.jsx)(E.A,{error:!0,id:"helper-text-bg-color",children:i.visitorBubbleBorderCurve})]})}),(0,f.jsx)(a.Ay,{item:!0,xs:12,children:(0,f.jsx)(l.A,{variant:"overline",display:"block",style:{color:"#9C27B0"},children:"Bot Bubble Settings"})}),n.messageBubbleLogo&&(0,f.jsxs)(a.Ay,{item:!0,xs:12,children:[(0,f.jsx)($.A,{htmlFor:"uploadBotLogo",children:"Upload Bot Logo"}),(0,f.jsx)(Ce,{imageUrl:null===(o=n.botMessageLogo)||void 0===o?void 0:o.url,imageName:"botMessageLogo",maxImageSize:5e4,onChange:c})]}),(0,f.jsx)(a.Ay,{item:!0,xs:12,md:6,children:(0,f.jsxs)(V.A,{spacing:1,children:[(0,f.jsx)($.A,{htmlFor:"botBackgroundColor",children:"Background Color"}),(0,f.jsx)(oe,{id:"botBackgroundColor",type:"color",value:n.botBackgroundColor,name:"botBackgroundColor",onBlur:s,onChange:c,placeholder:"",fullWidth:!0,error:Boolean(r.botBackgroundColor&&i.botBackgroundColor)}),r.botBackgroundColor&&i.botBackgroundColor&&(0,f.jsx)(E.A,{error:!0,id:"helper-text-bg-color",children:i.botBackgroundColor})]})}),(0,f.jsx)(a.Ay,{item:!0,xs:12,md:6,children:(0,f.jsxs)(V.A,{spacing:1,children:[(0,f.jsx)($.A,{htmlFor:"botFontColor",children:"Font Color"}),(0,f.jsx)(oe,{id:"botFontColor",type:"color",value:n.botFontColor,name:"botFontColor",onBlur:s,onChange:c,placeholder:"",fullWidth:!0,error:Boolean(r.botFontColor&&i.botFontColor)}),r.botFontColor&&i.botFontColor&&(0,f.jsx)(E.A,{error:!0,id:"helper-text-bg-color",children:i.botFontColor})]})}),(0,f.jsx)(a.Ay,{item:!0,xs:12,md:6,children:(0,f.jsxs)(V.A,{spacing:1,children:[(0,f.jsx)($.A,{htmlFor:"botBorderColor",children:"Border Color"}),(0,f.jsx)(oe,{id:"botBorderColor",type:"color",value:n.botBorderColor,name:"botBorderColor",onBlur:s,onChange:c,placeholder:"",fullWidth:!0,error:Boolean(r.botBorderColor&&i.botBorderColor)}),r.botBorderColor&&i.botBorderColor&&(0,f.jsx)(E.A,{error:!0,id:"helper-text-bg-color",children:i.botBorderColor})]})}),(0,f.jsx)(a.Ay,{item:!0,xs:12,md:6,children:(0,f.jsxs)(V.A,{spacing:1,children:[(0,f.jsx)($.A,{htmlFor:"botBubbleBorderCurve",style:{paddingBottom:"6px"},children:"Border Radius"}),(0,f.jsx)(H.A,{id:"botBubbleBorderCurve",name:"botBubbleBorderCurve",value:n.botBubbleBorderCurve,onBlur:s,onChange:d,placeholder:"border : 1px 2px 3px 4px"}),r.botBubbleBorderCurve&&i.botBubbleBorderCurve&&(0,f.jsx)(E.A,{error:!0,id:"helper-text-bg-color",children:i.botBubbleBorderCurve})]})})]})}function Se(e){let{errors:t,isSubmitting:o}=e;return(0,f.jsx)(f.Fragment,{children:(0,f.jsxs)(a.Ay,{item:!0,xs:12,children:[(0,f.jsx)(E.A,{error:!0,children:t.submit}),(0,f.jsx)(P.A,{children:(0,f.jsx)(W.A,{disableElevation:!0,disabled:Boolean(t.submit),isLoading:o,fullWidth:!0,size:"large",type:"submit",variant:"contained",color:"primary",children:"Save Settings"})})]})})}function Le(e){var t;let{values:o,handleChange:n,setFieldValue:r}=e;return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(a.Ay,{item:!0,xs:12,children:(0,f.jsx)(R.A,{children:(0,f.jsx)(l.A,{variant:"subtitle1",children:"Chat Launcher Settings"})})}),(0,f.jsx)(a.Ay,{item:!0,xs:12,md:6,children:(0,f.jsxs)(V.A,{spacing:1,children:[(0,f.jsx)($.A,{htmlFor:"messagePlaceholder",children:"Chat Launcher Type *"}),(0,f.jsxs)(G.A,{row:!0,name:"launcherType",defaultValue:o.launcherType,onChange:n,children:[(0,f.jsx)(q.A,{value:"icon",control:(0,f.jsx)(O.A,{}),label:"Button"}),(0,f.jsx)(q.A,{value:"bar",control:(0,f.jsx)(O.A,{}),label:"Bar"}),(0,f.jsx)(q.A,{value:"expand",control:(0,f.jsx)(O.A,{}),label:"Expand Button"})]})]})}),"bar"!==o.launcherType&&(0,f.jsxs)(a.Ay,{item:!0,xs:12,md:6,children:[(0,f.jsx)($.A,{htmlFor:"uploadChatButton",children:"Upload Chat Button"}),(0,f.jsx)(Ce,{imageUrl:null===(t=o.botChatButton)||void 0===t?void 0:t.url,imageName:"botChatButton",onChange:r})]}),"bar"===o.launcherType&&(0,f.jsx)(a.Ay,{item:!0,xs:12,md:6,children:(0,f.jsxs)(V.A,{spacing:1,children:[(0,f.jsx)($.A,{id:"buttonOnMobile",children:"Button on Mobile"}),(0,f.jsx)(re,{name:"buttonOnMobile",value:o.buttonOnMobile,defaultValue:!1,onChange:r})]})}),(0,f.jsx)(a.Ay,{item:!0,xs:12,md:6,children:(0,f.jsxs)(V.A,{spacing:1,children:[(0,f.jsx)($.A,{htmlFor:"launcherSpacingCorner",children:"Spacing on corner"}),(0,f.jsx)(H.A,{fullWidth:!0,type:"text",id:"launcherSpacingCorner",name:"launcherSpacingCorner",defaultValue:o.launcherSpacingCorner,onChange:n,placeholder:"0px"})]})}),(0,f.jsx)(a.Ay,{item:!0,xs:12,md:6,children:(0,f.jsxs)(V.A,{spacing:1,children:[(0,f.jsx)($.A,{htmlFor:"launcherSpacingBottom",children:"Spacing on Bottom"}),(0,f.jsx)(H.A,{fullWidth:!0,type:"text",id:"launcherSpacingBottom",name:"launcherSpacingBottom",defaultValue:o.launcherSpacingBottom,onChange:n,placeholder:"0px"})]})})]})}function Fe(e){let{onChange:t}=e;const{values:o}=(0,Z.j7)();return n.useEffect((()=>{o&&t((0,j.Y)(o))}),[o,t]),null}var Ie=o(34735),ke=o(73225);const Me=()=>{var e;const[t,o]=n.useState(),[s,d]=(0,n.useState)(!1),[c,u]=n.useState({}),[h,g]=n.useState(),[x,p]=(0,T.G)(),[m,b]=(0,n.useState)(!1),v=(0,i.nc)((e=>e.organizationId)),{isSuperUser:j}=(0,i.nc)();if(n.useEffect((()=>{v&&x&&r.Jt(`/bot/${v}/${x}/chat/startup-flow`,{recipientId:Pe()}).then((e=>g(e||!1)))}),[x,v]),void 0===h)return;const y=e=>{o(e),d(!0)};return(0,f.jsxs)(a.Ay,{container:!0,rowSpacing:4.5,columnSpacing:2.75,children:[(0,f.jsx)(a.Ay,{item:!0,xs:12,sx:{mb:-2.25},children:(0,f.jsxs)(a.Ay,{container:!0,alignItems:"center",justifyContent:"space-between",children:[(0,f.jsx)(a.Ay,{item:!0,xs:6,children:(0,f.jsx)(l.A,{variant:"h5",children:"Chat Window Design"})}),(0,f.jsxs)(a.Ay,{item:!0,xs:6,container:!0,justifyContent:"flex-end",children:[(0,f.jsx)(P.A,{children:(0,f.jsx)(W.A,{isLoading:m,disabled:m,variant:"contained",color:"success",size:"large",onClick:()=>b(!0),children:"Deploy Bot"})}),(0,f.jsx)(D.A,{openPopUpDialog:m,setPopUpDialog:b,title:"Add Bot Details",children:(0,f.jsx)(_.A,{setIsDeployBot:b,botId:x,organizationId:v})})]})]})}),(0,f.jsx)(a.Ay,{item:!0,xs:12,sm:12,md:12,lg:8,children:(0,f.jsx)(pe,{onChange:u})}),(0,f.jsxs)(a.Ay,{item:!0,xs:12,sm:12,md:12,lg:4,children:[(0,f.jsx)(A,{botDetails:p,botDesign:c,startupFlow:h,autoLaunch:null===p||void 0===p||null===(e=p.botDesign)||void 0===e?void 0:e.autoLaunch,recipientId:Pe(),onReceiveChatResponse:e=>(0,U.NC)(e.organization),onCallback:ze,optionsRenderer:e=>{const{role:t,type:o,passedDocIds:n,searchQuery:r}=e||{};if("assistant"===t&&"text"===o&&(null!==n&&void 0!==n&&n.length||r))return(0,f.jsx)("span",{className:"show-icon",onClick:()=>y(e),children:(0,f.jsx)(Ie.A,{})})}}),(0,f.jsx)(D.A,{openPopUpDialog:s,setPopUpDialog:d,title:"View and update Knowledge base",children:t&&(0,f.jsx)(ke.A,{message:t,onClose:()=>t(null),isSuperUser:j})})]}),(0,f.jsx)(a.Ay,{item:!0,md:8,sx:{display:{sm:"none",md:"block",lg:"none"}}})]})};function ze(e,t){if("set-visitor-id"===e){const{recipientId:e}=t||{};e&&We(e)}}const Te="lp-vid",Ue="permanent-app-id";function Pe(){try{let e=localStorage.getItem(Te);return e||(e=localStorage.getItem(Ue),e&&(We(e),localStorage.removeItem(Ue))),e}catch(e){console.error("Unable to use browser cache",e)}}function We(e){try{localStorage.setItem(Te,e)}catch(t){console.error("Unable to use browser cache",t)}}},11172:(e,t,o)=>{o.d(t,{A:()=>b});o(9950);var n=o(61467),r=o(29714),i=o(60899),a=o(93230),l=o(3788),s=o(2660),d=o(24516),c=o(32829),u=o(93383),h=o(21788),g=o(30334),x=o(33340),p=o(98415),m=o(44414);const b=function(e){const{setIsDeployBot:t,botId:o,organizationId:b}=e,v=(0,x.nc)((e=>e.botsList)).find((e=>e._id===o)),j=null===v||void 0===v?void 0:v.botDetailsForVerification,f=(0,x.nc)((e=>e.isSuperUser)),y={integrationUrl:(null===j||void 0===j?void 0:j.integrationUrl)||""},C=async()=>{const e=y.integrationUrl;try{if(e||""!==e.trim()){await(0,p.yo)(o,{verificationStatus:!0})?(0,h.i)(!0,"The bot verified successfully","success"):(0,h.i)(!0,"Not able to verify the bot. Try after sometime!","error")}else(0,h.i)(!0,"Integration Url is mandatory for bot verification","error")}catch(t){(0,h.i)(!0,"Not able to verify the bot. Try after sometime!","error")}};return(0,m.jsx)(n.l1,{initialValues:y,enableReinitialize:!0,validationSchema:r.Ik().shape({integrationUrl:r.Yj().url("Enter valid url!").max(255).required("Integration Url is required")}),onSubmit:async(e,n)=>{let{setErrors:r,setStatus:i,setSubmitting:a}=n;const l={botDetailsForVerification:{...e}};try{a(!0),await(0,g.pn)(l,b,o),i({success:!0}),t(!1),(0,h.i)(!0,"The bot deployed successfully!","success")}catch(s){i({success:!1}),r({submit:s.message}),a(!1),(0,h.i)(!0,"Not able to deploy the bot. Try after sometime!","error")}},children:e=>{let{errors:t,handleBlur:o,handleChange:n,handleSubmit:r,isSubmitting:h,touched:g,values:x}=e;return(0,m.jsx)("form",{onSubmit:r,children:(0,m.jsxs)(i.Ay,{container:!0,spacing:1,children:[(0,m.jsx)(i.Ay,{item:!0,xs:12,md:12,children:(0,m.jsxs)(a.A,{spacing:1,children:[(0,m.jsx)(l.A,{htmlFor:"integrationUrl",children:"*Integration Url"}),(0,m.jsx)(s.A,{id:"integrationUrl",type:"integrationUrl",value:x.integrationUrl,name:"integrationUrl",autoComplete:"off",onBlur:o,onChange:n,fullWidth:!0,error:Boolean(g.integrationUrl&&t.integrationUrl)}),g.integrationUrl&&t.integrationUrl&&(0,m.jsx)(d.A,{error:!0,id:"helper-text-integrationUrl",children:t.integrationUrl})]})}),(0,m.jsxs)(i.Ay,{container:!0,spacing:2,justifyContent:"flex-end",sx:{mt:1},children:[f&&(0,m.jsx)(i.Ay,{item:!0,children:(0,m.jsx)(c.A,{children:(0,m.jsx)(u.A,{isLoading:h,disabled:h,color:"primary",size:"large",type:"button",variant:"contained",id:"deployBotVerify",onClick:C,children:"Verify"})})}),(0,m.jsx)(i.Ay,{item:!0,children:(0,m.jsx)(c.A,{children:(0,m.jsx)(u.A,{isLoading:h,disabled:h,color:"primary",size:"large",type:"submit",variant:"contained",id:"deployBotSubmit",children:"Submit"})})})]})]})})}})}},98415:(e,t,o)=>{o.d(t,{Ci:()=>u,I4:()=>c,TF:()=>s,gI:()=>a,gR:()=>g,jo:()=>d,rv:()=>x,so:()=>h,yo:()=>l});var n=o(8478),r=o(33340),i=o(32026);async function a(e){const{organization:{websiteUrl:t,_id:o}}=r.nc.getState(),i={organizationId:o,websiteUrl:t,botName:e,botDesign:{visitorMessageLogo:{name:"",url:""},botMessageLogo:{name:"",url:""},botChatButton:{name:"",url:""},botLogo:{name:"",url:""},backgroundColor:"#e7a654",textColor:"#ffffff",dimensions:{heightInPixel:"500px",heightInPercent:"70%",widthInPixel:"350px",widthInPercent:"25%"},botLogoDimensions:{heightInPixel:"30px",heightInPercent:"100%",widthInPixel:"30px",widthInPercent:"100%"}}};p(await n.bE(`/bot/${o}`,i),!0)}async function l(e,t,o){const{organizationId:i}=r.nc.getState();if(!i||!e)throw new Error("Bot details not found");const a=await n.yJ(`/bot/${i}/${e}`,t);return p(a,o),a}async function s(e){const{organizationId:t,selectedBotId:o}=r.nc.getState();if(!t||!e)throw new Error("Bot details not found");const{deleted:i}=await n.TF(`/bot/${t}/${e}`);if(i){let{botsMap:e,botsList:t}=r.nc.getState();e={...e},t=[...t],delete e[i];const n=t.findIndex((e=>e._id===i));n>=0&&t.splice(n,1);const l={botsMap:e,botsList:t};var a;if(o===i)l.selectedBotId=(null===(a=t[0])||void 0===a?void 0:a._id)||null;r.nc.setState(l)}return!!i}function d(e,t){let{botDesign:o}=r.nc.getState();return o={...o,...t},l(e,{botDesign:o})}async function c(e,t){const{organizationId:o,selectedBotId:i}=r.nc.getState(),a=new FormData;a.append("file",t);const l=await n.bE(`/bot/${o}/${i}/update-logo/${e}`,a);return x(i,l),l[`botDesign.${e}`]}async function u(e){const{organizationId:t,selectedBotId:o}=r.nc.getState(),i=await n.TF(`/bot/${t}/${o}/update-logo/${e}`);return x(o,i),i[`botDesign.${e}`]}function h(e,t){return l(e,{botName:t})}function g(e,t){let{botSettings:o={}}=r.nc.getState();return o={...o,...t},l(e,{botSettings:o})}function x(e,t){const{botsMap:o}=r.nc.getState(),n=o[e];if(!n)return;p(Object.keys(t).reduce(((e,o)=>(0,i.G6)(e,o,t[o])),n))}function p(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const o=e._id;let{botsMap:n,botsList:i}=r.nc.getState();n={...n,[o]:e},i=[...i];const a=i.findIndex((e=>e._id===o));a>=0?i[a]=e:i.push(e);const l={botsMap:n,botsList:i};t&&(l.selectedBotId=o),r.nc.setState(l)}},41507:(e,t,o)=>{o.d(t,{Ds:()=>s,L_:()=>a,NC:()=>l,YS:()=>i,cw:()=>c,qb:()=>d});var n=o(8478),r=o(33340);async function i(e,t){const o=await async function(){const e=r.nc.getState();let{organizationList:t,organizationId:o,organization:i}=e;if(!e.isSuperUser||Array.isArray(t))return;if(t=await n.bE("/organization/list"),t.length)if(o=o||sessionStorage.getItem("orgId"),o){if(!i){var a;i=null===(a=t)||void 0===a?void 0:a.filter((e=>e._id===o))[0]}}else{const e=t[0];o=e._id,i=e}return r.nc.setState({organizationList:t,organizationId:o,organization:i}),!0}(),{organizationId:i}=r.nc.getState();return e?e!==i&&r.nc.setState({organizationId:e}):e=i,!e||(o||await async function(e){const t=await n.bE("/organization/get-organization-by-id",{organizationId:e});r.nc.setState({organization:t})}(e),await s(e,t),!0)}async function a(e,t){t||(t=r.nc.getState().organizationId);const o=await n.yJ(`/organization/${t}`,e);r.nc.setState((e=>{const{organizationList:n,organizationId:r,organization:i}=e,a={};return r===t&&(a.organization={...i,...o}),n&&(a.organizationList=n.map((e=>e._id===t?{...e,...o}:e))),a}))}function l(e){if(!e||"object"!==typeof e)return;let{organization:t}=r.nc.getState();t&&(t={...t,...e},r.nc.setState({organization:t}))}async function s(e,t){var o;const i=await n.Jt(`/bot/${e}/list`),a=t||(null===(o=i[0])||void 0===o?void 0:o._id),l=i.reduce(((e,t)=>(e[t._id]=t,e)),{});return r.nc.setState({organizationId:e,botsList:i,botsMap:l,selectedBotId:a}),a}function d(e){r.nc.setState({selectedBotId:e})}async function c(){const e=await n.Jt("/organization/invoice/list");r.nc.setState({organizationsInvoiceList:e})}},30334:(e,t,o)=>{o.d(t,{Ei:()=>c,KM:()=>l,MD:()=>s,pn:()=>u,qt:()=>d});var n=o(8478),r=o(33340),i=o(77382),a=o(98415);async function l(e,t,o){const r=await n.bE(`/bot/${o}/${t}/add-training-media`,e);(0,a.rv)(t,{trainingMedia:r.trainingMedia})}async function s(e){const{organizationId:t,selectedBotId:o}=r.nc.getState(),i=new FormData;i.append("file",e);try{const e=await n.bE(`/bot/${t}/${o}/add-training-media`,i);(0,a.rv)(o,{trainingMedia:e.trainingMedia})}catch(l){throw new Error("File upload failed. Please try again.",l)}}async function d(e,t,o){const r=await n.bE(`/bot/${o}/${t}/delete-training-media-document`,e);(0,a.rv)(t,{trainingMedia:r.trainingDocuments})}async function c(e,t){const o=await n.bE(`/bot/${t}/${e}/knowledge-base/train`);return r.nc.setState((t=>{const o={...t.kbDocs||{}};return delete o[e],{kbDocs:o}})),(0,i.bZ)().catch((e=>console.error("Error fetching Knowledge base content:",e))),o}async function u(e,t,o){const r=await n.bE(`/bot/${t}/${o}/add-bot-tax-details`,e),{_id:i,botDetailsForVerification:l}=r;return(0,a.rv)(i,{botDetailsForVerification:l}),l}}}]);