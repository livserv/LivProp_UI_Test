"use strict";(self.webpackChunklib_prop_ui=self.webpackChunklib_prop_ui||[]).push([[2107],{82921:(t,n,e)=>{e.r(n),e.d(n,{default:()=>u});var c=e(9950),o=e(28429),a=e(32026),i=e(8478),s=e(15820),r=e(78023),d=e(44414);const u=function(){const{organizationId:t,botId:n,recipientId:e,chatId:u}=(0,o.g)(),[_,l]=c.useState();return c.useEffect((()=>{i.Jt("/bot/".concat(t,"/").concat(n,"/chat/history/").concat(e,"/").concat(u,"?includeBot=1")).then((t=>{var n;const e=(0,a.Yq)(null===(n=t.messages[0])||void 0===n?void 0:n.createdAt);t.botDesign=(0,r.Y)(t.botDesign,{window:{width:"600px",height:"calc(100vh - 120px)"},header:{titleText:e+" (".concat(t.titleText,")")}}),l(t)}),(t=>{console.error("Unable to load chat conversations:",t)}))}),[t,n,e,u]),_?(0,d.jsx)("div",{className:"conversation-history",children:(0,d.jsx)(s.A,{botDesign:_.botDesign,messages:_.messages,showTime:!0,disabledMessage:!0})}):(0,d.jsx)("div",{children:"Loading... Please wait..."})}},8478:(t,n,e)=>{e.d(n,{Jt:()=>a,Ne:()=>_,TF:()=>r,bE:()=>i,yJ:()=>s});var c=e(32026),o=e(44364);async function a(t,n){return d("GET",t,n,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}async function i(t,n){return d("POST",t,n,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}async function s(t,n){return d("PUT",t,n,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}async function r(t,n){return d("DELETE",t,n,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}async function d(t,n,e){let{headers:c,noAuth:o,...a}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const i="POST"===t||"PUT"===t||"DELETE"===t;n=_(n,i?void 0:e);const s=e instanceof FormData;if(s||(e=e&&"object"===typeof e&&i?JSON.stringify(e):void 0),c||(c={}),s||(c["Content-Type"]="application/json"),c.Accept="application/json",!1!==o){const t=sessionStorage.getItem("token");t&&(c.Authorization="Bearer ".concat(t))}try{const o=await fetch(n,{...a,headers:c,body:e,method:t}),i=await o.json();if(o.ok){const{data:t,...n}=i;return delete n.status,t&&!Object.keys(n).length?t:i}throw i.message?new Error(i.message):i}catch(d){var r;throw console.error("Error calling API: ",d),null!==(r=d.message)&&void 0!==r&&r.includes("fetch")?new Error("Unable to reach server. Please check your network connectivity and try again."):new Error(d.message)}}const u=(0,c.s8)(o.jn,"/");function _(t,n){if(!t)return t;const e=n&&Object.keys(n);if(null!==e&&void 0!==e&&e.length){const c=e.reduce(((t,e)=>{let c=n[e];return null===c||void 0===c?t:(c="".concat(e,"=").concat(encodeURIComponent(c)),t?"".concat(t,"&").concat(c):c)}),"");c&&(t="".concat(t).concat(t.includes("?")?"&":"?").concat(c))}return t.startsWith("https://")?t:"".concat(u).concat(t)}},32026:(t,n,e)=>{function c(t,n){return t.replace(new RegExp("".concat(o(n),"+$")),"")}function o(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function a(t){const n=new Date(t),e=n.getDate(),c=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][n.getMonth()],o=n.getFullYear();return"".concat(c," ").concat(e,", ").concat(o)}function i(t,n,e){if(!n&&!t)return e;t=t||{};const c=Array.isArray(t)?[...t]:{...t};if(n.includes(".")){const o=n.indexOf("."),a=n.substring(0,o),s=n.substring(o+1);c[a]=i(t[a],s,e)}else c[n]=e;return c}function s(t,n){return btoa("".concat(t,"_").concat(n,"_whatsapp_int"))}function r(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:12;const n="abcdefghijklmnopqrstuvwxyz0123456789";let e="";for(let c=0;c<t;c++)e+=n.charAt(Math.floor(36*Math.random()));return e}function d(t,n,e){if(!n&&!t)return e;t=t||{};const c=Array.isArray(t)?[...t]:{...t};if(n.includes(".")){const o=n.indexOf("."),a=n.substring(0,o),i=n.substring(o+1);c[a]=d(t[a],i,e)}else c[n]=e;return c}e.d(n,{G6:()=>i,OX:()=>r,Yq:()=>a,do:()=>d,qW:()=>s,s8:()=>c})},44364:(t,n,e)=>{e.d(n,{DX:()=>s,Og:()=>a,jn:()=>c,pA:()=>i,pR:()=>o});const c="https://devbackend.livhousing.com",o="c17b949cf58c45cae47ce1cc65efc8240f77a2a69ca09ad4c4208852",a={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_IP_DATA_API_KEY:"c17b949cf58c45cae47ce1cc65efc8240f77a2a69ca09ad4c4208852",REACT_APP_VERSION:"1",REACT_APP_BACKEND_URL:"https://devbackend.livhousing.com"}.TRAINING_MEDIA_MAXSIZE,i={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_IP_DATA_API_KEY:"c17b949cf58c45cae47ce1cc65efc8240f77a2a69ca09ad4c4208852",REACT_APP_VERSION:"1",REACT_APP_BACKEND_URL:"https://devbackend.livhousing.com"}.CONVERSATION_MEDIA_MAXSIZE,s={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_IP_DATA_API_KEY:"c17b949cf58c45cae47ce1cc65efc8240f77a2a69ca09ad4c4208852",REACT_APP_VERSION:"1",REACT_APP_BACKEND_URL:"https://devbackend.livhousing.com"}.REACT_APP_NGROK_BACKEND_URL||"https://devbackend.livhousing.com"}}]);